/*
# Checkpoint
Nassinger 2023:
I deobfuscated this code
and then I edited it to make it work.
This is not the only checkpoint.
*/

/*
# Checkpoint
Fallden4 2025:
I deobfuscated it more and added some more features.
Also opened up the repo
*/
function e() {
    var t = [" of time (", "outlineCol", "problem so", "JOINT", "CLICK_IOS_", "Knee1", "reload", "total", "UPDATE_COP", "deflate", "security_e", "debug draw", "nCharsText", "errorText", "drawRounde", "Text", "houldn't e", "muteBtn", "_useCullin", "nto it.", "cos", "timeSecond", "copterMC", "non-refspr", "ing or dec", "frames", "counter", "rate_level", "ng these p", "slower", "Screen", "frontDongl", "crackerSma", "ls?id=com.", "cter", "rate5", "2star", "_date_feat", "startListS", "sin", "fadeOut", "342695qgAeWd", "bells", "reatly red", "mainRearMC", "browser", "visible", "TO_FAVORIT", "jaw2", "NONE", "TRIGGER TY", "flames", "chairLeg1", "eBounds", "Press", "getPoolSiz", "lor", "nitude", " be lost<b", "helmetShap", "' at any t", "p/happy-wh", "Xtime3Sbox", "help windo", "crateRight", "neckVerteb", "slow their", "ing it in ", "_dom_input", "prng", "toString", "__esModule", "Building2R", "paths", "face.com/", "createSpec", "contactLis", "maxLimit", "changearmd", "eRailJoint", "lower angl", "headSmashL", "ength", "F13", "_Slider", "lastSessio", "hCheck", "upperLeg2S", "view", "contactFro", "updateCont", " levels by", "toArray", "muted", "shape tool", "writeObjec", "cartBottom", "getMouseCl", "MovieClip", "wSnap", "stem1_", "spaceKeyON", "hipSnapLim", "answerchos", "levelid", "MAIN_MENU", "accurateMc", "MPLETE", "5. Trigger", "pHandler", "omplish al", "triggerAct", "_Xtime2", "foot1MC", "wheelSound", "</b>", "Check", "The sound ", "od, broken", "upperLeg1M", "Generator ", " by select", "upperLeg2B", "or speed", "tokenFound", "e set bloo", "rear_", "ides with ", "pendent", "nmd", "then", "exception", "ckness", " use this ", "dense obje", "ADVANCED", "epeated in", "turbine", "evel...", "beginSearc", "Not Yet!", "rateone", "hatSmashLi", "USER", "MotorSpeed", "eatActivat", "readUTFByt", "cords", "'/>", "Commas", "teractive ", "reak2", "tmp", "ptSprite", "MENU_BUSY", " like the ", ' e="1"/>', "hatBody", "startTime", "Texture", "ART_LIMIT_", "values", "GOTO_REPLA", "_actionInd", "set this i", "Login or r", "totalMass", "levelCompl", "stop", "verticalOf", "_group", "chair1Shap", "strapChest", " (2)", "linkText", "_vehicleCo", "INPUT", "archValueC", "bject", "authorSpri", "slide", "IsMotorEna", " - ", "drawArms", "ggerIndex", "arrowGuns", "s.*, Use E", "u notice a", "effectivel", "ompleteBin", "playlevel", "BigArrow", "@pc", "add to fav", "Damnit", "to 0).<br>", "this must ", "levelOverW", "lay...", "lvs", "_tooManySh", "triggerStr", "atob", "featured", "ital", "elbow2Angl", "CHARACTER_", "m_manifold", "level_sear", "lowerBound", "mc_Charact", "y again", "index", "currentToo", "mc_Options", "openSaveRe", "PogoFrameS", "eractive l", "resetTeste", "steners", "openCustom", "ssionConte", "bdColor", "yle", "motorSpeed", "checkZeroJ", "e. Non-vec", "cs will ap", "ITEM_SELEC", "[a@4]+[_\\W", "ile", "upperBound", "lection_pl", "charAt", "' ox='", "[ZQzFegHLR", "tes", "ents", "kneeBreak1", "get_level.", "_shapeCoun", "ID is inva", "_inaccurat", "CREDITS", "currentZoo", "trigger-bo", "Smashed", "2Joints", "updatecopi", "font size", "addFlags", "scroll-bar", "groupIndex", "getLevelsF", "addListene", "mashLimit", "kBurstPoin", "singleActi", "able", " saved suc", "baseVert", "terPositio", "useDebugge", "e original", "bladeImpac", "the class ", "createBloo", "erBind", "Caps Lock", "removeMove", "t your lev", "GOTO_OPTIO", "<groups></", "playData", "_vehicleAt", " is at 100", "me art obj", "hideArmsTo", "footSmash1", "rate2", "MOVE_TO", "saveReplay", "loadLocal", "votefour", "erIndex", "fpsText", "handleAnch", "GetJointSp", "minNameCha", "sidePoint", "ing in, th", "bbing", "van_glass_", "promptSpri", "tionary", "read", "completeBy", "Controls t", "created", "canvasHold", "levelDataL", "s exactly ", "GetJointLi", "undefined", "seToRail", "d_back_but", "meResultHa", "renderedLe", "lungePoseR", "handlePosi", "displayNam", "elerating ", "ates", "nCopter", " you don't", "IVE", "tokenType", "_shiftActi", "time_locko", "disabledIn", "optionsBtn", "checkAdd2B", "createStat", "joint1", "Invalid de", ". Press es", "hem to you", "to 0.", "worldBound", "VALUE_CHAN", "importable", "pleteHandl", "ris", "brokenCopt", "old", "inputValue", "VIEW_REPLA", "prev", "cle in you", "Complete", "LEVEL_BROW", "raDefaultC", "Buffer", "o recently", "levelRatin", "BComplete", "BikeTireSm", "-_ ]*c[-_ ", "expandKey", "Culling", "leg1Shape", "Container", "eye2", "ke away fr", "terval unt", "hideArms", "alertBroke", "arm2BloodF", "shapes lef", "Code", "d[i1!]+ck", "arrowguns ", "forceDirty", "front2", "currSpeed", "writeDate", "rength", "Joint", "oaded", "tivated", "upperArm3", "listFavori", "support an", "SSED", "pect some ", " by only t", "wheelMaxSp", "lay not fo", "_levelVers", "featuredLi", "offSet", "artUsed", "t catch or", "ages", "ry again.", " with most", "checkLegsB", "not\nwhile ", "removeLast", "GetAngular", "better.", "viewsText", "m_userData", "Invalid ob", "forwardAng", " with join", "forkMC", "TireHit1", "hat abuses", "bevelFilte", "lastSavedD", "bodiesToRe", "pointerup", "PPY WHEELS", "ith nothin", "d in the o", "downKeyON", "best level", "ly with fi", "ADD", "GOTO_MAIN_", "ill treat ", "@bg", "activeXLim", "_disableKe", "shapesUsed", "ejectImpul", "uploadGrap", "gearFoot2", "get_combin", "an IV must", "listHeader", "mcName", "gravityInc", "wheelCover", "title", "loadCharac", "ratingsele", "labelText", "hed", "addEventLi", "initialise", "tialised -", "Shape", "standShape", "seatShape1", "_selected", "e seen at ", "_target", "level_reco", "impulse y ", "ctrlPresse", "mc_Customi", "id=", "level_rule", "play...", "_tempCount", "holdJoint", "BikeLoop2", "ChainRef", "ontRailBod", "flying obj", "sliding jo", "MowerImpac", "d save it ", "Loaded", "me risky w", "ipboard", "newStar", "e.com", "click_goog", "GET", "CreateShap", "clickToCha", "pivotAngle", "mainHand1J", "once on sc", "' v='", "owser. Dis", "' b='", "eye2RangeX", "MIN_FIRE_T", "mouse help", "localAncho", "_backDropI", "copterSmas", "menuCenter", "randomVoca", "ill show t", "playButton", "seatVert", "aces", "seatBody", "maxRating", "COPY_LEVEL", "createWorl", "SAVE_NEW", "LEVEL_SEAR", "_spaceActi", "get", "nting to t", "repeat int", "_completed", "Target", "GameUI", "unmute", "_startY", "author_sea", "standBody", "@tq", "maxSpinAV", "up. The on", "shiftKey", "publish_le", "SetAsOrien", "createSear", "cancelButt", ". I've bee", "byteArr", "otors set ", "isMac", "ckRailBody", "oad", "__mc", "shadowFilt", "clearBefor", "ip_trackin", "delete", "XQHYHVYXVs", "ed.", "' method", "userVehicl", "ctResult", "pinButton", "broken", " set motor", "resolve", "CUSTOMIZE_", "rating", "sfxDiction", "magnetJoin", "PERSIST", "leftPresse", "@b2", "Set", "scrollSpee", "ers", "shockMC", "t run", "STATE_CHAN", "plays...", "setSpin", "shiftPress", "th the tri", "a-z A-Z 0-", "ent withou", "FLAG_REPLA", "readUInt16", "leftWalkPo", "hitTestPoi", "load_level", "windowX", "set to non", "Browser", "contactImp", "writeUInt2", "frameFoot2", "top", "[XvIHnRUWU", "Sync", "disableMes", "from the l", "elbow1Angl", " and will ", "getIV4d", "thresholdF", "crackers", "fixed turr", "n[a4@]+k+[", "leg2Contac", "app_error", "_upperLimi", "convertChi", "noLean", "maxArt", "save", "replayProg", "increasedF", "_body1", "hitBox", "ntinueDraw", "readUTF", "k you.", "clearBound", "n degrade ", "ng left an", "g. (mostly", "atus", "MouseUpHan", "lowerArm2A", "brake", "meter was ", "headChunkM", "mowerFront", "endFill", "_currentPa", "em!", "startHandN", "omputer.", "maxSpeed", "frameRight", "etActionGr", "complete", " wait a mo", "<info v='", "Loading...", "g visual d", "ontactPoin", "' x='", "_highlight", "Sprite", "cartSmash", "authorId", "characters", "Read these", "ropeSpring", "verHandler", "_black", "edArray", "ark", "@vw", "LOAD LEVEL", "hain", " times", "_removeLis", "fireTime", "rge amount", "addRoundKe", " newer ver", "_useDebugD", " will hold", "leftKey", "https://to", "cloneAndDi", "lastAngle", "_levelItem", "responseTy", "handleVert", "contactMai", "ligamentSh", "brainRadiu", "ashLimit", "breakStrap", "edgePixels", "disableSav", "upperArm2B", "walk cycle", "You update", "new speed ", "tor from r", "displaySta", "Click on y", "SEN", "@lo", "newX", "_groupInde", "leMC", "menuButton", "frame2Bott", "brokenSlei", "_byteArray", "REDO", "ll2", "@ox", "F12", "sleighPelv", "delete sel", "wheelFoot1", "pageLength", "newY", "foot2", "]ss\\b", "wait a mom", "Elf1", "JetRef", "levelbrows", "importData", "safeSize", "IO_ERROR", "log", "actions", "br><br>(ju", "her key.", "jetSound", "Sorry, the", "author:", "TIJqwJYINL", "s pressed.", "wheel", "s cannot b", "ception", "your favor", " = ", "createShit", "r>7: Colli", "openSelect", "onHidden", "characterD", "DestroyJoi", "createBack", "wheelShape", "his value.", "level back", "break", "(3)", "evelMenu", "closeOptio", "tesComplet", "writeBoole", "ENU", "prevCOM", "stineJoint", "textSprite", "flippage", "level as t", "_CHANGE", "removeChil", "beginSessi", "timeFrames", "igger.", "RESTART_LE", "If enabled", "change", "ionsPinJoi", "midScreenP", "ctURL", "LT Std Bol", "zeControls", "delayDefau", "@@iterator", "createMenu", "_BY_AUTHOR", "max", " found in ", "blur", "rotInc2", "*()_+\\-='|", "chest", "kid", "restartLev", "seatPelvis", "versionTex", "This optio", "m: '", "registerCl", "' is not r", "ableLevelP", " may not a", "d a level ", "_instance", "lastPos", "ionaries", "iterator", "enable", ". Runs a b", "FEATURED_M", "GetInterpo", "rash", "checkAdd3", "frontWheel", "onary", "PinJoint", "voteComple", "chestAttac", "KyNYnMVusN", "his if you", "ggers can ", "other", "rot", "\\b[a@]+ss+", "et-26.png", "FLAG", "numRopeSeg", "TextBoxRef", "e the dire", " physics s", "frontShape", "mask", " Wohedally", "' v", "ionCode", "endianStr", "getBind", "getPrototy", "zrBK]", "_getShapeH", "ount", "GetJointAn", "er charact", "load", "_soundLoca", "dongleRevJ", " likely da", "vel...", "ease wait ", "author_id", "Import Lev", "ints and a", "resize", "timeSource", "deleteChec", "loadErrorH", "br>Users m", "optionsBut", "ime to tes", "_canvasHei", "ctions", "bigWheelMC", "breakSelec", "updateCanv", "rodMC", "BasketHit", "spokes", "maskBits", "in the fea", "ntResultHa", "renderer", "collides w", "fixedAngle", "createToke", ".box2d.org", "kneeJoint2", "End", "twostar", "iteration", "authorBtn", "_views", "lue.", "GetBody1", "targetBody", "backWheelJ", "hLimit", "st in case", "backWheelP", "Numpad .", "Velocity", "LEPLAY_LIN", " with your", "up there o", "PKCS#5:unp", "GetUpperLi", "bmd", "s once, th", "sprite", "@sh", "m_length", "The iterat", "ighResultH", "onRoll", "The angle ", "Heavy3", "bj: ", "setSelecti", "view level", "@ps", "action", "nuBind", "rray.lengt", "mits", "_midScreen", "elocityFro", "ejectDefau", "listScroll", "gger will ", "writeECMAA", "' b1='-1", "forceArmDr", "HW_SETTING", "cola", "threestar", "unes.apple", "e undone.", "savedSearc", "leanBackCo", "readFloat", "sfxArray", "Insert", "copter", "_userName", "ntScroll", "symbol", "swap", "shiftKeyOF", "m_mass", "what the f", "currPos", "instant", "drawBitmap", "Are you su", "lock joint", "irresponsi", " target no", " editor", "oneDongleM", "startPlace", "closeSaveM", "toXMLStrin", "closeWindo", "loadDataOf", "architectu", "startPos", "createJoin", "<sp t='", "levelID_", "me.editor.", "import_lev", "95b5c34869", "eye2RangeY", "SEARCH", "ision set ", "specialCla", "l of your ", "SetContact", "basic menu", "itemselect", " seconds", "boostMax", "SkiImpact2", "utf8", "ks a bit b", "spin", "' d='", ") until th", "mc_XButton", "mainHand2J", "tener", "createItem", "strapHeadJ", "showTotal", "r momentar", "releaseGri", "elbowBreak", "If checked", "g advertis", "retractSpe", "spineLengt", "n error. I", " votes)</b", "aracter se", "testlevel", "_bleedCoun", "_votes", "download", "mainSmashe", "ulseDict", "setLength", "irResultHa", "en attempt", "organizeLi", "ollides on", "renderreso", "erformance", "velButtonH", "ity", "Change", "shoulderBr", "mouseOverH", "trackEvent", "createPart", "BoostRef", "d[i1!]+ld[", "leProperty", "favoritesB", "rotatable", "replay_id", "f2vert", " unsupport", "ove", "drawRoundR", "gger", "helpToggle", "neck angle", "exit fulls", "ual liquid", "levelXML", "b2Distance", "r-tile-fil", "rollOverHa", "ta.", "alues", "functions", "upper angl", "level vict", "Numpad +", "edInt", "isReplay", "ache and r", "headSmashe", "eClips", "pelvisInte", "selectedCh", "e visible ", "stem", "arm2Joint", "plays", "ng replay.", "backRailBo", "createDyna", "ge?<br>Thi", "cartSmashe", "publicFill", "actionReco", "addUserJoi", "target?", "re was a S", "buildStage", "transferKe", "arg", "he user le", "sessionMen", "fork", "backDropIn", "volume", "medium", "newLowerAn", "hatMC", "crackerSha", "bladeX", "skiLoop", "worse than", "2, which i", "result", "headSmash1", "getChildIn", "OLATION", "r><br>2. T", "SET_QUALIT", "torque", "textureRes", "anslation", "mainSmash", " new windo", "helmetMC", "draw", "arm", "lowerLeg1M", "Your level", "resetJoint", "GOTO_CREDI", "terMenu", "click", "rval", "bottleType", "triggerDel", "sleighFoot", "dBurst", "of perform", "taljerkfac", "leg2Shape", "LengthSqua", "will brake", "lastIterat", "ctionChang", "t player", "llTab", "isteners", "playMenu", "REMOVE_FAV", "sleigh", "lib", "_sourceTri", "catchLoc", "cartSmashL", "t provide ", "hand", "lastLevelI", "_action", "valueIndex", "_soundEffe", "windowClos", "renderReso", "downPresse", "ept other ", "shapeImpal", "eed", "testLevel", "BEGIN_LOAD", "ropeMaxLen", "This Level", "upperArm3M", "style", "_canvasWid", "_menu", "n only be ", "windowY", "orce. Chan", "True", "ERROR", "StrapSnap2", "eshButton", " save your", "_user", " MANY GODD", "_sent", "createNumL", " shows all", "test.<br><", "Right Arro", "mCulling", "front3MC", "gle", "rFunction", "alright", "apply", "DELETE_LEV", "m_body2", "mc_restore", "writeDoubl", "_setY", "updatePixi", "art", "startRotat", "bottomLimi", "systemMute", "enableCame", "reverseSha", "Char9", "axisAngle", "regList", "coder", ". Please w", "vote", "@ll", "ions", "anytime", "el before ", "downKeyOFF", "tem", "elRailBody", "An invalid", "oldMan", "setCharTex", "mouseDownH", "level_brow", "ramesCheck", "invalid_ac", " rotates t", "selectable", "reignsBody", "checkAddVe", "sevLeg2Sha", "backBtn", "isPublic", "easeOut", " shoot", "gravityDis", "stab", "createBg", "_lastAngle", "_artCount", "Mourn", "will only ", ".<br><br>3", "mainFront", "goodrating", "ADD_TO_FAV", "tive", "heartMC", "4518360nkcctf", "h isn't a ", "m_shape1", "contactSte", "@@toPrimit", "thing!<br>", "HeliLoop", "string", "ything exc", "upperArm2", "pStates", "nything st", "IO error. ", "mSmashedMC", "_rating", "wake from ", "multipleIn", "nkhappy_wh", " Maybe try", "bladecover", " must save", "_pixiTextI", "wordWrap", "Pos", "dex", "deleteSelf", "gged, Than", "post", "tor", "textTool", "lay is sav", "egister fo", "rear4MC", "foot1", "sfxLookup", "seatLeg2", "spaceNullA", "each their", "organizeBu", "' is assoc", "evel from ", "frameSeatJ", "eak1", "ct3", "appButton", "stem3_", "ls.tjf?lev", "nhDzFhsWWR", "genericerr", "delete_fav", "MASS", "Elbow2", "o not will", "inGroup", "l menu.<br", "FULL_SCREE", "ing point ", "brokenFram", "skiShape", "sButton", "hare your ", "ted", "arrows", "special", "u. Here is", "sage", "t defined", "listItemAr", "You've alr", "groups>", " handle.<b", "w?<br><br>", "LINE_TO", "MIN_ACCEL_", "s, levels ", "s that you", "ill not ta", "is already", "ects may n", "pe of comp", "initialRan", "anning are", "logCulled", "rateif", "@sp", "shed", "buttonX", "ctArray", "smallWheel", "AY_LOADER", "runForward", " must load", "wheelConta", "GET_FAVORI", "new data i", "and fires.", "http://and", "l with the", "ree", "tly not pl", " glass pan", "Enabled", " OUT OF TY", "ocally)", "createSpar", "emove", "front1", "s than 200", "ction1", "dead", "MowerLoop", "writeUnsig", "levelTeste", "mouseClick", "_startX", "y the vehi", "pin joint", "accelSound", "@im", "ters.", "han 2. For", "midWheel1S", "stemWheelJ", "ecurity Er", "LINK", "beginArchi", "ifValidLoa", "ft: ", "IMPORT_LEV", "later.  Yo", "oodboy Dig", "bounceSpee", "Dictionary", "hosen", "ball speed", "locityThre", "(by defaul", "rearVert", "kness", "upperArm4M", "spikes", "' h='", "ADD_FAVORI", "box", "holdPositi", "tempGameSc", "PAGE_LEVEL", "GET_LEVELS", "TrashCanRe", "ame: '", "availHeigh", "Sorry, lev", "WINDOW_CLO", "again.", "playMenuBi", "to raise F", "addInteger", " name cont", " on this l", ".<br><br>6", "nameText", "gotoAndSto", "lision", "leg1Anchor", "_motor", "9rTVcog", "ains some ", "leRevJoint", "mc_refresh", "TYPE INDEX", "colaSmash", "speedX", "levelName", "enc", "filter", "_container", " if broken", "_pixiText", "globalToLo", "nedByte", "jawTween", "kneeBreak2", " whatever ", "head1MC", "stopSpewin", "tileSmoke", "ble mom", "(((.+)+)+)", "SegwayJump", "e jet will", "y not asso", "ike to del", "verPI", "DEF_HEAD_M", "' i='", "er the joi", "ggered by ", "dispatchEv", "setPropert", "drawBg", "resetMovie", "pin", "knee1Angle", "closeMainM", "autoSaveIn", "olutionAns", "dropStates", "shape.<br>", "ng like a ", "ceof this ", "listHeight", "edShort", "bounceTran", "@rg", "headAnchor", "until obje", " vehicle w", "re = ", "r>2. Locat", "reopenChar", "Color", "APES... DE", "enterUniqu", "SetV", "_triggerTy", " 1 but loo", "rFunc", "to rotate ", "drawPath", "e to chang", "Stopped", "stopSound", "publish", "M_FAVORITE", "_author_na", " the motor", "fset", "mera", " enable on", "r for free", "showing", "shapeHeigh", "rent float", "closePoser", "barWidth", "stener", "beginIntro", "this month", "addTexture", "legsFree", "POLYGON", "baseHeight", "ublic user", "int", "mark", "sMenu", "Checking t", "windowBind", "errorPromp", "' la ='", "decryptBlo", "MASH", "_levelXML", "rearShape", "tAccepted", "pathname", "prepare", "_id", " (5)", "undoHandle", "save_repla", "RSION", "nt and try", "yTIJqwJYIN", "ntDongle", "_upperAngl", "Copy Level", "saveNewBut", "helmetedCh", "rameters", "2Joint", "Check this", "exists", "featuredme", "_InvSbox", "favorites.", "layer", "Xtime2Sbox", "' ct='", "mass", ": '", "listSpacin", "Smash", "pelvisBody", "ListItem", "ayDataArra", "with joint", "mouseConta", "stopJets", "era", "ZoomIncrea", "createDict", "goto_repla", "ramesWarni", "voteText", "oints will", "mainSeatMC", "addVocals", "antiGrav", "clickTrigg", " port by G", "fire.com", "ter's vehi", "_reset", "cartShards", "leftBorder", "_torque", "ot be alte", "IED_VERTS", "g system. ", "The '", "y with a m", "foot2MC", "menuText", "join", "stepDistan", "f4vert", "m_upperTra", "sensor", "Properties", "A fixed ob", "TED", "gripJoint2", "acing", "tank", "hen signal", "bladeSmash", "not reachi", "int1", "(7)", "ress", "fullScreen", "bad_param", "n to edit ", "formatText", "rt this da", "e using th", "erkface.ga", "XtimeB", "tMC", "nRef", "_mc", "cle. It wi", "' s='", "sleighMC", "registerSh", "wg voice 1", "handleKeyD", "revent the", "faded", "attached t", "red_browse", "scale", "ntrolled b", "MCs", "accurate", "testComple", "maxParticl", "mouseY", "brokenBrow", "cancel", "fleshSound", "mc_LoadLev", "createPoin", "extra", "lue type: ", "a '", "openPrompt", "scaler", "_disableSp", "clearStage", "front4MC", " man", "_instant", "removeActi", "MOUSE_DOWN", "MetalRicoc", " occurred.", "ignoreWhen", "Hides trig", "TIMER", "f[a@]+gs", "PolygonSha", "ullscreen)", "with the f", "createDebu", "repeatFram", "invMixSubC", "max angle", "times, you", "wheelCurre", "ransparenc", "o determin", "rce", "joints", "resetCount", "removeSeco", "' o='", "superPretz", "polygon", "wheelPoseL", "r: ", "newUpperLi", "ait a mome", "createShap", "release on", "s rendered", "Popup", "place unti", "RESULT", "dictionary", "onShown", "jawMoving", "ejectCode", "brainMC", "you've spe", "he risk of", "nchor", "_currentIt", "replaySave", "rollOutTri", "upload you", "runBind", "ea]+rb[a@]", "faster", "currentlyC", "ash", "mc_level_b", " them. (so", "flagging r", "Bits32ToBy", "checkVehic", "numChildre", "abusivePro", "_blank", "bal", "Press a ke", "GetVertice", "run60fps", "You voted!", "Char8", "LEVEL_LOAD", "cur on a r", "openMainMe", "extraUpdat", "ay around ", "spineSprit", "a newer ve", "rollOutTar", "dy leaves ", "4star", "<br>2: Any", "drawShape", "ctrl actio", "ratefor", "writeRefer", "eNode", "cameraSeco", "pogostick ", "jaw3", "resetScale", "mouseX", "basketSmas", "persist", "artwork.  ", "repeatType", "nBrowserBe", "limit rang", "s. Please ", "replayMess", "FEATURED_B", "ease", "t currentl", "m_filter", "neckJoint", "readInt32", "mainBody", "setCurrent", "HeadSmash", "readInt16", "token type", "addTarget", "itemHeight", "paused", "webpackChu", "Pose", "innerCutou", ".  Clear c", "bl[o0]+wj[", "groupCanva", "addShape", "upPressed", "useAnchor", "aes", "extraFilte", "tint", "loginPromp", "load_compl", "dies", "eeds", "nd.", " / 5.00 (", "elfChestRe", "sleighSmas", "rely.<br><", "eller", "spinAccele", "spotlight2", "keyCodeNam", "The value:", "force is r", "wheelRadiu", "insertBack", "link count", "wheelJoint", "updateRefr", "buttonSpac", "RM_MASS", "shiftKeyON", "friction", "Interpolat", "groupDicti", "inMenu", "ETE", "</u>", "deactivate", "keepVector", "stopPropag", "onDictiona", "****", "maxMotorTo", "ontained i", "useFullScr", "chestVert", "Pelvis", "deletable", "IsLimitEna", " a slow PC", "he main ch", "type", "previousMe", "th it.  Co", "ren", "load. Relo", "_ ]*[o0]+f", "ts will sh", "stageWidth", "htly diffe", "favoriteId", "opacityTim", "getIV", "toFixed", "artLimitSt", "o 0).<br><", "ANSWER_CHO", "cterMenu", "pixiMovieC", "haracters", " that. Mis", "There appe", "pixiGraphi", "heelHandle", "grabbing", "left", "main", "handle", "backButton", "ct will be", "page", "fill", "gMode", "borderCove", "addLoaderL", "2 - meh", "https://pl", "BoneBreak", "latedLinea", "lowerLeg1A", "port any w", "setupLevel", "userData", "length", "debugText", "nected", "on until e", "contactAdd", "levelBrows", "+[_\\W]*n+[", "neMC", "cu+nt", " losing ad", "IME", "olutionLow", "m_physScal", "characterN", "ction of m", "ener", "numPoints", "content", "newbase_", "frameLeftS", "published ", "totalFrame", "rVelocity", "maskTransi", "y time to ", "invShiftRo", "onShow", "_trigger", "error", "that can b", "I'm disabl", "happened", "boolean", "Decelerate", "buildLevel", "showcased ", "leftArrow", "contactRes", "eaching 60", "olutionMed", "SetAsBox", "ites", "p[e3]+n[i1", "ketResultH", "beginComme", "localToGlo", "remove", "beginLoad", "htmlText", "EnableLimi", "e. Change ", "multipleKe", "importdata", "eristhenew", "PADDING", "mainMenuBu", "nOptionsMe", "dropMenu", "GetLocalPo", "nedShort", "midWheel2", "brokenSkiM", "firingRota", "mainLeg2", "encryptByt", "_setScaleX", "editorHide", " ever be s", "Victory", "framePelvi", "muzzleScal", "offset", "trigger ", "ChestSmash", "selectItem", "currentPos", "RevJoint", "lineAlpha", "stomachBlo", "aObject", "contains t", "seatLeg1", " interacti", "Game", "oundInstan", "getViewpor", "nReplayMen", "pair of at", "render", "_tooMuchAr", "hrough the", "ontactAdd", "newFrontWh", "checkScrol", "bytesAvail", "cannonDela", "bled", "art tool (", " must play", "Sbox", "S not defi", "rst but ru", "addTextBox", "me: ", "frame", "tion rate ", "listBg", " cannon mo", "<html>", "ugh, ok", "POST", "flagReplay", "nStem", "never move", "ctionRevJo", "closeLevel", "Numpad *", "XtvotaIHlj", "bloodpopup", "linkAngle", "an Mccumsk", "contactBla", "SAVE_COMPL", "his option", "Set as Veh", "cCharsText", "motorPris", "he blockSi", "profile.tj", "nts", "paint", "easeInOut", "und.", "wheelMulti", "votingStar", "bigWheel", "sausageAnc", "form", "mashedMC", "nextByte", "r Level...", "keyUpHandl", "selected", "leanBackDe", "Unknown or", "mainShape1", " dense obj", "jackText", "ike to cle", "getBlockSi", "boundingBo", "IO Error.", "drawCircle", "selection ", "appropriat", "Sounds", "endHandNav", "ollide wit", "tokenIcon", "Unknown va", "erything i", "m public f", "currentMen", "halfSpeedR", "BladeWeapo", "no replays", "endered on", "decayRate", "wheelBody", "forkShape", "ton", "Body", "TOOL_SELEC", "pushupPose", "ding", "te non-pub", "Medium", "7ab7657e55", "_levelID", "backdrop", "angle", "start deac", " the right", "haviour", "collision", "Copy", "SkiLoop", "loading le", "Resetting.", "EditorUI", "hiliter", "eplayMenuB", "upperLegAn", "threeQuart", "delegate", "lowerLeg2A", "tion", "sh[i!1y]+t", "iousListIt", "velocityCO", " take afte", ", the user", "off.", "menuMask", "__proto__", "rate1", "_hidden", ") it takes", "tickHolder", "archCheck", "author nam", "_browser", "author_nam", "pointerout", "eyes", "eforePhysi", "loadID", "backContac", "the gun to", "helmetOn", "removeTarg", "r, where y", "mainHand1", "<sh t='", "r, the two", "sourceObje", "pelvis", "he replay ", "polygonBut", "ol (8)", "body", "cart", "verticalVe", "pelvisAnch", "userLevelL", "drawnParti", "_setAngle", "s what hap", "checkKeySt", "isFavorite", "MagnetBuzz", "aracters.<", "d by the u", "Times", "railDistan", "setBlockSi", "YParticleL", "checkAdd1", "GlassBlood", "NumFrameDe", "loadLevels", "FLAG_LEVEL", "TRANSLATE", "Bank Gothi", "ject end s", "spotlight1", "updateScro", "SetMass", "tip", "abusiveTex", "pop", "buffer", "votefive", "openSaveMe", "s will fir", "triggerPla", "a replay t", "fillRect", "boostMeter", "archRollOv", "OLUTION", "replay_bro", "1Joints", "checkLegsF", "egistered.", "delayFrame", "UNMUTE", "CANCEL", "increase p", "system_err", "it slide, ", "object", "seekSpeed", "nerator]", "angleUnbou", "setAttribu", "runBackwar", "upperArm2S", "dropMenuSe", "createFilt", "Obj", "JointDef", "eVertIDs", "7bePFYl", "impulse x ", "everything", "flush", "scroll bg", "rear2MC", "writeInt8", "numFloors", "SetDebugDr", "ng 60 FPS.", "Handler", "tions", "nstance", "@b1", "elbow 2 an", "upperLeg4M", "oks the wo", "ly publish", "wMax", "tainer", "open", "pelvisMC", "getCentere", "featuredMe", "hics", "chairShape", "jawFinishe", "<specials>", "@id", "_backgroun", "ritten", "5 - superb", "SET_BLOOD", "roll", "ion specif", "-asset.png", "backShockB", "low", "setupMCs", "topVert", "ff if you ", "neck", "e characte", "m_xf", "ext", "nds", "registerLi", "]*k", "eueLT Std", "setPrototy", "ntroller", "Char12", "zKeyON", "layData", "fromArray", "DEF_UPPERA", "Building l", "1Joint", " if you'd ", "e angle (i", "remove fav", "action 1", "shoulder2B", " object wi", "setInputSt", "operty", "pptr", "interactio", "deflateSyn", "removeLoad", "timeRange", "ating = ", "PS cap to ", "the shape ", "hapes and ", "motorSound", "LOAD_COMPL", "endComment", "elbowJoint", "ready", "ay.google.", "DestroySha", "boostHolde", "be called ", "nction() ", "lights", "olorDroppe", "lowerArm1A", "com.totalj", "ars", "rangeY", "ite levels", "substitute", "joints.", "finallyLoc", "d joints r", "cartFoot2J", "unpause", "targetMask", "upperTrans", "JcshGyvQQZ", "totalHeigh", "s is the l", "of torque ", "spacing", "creen mode", "debugCheck", "lungePoseL", "copterAnch", "fMass", "files[]", "CopyInterp", "frameHand2", "authorName", "rotationCo", "disableKey", "wheelSpark", "e setting ", "Heli", "new x ", "canvasWidt", "><br>3. Tr", "ct2", " - full na", "goto_user_", "buildButto", "_keyCode", "ghMCs", "textWidth", "rPoint", "fer was en", " action", "effective ", "mashed", "@oy", "triggerDic", "removeFron", "link scale", "ld levels ", "spineBreak", "scaleInc2", "createDumm", "change cha", "GlassRef", " are not r", "actAdds", "specialCon", "Std-Md.css", "n set to t", "gripJoint1", "ggers", "gument", "angleRange", "link", "userName", "favorites", "areaSprite", "y is too l", "dDefaultCo", "paintVecto", "o the vehi", "lastItemIn", "centralBod", "private", "aded", "e this wit", "WSER", "brokenRear", "d until di", "set_qualit", "answer1Btn", "shockJoint", "removeKeyL", "le this if", "_repeatTyp", "selectPrev", "Count", "to add non", "operties", "beginTrigg", "press anot", " register ", "articles. ", "lowerArm1B", "numLabel", "ser.<br><b", "_screenBou", "height", "explodeSha", "els. If yo", "ints", "ionsTrigge", "Backspace", "The amount", "_limit", "_displacem", "writeShort", "AES", "exit", "ROTATE", "bind", "get_pub_by", "openReleas", "b[o0][o0]+", "undLoop", "zrBK", "ust use sh", "charText", " chars lef", "normal", "PREVIOUS_M", "FADE_VALUE", "duration ", "helmetVert", "foot2Body", "terResultH", "_nextPage", "expand", "/REPLAY", "acterMenuB", "rightKey", "elative to", "entZoom", "r resoluti", "smoke1", "characterI", "createLeve", "firstLoad", "scroller", "ratetwo", "apps/detai", "HwNzOnZYEy", "_window", "*()_+\\-=;'", "tart", "rearSmash", "abel", "closeChara", " contain s", "nd publish", "ionsNPC", "ligFilter", "must be be", "e.<br><br>", "ess", "l sound th", "clearHighl", "body not c", "tents cann", "addGoodboy", "encrypt", "rope lengt", "emitters", "using full", "eRender", "list updat", "olumns", "velIds", "remoteBrea", "arm 1 angl", "NineSliceP", "mc_levelli", "COORDINATE", "page_repla", "Max", "console", "dActions", "Center", "croll", "ody", "hatSmash", "This is th", 'able the "', "characterF", "ay only ra", "Stop doing", "attempted ", "3star", "grindShape", "shards", "1-4", "mer", "_faded", "front5", "htActions", "shapeClass", "replayCoun", " (useful f", "erty", "GENERIC", "addHandle", "tedGroups", "CLICK", "stance not", "Drag", "ADD_ENTRY", "ame: ", "dColor", "clearPress", "_next", "BikeLoop3", "2. Trigger", " level bro", "viewreplay", "s who migh", "armsForwar", "lation", "tweenVal", "createMovi", "onMenuBind", "jetMC", "contactMow", "helmetSmas", " 30 FPS. T", "get_record", "ointIsClos", "autoPatch", "removeBody", "sJointDef", "clarendon", "SignPostRe", "commentMas", "mowerLoop", "en trigger", "SCALE", "oneEightyO", "brokenMidd", "vehicleDic", "upperArm4", "week", "maxFPS", "addJoint", ">> Publish", " a large, ", "gText", "DEF_UPPERL", "re was a p", "uced when ", "flagging l", "ad: Invali", "shoulderJo", "Knee2", "zNullActio", "k as inten", "m_I", "_frameRate", "writeTyped", "again with", "d in your ", "sqrt", "Overwrite ", "me for you", "STATUS", "ahnkGyvQQZ", "lished lev", "toStringTa", "NUM_CHARAC", "charging", "AsyncItera", "otherShape", "mainPelvis", "eyInput", "createFlow", "remainder", "invMass", "try statem", "actionsToR", "CLICK_GOOG", "manently d", "Santa", "ion ", " a level i", "star", "scrollMaxS", "blood sett", "tep", "tBloodBurs", "createStra", "buttonDown", "rd<br><br>", "GetJointTr", "function", "RACTER", "eSensor", "Name", "imp limbs<", "Numpad 4", "muteButton", "vels...", "stemShape", " will now ", "eRevJoint", "ropePoints", "e to the t", "d right de", "standFoot2", "replaySele", "EnableMoto", "rtyObject", "customize_", "railJointY", "FUCK YOU j", "INVERT", "ligSprite", "ments", "polyCheste", "rc4", "lRange", "KEY_DOWN", "name", "zlib", "_joinable", "leaningStr", "upperArm1S", "now", "ingMode", "hor1", "ROR", "BLEED_OUT_", "nLocalStor", "resetPosit", "loop", ".totaljerk", "iceSelecte", "clearResul", "mouseMoveH", "_replayID", "midWheel1J", "introCompl", "LoadMenu", "ropeSpeed", "Rating", "santa", "elds", "I SAID TOO", "JUSTIFY", "composites", "eels/id648", "ually adju", "repeating ", "paintBlood", "1857264AGWwAR", "ned", "fixedRotat", "baseShape", "leveldatao", "wheelType", "with.<br><", " per day.", "windowHeig", "springDela", "UpdateInte", "vertsBroke", "SetUserDat", "GetMateria", "  Login or", "88c90728c6", "m_upperAng", "screenBoun", "publishCom", ". As state", "cacheAsBit", "play this ", "newUpperAn", "adPose", "SER", "PKCS#5::pa", "inaccurate", "SetMassFro", "organizeDr", "ertyObject", "createSpra", "ll look.<b", "savedTerm", "PressBind", "ndlerBind", "menuItems", "published", "verticalTr", " the axis ", "group", "lowerBody", "kunt", "currentDro", "j[e3]+rk[-", " in vector", "cartFoot1J", "Clarendon ", "colorTrans", "e logged i", "moveIncrem", "stead: ", "d when gra", "cancelPose", "lready int", "o these op", "fontSize", "MenuSelect", "showArrowI", "k of losin", "timerHandl", "show sign ", "_resolutio", "selectedLi", "parseValue", "flagLevel", "currMouseY", "slowGrav", "nge", "createDong", "SourceObje", "te levels.", "change opa", "getIV4e", "frameBody", ", this tri", "soundCheck", "checkAdd2", "w[o0]p", "first", "pVertIDs", "MulM", "artTool", "updateTarg", "green hill", "ials", "loadLevel", "n addition", "PaddleRef", "reak1", "opening", "NUM_POSES", "upperAngle", "legsOk", "fueltankSh", "lowerLeg2B", "upperLeg1S", "move", "Bitmap", "multiline", "dontShootP", "sed", "Ping", "_accelerat", "addArrow", "tureResolu", "hDzFhsWWRF", "VARIABLES", "sleighShar", "dArray", "r register", "_bgWidth", "joinable", "le with jo", "disable li", "urlVariabl", "getLocal", "tates", "r area.<br", "erMenu", "readInt", "fireJets", "0 - godawf", "featured =", "readDouble", "editor men", "lutionpopu", "delayVecto", "innerWidth", "cullingEna", "onerror", "ypressman.", "Set this t", "ion", "ists", "_by_author", "isReferenc", "ing", "Turret", " contained", "3: Any arr", " will play", "MOUSE_UP", "StemSnap", "ruining Ha", "casting yo", " editor an", "camUpper", "level and ", " exists", "checkReign", "processTab", "ves to the", "checkEndBi", "thigh1Bloo", "maxShapes", "isMobile", "readUInt29", "startX", "publicRati", "GetBody", "et of the ", "paintBodyV", "eye2LeftX", "CLEAR_STAG", "firingAllo", " above to ", "_hideArms", "que can pr", "n-player c", "_mainCanva", "_dead", "Limit", "uploaded:", " it in the", "indexOf", "Blood", "impulseX", "copyLevelB", "lButtonsUn", "edi", "Med", "loadComple", "wheelFoot2", "anchor", "inMenuBind", "start disa", "pressButto", "previousFr", "maxForce", "disableSpi", "ject encod", "LevelRectM", "t enable t", "author_id ", "comments", "gets", "setToHundr", "helicopter", "https://ww", "Character", "fadeTo", "ght", "lastIV", "_visual", "e3]+r", "groups", "weighted_r", "Refilter", "e this fai", "loodFlow", "erCover", "fore calli", "SAVE_LEVEL", "ose that d", "targetActi", "abusiveStr", "y.  Best p", "writeStrin", "triggerInd", "TempGameSc", "zPressedAc", "spacePress", "mainJoint", " determine", "Foot2", "Saving New", "addNewTarg", "dSprite", "kEnabled", "math, whic", "ArtShape", "b+s", "apparent l", "oader", "_session", "autoSaveTi", "{}.constru", "ects along", "switchCame", "eplayBrows", "unt", "horId", "wtdRatingT", "ad the gam", "encode", "ctrlNullAc", "ticle is d", "_contactLi", "layMenu", "jaw4", "V111", "_replayByt", "iner", "from", "LEVEL_REPL", "newReplayI", "testingMod", "highrating", "@@toString", "eMC", "hape limit", "_shape", "@ar", "contactCou", "_timeFrame", "trigger to", "msg", "ceil", "_body2", "beginBitma", "+\\b", "backWheelB", "version = ", "play", "_replay_lo", "eful when ", "ll1", "]*p[_\\W]*p", "SESSION", "TEXT", "particleTy", "b[i1!]+a*t", "mowerPelvi", "decryptByt", "iterator r", "_secondFoc", "focusin", "n to vote.", "stemChestJ", "deleteButt", "_keyedProp", "references", "head1Shape", "ted system", "rodBody", "_Rcon", "mouseEnabl", "descriptio", "handCursor", "createCDat", "peed", "soundChann", "flagButton", "targetAngl", "voiceSound", "d back to ", "he right.", "e1Bind", "ally good ", "scrollTab", "settings", "listenerEx", "Help", "MENU_IDLE", "vote1", "startAutho", ": collides", "browserBtn", "visual", "toolBar", " of losing", "our favori", "nOld", "leave it a", "MOUSE_OUT", "joints whe", "Numpad 9", "ROLL_OVER", "change lim", "lower", "'t move an", "url", "o alter a ", "uter it wa", "readonly", "\\ban[a@]l", "Remove", "_attribute", "YRxUomK;by", "oint", " if you do", "Hidden", "ctAdd", "sArray", "arrowsFiri", "front5MC", "toLowerCas", "m_contactL", "openLoadLe", "no levels ", "toolselect", "e sound.", "user_name ", "line. Runs", "chor", "io_error", "yMinSpeed", "play sound", "_force", "ratehigh", "l it is to", "BUTTON_PRE", "tFormat", "d for gett", "rollOutHan", "maxDimensi", "forceChar", "Heavy2", "etter<br><", "upToVehicl", "sult", "toolSelect", "handleMagn", "Creating l", "br><br>1: ", "ject doesn", "knee 1 ang", "startDeact", "evel", "contactFra", "writeMulti", "pixiToFlas", "_refSprite", "DATA", "toJSON", "checkAdd4B", "ects.", "substring", "_SMASH", "load your ", "upperLeg3M", "ached", "checkAdd1B", "An unknown", "cepted", "votes", "re you'd l", "img", "pointertap", "_triggerab", "' p='", "DEPTH", "_totalItem", "decelerate", "bused, so ", "speedRange", "strapsSpri", "seat_", "Byte", "pause", "argets att", "lue", "Reset Scal", "eContacts", "r's locati", "d, its con", "cannonPowe", "ll remain ", "showLoader", "_dying", "entLimits", "getCullBou", "levelDataO", "concat", "cloneAsGro", "Path", "Multiply", "icons", "ed until a", "openErrorP", "frameHand1", "writeUInt3", "joint", "decimals", "_character", "checkPose", "VELS", "speed", "get_featur", " | ", "shape isn'", "o scaling ", "sleighStem", "or somethi", "otor.", "characterL", "pow", "c[o0]ck", "d: length ", "forkVert", "onts/Helve", "update30fp", "prevPos", "copterLegS", "0-9\\-.", "newest", "history", "mSmashed", "key", "every", " before te", "s off. Wit", "' lo='", "troller", " is delete", "EXIT", "dFlow", "limit", "Invalid da", "numSpikes", "ore hittin", "helpCheck", "SPLACEMENT", "leanBackwa", "maskSprite", "ComputeAAB", "SelectChar", "ToiletRef", "andyText", "_lowerAngl", "chTerm", "uck is thi", "Trigger", "_typeIndex", "setNumLabe", "init", "VanRef", "checkStole", "sition", "SetLinearV", "loose). Jo", "y_browser", "edDelta", "closePromp", "get_cmb_by", "instance", "' a='", "racter", "IsStatic", "createRepl", "g this but", "transition", "vehicleHan", "abrupt", "<u><b>HELL", "publishCho", "setInterac", "abcd1234", "fixed", "redoHandle", "shapeList", "readShort", "dragging", "completed", " color", "load_repla", "All attach", "blurFilter", "SM export ", "reAttachin", "RRY!", "assets (wi", "iteButton", "xml", "End of buf", "GRIND_STAT", "increaseSp", "setShitUp", "ratev", "bloodSprit", "Saving Ove", "brokenVert", "set_level.", "ated due t", "on relativ", "mainSmashL", "MOUSE_OVER", "camLower", "brave", "ow quickly", "tabEnabled", "textBg", "there on t", "ale", "lowerArm1S", "kDongle", "saveOverLe", "actArray", "m_angularV", "bdIndex", "checkRemov", "Down Arrow", "success", "rateOfFire", "chair3Shap", "_name", "options", "Break Grou", "CarTire1", "arrowButto", "GO_MAIN_ME", "aNode", "Please tes", "restrict", "ORITES", "m_density", "ched the s", "the charac", " don't wan", "moveTo", "votes = ", "bloodSetti", "1star", "byteLength", "level.xml", "ovement.", "midX", "EG_MASS", "appLink", "eady voted", "You were l", "text in yo", "m_invMass", "rigger", "GENERIC_ER", "eArray", "812826aBjXYd", "oints", "ionDefault", "ction2Defa", "d several ", "ust be les", "resizeElem", "speedArray", "levelBody", "losed", "isGenerato", "steadySoun", "jetsFiring", "odFlow", "this hasn'", "ctrlKey", "startFadeB", "loadFeatur", "rightArrow", "velButtons", "typeArray", "removing l", "d levels.", "enu", "pSettings", "elbowLigam", "snowflakes", "<br>", "rear_1", "aste it in", "ike it bef", "Array", "spineAncho", "loadLevelB", "currentInd", "bladeLeftX", "sition.", "authorLeve", "latedAncho", "moped coup", "_Xtime2Sbo", "_leveldata", "Re-instant", "maxSize", "gered by l", "Bind", "kBurst", "trimVert", "refreshBut", "cameraMode", "ence", "happyWheel", "m_material", "tectureTes", "art.", "scaleInc1", "impulseMag", "behavior o", "jonText", "ski", "t, uncheck", "ayer", "upperArm2M", "nVars", "mc_SearchL", "^aeiou]+", "checkRevJo", "REPLAY_AND", "updatescro", "linkScale", "lected", "d. Only us", "or you sel", "_XtimeE", "reverse", "h collisio", "enableLimi", "backDrops", "ounter", "map", "debugOptio", "cullEditor", "checkForAb", "_currentPo", "openReplay", "magnetShap", "spriteDict", "backShockJ", "m_sprite", "_architect", "triggerFir", "traitRefer", "setupTextF", "werChosen", "incrementP", "default ch", "airLean", "pointerove", "levelLoade", "convertBac", "addReplayC", "AD_COMPLET", "d_play_but", "checkRepla", "fistPoseLe", "LEVEL", "ssociated ", " Level...", "mc_Feature", "magnetLoop", "dlerBind", "sIn", "_favorites", "redrawJoin", "BROWSE LEV", "ZabQzFeogH", "Box", "Chars", "transToLBC", "_repeatInt", "tive to ch", "' b2='-1", "gain.", "' y='", "loadType", "call", "setResolut", "ntact. In ", "importButt", "pageFlippe", " the trigg", "tor/trigge", "e than opa", "rating_", "chair", "bgHeight", "categoryBi", "ent", "Hip1", "IOErrorHan", "buttonSpri", "slowAfterE", "actResults", "_Xtime3Sbo", "minLineThi", "navigator", "apLimit", "tem will o", "lass list", "prisAccelS", " up or dow", "apeSound", "tankVert", "SetAngular", "view repla", "the muzzle", "selectNext", "topLimit", "int arms w", "loaderBW", "triggerabl", "fontFamily", "zeroFilter", "on is save", "is if you ", "pixiSprite", "ute", "currentAut", "add", "nResultHan", "kneeBreakL", "gleActivat", "are not re", "otor to re", "ciated wit", "aracter in", "Limits", "Char4", "election_v", "bodyList", "bodyRange", " slightly ", "name = ", "strap1Anch", "triggering", "iumCheck", "en 0 and 5", " care.", "removeRefS", "broken2Ver", "0-9", "Bold", "rget", "DELETE_COM", " votes)", "_keyByteAr", "SwishUp", "OPTIONS", "stance", "hipJoint2", "_prevPage", "' sp='", "m_vertexCo", "currentFra", "elf1", "fatal", " when the ", "removeSear", "fool!", "Light", "playsText", "groupID", "yes", "containsVa", "mc_session", "createVanS", "testButton", "leftLimit", "arrowFrame", "Out", "totalChara", "pixiText", "h other)<b", "scaleYCopy", "g body.<br", "ctionPrisJ", "shapeCount", "refTrigger", "validateTe", "disabled", "mash", "e_shapeBit", "rorHandler", "maxZoom", "&vr=", "nControlle", "overlapsEd", "wheelPoseR", "charge", "buildHitBo", "@vr", "sevLeg1Sha", "ldren", "finished", "tempText", "savedDropS", "smokeSprit", "e the bloo", "Numpad 1", "icShapes", "upKey", "icle", "rotInc1", "fixed angl", "angle ", "Foot1", "redrawTrig", "today", "0-9\\-", "upPressedA", "ew_star", "_importabl", "tileScale", "oi]+t", "shockBody", "text", "vertices", "PEARRAY RA", "addlevelto", "createWind", "standFoot1", "@bgc", "playSoundI", "cts", "seatShape", "Thud2", "@dc", "Holder", "front of t", "' v='t' sb", "frameSeatA", ".happywhee", "ints will ", "temp", "is coming ", "r><br>1) T", "h often (b", "lowerLeg2", "add_favori", "killTrigge", "ain menu?<", "impulse", "runCameraM", "downKey", "useDebug", "peOf", "target not", "clone", "_levelId", "_setX", "tal, so ex", "Arms", "REPLAY_BRO", "keyDisplay", "otherLevel", "MOUSE_MOVE", "backWheelM", "hes", "mWorldPoin", "checkJoint", "addedJoint", "shed, a le", "bgPress", "erListener", "intestineC", "flaggedLev", "r uint29.", "poseString", "m_iteratio", "labels", "trackingBo", "skyHeight", "red, so ma", "setTextIte", "transparen", "andler", "daughter", "crateLeft", "], found [", "off", "frozen in ", "e noticed.", "signPostTy", "searchType", "tokenField", " glass can", "nameMC", "renderHtml", "gameui-ass", "verticalSc", "vehicleCon", "tines", "not_logged", " shape wil", "e_log.tjf", "loaded", "trimWhites", " of time i", "own", "Copy your ", "killList", " attached ", "_propertie", "VOTE", "reference", "y you unti", "s like act", "w already ", "update", "hoverState", "ction", "ly everyth", "loadSessio", "checkVocal", "lBind", "_artUsed", "actionHand", "checkDistJ", "addTargetI", "ctively wi", "view_repla", "yUnbound", "' sh='", "arm 2 angl", "createElem", "<br><br>1.", "bitmap", "parseByteA", "another tr", "getKeyEntr", "WakeUp", "bloodBitma", "mainFrontM", "' c='", " with slig", "*****", "Resolution", "minChars", "lData", "Mute / Unm", "get_favori", "MITER", "\\b[a@]+ss[", "nEditor", "><br>Start", "overlapsCa", "collideCon", "exit to me", "saveButton", "ller", "oupsFor", "ShapeHit1", "mowerImpac", "fadeOutBin", "levelSearc", "endShape", "restartCou", "m_next", "editorBtn", " DOG!", "endGrab", "mainMC", "frameAncho", " super() h", "get_all", "accelTime", "mc_levelse", "ays) creat", "secondFocu", "updateText", " this fail", "m_maxLengt", "nHUD", "ionListPro", "toDataURL", "MineExplos", "Dongle", "chosenText", "tesButton", "searchText", "GetAngle", "motors to ", "decodeToBy", "drawRect", "br>3: Any ", "textButton", "writeFloat", "defined", "textBox", "characterM", "shape", "pes", "ily.", "mc_feature", "actResult", "hape", "ent2", "lowerTrans", "mouseUpHan", "UCK IS THI", "caption", "rod", " Error", "ced", "collideSel", "osen", "minCos", "_XtimeB", "e what wil", "lane", "@p0", "FPS during", "uprightAng", "strength", "spinalChor", "neckBreakL", "helmetBody", "ong.", "wheelLoop2", "et to 0).<", "ntly run t", "random-", "replayID", "er upon co", "currentlyI", "special in", "lDataArray", "levelSaved", "lowerAngle", "ing this).", "keyDownSes", "tag", "CTRL is pr", "fueltankBo", "eEject", "newBackWhe", " Level...<", "removeSlas", "foreground", "erhead<br>", "mowerShard", "filler", " happen", "Xtime2", "that", "Controls h", "tionChange", "wheelMC", "Your saved", "evel. Plea", "startGrab", "basketBody", " rests at ", "unning lik", "armsDownPo", "failure", "buildRefSh", "renderResS", "Shit", "levelIndex", "igger acti", "loader", "green_back", "illegal_ar", "alpha", "ed by any ", "el not fou", "currentBut", "you can no", "@sb", "seat", "ticaNeueLT", "clearanceS", "hipBreak2", "You are no", "headRange", "r1vert", "ctionGroup", "leftKeyOFF", "shoulderSn", "stemSmash", "' fr='", "e1MC", "Deleting L", "cted.", "triggers", "head1Body", "aching 60 ", "startY", "currentLev", "f[-_ ]*u+[", "hit", "lButtonsIn", "newLowerLi", "_collideSe", "padding", "replayid", "lDrag", "SHAPE_LIMI", "dataLoadCo", "_readOnly", "containsBa", "92px", "_tempMax", "updateProg", "layBrowser", "turretAngl", "goodvote", "blood look", "kRadius", "prepareFor", "handNav", "getTexture", "scrollComm", " new conta", "trace", "adjustSpot", "min", "rulesSprit", "userID", "enumerable", "many", "rrows", "set_blood", "change mot", "@pp", "scaleX", "election", "reAttach", "chestSmash", "d type ", "ExplorerRo", "receiveSes", "seatShape2", "rearVert4", "Constructi", "ttached jo", "ngle", "lowerArm1M", "s target?", "t been ini", "spatchEven", "mLocalPoin", "basketPelv", "debug_spri", "bdSelected", "perFrame", "flagComple", "XpGceyY.Pc", "shaftBody", "loadXMLMes", "frontRailB", "glowStep", "execComman", "pelvisChun", "OLLER", "l.  This w", "ADD_LEVEL_", "serAlertAc", "roller", "rate4", "Delete", "_tempFocus", "fourstar", "br>1: All ", "ropeSprite", "gDraw", "s connecte", "ched to th", "e triggere", "getOwner", "sionFromMa", '|?/,.<> "', "downInc", "Normalize", "isSleeping", "display", "_sprite", "andlerBind", "evel?", "ny other m", "ay publish", "screenMana", "populate", "!u]+s", "cull", "mowerMC", "searchTerm", "jointAccel", "m[a@]+st[u", "GOTO_FEATU", "tankShape", "GetShapeLi", "eels", "_value", "Rating mus", "tioning", "m_lowerAng", "_setShapeW", "nabled by ", "secondaryA", "isnt a mul", "headAttach", "velocityAn", "joints>", "closing", "loadData", " Shape Act", "lid.", "identifyBo", "Char3", "ge the key", "lume and p", "rear3MC", "the max vo", "groupable", "Publishing", "creditsBtn", "_currentBu", "PogoReleas", "put", "writeUTFBy", "activation", "gun will o", "GetWorldPo", "Shoulder2", "  Make the", "undo", "restitutio", "seed", "maxChars", "transToRep", "fullscreen", "Error: som", "CustomizeK", "user_id", "upperArm1M", "utf8TextEn", "killTweens", "ler", "stageSprit", "nextBytes", "destroyJoi", "SetMateria", "_counter", "sessionRep", "Determines", "titleText", "ed, this i", "removeChar", "spring", "level", "blood", "Num Lock", "userID_", " and simpl", "man", "SECURITY_E", "substr", "erinText", "rim", "impulseLef", "ultHandler", "ndex", "ivated", "yBrowser", "magnetMC", "frontSmash", "FALSE", "delay", "getChildBy", "shoulder1B", "jointMotor", "_selectabl", "ter", "edVerts", "set", "leg2Free", "writeUTF", "PaintBodyV", "vertebraJo", "GetUserDat", "DoubleClic", "JrZmFjZS5j", "ode applie", "firing tim", "attribute", "setFilters", "Base64", "nubContact", "leftX", "t a define", "rray", "soundEffec", "elBind", "replayId", "splice", "zKeyOFF", "objectEnco", "rites...", "gearFoot1", "altar", "SED", "he amount ", "nter", "ngBox", "des only w", "authorDisp", "m_localAnc", "izeControl", "<levelXML>", "getCipher", "encryptBlo", "jawRangeY", "nType", "holdPose", "midWheel1B", "sion", "chairChest", "ething dre", "all", "preteen", "rSelector", "ke sure ev", "CannonRef", "OH FINE", "specials.", "setShapeFi", "dispatchEx", "ChairHit3", "addCharact", "loadSoundS", "detachBask", "DEF_LOWERA", "tempKneeLi", "_receiving", "Button", "***", "icleToGrou", " menu. It'", "upperArmAn", "copterShar", "ontactRemo", "Radius", "Roman", "Angle", "isual qual", "_BROWSER", "search by ", "headBloodF", "totalToken", "leg 2 angl", "rotate", "pivotDirec", " area is c", "credits", "engineSmas", "knee2Angle", " to save a", "bclass", "aultsButto", "is of move", "ejected", " Triggered", "torsoBreak", "canvas", "lick on th", "saveMenu", " is curren", "dataFormat", "setupTitle", "r level. T", "@dp", "butthole", "GetBody2", "nextAction", "etting tha", "favoriteLe", "siteURL", "Spacebar", "e number o", " does NOT ", "benText2", "BikeLoop1", "midWheel2S", "hatShape", "anvas", "el to favo", " of the ax", " opening a", "[^a-z]+[a@", "specialBut", "immovable", "tionComple", "sages", "openBasicM", "currentSes", "ader", "clearanceC", "smoke2", "aracter", "loadButton", "UntilIndex", "addScreen", "classMappi", "' cp='", "minWidth", "DEF_LOWERL", "dG90YWxqZX", "0-9.", "./f", "created = ", "_help", "play and r", "brokenFork", "kReverse", "eed a lot ", "ressed.<br", "s[e3]+m[e3", "createFill", "textarea", "_display", "spineLimit", "creditsSpr", "replayButt", "horizontal", " If this i", "ias name.", "tooMuchArt", "jets attac", "Graphics", "test_level", "<triggers>", "prototype", "NGE", "setPositio", "sting leve", "immovable2", "lastInput", "arrow", "roblem. Pl", "groceryBod", "Xtime9", "random", "levelVersi", "spaceActio", "setPixiMov", "eft", "character.", "featured_b", "hicle", "addKeyDisp", "disableRun", "wheelSmash", "cartShape", "_disabled", "you edit.", "seat2Vert", "lowerLeg2S", "-cbc", "topBorder", "characterB", "FACE_SELEC", "backDongle", "hiddenY", "checkElfRe", " how much ", "writable", "ivated. Vo", "buildInput", "levelDelet", "t: ", "GOTO_USER_", "readAsText", "SHIFT is p", "eye2TopY", "helpClosed", "help", "activateBy", "openLoadMe", " deactivat", "resizeRope", "ly blood s", "listMask", "entLimit", " want to s", "followMous", "show", "exports", "saveLevelO", "them. (sor", "ate.  The ", "startDisab", "your level", "MetalSmash", "REPLAY", "shapeRefSc", "hipBreakLi", "removeTrig", "frameMC", "addKeyList", "CreateJoin", "w your ins", "speedIndex", "ly overwri", "@ln", "fadeIn", "w and logg", "* The back", "front2MC", " finally", "_multiplie", "torsoHand2", "br>6. Trig", "ger.<br><b", "wheelchair", "determine ", "sed to rot", "n this joi", "chargeMax", "image/png", "bladeCente", "reignsHand", " this leve", "groupSelec", "gearMC", "elocity", "addRefSpri", "ntLimit", "ner", "loadMenu", "Page Up", "elInfo", "scaleXCopy", "hidden", "mainHand2", "et to zero", "cameraBoun", "ltCode", "lider", "RROR", " for the m", " is from a", "Performanc", "mouseData", "arker foun", "perties", "' id='", "ist", "textField", "bloodTypeS", "ment.", "bmdArray", "clearstage", "dRect", "oving obje", "vertVector", "ceMin", "eUp", "rch", "alphaVal", "r>FOREVER.", "edByte", "tabase rel", "stringRefe", "hes full p", "SMASH", "tilIndex", "PLAY", "Object", "eeing this", "dangit", "' r='", "yShape", "upAndDownA", "sHandler", "nubShape", "arms forwa", "SELECTION_", "bladeY", "views", "steps", "e same no ", "eedsPris", "Elbow1", "AREA_SOUND", "_extraUpda", "browseBtn", "openComple", "mowerHand1", "onControll", "' n='", "replays.  ", "mainMenuRe", "number", "round with", "iconMouseO", "es a diffe", "PKCS#5::un", "ite", "startVel", "loaderText", "PAGE", "suspendedS", "BackDrops", "endBlock", "DrumLong", "tempKneeBr", "leg2Anchor", "mputers th", "Uncheck th", "DEF_CHEST_", "_accumulat", "victoryMC", "SetMotorSp", "tentLoader", "ToFlash", "writeUInt8", "Replay fla", "only occur", "jumpFrames", "nt1", ". Global. ", "rect", "_time", "tiple of t", "logCull", "stemBody", "alloc", "dPose", "Lean back", "e_jointBit", "m vehicle,", " the vehic", "authorPres", "sound effe", "lsButton", "_prev", "functionSt", "levelNameT", "performanc", "listContai", "het", "Kid1", "_plays", "uck instan", "nput", "e the char", " triggerin", "ames", "createBurs", "ve instead", "rawstate", "InvSbox", "boostStepU", "RIGHT", "will hang ", "done", "mc_OldMan", "head", "fullHeight", "copterFron", "seeded", "searchButt", "test", "teArray", "saveOverwr", "openSearch", "curs upon ", "@df", "forEach", "midShape", "actualMask", "clearList", "onts/Bank-", "buildView", "ield", "d by other", "createBMD", "glowFilter", "bitmapSpri", "axis angle", "FOCUS_IN", "fueltankSm", "u may have", "ctangle", "g these pa", "count", "cartshards", "dad", "shapeLimit", "reAttachDi", "wheel1Shap", "of you inc", "hMenu", "popFlag", "preloader", "iconMouseU", "listHolder", "bumperShap", "m_ratio", "return thi", "Value", "1164JkhOHK", "overwrite_", "LEVEL EDIT", "new y ", "strappedIn", "tDongle", "nBind", "mower", "erval", "' p", "views = ", "_build", "ured", "listMouseW", "to negativ", " one level", "ect", "eplayMenu", "tuckPose", "aliasMappi", "Changing t", " action wa", "ields", "ing but ch", "eye1RangeY", "levelId", "CAMERAMODE", "IsSleeping", "vehicleAtt", "ish<br>you", "createdTex", "primaryAct", "topY", "accelerati", "ed AMF0 ma", "eturn a pr", " jets atta", "PLETE", "texture", "ring", "_currentIn", "magnetized", "setShapeAs", "orId", "patch", "erSpeedRan", "mainLeg1Jo", "sharedObje", "38px", "dirty", "GetAnchor2", "<br><br>0:", "que shapes", "duplicate_", "basketShap", "session", "loadBitmap", "TableRef", "oldest", "lifelong g", "ASS", "savecomple", "helpWindow", "BikeSmash1", "WordArray", "BasketSmas", " object fr", "Reverse Sh", "ing)", "decelStep", "saverloade", "shakeMaxAn", "_disableSa", "t: '", "starWidth", "abs", "CURRENT_VE", "<j t='", "iconHeight", "santa clau", "28yraAjR", "isLoud", "for free u", "genKey", "createHitB", "tionListPr", "keyDownHan", "s joint. R", "fueltankMC", "foreArmRan", "latedPosit", "getDefault", "levelLoadC", "totalParti", "r grabbing", "supermanPo", " again", "&ct=", "NON_ZERO", "Add", "foreArm", "ed to nega", "minSpeed", "chestShape", "magnet", "_persistLi", "icles", "bmdLength", "s.<br><br>", "leAttached", "cloneTarge", "shakeActiv", "update60fp", "toCompactX", "_level_id", "rigger not", "foreArmMin", "DELETE_SEL", "cters", "artStatusH", "tions, tri", "sterm", "to this va", "specialLis", "configurab", "BoomboxRef", "etail to a", "getPrisJoi", "plugins", "ls.tjf?rep", "average_ra", "blendMode", "wound", "t 30 fps", "isMuted", "paintItemV", "parent", "ain if you", "displayLis", "refresh_re", "of force u", "newOpaciti", "Status", "roken", ".  Login o", "selectedIc", "scale9Grid", "rightWalkP", "eatshit", " again to ", "TIME", "REMOVE", "olutionHig", "readMultiB", "contact co", "ELDATA", "un the ris", "psize", "spaceHeigh", "mute", "y sparingl", "saving.", "ickMap", "deselectAl", "nSki", "readInt8", "containerS", "restoreDef", "new upper ", "ou can acc", "PUBLISH_CO", "stage", "triggerBut", "action.", "oot", "getFlatSpr", "multiple o", "stItem", "voiceArray", "s.  Clear ", "SAVE_REPLA", "Load Level", "addChildAt", "minZoom", "<br><br>(j", "><br>4. Tr", "playable c", "onestar", "itorView", "m_vertices", "on will oc", "m_body1", "terData", "e vehicle ", "removeHand", "@@asyncIte", " blood par", "n[i1!]+g+[", "nsMenu", "dMenu", "FinishLine", "olution", "upperLeg3", "Tag", "ormal join", "searchMenu", "countDicti", "n seconds ", "vertebraHe", "radius", "decode", "SPECIAL", "Control", "le shapeco", "sliderTab", "LETE SOME", "@ct", "vehicles", "removeFrom", "evel.", "HelveticaN", "AUTHOR_SEA", "the time (", "maxReplayF", "bladeWeapo", "100% accur", "checkEnd", "ionsGroup", "onReplayMe", "ionsHarpoo", "maskHeight", "getFullPro", "Scroller", "ill occur ", "_triggerAc", "acter will", "&ui=", "s a large ", "active", "levelOptio", " the sake ", "lowerArm2", " glass, sp", "ngth", "spaceOff", "goto_optio", "boxBodies", "a level to", "nSleigh", "startPoint", "maxStep", "<u>", "els_releas", "character", "bladeActio", "brain", "ctrlKeyOFF", "jetshards", "minor grap", "ange", "blood is r", "GetFilterD", "utton", "magnetVert", "repeatCoun", "magnetAnch", "authorValu", "lastReplay", "spaceKeyOF", "BikeHit2", "_joints", "fire.<br><", "activateCo", "otualsNggj", "[object Ge", "<b>playabl", "valueList", "drop:", "APPLESAUCE", "_average_r", "closeSelec", "cartMC", "re was a s", "contact", "replayByte", "aabb", "</triggers", "erResultHa", "updateZoom", "refSprite", "orites", "Search", "getReferen", "delta", "basket", "arrowTool", "tryEntries", "NeckBreak", "_lockJoint", "Toggle", "e accelera", "dWord", "aps", "ntSpeed", "COMArray", "Heavy4", "BytesTo32b", "destroy", "placeBlood", "br>2: Any ", "leg1Contac", "shortenDat", "artButton", "currMouseX", "frontRearS", " a game re", "enableMoto", "ht manuall", "_useFullSc", "savePressH", "LigTear2", ".<br><br>1", "668184?mt=", "ShapeHit4", "tool (1)", "RATING_SEL", "controls", "eChange", "writeInt16", "omplete", "artCount", "zKey", "guy", "leg2", "DEF_HEAD_S", "_iteration", "midWheel2J", "_DRAW_STAT", "accelStep", "s by this ", "yList", "midY", "graphics", "jetShape", "*h[o0]+l[e", "rement", "removeText", "e2MC", "PE NOT IN ", "bodyMinAng", "TextStyle", "_pageLengt", "ntry", "ent1", "numBackgro", "refilterSh", "totalItera", "rear2", "disable", " to exit f", "haracter", "edData", "run30fps", "addition t", "click_ios_", "mc_replay_", "eft-clicki", "drawShapes", "wheelLoop1", "and save t", "_targets", "shakeCount", "Select a L", "addChild", "mc_options", "g of 0, th", "shapeDicti", "playBtn", "pixiTextur", "replayBrow", " in this t", " Error has", "RESTART_RE", " and it's ", " with ever", "commentsBg", "_selectedC", "ighty", "sessionCon", "ies", "tick holde", "pu+ss+[iye", "his trigge", "pear pixel", "toPrimitiv", "CHANGE_CHA", "Ref", " accelerat", "ape", "EDITOR", "False", "tSound", "defineProp", "ay_loader", "t least 4 ", "r free up ", "unt not de", "mainBaseMC", "_featured", "panning", "loadselect", "gameSizeRe", "engineShap", "cdata", "mouseOutHa", "shapeStatu", "ionary", "detached", "SpringBoxR", "terval", "rate_repla", "_pixiSprit", "lay", "author", "brae", " will fire", " shatter t", "arameters", "importLeve", "There was ", "limit rota", "wheelLoop3", "e editor t", "MAX_POWER", "ge the spe", "gearBody", "LigTear1", "front1MC", "unt allowe", " be set be", "isSensor", "floor", "defaultFil", " you are a", "vas", "root", "Times New ", " for free ", "rear4", "shapeGuide", "cleLine", "ieClip", "http://con", "ratingSele", "pathPrefix", "containerO", "maxScale", "sortDropMe", "logo", "bladeLocal", "leanBackPo", "t collidin", "!]+n[a@]", "get_all_by", "displaceme", "ointDef", "clear", "MUTE", "errorMessa", "_userID", "spacebar a", "g with eac", "focus", "other trig", "n the righ", "els", " to disabl", "Turn this ", "PUBLISH_LE", "jetSmashLi", "setCheese", "ance, all ", "om the tot", "m_drawFlag", "targetSele", "You saved ", " character", "scrollSmok", "rately.", "shapeWidth", "userPress", "authorID_", " it again ", "iconHolder", "stem1Shape", "_particleC", "_resetCoun", "polygonToo", "pushAction", "ration", "copy", "nd blend m", "603064MENrsC", "dle", "ALGORITHM", " 100% accu", "he player ", "accurate r", "start rota", "replayData", "tton", "Numpad 7", " replays y", "ColorInput", "getBounds", "completeFi", "KeepSelect", "jetAngle", "gth", "errorStrin", "y logged i", "_MASS", "_data", "Left Arrow", "you really", "play count", "updateCopi", "repeatInte", "brianText", "SetXForm", "edMenu", "removeEven", "l.png", "resolution", "skiSmash", "Matt Sayer", "startLevel", "textColor", "Saving Rep", "setJoint", "WARNING!\nD", "com", "balanceCop", "buildList", "CHOOSE_CHA", "DEF_PELVIS", "copterHand", "decreaseSp", "location", "Log in to ", "fromCharCo", "IMPORT_DAT", "collide co", "ation", "closeSaveR", "has been a", "footSmash2", "getRelativ", "setupChara", "redraw", "wheel type", "readByte", "d_vr_butto", "ee any spo", "rollOut", "fileString", "Target Act", "_refGroup", "son", "handleCont", "checkAdd3B", "oneDongleC", "esolution ", "n Burns\nSe", "addingTarg", "keyCode", "getLength", "ratethree", "slice", "numPanels", "mines the ", "holder", "><br>0: No", "vehicleArm", "Group Item", "Invalid co", "BikeHit3", "ects are p", "asyncItera", "e else to ", "ting.", "frameFoot1", "Thud1", "blank", "l-white.pn", "impulseOff", "gger shape", "ger and jo", "ECTED", "ctionTrigg", "TES", "ctRemove", "stopScroll", "hipJoint1", "ilter", "se wait a ", "zPressed", "ences", "Revert to ", "Destroy", "Unknown ob", "upperBody", "remove the", "adjustSpac", "restartMes", "tempElbowB", "foot1Body", "mResultHan", "ed by a tr", "@ui", "transform", "startScrol", "rightLimit", "mainMenu", "_TYPES", "saveComple", "start", "cartRightS", "ll3", "debug", "maxBorderX", "ed joints ", "mowerBody", "characterP", "etContacts", "createButt", "idnotfound", "only show ", "liderChang", "ded will b", "boostPower", "containsTr", "al bevel a", "mc_replays", "setGlow", "shape1", "../../", "vyTxydGDAn", "f1vert", "PAGE_REPLA", "heel", "eHidden", "thanks", "m_fillAlph", "Remove Tar", " to canvas", "_timer", "canvasHeig", "LEFT", "squatPose", "_axisAngle", "m_lineThic", "backPress", "createBMDA", "clearCanva", "votetwo", "rResultHan", "frameSmash", "killReplay", "csStart", "SuperPretz", "e jet shut", "Animation", "XSprite", "beginFill", "cache and ", "unMute", "bodiesToAd", "as a new l", "writeBuffe", "decrypt", "shopper", "ballSpeed", "LduDZX]", "r replay m", "RevoluteJo", "TokenRef", "unlimitedA", "her shapes", "newBaseVer", "targetBodi", "The shape ", "oppositeDe", "tosaved lo", "HomingMine", "version", "nText", "rawn as a ", "Sorry, you", "ntrolled", "deletecomp", "CreateBody", "d padding ", "character_", "voteone", "214px", "aracter.<b", "m_impulse", "frontMC", "GetAnchor1", "repeat typ", "_REPLAY_LO", "ski_", "ceof this", "_user_id", "ntly follo", "stopListSc", "tionList", "enus", "offTint", "nnected", "imit", "TEST_LEVEL", "grindLoop", " load menu", "ding the l", "cified.", "jaw", "stem3Shape", "COMPLETE", "horName", "upperArm1B", "currentPag", "motor", ": Collides", "halfInitia", "spriteToTe", "sionHandle", "hide", "charDropMe", "shadow", "T_STATUS", "eBind", "density", "suspendedY", "middleShap", "highlight", "p[o0]+rn", "ser", "es. Turn t", "limit ", "bottomBord", "pending on", "_levelData", "f the bloc", "verlap in ", "cannot set", "shoulder2A", "' bgc='", "rder", "featuredLe", "keyCodes", "BottleRef", "pFill", "helmeted", "mowershard", "number of ", " Wheels at", "http://wat", "levelData", "leanImpuls", "ContinueDr", " firing po", "ionsGlass", "limitPris", "l135", "temSpecial", "ors", "fueltank", 'ctor("retu', "mc_votesta", "lowerArm2M", "chestBody", "piOverOneE", "delete sha", "openLevelB", "m_lowerTra", "redMenu", "readUnsign", "state", "hold pose", "raCode", "ligJoints", "handleVect", "DestroyBod", "initTestin", "Kid2", "CompleteBi", "reset", "bloodBMD1", "MaxAirSpee", "t angle.", "ssign modu", "kground", "adding lev", "n't want t", "SELECTED", "scalable", " with coll", "View", "handleValu", "n an overr", "eight.", " stab the ", "ot an obje", "he initial", "SetLimits", "nslation", "Missing al", "addSpecial", "BloodParti", "ars to be ", "Fullscreen", "neckBreak", "width", "@p1", "GOTO_LEVEL", "ene", "stem2Shape", "rearMC", "brokenTank", "clearButto", " of ", "elay", "el Data", "info", "muzzle sca", "true", "xtField", "specials", "shapeTool", "SkiImpact1", "sHwNzOnZYE", "rodShape", "bladeShape", "renderable", "updateAuth", "velocity", "amount and", "upperArm3B", ". If you'd", "glowStreng", "owner", "Hex", "wed", "mowerMass", "d in.", "vehicle", "LOAD", " it is act", "ings", "buildKeyed", "buttonMode", "setText", "scroll", "_joint", "rightPress", "month", "game-ui-10", "boostImpul", " found usi", "target", "AllowSleep", "th audio) ", "y again.", "hitTestObj", "onBind", "writeUInt1", "leanForwar", "d right. S", "embedFonts", "mowerRear", "haracter.", "relabelTri", "of the joi", "ray", "ArrowPiece", "clearRepla", "GetMass", "compress", "the speed ", "locity", "Generator", "DYNAMIC", "' sd='", "contactCop", "cesfully s", "Length", "currCOM", "rSelected", "_isPublic", "cullCircle", "n the risk", "leftAndRig", "jointTool", "nly fire w", "e non-play", "m_radius", "removeList", "jects to o", "topShape", "next", "completion", "upKeyOFF", "at match t", "buttons", "mplete", "ultCode", "SpikesRef", "GetRadius", "SoccerBall", "maxLength", "t, joints ", "closeSearc", "algorithm:", "er. Do not", "front_", "objectRefe", "straightLe", "magnetBody", "ect will\nb", "opMenus", "loadLevelF", "serAnswerC", "'></g>", "---", "REFRESH_LE", "defaultVal", "eelRailBod", "chairPelvi", "mc_MainMen", "m_world", "HARDLIGHT", "between tr", "createXML", "brokenFron", "perlinNois", "charCodeAt", "unknown", "shiftNullA", "_in", "mowerHand2", " great", "cheese", "activate t", "firing", "triggerTyp", "pad", "ggers<br><", " move effe", "_triggers", "ToolBar", "ons", "lse", "tor graphi", "stabbing", "keyedPrope", "ets", "trigger", "checkElfKe", ", you may ", "connecting", "dateFromSt", "closeEdito", "@ua", "closeFeatu", "fivestar", "levelItem", "ionList", "exitButton", "intDef", "page_level", "doNothing", "showButton", "ttached to", "PelvisSmas", "offAlpha", "replay", "no, neverm", "level_repl", "thigh2Bloo", "yte", "_delay", "s top spee", "]]></", "s what pos", "Tab (esc i", "color", "CBC", "_getScaleY", "ase remove", "closingCom", "numVerts", "zoom", "constructo", "plier", "replace", "editorTest", "chairLeg2", "eye1LeftX", "dCode", "mixSubColu", "user_name", "menuSprite", "n. Low tor", "levelID", "shakeStep", "ppy Wheels", " speed to ", "sHandlerBi", "ately.", "removeBack", "antiGravAr", "href", "_\\W]*[a@4]", "newMotorSp", "newCollisi", "rigger. Vo", "s will sho", "l you publ", "gear", "bigWheelJo", "helpCaptio", "levels!", " a level b", "mowerFoot2", "br>1: coll", "barHeight", "strap2Anch", "angularDam", "writeByte", "-refsprite", "activate o", "_tweenVal", "ayObject", "This level", "gers", "voicePrior", "choosechar", "F11", "mourn", "TRIGGER", "ight", "rames", "raise fps ", "cannonType", "pelvisShap", "rightSide", "ory", "ound", "signPost", "highlighte", "bmd_disabl", "mShape", "exit group", "borderThic", "importRepl", "goto_credi", "ject", "bloodParti", "sleighBody", "d will sup", "contactSle", "mainMenuPr", "intestineB", "viewReplay", "sodaShape", "shLimit", "mc_pagefli", "metalShard", "hmd", "levelPubli", " seconds.", "rId", "sleep", "clearActio", "deleteSele", ">> PLAY HA", "copyLevelT", "hideLoader", "Delete Lev", "shapeButto", "playAreaSo", "answer2Btn", " work will", "middleVert", "neckAngle", "MENU", "gearJoint", "drawBoundi", "leg1Stuck", "ChairHit2", "tured leve", "Shoulder1", "nedInt", "romAuthor", "_timeSecon", "owguns att", "?replay_id", "levelText", "plete", "ROLL_OUT", "bladeRight", " are on a ", "getStartPo", "relaxPogo", "goto_featu", "mouseHelpe", "_*-!", "tweenTime", "backWheelS", "inputs", "oh, ok", "lowerArm2B", "s what the", "ry, I've r", "die", "' l='", "commentsTe", "getDate", "140px", "shapelimit", "p there on", "en repeat ", "attached j", "ogged out ", "headChunk", "el.  Press", "s temporar", "search by:", "vertising)", "el_id=", "_autoResol", "by default", "disable mo", "ged, Thank", "triggerSin", "m_shape2", "prevSpeed", "_buttonCon", "push", "main_menu", "sBtn", "sign", "frontShock", "checkEject", "customizeC", "inputAllow", "maxGlowStr", "Numpad 3", "changeY", "br><br>2: ", "jetBody", "tedBox", "wheelNewSp", "ase perfor", "load:", "particleCl", "char", "_weighted_", "arm1BloodF", "getCenterO", "gPose", "xLeft", "mouseWheel", "checkAddSp", "onMenu", "uggling to", "_getScaleX", "_LEVEL_LOA", "urate", "getTime", "mc_dropmen", "WHAT THE F", "value_", "bladeCover", "vertexCoun", "mainShape3", "age", "username", "bladeShard", "_triggerDe", "seat3Vert3", "populateFi", "operateKey", "ic. The so", "iating lev", "value", "seatMC", "slideIn", "shape2", "assign", ", so do no", "tempElbowL", "jointDicti", "in seconds", " per 24 ho", "o0]+b", "Numpad 2", "' f='", "ar the sta", "ontroller", "gearShape", "pelvisVert", "explosion", "eck", "too far ap", " again.", "groceryMCs", " >>", "ntsUponDea", "tiveSpeed", "deResultHa", "tring", "mit", "transToCom", "rder-squar", "focusout", "compressio", "_Xtime9", "UnderPoint", "equired to", "GetLinearV", "ger", "frontConta", "removeRepl", "split", "bodySelect", "assAlias", "ur vote...", "hip1BloodF", "ton. You m", "_lowerLimi", "resetResol", "_textField", "delete_lev", "Char2", "ChairHit1", "use60FPS", "REFRESH_RE", "buttonpres", "minDimensi", "kShape", "_previousF", "intestineM", "DED", "transToLev", "handleMC", "USE_INTERP", "ecial", "eToOrigin", "iosButton", "getJointBo", "eBody", "orPoint", "eLogPage", " to play a", "frameGear", "ze_keys_bu", ": Any arro", " how quick", "helmet", "LimbRip3", "evel, you ", "tShape", " called", "0 when not", "ay_button", "_resultLis", "_Sbox", "cle with j", "this week", "edths", "body1", "le.exports", "footAnchor", "blished. I", "again to e", "f5vert", "ou can try", "useHandCur", "RESTART", "voteStars", "editFavori", "setTextFor", "cameraFocu", "Enter a na", "chunks", "spine", "frameShape", "reakLimit", "lowerBodyF", "UPDATE_SCR", "eFrames", "alignShape", "copterBody", "createBitm", "pace", "Numpad 0", "GRAVITY_DI", "hitArea", "parse", "wheel2Shap", "f?uid=", "pogoJoint", "blockSize", "setTextFie", "New Level", "or does no", "Switch Cam", "rker: '", "3]+", "editorDebu", "ROWSER", "ll be cons", "Secondary ", "creations ", "sessionCom", "ActionsVec", "adful has ", "ike you ar", "AUTHOR_NAM", "handleMous", "levelloade", "ntryBind", "detachFram", "triggerToo", "ider", "crateLeft1", "utosaved l", "lowerLeg1S", "Replay suc", "LimbRip1", "mainLeg2Jo", "@vs", "bgBar", "ution", "copterPelv", "shaftShape", "eject", "Primary ac", "LOAD_LEVEL", "refresh re", "headChunkR", "flipPage", "ad_complet", "gger. It w", "mode", "restartlev", "sortby", "any", "248px", "_errorStri", "RCH", "m_body", "nt2", "specialToo", "ctrlAction", "gearAnchor", "lume of th", "DefaultCod", "ndFocus", "hange", "Credits", "ment betwe", "NUM_ACTION", "paddleAngl", "(R)", "mainShaft", "effect wil", "drawNumLab", "authorText", " Level <<", ".<br><br>4", "stopArrows", "boostStepD", "latedWorld", "Mourn2", "ver be see", "addMouseEn", "ct.", "mc_victory", "magnetCont", "hatOn", "specialDic", "basketPiec", " advertisi", "applicatio", "handleNega", "midWheel1", "addTargetA", "groupDispl", "rear1MC", "vehiclePos", "spineMCs", "async", "507rpWkBm", "al option ", "executing", "' m='", "@la", "reverseAng", "e.png", "eners", "lockJoints", "gravitySpe", "frontBody", "oals.  Bui", "windowWidt", "editorLeve", "latedAngle", "Rcon", "ls, etc.", "glowActive", "Func", "BG_HEIGHT", "ttons", "triggeredB", "startFade", "authorDrop", "brokenEngi", "accelX", "y. Please ", "bladeConta", "openFeatur", "createTrig", "LT Std", " brake (mo", "text/xml", "currentSel", "u really s", "dropMenuAr", "lays", "autoSize", "ike to exi", "hing!<br><", "displayTex", "stageDrag", "usiveText", "shatterStr", "chargeMin", "hedMC", "ace.com", "handleColo", "ata", "ontrolsBut", "addActivat", "ct after t", "replayLoad", "readBoolea", "CircleShap", "ngAnswerCh", "<br>4. Tri", "Fields", "eye1TopY", "hasOwnProp", "ate the jo", "noticeable", "mns", ".jonathanb", "shapes wit", "eleted onc", "TOTAL_SIGN", "AMN SHAPES", "yData", " not avail", "ure", "onVector", "keyString", "y comments", "_defaults_", "o) loaded", "his settin", "nextLoc", "eplays", "restart le", "bjDictiona", "character ", "rque", "createGrou", "restart", "armsOverhe", "on labelle", "convertVeh", "force char", "torsoHand1", "apable of ", "buttonCont", " a while t", "aved: id ", "asn't been", "BINARY", " action ", "leg2Stuck", "_STOP", "ower", "engine", "mc_Credits", "teAt", "addChildIn", "replay.hw", "_isMac", "iew_button", "upperArm4B", "_addListen", "font", "3. Trigger", "l brake (m", "_realUpdat", "MAX_FIRE_T", " Good job.", "maxAngle", "userText", "Drops", "SleighImpa", "foot1Ancho", "footSmashL", "improves v", "flags", "intestineJ", "lLimits", "avgRatingT", "ium.css", "try", "reen.  Blo", "getTimezon", "rightKeyON", "RollBind", "borderColo", "write", "particleCo", "Invocation", "ptions men", "getMonth", "endLevelTe", "targetMove", "ft.  Press", "_startDisa", "int2", "soundTrans", "loadingTex", "totalIntes", "bgWidth", "savenew", "endVert", "grabAction", "new collis", "crate2Left", "springMC", "pumpCounte", "lowerArm2S", "search", "nRUeWrUkfa", "christmas_", "vote5", "micShapes", "totaljerkf", "ated. Plea", "XpGyYPYRxU", "starMask", "wrap", "drawBuildi", "broken_", "istitem", "operateRep", "leftArrows", "tabChildre", "level_id", "uhh what", "dAt", "neckBloodF", "' fo='", "contactBas", "_specialCo", "tch attemp", "Step", "heliLoop", "Char11", "Selection", "frameBotto", "' is out o", "vID", "te replays", "during gam", "playable_c", "new opacit", "raw", "yVal", "paddleSpee", "camera", "ChairRef", "he options", "COMPLETED", " site is r", "upperLeg4B", "Subtract", "closeSessi", "prevTime", "intestine", "tween ", "Remove Han", "basicMenuC", "tags", "glowCounte", "j[i1!]+z+", "rearBody", "dMC", "SHAPE", "Y_BROWSER", "ating", "foodItemTy", "checkLegsO", "mowerFoot1", " you.", "lineThickn", "setLimits", "d: options", "speedY", "eak2", "SleighBell", "ode", " experimen", "eteBind", "mShapes", "stitem", "orite", " for use w", "GetMotorSp", "ionBody", "importAuth", "rotation", "rAttachedW", "chairBody", "le or emai", "riggered b", "basketHand", "loaderColo", " then try ", "ters with ", "ayQueryStr", "OFF", "_getShapeW", "b[a@]st[a@", "chairMC", "smu+t", "drop2", "9 !@#$%\\^&", "method", "eueLT Std ", "m_drawScal", "tiveSpeedP", "rowser", "pens when ", "SAVE_OVER", "hical issu", "encodeByte", "don't shoo", "r level no", "addTrigger", "gles", "ligamentLe", "risingBodi", "CENTER", "ionsShape", "AppButton", "upKeyON", "LimbRip2", "backdropDr", "ultBuffer", "lowerLeg1B", "createProm", "GOTO_EDITO", "MvyTxydGDA", "placement", "statusText", "@fo", "teBind", "sliderChan", "NORMAL", "inner", "elfHeadRem", "to a custo", "tListener", "slow PC.\n\n", "ingBox", "handleShap", "editor", "tPrompt", "addReplayE", "innerHeigh", "scrollAcce", "createBord", "FUCK YOU t", "adius", "he FPS cap", "poly tool ", "leftBrowse", "currentSet", "_version", "saverLoade", "lue.<br><b", "rameRate", "fatlady", "killLevelS", ")<br><br>4", "_level", "destroyBac", "A bad para", "shape inst", "vels", "duplicate", "beginTime", "ach the ne", "cted", "id = ", "separation", "openEditor", "l collide ", "_targetAct", "ART", "mowerSmash", "createSnow", "upperLeg3B", "nStartTime", "center", "<b>(", " again or ", "You must b", "adjustBack", "in in a mo", "xUnbound", "lineColor", "ent and tr", "flagHolder", "xed shapes", "<br>0: Not", "d to the p", " I've rece", "ettings", "cartPieces", "leg1Free", "resetActio", "resumeThat", "_XtimeD", "m_timeStep", "ut not alw", "RSION_PATC", "hor2", "reTest", "user.hw", "hideButton", "ass", "hideInnacc", "h a fast c", "t was most", "currentIte", "nish and p", "idth", "ype", "ing: '", "resume", "_focus", "replayLeve", "loadSelect", "food type", ", the turr", "eye1RangeX", "OVERWRITE_", "MuteButton", "clickVolum", "textPlaced", "yedPropert", "ction2Code", " arrow poi", "midWheel2B", "sevArm1Sha", "cleanup", "children", "Rectangle", "jaw5", "XtimeE", "randomNumS", "continue", "elsky.com", " fixed sha", "bodyMoved", "REMOVE_FRO", "motor torq", "ndler", "sleeping", "quality", "createBodi", "rror", "writeBytes", "PrisJoint", "none", "plays = ", "s passed (", "levelSelec", "faceSelect", " found", "http://www", "eplay", "multiplier", "maxMotorFo", "m_linearVe", "ct1", "flaggedRep", "ENTER_FRAM", "raMode", "e activate", "to remove ", " the sound", "level_name", "breakJoint", "pogoPose", "@ul", "heartBody", "special it", "rBind", "new lower ", "crate2Bott", "sleighBell", "TireHit2", "ete this l", "cle", "lter", "Field", "Negative", "_jawTween", "MIN_POWER", "are now au", "LOAD_ERROR", "ropeLength", "position", "ishing it.", " current c", "gersAndJoi", "hestJoint", "detachSeat", "securityEr", "titleLabel", "putShitOnH", "intitialLe", "seatChest", "ive must r", "_index", "hip2Angle", "throw", "oh?", "f movement", "_addingTar", "contactCha", "align", "PIOverOneE", "gs to chan", "acter", "rollOver", "_accurate", "playText", "hideHUD", "targets", "force", "trolled", "awing", " the joint", "bigWheelBo", "S SHAPE?", "' ll ='", "upInc", "elBrowser", "n pressing", "getChildAt", "inputText", ", the obje", " Tarso\nSea", "hings get ", "standFrame", " moves obj", "alignment", "uched by a", "und effect", "shoulder1A", "pes and ot", "Definition", "_length", "een", "CHANGE_ARM", "list", "Loop", "begin", "normalImpu", "triggered ", "rs_large", "ontrols", "woah!", "maxBorderY", "createRect", "ping", "ARROW", "@sd", "an unexpec", "FanRef", "elDataObje", "cullObject", "boostVal", "al availab", "deleteList", "190px", "gotoScreen", "killSessio", "listHitAre", "awrap", "maxTorque", "lineTo", "The classn", "F14", "explosionD", "Token_Icon", "tPromptAcc", "LOAD_REPLA", "raJoint", "targetAng", "re was an ", "rightBrows", "_mouseByte", "@li", "fied turre", "jets", "createPris", "bject id =", "Brave Shie", "jet", "pad: ByteA", "tached", "FLIP_PAGE", "Data", "unction", "crate2Righ", "MOUSE_WHEE", "GetLocalCe", "timeText", "ector", "backWheel", "imitive va", "BikeHit1", "Experiment", " i='", "ror.", "newScaleCh", "tached leg", "hipBreak1", " may incre", "MAX_ACCEL_", " was succe", "dataLoaded", "actionsVec", "code", "search_by_", "reen", "acterMenu", "tokens", "heart", "rangeX", "tBurst", "get_levels", "background", "setOwner", "levelList", "N_INTERACT", "pelvisSmas", "faceselect", "border", "loadingMes", "e maximum ", "grindingMa", "vel", "e shit and", "jumpTransl", "lear of th", "ssPath", "he joint. ", "but includ", "deleteComp", "basketMC", "etActionsF", " fails to ", "publishcom", "dSpray", "lowerLimit", "move if pa", "ers to man", "... DELETE", "lip", "b20=", "closeLoadM", "ning", "his is goo", "chestChunk", "ionChanged", "seatPose", "teners", "ctrlKeyON", "eaning usi", "select", "ay\nNadjaha", "don't want", "followCurs", "activate", "detachLimi", "h another ", "ionsPrisJo", " this join", " fixed", " are no lo", "edStep", "headShape", "nForce", "armMinAngl", "test_name", "mouseChild", "br>2) Each", "flag as in", "When publi", "ElectricMo", "currentCan", "for charac", "Level name", "openOption", "only want ", "elf2", "dropMenuSp", "gomainmenu", "upperLimit", "== 1. This", "fadeTime", "eight", "hand-curso", "setChildIn", "false", "fined", "se remove ", "date_featu", "saveNewLev", "getAverage", "too recent", "middle", "opacity", "boxMCs", "nt.  If th", "g[o0][o0]+", "mouseDownT", "Char1", "VEL", "br>Unsaved", "its", "lay_id=", "Map", "fancyforce", "accelerate", "return", "userBtn", "Home", "rotSpeed", "ndonLTStd.", "end", "is is you ", "shold", "buildDropM", "GetWorldCe", "hoverCopte", "ctionShape", "hideArmsCh", "rightBorde", "rator", "es or grou", "resultName", "level name", "rompt", "er. Sounds", "actBuffer", "RESOLUTION", "undInstanc", "linkCount", "mainShape4", "_errorMess", "torsoAncho", " SOME", "ApplyImpul", "sOut", "enterSessi", "_invoke", "spaceKey", "immovable3", "goto_level", "e detroyed", "It looks l", "get_level", "totalVerte", "GetPositio", "d by this ", "run", "_ctrlActio", "localPosit", "ropeMinLen", "leftKeyON", "bottle typ", "level, you", "icon", "__await", "63EvWDog", "readBytes", "maxNameCha", "soundLocat", "step", "Menu", "ng level..", "savereplay", "editSelect", "maxDelay", "RailJoint", "slation", "This deter", "Listener", "GeneratorF", "antiAliasT", "dler", "doubleClic", "kneeLigame", "ith charac", "accept", "ctResultHa", " local cop", "returnToMa", "@cp", "mainSeat", "ORITE", "createSpri", "lineStyle", "frameRate", " original ", "ance (", "round", "hideVehicl", "ay, if the", "eplay...", "appendChil", "headChunkS", "handleFocu", "propeller", "range, lik", "ingBody", "Numpad -", "ayControls", "topMenu", "Jim Bonacc", "bloodBmdAr", "excludeFro", "defaultTex", "' ua ='", "RED_BROWSE", "Heavy", "yMaxSpeed", "chairSmash", "replayID_", "spinActive", "eakLimit", "olation", "googlePlay", "shapeSprit", " running", "rry, I've ", "onPose", "' im='", "helpString", "adJoint", "headMinAng", "gamentLimi", "body2", "keydown", "logobg", 'rn this")(', "readTypedO", "uncompress", "velMenu", "m_isSensor", "minDelay", "organize", "This contr", "particleLi", "CONTROLS", "show help", "menu", "loadXML", "firing rot", "IBeamRef", "Clips", "ionsSpecia", "GetVertexC", "mainLeg1", "red", "d along wi", "jawTopY", "fpsCounter", "adjustText", "f[a@]+g+[0", "createText", "Vert", "Speeds", "tEnd", "characterT", "container", ".<br><br>2", "readObject", "destroyFro", "lowerLeg1", "dBitmaps", "city", "atan2", "4 - pretty", "apes", "t to 3 or ", "se try aga", "You may on", " is alread", "Your repla", "tryLoc", "rent end r", "verlap.", "archPose", "setValue", "e = ", "ed only by", "data", "addValue", "oint is un", "loading re", "filters", "stemMC", "FatLady", "impulseRig", "endian", "TERS", "shiftActio", "disableUpl", "restartBut", "y one of y", "illegal ca", "level_id =", "shaftMC", "t be betwe", "ose", "everyone", "FOCUS_OUT", "backShape", "countered.", "intestineL", "kMCs", "lutionIncr", "contain so", "tooManySha", "rate of fi", "Scroll", "high", "removeJoin", "non-fixed ", "Transparen", "previousBo", "terval onc", "overTint", "_shapeCont", "_user_name", "Importing ", "Favorites ", "This value", "comments =", "keys", "kneeJoint1", "fireArrows", "like all a", "ainer", "previousBa", "coordinate", "hip2BloodF", "mainShape2", "GetNext", "openSessio", "close", "ionsText", " like to j", "inputObjec", "accessed b", "particleSl", "n or where", "_txtColor", "rt of a gr", "_created", "ImpaleSpik", "scrollBar", "chestMC", "s will be ", "showUnplay", "rpolation", "set_favori", "Invalid ch", "save repla", "undLayers", "ialNode", "systemUnMu", "fistPoseRi", "cles", "ing a tool", "ction1Defa", "rightKeyOF", "removeAll", "ind", "ting", "startDrag", "Level flag", "wser", "prite", "tor1", "@fr", "Building1R", "vote3", "mc_scale", "addSparkFo", "transFromR", "erMCs", "blob", "b2Dot", "wheelIsClo", "_volume", "ntainer", "handleBlad", "ction1Code", "return (fu", "ID_NOT_FOU", "_publicRat", "d_button_n", "magnetRang", "checkAdd4", "_groupable", "flagCharac", "slideTimes", "setting 1 ", "Accelerate", "vanBmdArra", "recently r", "Initialize", "SetFilterD", "front3", "handAnchor", "charIndex", "saveLevelF", "ached to t", "readUInt8", "statusSpri", "cl[i1!]+t", "isArray", "armSprite", "ADER", "<b>", "lintered w", "somehow. Y", "normals", "_replayDat", " the torqu", "scaleY", "Level Opti", "Hip2", "ys/records", "ocation of", "selectionc", "shapes", "buildMenu", "ity but ca", "brokenSeat", "don't show", "bigWheelSh", " run Happy", "lower limi", "_setShapeH", "_triggered", "setBorders", "_type", "grabbing p", "_speed", "_triggerSt", "keyLength", "esult is n", "mouseDown", "romLocalSt", "Up Arrow", "PLAY_LEVEL", "create", "mom", "leanBack", "fCheck", "sion of Ha", "passed (yo", "footShape", "brainBody", "waistJoint", "chTermButt", "ike the ob", "_currentTo", "vel browse", "type is se", "sor", "his back o", "_camera", "_forceChar", "cape at an", "options135", "r profile.", "oops... Se", "two object", "ureResolut", "particleDi", "linearDamp", "utils", "floorWidth", "setInputs", "loadContai", "crateBotto", "isBuffer", "SmashedMC", "joint2", "llRef", "seat1Vert", "tactbenhay", "e jet reac", "crateAncho", "girl", "setting 3,", "iconWidth", "power", " with a ne", "soundDelay", "uploadDrop", "progBar", " shouldn't", "sible", "Save New L", "favoriteBu", "_body", "outline co", "edActions", "shapeConta", "Point", "_lastSaved", "button", "brokenProp", "before the", "checkAddRa", "currText", "it worse t", "sleighReig", "typeIndex", "lete", "_comments", "del_level", "lowerLeg2M", "ete", "levelDataA", "deleteLeve", "upperLeg1B", "publishLev", "pool", "appendText", "</specials", "readECMAAr", "@un", "refGroup", " fps", "only in su", "exitToMain", "sed when l", "openCharac", "led", "_author_id", "window", "orage", "upperLeg2M", "buildWindo", "nMenu", "KEY_UP", "moment and", "readBuffer", "maxComment", "<br>3: the", "or registe", "_panning", "teClosed", "eye1", "contactRea", "ish them.<", "ressBar", "totalWidth", "ject will ", "snowSpray", "rOpen", "connectAnc", "endHole", "ies of thi", "sent", "_newReplay", "refresh_le", "e3]+d", "preActions", "stabImpuls", "interactiv", "firstActio", "extHandler", "afterLoc", "dispose", "TVRef", "debugStrin", "sInit", "ints with ", "votehigh", "Shift"];
    return (e = function () {
        return t;
    })();
}
!function (t, i) {
    for (var s = e(); ;) try {
        if (272139 === -parseInt("507rpWkBm") / 1 + parseInt("1164JkhOHK") / 2 * (-parseInt("63EvWDog") / 3) + parseInt("28yraAjR") / 4 * (-parseInt("342695qgAeWd") / 5) + -parseInt("812826aBjXYd") / 6 * (-parseInt("7bePFYl") / 7) + -parseInt("1857264AGWwAR") / 8 * (-parseInt("9rTVcog") / 9) + parseInt("4518360nkcctf") / 10 + -parseInt("603064MENrsC") / 11) break;
        s.push(s.shift());
    } catch (e) {
        s.push(s.shift());
    }
}();
var t, i, s = (t = true, function (e, i) {
    var s = t ? function () {
        if (i) {
            var t = i.apply(e, arguments);
            return i = null, t;
        }
    } : function () { };
    return t = false, s;
})(this, function () {
    return -1;
    /*
        #checkpoint
        this used to have a string.search call
        and this caused an recursive loop...
        for some reason
    */
});
function r(t, i) {
    var s = e();
    return (r = function (e, t) {
        return s[e -= 189];
    })(t, i);
}
s(), (i = true, function (e, t) {
    var s = i ? function () {
        if (t) {
            var i = t.apply(e, arguments);
            return t = null, i;
        }
    } : function () { };
    return i = false, s;
})(this, function () {
    var e;
    try {
        e = Function('return (function() {}.constructor("return this")( ));')();
    } catch (t) {
        e = window;
    }
    var t, i, s, r = new RegExp("[XvIHnRUWUXpGyYPYRxUKyNYnMVusNggsJZGYxNzMvyTxydGDAnhDzFhsWWRFXQHYHVYXVsHwNzOnZYEyTIJqwJYINLduDZX]", "g"), o = "XtvotaIHljnRUeWrUkfaXpGceyY.PcYRxUomK;byetNaY.nMVtotualsNggjerkfsacJZGeY.cxNzoMmvyTxydGDAnhDzFhsWWRFXQHYHVYXVsHwNzOnZYEyTIJqwJYINLduDZX".replace(r, "").split(";"), n = function (e, t, i) {
        if (e.length != t) return false;
        for (var s = 0; s < t; s++) for (var r = 0; r < i.length; r += 2) if (s == i[r] && e.charCodeAt(s) != i[r + 1]) return false;
        return true;
    }, a = function (e, t, i) {
        return n(t, i, e);
    }, h = function (e, t, i) {
        return a(t, e, i);
    };
    for (var l in e) if (n(l, 8, [7, 116, 5, 101, 3, 117, 0, 100])) {
        t = l;
        break;
    }
    for (var c in e[t]) if (h(c, [5, 110, 0, 100], 6)) {
        g = c;
        break;
    }
    for (var d in e[t]) if (h(d, [7, 110, 0, 108], 8)) {
        i = d;
        break;
    }
    if (!("~" > g)) for (var p in e[t][i]) if (a([7, 101, 0, 104], p, 8)) {
        s = p;
        break;
    }
    if (t && e[t]) {
        var u = e[t][g], m = !!e[t][i] && e[t][i][s], f = u || m;
        if (f) {
            for (var y = false, v = 0; v < o.length; v++) {
                var g, S = (g = o[v])[0] === String.fromCharCode(46) ? g.slice(1) : g, _ = f.length - S.length, w = f.indexOf(S, _);
                -1 !== w && w === _ && (f.length == g.length || 0 === g.indexOf(".")) && (y = true);
            }
            if (!y) {
                var b = new RegExp("[ZQzFegHLRJcshGyvQQZzrBK]", "g"), C = "ZabQzFeogHLut:RJcblsahnkGyvQQZzrBK".replace(b, "");
                //e[t][i] = C;
                /*
                    #checkpoint
                    I guess it was a window.location.href = 'about:blank';
                    now it is commented.
                */
            }
        }
    }
})();
var o, n = (o = true, function (e, t) {
    var i = o ? function () {
        if (t) {
            var i = t.apply(e, arguments);
            return t = null, i;
        }
    } : function () { };
    return o = false, i;
});
n(this, function () {
    var e;
    try {
        e = Function('return (function() {}.constructor("return this")( ));')();
    } catch (t) {
        e = window;
    }
    // for (var t = e.console = e.console || {}, i = ["log", "warn", "info", "error", "exception", "table", "trace"], s = 0; s < i.length; s++) {
    //     var r = n.constructor.prototype.bind(n), o = i[s], a = t[o] || r;
    //     r.__proto__ = n.bind(n), r.toString = a.toString.bind(a), t[o] = r;
    // }
    /*
        #checkpoint
        this was used to disable the console...
        not it's gone and I can print things again
    */
})(), (() => {
    var e, t = {
        15: (e, t, i) => {
            "use strict";
            i.d(t, { Z: () => s }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = function () {
                var e, t;
                function i() { }
                return e = i, (t = [{
                    key: "currentSession", get: function () {
                        return i.session;
                    }, set: function (e) {
                        i.session = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(e, t), Object.defineProperty(e, "prototype", { writable: false }), i;
            }();
            s.useDebug = false, s.uploadGraphics = true, s.enableAudio = true, s.CURRENT_VERSION = 1.95, s.CURRENT_VERSION_PATCH = 0, s.user_id = -1, s.disableMessage = "Uploading new data is temporarily disabled. I'M SORRY!", s.numBackgroundLayers = 5, s.siteURL = "http://localhost:8081/", s.pathPrefix = "", s.currentlyInEditor = false, s.currentlyColorDropperOpen = false, s.hideHUD = false, s.textureResolution = "high", s.use60FPS = false, s.characterIndex = 1, s.hideVehicle = false, s.levelIndex = 1, s.bdIndex = 0, s.bdColor = 16777215, s.renderResolutionIncrease = 2, s.showArrowInOptionsMenu = false, s.bloodSetting = 1, s.YParticleLimit = 850, s.activeXLimit = 2e3, s.maxReplayFrames = 6e3, s.characterNames = ["wheelchair guy", "segway guy", "irresponsible dad", "effective shopper", "moped couple", "lawnmower man", "explorer guy", "santa claus", "pogostick man", "irresponsible mom", "helicopter man"], s.shapeClassPath = "com.totaljerkface.game.editor.", s.shapeList = ["RectangleShape", "CircleShape", "TriangleShape", "PolygonShape", "ArtShape"], s.jointClassPath = "com.totaljerkface.game.editor.joints.", s.jointList = ["PinJoint"], s.specialClassPath = "com.totaljerkface.game.editor.specials.", s.specialList = ["VanRef", "TableRef", "MineRef", "IBeamRef", "LogRef", "SpringBoxRef", "SpikesRef", "WreckingBallRef", "FanRef", "FinishLineRef", "SoccerBallRef", "MeteorRef", "BoostRef", "Building1Ref", "Building2Ref", "HarpoonGunRef", "TextBoxRef", "NPCharacterRef", "GlassRef", "ChairRef", "BottleRef", "TVRef", "BoomboxRef", "SignPostRef", "ToiletRef", "HomingMineRef", "TrashCanRef", "RailRef", "JetRef", "ArrowGunRef", "ChainRef", "TokenRef", "FoodItemRef", "CannonRef", "BladeWeaponRef", "PaddleRef"], s.totalCharacters = 11, s.favoriteLevelIds = [], s.debugOptions = { cullEditor: false, logCulled: false }, s.accelerateDefaultCode = 38, s.decelerateDefaultCode = 40, s.leanForwardDefaultCode = 39, s.leanBackDefaultCode = 37, s.primaryActionDefaultCode = 32, s.secondaryAction1DefaultCode = 16, s.secondaryAction2DefaultCode = 17, s.ejectDefaultCode = 90, s.switchCameraDefaultCode = 67, s.accelerateCode = s.accelerateDefaultCode, s.decelerateCode = s.decelerateDefaultCode, s.leanForwardCode = s.leanForwardDefaultCode, s.leanBackCode = s.leanBackDefaultCode, s.primaryActionCode = s.primaryActionDefaultCode, s.secondaryAction1Code = s.secondaryAction1DefaultCode, s.secondaryAction2Code = s.secondaryAction2DefaultCode, s.ejectCode = s.ejectDefaultCode, s.switchCameraCode = s.switchCameraDefaultCode;
        }, 522: (e, t, i) => {
            "use strict";
            var s = r, o = r;
            i.d(t, { M: () => nt }), i(13), i(0), i(68), i(20), i(18), i(523), i(1), i(2), i(60), i(75), i(76), i(77), i(78), i(79), i(31), i(11), i(41);
            var n = i(22), a = i(126), h = (i(4), i(5), i(3), i(6)), l = i(15), c = i(165), d = function () {
                
                function e(t, i, s, r, o) {
                    this.minLineThickness = 1.75, this.container = t;
                    var n = 30 / h.Xj.maxFPS;
                    r *= e.scaler * n, o *= e.scaler * n, this.currentPos = new h.E9(i + r, s + o), this.lastPos = new h.E9(i, s);
                }
                var t, i, s = e.prototype;
                return s.step = function (t, i, s, r, o) {
                    void 0 === o && (o = 1);
                    var n = this.currentPos.x - this.lastPos.x, a = this.currentPos.y - this.lastPos.y;
                    return this.currentPos.x > t && this.currentPos.x < i && this.currentPos.y > s && this.currentPos.y < r && (this.container.graphics.lineStyle(this.minLineThickness, 10027008, 1), this.container.graphics.moveTo(this.lastPos.x + n / o, this.lastPos.y + a / o), this.container.graphics.lineTo(this.lastPos.x, this.lastPos.y), c.z.drawnParticles = true), this.lastPos.x = this.currentPos.x, this.lastPos.y = this.currentPos.y, this.currentPos.x = this.currentPos.x + n, this.currentPos.y = this.currentPos.y + a + e.gravityIncrement * o, !(this.lastPos.y > l.Z.YParticleLimit);
                }, s.removeFrom = function (e) { }, t = e, (i = [{
                    key: "prev", get: function () {
                        return this._prev;
                    }, set: function (e) {
                        this._prev = e;
                    }
                }, {
                    key: "next", get: function () {
                        return this._next;
                    }, set: function (e) {
                        this._next = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
            function p(e, t) {
                return (p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            d.scaler = 2.0833333333333335, d.gravityIncrement = .6944444444444444;
            var u = function (e) {
                var t, i;
                function s(t, i, s, r, o) {
                    var n;
                    return (n = e.call(this, t, i, s, r, o) || this).lineThickness = 1.5, n.minLineThickness = 1, n;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, p(t, i), s.prototype.step = function (e, t, i, r, o) {
                    void 0 === o && (o = 1);
                    var n = this.currentPos.x - this.lastPos.x, a = this.currentPos.y - this.lastPos.y, h = (n * n + a * a) / o;
                    return this.currentPos.x > e && this.currentPos.x < t && this.currentPos.y > i && this.currentPos.y < r && (this.container.graphics.lineStyle(this.lineThickness, 10027008, 1), this.container.graphics.moveTo(this.lastPos.x + n / o, this.lastPos.y + a / o), this.container.graphics.lineTo(this.lastPos.x, this.lastPos.y)), this.lineThickness = Math.max(2 * (1 - .005 * h) + this.minLineThickness, this.minLineThickness), this.lastPos.x = this.currentPos.x, this.lastPos.y = this.currentPos.y, this.currentPos.x = this.currentPos.x + n, this.currentPos.y = this.currentPos.y + a + s.gravityIncrement * o, !(this.lastPos.y > l.Z.YParticleLimit);
                }, s;
            }(d), m = i(89), f = { RefRectangleShape: n.D_, RefCircleShape: n.D_, RefTriangleShape: n.D_, RefPolygonShape: n.D_, RefArtShape: n.D_, RefShape: n.D_, RectangleShape: n.$1, CircleShape: n.n, TriangleShape: n.E2, PolygonShape: n.kL, ArtShape: n.gR, Special: n.ph, ArrowGunRef: n.Zb, BladeWeaponRef: n.Th, BoomboxRef: n.Ux, BoostRef: n.zE, BottleRef: n.So, Building1Ref: n.M8, Building2Ref: n.RC, CannonRef: n.Yb, ChainRef: n.p$, ChairRef: n.m9, FanRef: n.lx, FinishLineRef: n.Ou, FoodItemRef: n.KM, GlassRef: n._o, HarpoonGunRef: n.fE, HomingMineRef: n.Ae, IBeamRef: n.tq, JetRef: n.M2, LogRef: n.P_, MeteorRef: n.xy, MineRef: n.eY, NPCharacterRef: n.XL, PaddleRef: n.bx, RailRef: n.fv, SignPostRef: n.Q$, SoccerBallRef: n.I_, SpikesRef: n.P4, SpringBoxRef: n.Re, TableRef: n.bB, TextBoxRef: n.cG, ToiletRef: n.$P, TokenRef: n.Y1, TrashCanRef: n.lb, TVRef: n.YJ, VanRef: n.uS, WreckingBallRef: n.vT, ArrowGun: a.RS, Boombox: a.E8, Bottle: a.Aw, BladeWeapon: a.mM, Boost: a.Fw, Building1: a.A3, Building2: a.vY, Cannon: a.E7, Chain: a.qo, Chair: a.Hs, IBeam: a.zq, Jet: a.zy, FinishLine: a.bj, FoodItem: a.w6, Fan: a.XG, TrashCan: a.ZN, Glass: a.VH, HomingMine: a.eR, HarpoonGun: a.k8, Log: a.Zb, Meteor: a.l2, Mine: a.zn, NPCharacter: a.bx, Rail: a.S0, Paddle: a.q6, SoccerBall: a.jx, Spikes: a.Xe, SignPost: a.y6, SpringBox: a.fx, Table: a.iA, Token: a.WU, Toilet: a.qc, TV: a.TV, Van: a.mW, WreckingBall: a.Uw, TextBox: a.zC, BloodParticle: d, BloodParticleLine: u }, y = i(33), v = i(128), g = i(493), S = i(306), _ = i(74), w = (i(26), i(42), i(30), i(61), i(40)), b = i(25), C = i(322), L = i(162), B = i(59);
            function A(e, t) {
                return (A = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var E = function (e) {
                var t, i, s, r;
                function o(t) {
                    var i;
                    void 0 === t && (t = { rating: 0, mcName: "mc_votestars_large" }), (i = e.call(this) || this).maxRating = 5;
                    var s = new h.KG((0, b.qX)("GameUI", t.mcName));
                    return s.convertChildren(), i.addChild(s), i.filler = s.filler, i.filler.mask = s.starMask, i.addChild(i.filler), i.rating = t.rating, i.mouseChildren = false, i;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, A(t, i), s = o, (r = [{
                    key: "rating", get: function () {
                        return this._rating;
                    }, set: function (e) {
                        this._rating = e, this.filler.scaleX = e / this.maxRating;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(s.prototype, r), Object.defineProperty(s, "prototype", { writable: false }), o;
            }(h.jy);
            function M(e, t) {
                return (M = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var k = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    (i = e.call(this) || this).authorPress = function (e) {
                        if (i.authorBtn.active) {
                            var t = new h.RW(l.Z.siteURL + "profile.tjf?uid=" + i._levelDataObject.author_id);
                            (0, h.hR)(t, "_blank"), m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.GOTO_USER_PAGE, "userID_" + i._levelDataObject.author_id);
                        }
                    };
                    var s = new h.KG((0, b.qX)("GameUI", "mc_levellistitem"));
                    return s.convertChildren(), i.addChild(s), i.titleText = h.nv.spriteToTextField(s.titleText, s), i.authorText = h.nv.spriteToTextField(s.authorText, s), i.playsText = h.nv.spriteToTextField(s.playsText, s), i.createdText = h.nv.spriteToTextField(s.createdText, s), i.voteStars = (0, b.Ev)(E, s, "voteStars", { mcName: "mc_votestars" }), i.bg = s.bg, i.characterFaces = s.characterFaces, i.authorBtn = s.authorBtn, i._levelDataObject = t, i.buttonMode = true, i.titleText.embedFonts = i.authorText.embedFonts = i.playsText.embedFonts = i.createdText.embedFonts = true, i.titleText.selectable = i.authorText.selectable = i.playsText.selectable = i.createdText.selectable = false, i.titleText.text = i._levelDataObject.name, i.authorText.text = i._levelDataObject.author_name, i.playsText.text = m.LC.addIntegerCommas(i._levelDataObject.plays), i.createdText.text = m.LC.shortenDate(i._levelDataObject.created), i.voteStars.rating = i._levelDataObject.average_rating, 0 == i._levelDataObject.character ? i.characterFaces.gotoAndStop(l.Z.totalCharacters + 1) : i.characterFaces.gotoAndStop(i._levelDataObject.character), i.authorBtn.width = i.authorText.textWidth + 5, i.authorBtn.visible = false, i.authorBtn.addEventListener(h.TF.MOUSE_UP, i.authorPress, false, 0, true), i.authorBtn.pixiSprite.on("pointerover", function () {
                        return i.authorBtn.active = true;
                    }), i.authorBtn.pixiSprite.on("pointerout", function () {
                        return i.authorBtn.active = false;
                    }), i.rollOut(), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, M(t, i);
                var r, o, n = s.prototype;
                return n.rollOver = function () {
                    this.bg.gotoAndStop(2), this.textColor = 4032711;
                }, n.rollOut = function () {
                    this._selected ? this.rollOver() : (this.bg.gotoAndStop(1), this.textColor = 8947848);
                }, n.mouseDown = function () {
                    this._selected || (this.bg.gotoAndStop(3), this.textColor = 16777215);
                }, r = s, (o = [{
                    key: "textColor", set: function (e) {
                        this.titleText.textColor = this.authorText.textColor = this.playsText.textColor = this.createdText.textColor = e;
                    }
                }, {
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, this._selected ? (this.authorText.htmlText = "<u>" + this.authorText.text + "</u>", this.rollOver(), this.authorBtn.visible = true, this.bg.alpha = 1, B.ij.instance.playSoundItem("MenuSelect2")) : (this.authorText.htmlText = this.authorText.text, this.rollOut(), this._faded && (this.bg.alpha = s.FADE_VALUE), this.authorBtn.visible = false);
                    }
                }, {
                    key: "faded", get: function () {
                        return this._faded;
                    }, set: function (e) {
                        this._faded = e, this._faded && !this._selected ? this.bg.alpha = s.FADE_VALUE : this.bg.alpha = 1;
                    }
                }, {
                    key: "levelDataObject", get: function () {
                        return this._levelDataObject;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function x(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function O(e, t) {
                return (O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            k.BG_HEIGHT = 22, k.FADE_VALUE = .5;
            var T = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    (i = e.call(this) || this).fullHeight = 154, i.scroll = function (e) {
                        if (i.mouseX > 0 && i.mouseX < 250 && i.mouseY > 0 && i.mouseY < i.fullHeight) {
                            var t = i.fullHeight / 2, s = (t - i.mouseY) / t * 10, r = .5 * e.delta;
                            i.comments.y += s * r, i.comments.y + i.comments.height < i.fullHeight && (i.comments.y = i.fullHeight - i.comments.height), i.comments.y > 0 && (i.comments.y = 0);
                        }
                    }, i.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case i.playButton:
                                if (1 == i._levelDataObject.id) return void i.showUnplayableLevelPrompt();
                                m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.LOAD_LEVEL, "levelID_" + i._levelDataObject.id), i.dispatchEvent(new w.z4(w.z4.SESSION, i._levelDataObject));
                                break;
                            case i.authorLevelsButton:
                                m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.GET_LEVELS_BY_AUTHOR, "authorID_" + i._levelDataObject.author_id), i.dispatchEvent(new w.TM(w.TM.USER, i._levelDataObject));
                                break;
                            case i.viewReplaysButton:
                                if (1 == i._levelDataObject.id) return void i.showUnplayableLevelPrompt();
                                m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.GOTO_REPLAY_BROWSER, "levelID_" + i._levelDataObject.id);
                                var t = new w.z4(w.z4.REPLAY_BROWSER, i._levelDataObject);
                                t.target = x(i), i.dispatchEvent(t);
                                break;
                            case i.importButton:
                                break;
                            case i.flagButton:
                                i.dispatchEvent(new w.TM(w.TM.FLAG, i._levelDataObject.id)), s.flaggedLevels.push(i._levelDataObject.id), i.flagButton.disabled = true;
                                break;
                            case i.favoriteButton:
                                if (l.Z.favoriteLevelIds.indexOf(i._levelDataObject.id) > -1) {
                                    var r = w.TM.REMOVE_FROM_FAVORITES;
                                    m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.REMOVE_FAVORITE);
                                } else r = w.TM.ADD_TO_FAVORITES, m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.ADD_FAVORITE);
                                i.dispatchEvent(new w.TM(r, i._levelDataObject.id)), i.favoriteButton.disabled = true;
                        }
                    };
                    var r = (0, b.qX)("GameUI", "mc_levelselection");
                    i.__mc = r;
                    var o = [];
                    r.children.forEach(function (e) {
                        var t;
                        e instanceof v.MovieClip ? (t = new h.KG(null, false)).setPixiMovieClip(e) : t = new h.jy(e, false), e.name ? (t.name = t.pixiSprite.name = e.name, i[e.name] = t) : t.name = t.pixiSprite.name = "unknown", o.push(t);
                    }), o.forEach(function (e) {
                        i.addChild(e);
                    }), i.descriptionText = h.nv.spriteToTextField(i.descriptionText, x(i)), i.characterText = h.nv.spriteToTextField(i.characterText, x(i)), i.commentsText = h.nv.spriteToTextField(i.commentsText, x(i)), i.avgRatingText = h.nv.spriteToTextField(i.avgRatingText, x(i)), i.wtdRatingText = h.nv.spriteToTextField(i.wtdRatingText, x(i)), i.linkText = h.nv.spriteToTextField(i.linkText, x(i)), i.playButton = (0, b.Ev)(n.bY, x(i), "playButton", { fileName: "GameUI", mcName: "mc_levelselection_play_button" }), i.linkText.type = h.T3.INPUT, i.linkText._pixiTextInput._dom_input.setAttribute("readonly", ""), i.linkText._pixiTextInput.setInputStyle("width", "248px"), i._levelDataObject = t, i.shadow.mouseEnabled = false, i.descriptionText.autoSize = h.ie.LEFT, i.descriptionText.wordWrap = true, i.descriptionText.text = i._levelDataObject.comments, i._levelDataObject.forceChar ? i.characterText.text = l.Z.characterNames[i._levelDataObject.character - 1] : i.characterText.text = "all", i.avgRatingText.text = String(m.LC.setToHundredths(i._levelDataObject.average_rating)) + " / 5.00 (" + i._levelDataObject.votes + " votes)", i.wtdRatingText.text = String(m.LC.setToHundredths(i._levelDataObject.weighted_rating)) + " / 5.00 (" + i._levelDataObject.votes + " votes)", i.linkText._pixiTextInput.text = l.Z.siteURL + "happy_wheels.tjf?level_id=" + i._levelDataObject.id, i.viewReplaysButton = new n.Me("view replays/records", 16613761, 166), i.addChild(i.viewReplaysButton), i.viewReplaysButton.x = 548, i.viewReplaysButton.y = 57, i.authorLevelsButton = new n.Me("view levels by this author", 16613761, 166), i.addChild(i.authorLevelsButton), i.authorLevelsButton.x = 548, i.authorLevelsButton.y = 89, i.flagButton = new n.Me("flag as inappropriate", 13421772, 166, 6312772), i.addChild(i.flagButton), i.flagButton.x = 548, i.flagButton.y = 121, i.flagButton.disabled = true;
                    var a = l.Z.favoriteLevelIds.indexOf(t.id) > -1 ? "remove favorite" : "add to favorites";
                    return i.favoriteButton = new n.Me(a, 16776805, 120, 6312772), i.addChild(i.favoriteButton), i.favoriteButton.x = 258, i.favoriteButton.y = 89, i.importButton = new n.Me("<< open in editor", 13421772, 120, 6312772), i.importButton.x = 258, i.importButton.y = 57, i._levelDataObject.importable ? i.importButton.addEventListener(h.TF.ROLL_OVER, i.importButtonRoll) : i.importButton.visible = false, i.comments = new h.jy, i.addChild(i.comments), i.comments.addChild(i.descriptionText), i.comments.addChild(i.commentsText), i.comments.graphics.beginFill(15724527, 0), i.comments.graphics.drawRect(0, 0, 250, i.comments.height), i.comments.graphics.endFill(), i.comments.height > i.fullHeight && i.addEventListener(h.ju.ENTER_FRAME, i.scroll), i.addChild(i.shadow), i.shadow.visible = false, i.maskSprite = new h.jy, i.addChild(i.maskSprite), i.maskSprite.graphics.beginFill(16711680, 1), i.maskSprite.graphics.drawRect(0, 0, i.shadow.width, i.shadow.height), i.maskSprite.graphics.endFill(), i.maskSprite.visible = false, i.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, O(t, i);
                var r, o, a = s.prototype;
                return a.showUnplayableLevelPrompt = function () {
                    var e = new n.sP("This level is currently not playable.", "dangit").window;
                    this.stage && (this.stage.addChild(e), e.center());
                }, a.importButtonRoll = function (e) {
                    n.xx.instance.show("Importing has been abused, so I'm disabling it for a while to see if things get better.", this.importButton);
                }, a.die = function () {
                    this.removeEventListener(h.ju.ENTER_FRAME, this.scroll), this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.importButton.removeEventListener(h.TF.ROLL_OVER, this.importButtonRoll);
                }, r = s, (o = [{
                    key: "levelDataObject", get: function () {
                        return this._levelDataObject;
                    }
                }, {
                    key: "maskHeight", get: function () {
                        return this.maskSprite.height;
                    }, set: function (e) {
                        this.shadow.height = this.maskSprite.height = e, this.actualMask || (this.actualMask = new h.jy), this.addChild(this.actualMask), this.actualMask.graphics.clear(), this.actualMask.graphics.beginFill(16711680, 1), this.actualMask.graphics.drawRect(0, 0, this.shadow.width, this.maskSprite.height), this.pixiSprite.mask = this.actualMask.graphics.pixiGraphics;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function P(e, t) {
                return (P = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            T.flaggedLevels = [];
            var R = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    void 0 === i && (i = -1), void 0 === r && (r = -1), (o = e.call(this) || this)._tweenVal = 0, o.tweenTime = .25, o.keyDownHandler = function (e) {
                        if (!o.opening) switch (e.keyCode) {
                            case 38:
                                o.selectPreviousListItem();
                                break;
                            case 40:
                                o.selectNextListItem();
                        }
                    }, o.mouseOverHandler = function (e) {
                        if (e) {
                            var t = e;
                            e.buttonDown ? t.mouseDown() : t.rollOver();
                        }
                    }, o.mouseOutHandler = function (e) {
                        e && e.rollOut();
                    }, o.mouseDownHandler = function (e) {
                        if ("bg" === e.target.name) {
                            var t = e.target.parent.parent;
                            t.mouseDown(), t.buttonDown = false;
                        }
                    }, o.mouseUpHandler = function (e) {
                        if ("bg" === e.target.name) {
                            var t = e.target.parent.parent;
                            o.selectedListItem ? (t != o.selectedListItem ? (o.selectedListItem.selected = false, o.selectedListItem = t, o.selectedListItem.selected = true) : (o.selectedListItem.selected = false, o.selectedListItem = null), o.closing || o.closeSelection()) : (o.selectedListItem = t, t.selected = true, o.closing || o.openSelection()), t.buttonDown = false;
                        } else if (e.target instanceof h.KG) {
                            var i = e.target;
                            "characterFaces" == i.name && (o.selectedCharacter = i.currentFrame, o.dispatchEvent(new h.ju(s.FACE_SELECTED)));
                        }
                    }, o.closingComplete = function () {
                        o.closing = false, o.removeChild(o.levelSelection), o.levelSelection = null, o.selectedListItem ? o.openSelection() : (o.organizeList(), o.dispatchEvent(new h.ju(s.UPDATE_SCROLLER)));
                    }, o.openComplete = function () {
                        o.opening = false;
                    }, o.cloneAndDispatchEvent = function (e) {
                        var t = e.clone();
                        t.target = function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(o), o.dispatchEvent(t);
                    }, o.listItemArray = [];
                    for (var n = 0, a = k.BG_HEIGHT, l = t.length, c = function () {
                        var e = t[d], s = new k(e);
                        o.addChild(s), o.listItemArray.push(s), s.y = n, n += a, e.id == i && (o.selectedListItem = s), s.mouseEnabled = true, s.mouseChildren = true, s.bg.pixiSprite.on("pointerover", function () {
                            return o.mouseOverHandler(s);
                        }), s.bg.pixiSprite.on("pointerout", function () {
                            return o.mouseOutHandler(s);
                        }), s.bg.addEventListener(h.TF.MOUSE_DOWN, o.mouseDownHandler), s.bg.addEventListener(h.TF.MOUSE_UP, o.mouseUpHandler), s.characterFaces.addEventListener(h.TF.MOUSE_UP, o.mouseUpHandler);
                    }, d = 0; d < l; d++) c();
                    return o.selectedListItem && (o.selectedListItem.selected = true, o.openSelection()), o.selectedCharacter = r, o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, P(t, i);
                var r, o, n = s.prototype;
                return n.selectPreviousListItem = function () {
                    if (this.selectedListItem) {
                        var e = this.listItemArray.indexOf(this.selectedListItem);
                        if (0 == e) return;
                        this.selectedListItem.selected = false, e -= 1, this.selectedListItem = this.listItemArray[e], this.selectedListItem.selected = true, this.closing || this.closeSelection();
                    }
                }, n.selectNextListItem = function () {
                    if (this.selectedListItem) {
                        var e = this.listItemArray.indexOf(this.selectedListItem);
                        if (e == this.listItemArray.length - 1) return;
                        this.selectedListItem.selected = false, e += 1, this.selectedListItem = this.listItemArray[e], this.selectedListItem.selected = true, this.closing || this.closeSelection();
                    }
                }, n.closeSelection = function (e) {
                    void 0 === e && (e = false), e && this.selectedListItem && (this.selectedListItem.selected = false, this.selectedListItem = null), this.closing = true, this.killLevelSelection(), L.iC.to(this, this.tweenTime, { tweenVal: 0, ease: L.Yp.easeInOut, onComplete: this.closingComplete });
                }, n.killLevelSelection = function () {
                    this.levelSelection.die(), this.levelSelection.removeEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.z4.EDITOR, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.z4.REPLAY_BROWSER, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.TM.USER, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.TM.FLAG, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.TM.ADD_TO_FAVORITES, this.cloneAndDispatchEvent), this.levelSelection.removeEventListener(w.TM.REMOVE_FROM_FAVORITES, this.cloneAndDispatchEvent);
                }, n.openSelection = function () {
                    var e = this.getChildIndex(this.selectedListItem) + 1;
                    this.levelSelection = new T(this.selectedListItem.levelDataObject), this.levelSelection.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.z4.EDITOR, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.z4.REPLAY_BROWSER, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.TM.USER, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.TM.FLAG, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.TM.ADD_TO_FAVORITES, this.cloneAndDispatchEvent), this.levelSelection.addEventListener(w.TM.REMOVE_FROM_FAVORITES, this.cloneAndDispatchEvent), this.addChildAt(this.levelSelection, e), this.levelSelection.maskHeight = 0, this.opening = true, L.iC.to(this, this.tweenTime, { tweenVal: 1, ease: L.Yp.easeInOut, onComplete: this.openComplete });
                }, n.organizeList = function () {
                    var e;
                    this.selectedListItem && (e = this.selectedListItem.y);
                    for (var t, i = this.numChildren, s = 0, r = 0; r < i; r++) (t = this.getChildAt(r)).y = s, s += t instanceof k ? k.BG_HEIGHT : t instanceof T ? t.maskHeight : t.height;
                    if (this.selectedListItem) {
                        var o = e - this.selectedListItem.y;
                        this.y += o, (o = this.y + this.selectedListItem.y) < 0 && (this.y -= o);
                    }
                    if (this.levelSelection && this.opening) {
                        var n = this.levelSelection.y + this.levelSelection.maskHeight;
                        (o = 352 - this.y - n) < 0 && (this.y += o);
                    }
                }, n.die = function () {
                    var e = this;
                    this.listItemArray.forEach(function (t) {
                        t.bg.pixiSprite.off("pointerover"), t.bg.pixiSprite.off("pointerout"), t.bg.removeEventListener(h.TF.MOUSE_DOWN, e.mouseDownHandler), t.bg.removeEventListener(h.TF.MOUSE_UP, e.mouseUpHandler), t.characterFaces.removeEventListener(h.TF.MOUSE_UP, e.mouseUpHandler);
                    }), this.levelSelection && this.killLevelSelection();
                }, r = s, (o = [{
                    key: "tweenVal", get: function () {
                        return this._tweenVal;
                    }, set: function (e) {
                        this._tweenVal = e, this.levelSelection.maskHeight = Math.round(this.levelSelection.fullHeight * e), this.organizeList(), this.dispatchEvent(new h.ju(s.UPDATE_SCROLLER));
                    }
                }, {
                    key: "height", get: function () {
                        var e = this.numChildren * k.BG_HEIGHT;
                        return this.levelSelection && (e += this.levelSelection.maskHeight - k.BG_HEIGHT), e;
                    }, set: function (e) {
                        throw new Error("cannot set list height manually");
                    }
                }, {
                    key: "selectedCharacter", get: function () {
                        return this._selectedCharacter;
                    }, set: function (e) {
                        if (e > 0 && this._selectedCharacter != e) {
                            this._highlightedArray = [];
                            for (var t = this.listItemArray.length, i = 0; i < t; i++) {
                                var r = this.listItemArray[i], o = r.characterFaces.currentFrame;
                                o == e ? (r.faded = false, this._highlightedArray.push(r)) : r.faded = true;
                            }
                            this._selectedCharacter = e;
                        } else {
                            for (this._highlightedArray = null, t = this.listItemArray.length, i = 0; i < t; i++) o = (r = this.listItemArray[i]).characterFaces.currentFrame, r.faded = false;
                            this._selectedCharacter = -1, this.dispatchEvent(new h.ju(s.FACE_SELECTED));
                        }
                    }
                }, {
                    key: "highlightedArray", get: function () {
                        return this._highlightedArray;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            R.UPDATE_SCROLLER = "updatescroller", R.FACE_SELECTED = "faceselected";
            var D = i(401);
            function I(e, t) {
                return (I = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var j = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    var o;
                    (o = e.call(this) || this).spacing = 5, o.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case o.leftArrow:
                                o.flipPage(-1);
                                break;
                            case o.rightArrow:
                                o.flipPage(1);
                        }
                    };
                    var n = new h.KG((0, b.qX)("GameUI", "mc_pageflipper_new"));
                    return n.convertChildren(), o.addChild(n), o.textField = h.nv.spriteToTextField(n.textField, n), o.leftArrow = n.leftArrow, o.rightArrow = n.rightArrow, o._currentPage = t, o._pageLength = i, o._totalItems = s, o.showTotal = r, o._prevPage = 1 != o._currentPage, (!r || o._totalItems > o._currentPage * o._pageLength) && (o._nextPage = true), o.textField.autoSize = h.ie.LEFT, o.textField.wordWrap = false, o.textField.multiline = false, o.textField.y -= 2, o.setTextItems(), o.leftArrow.buttonMode = o.rightArrow.buttonMode = true, o.addEventListener(h.TF.MOUSE_UP, o.mouseUpHandler), o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, I(t, i);
                var r, o, n = s.prototype;
                return n.setTextItems = function () {
                    var e = (this._currentPage - 1) * this._pageLength + 1, t = this.showTotal ? String(this._totalItems) : "many";
                    if (this._nextPage) {
                        var i = this._currentPage * this._pageLength;
                        this.textField.text = String(e) + " - " + i + " of " + t + "  ";
                    } else i = (this._currentPage - 1) * this._pageLength + 1 + this._totalItems, i = this._totalItems, this.textField.text = String(e) + " - " + i + " of " + t + "  ";
                    this.organize();
                }, n.organize = function () {
                    this.leftArrow.x = this.rightArrow.x - this.spacing, this.textField.x = this.leftArrow.x - this.leftArrow.width - this.textField.width, 1 == !this._prevPage ? (this.leftArrow.alpha = .3, this.leftArrow.mouseEnabled = false) : (this.leftArrow.alpha = 1, this.leftArrow.mouseEnabled = true), this._nextPage ? (this.rightArrow.alpha = 1, this.rightArrow.mouseEnabled = true) : (this.rightArrow.alpha = .3, this.rightArrow.mouseEnabled = false);
                }, n.flipPage = function (e) {
                    var t = this._currentPage + e;
                    this._currentPage = t, this.dispatchEvent(new h.ju(s.FLIP_PAGE));
                }, n.die = function () {
                    this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler);
                }, r = s, (o = [{
                    key: "currentPage", get: function () {
                        return this._currentPage;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function F(e, t) {
                return (F = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            j.FLIP_PAGE = "flippage", i(34), i(132);
            var J = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).glowStrength = 0, t.glowCounter = 0, t.glowStep = .1, t.shakeCounter = 0, t.shakeStep = 1, t.shakeMaxAngle = 15, t.maxGlowStrength = 3, t.rollOverHandler = function (e) {
                        void 0 === e && (e = null), t.mouseContact = true, t.shakeActive = true, n.xx.instance.show("refresh results", function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(t));
                    }, t.rollOutHandler = function (e) {
                        void 0 === e && (e = null), t.mouseContact = false, n.xx.instance.hide();
                    }, t.step = function (e) {
                        var i = .5 * e.delta;
                        if (t.spinActive) t.shapeSprite.rotation = (t.shapeSprite.rotation + 15) % 360, "0" == t.shapeSprite.rotation.toFixed(0).toString() && t._disableSpin && (t.spinActive = false, t._disableSpin = false); else if (t.shakeActive) {
                            var s = Math.PI * t.shakeCounter / 10;
                            t.shapeSprite.rotation = Math.round(20 * Math.sin(s)), t.shakeCounter += t.shakeStep, "0" != t.shapeSprite.rotation.toFixed(0).toString() || t.mouseContact || (t.shakeActive = false);
                        }
                        t.glowActive && (t.glowFilter.strength = (.5 * -Math.cos(t.glowCounter) + .5) * t.maxGlowStrength, t.glowCounter += t.glowStep * i, t.filters = [t.bevelFilter, t.glowFilter, t.shadowFilter]);
                    }, t.mouseChildren = false, t.buttonMode = true, t.tabEnabled = false, t.areaSprite = new h.jy, t.addChild(t.areaSprite), t.areaSprite.graphics.beginFill(0), t.areaSprite.graphics.drawRect(0, 0, 20, 20), t.areaSprite.graphics.endFill(), t.areaSprite.visible = false, t.hitArea = t.areaSprite, t.shapeSprite = new h.KG((0, b.qX)("GameUI", "mc_refresh_shape")), t.addChild(t.shapeSprite), t.shapeSprite.x = 10, t.shapeSprite.y = 10, t.bevelFilter = new h.uq(2, 90, 16777215, .3, 0, .3, 3, 3, 1, 3), t.shadowFilter = new h.pt(2, 90, 0, 1, 4, 4, .25, 3), t.glowFilter = new h.Vw(4032711, 1, 5, 5, 0, 3, false, false), t.alpha = .55, t.mouseEnabled = false, t.filters = [t.bevelFilter, t.shadowFilter], t.addEventListener(h.TF.ROLL_OVER, t.rollOverHandler, false, 0, true), t.addEventListener(h.TF.ROLL_OUT, t.rollOutHandler, false, 0, true), t.addEventListener(h.ju.ENTER_FRAME, t.step, false, 0, true), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, F(t, i);
                var r, o, a = s.prototype;
                return a.setGlow = function (e) {
                    e && !this.glowActive ? (this.alpha = 1, this.mouseEnabled = true, this.glowActive = true, this.glowStrength = 0, this.glowCounter = 0, this.filters = [this.bevelFilter, this.glowFilter, this.shadowFilter]) : e || (this.alpha = .55, this.mouseEnabled = false, this.glowActive = false, this.filters = [this.bevelFilter, this.shadowFilter]);
                }, a.setSpin = function (e) {
                    n.xx.instance.hide(), e && !this.spinActive ? (this.shakeActive = false, this.shakeCounter = 0, this.spinActive = true, this.shapeSprite.rotation -= this.shapeSprite.rotation % 15) : e || (this._disableSpin = true);
                }, r = s, (o = [{
                    key: "disableSpin", set: function (e) {
                        this._disableSpin = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function G(e, t) {
                return (G = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var H = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).keyDownHandler = function (e) {
                        13 == e.keyCode && t.validateTerm();
                    }, t.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case t.searchButton:
                                t.validateTerm();
                                break;
                            case t.cancelButton:
                                t.dispatchEvent(new h.ju(s.CANCEL));
                        }
                    };
                    var i = new h.KG((0, b.qX)("GameUI", "mc_SearchLevelMenu"));
                    return i.convertChildren(), t.addChild(i), t.searchText = h.nv.spriteToTextField(i.searchText, i), t.errorText = h.nv.spriteToTextField(i.errorText, i), t.searchText.type = h.T3.INPUT, t.searchText._pixiTextInput.setInputStyle("width", "142px"), t.createWindow(), t.dropMenu = new C.m("search by:", ["level name", "author name"], [s.LEVEL_NAME, s.AUTHOR_NAME], s.index, 8947848), t.addChild(t.dropMenu), t.dropMenu.xLeft = 25, t.dropMenu.y = 14, t.searchButton = new n.Me("search", 16613761, 70), t.addChild(t.searchButton), t.searchButton.x = 25, t.searchButton.y = 114, t.cancelButton = new n.Me("cancel", 10066329, 70), t.addChild(t.cancelButton), t.cancelButton.x = 105, t.cancelButton.y = 114, t.searchText.maxChars = s.maxChars, t.searchText.restrict = "a-z A-Z 0-9 !@#$%\\^&*()_+\\-='|?/,.<> \"", t.addEventListener(h.TF.MOUSE_UP, t.mouseUpHandler), t.searchText.addEventListener(h._d.KEY_DOWN, t.keyDownHandler), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, G(t, i);
                var r, o, a = s.prototype;
                return a.createWindow = function () {
                    this._window = new n.Rz(false, this, true);
                }, a.validateTerm = function () {
                    if (this.searchText.text = this.searchText._pixiTextInput.text, this.searchText.text = m.LC.trimWhitespace(this.searchText.text), this.searchText.length < s.minChars) {
                        var e = "must be between " + s.minChars + " and " + s.maxChars + " characters";
                        this.errorText.text = e;
                    } else this.dispatchEvent(new h.ju(s.SEARCH));
                }, a.die = function () {
                    s.index = this.dropMenu.currentIndex, this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.dropMenu.die(), this._window.closeWindow();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }, {
                    key: "searchType", get: function () {
                        return this.dropMenu.value;
                    }
                }, {
                    key: "searchTerm", get: function () {
                        return this.searchText.text;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function V(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function N(e, t) {
                return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            H.AUTHOR_NAME = "author", H.LEVEL_NAME = "level", H.SEARCH = "search", H.CANCEL = "CANCEL", H.index = 0, H.minChars = 4, H.maxChars = 12;
            var U = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    var o;
                    return void 0 === r && (r = 16777215), (o = e.call(this, t, i, s, r) || this).rollOverHandlerBind = o.rollOverHandler.bind(V(o)), o.rollOutHandlerBind = o.rollOutHandler.bind(V(o)), o.that = V(o), o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, N(t, i);
                var r = s.prototype;
                return r.createTextField = function () {
                    var e = new h.SQ("HelveticaNeueLT Std Med", 12, this._txtColor, null, null, null, null, null, h.O3.CENTER);
                    this.textField = new h.nv, this.textField.borderColor = 16711680, this.textField.defaultTextFormat = e, this.textField.autoSize = h.ie.CENTER, this.textField.height = 20, this.textField.y = 3, this.textField.multiline = false, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = h.ML.ADVANCED, this.addChild(this.textField);
                    var t = this.mc = new h.KG((0, b.qX)("GameUI", "mc_XButton"));
                    t.convertChildren(), this.addChild(t), this.XSprite = t.XSprite, this.XSprite.tint = this._txtColor;
                    var i = this.XSprite.transform.colorTransform;
                    i.color = this._txtColor, this.XSprite.transform.colorTransform = i;
                }, r.createBg = function () {
                    this.textField.autoSize = h.ie.NONE, this.textField.width = Math.ceil(this.textField.width + 20), this.textField.x = 0;
                    var t = this.textField.width + 2;
                    this.XSprite.x = t + 1.5 * this.XSprite.width, this.XSprite.y = 11.5, this._bgWidth = this.textField.width + 18 + 1.5 * this.XSprite.width, e.prototype.createBg.call(this);
                }, r.rollOverHandler = function (e) {
                    void 0 === e && (e = null), this.textField.alpha = this.mc.XSprite.alpha = 1;
                }, r.rollOutHandler = function (e) {
                    void 0 === e && (e = null), this._selected || (this.textField.alpha = this.mc.XSprite.alpha = this.offAlpha);
                }, s;
            }(n.Me);
            function W(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function X(e, t) {
                return (X = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Y = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).loadData = function (e) {
                        void 0 === e && (e = null);
                        for (var i = 0; i < t.dropMenuArray.length; i++) s.savedDropSettings[i] = s.currentDropSettings[i], s.savedDropStates[i] = s.currentDropStates[i];
                        t.refreshButton.setSpin(true), s.savedSearch = 0, s.levelDataArray = [];
                        var r = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                        r.method = h.H9.POST, s.urlVariables = new h.JH, s.urlVariables.action = "get_all", s.urlVariables.page = s.currentSet = s.currentPage = 1, s.urlVariables.sortby = t.sortDropMenu.value, s.urlVariables.uploaded = t.uploadDropMenu.value, s.levelSearch ? (s.savedSearch = 1, s.urlVariables.action = "search_by_name", s.urlVariables.sterm = s.levelSearch) : s.authorNameSearch ? (s.savedSearch = 2, s.urlVariables.action = "search_by_user", s.urlVariables.sterm = s.authorNameSearch) : s._favorites ? (s.savedSearch = 3, r.url = window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/user.hw"), s.urlVariables = new h.JH, s.urlVariables.action = "get_favorites", l.Z.favoriteLevelIds = []) : 0 != t.authorDropMenu.value ? (s.urlVariables.action = "get_pub_by_user", s.urlVariables.user_id = t.authorDropMenu.value) : e && m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.REFRESH_LEVELS, t.sortDropMenu.value + "_" + t.uploadDropMenu.value), r.data = s.urlVariables, t.statusSprite = new n.dU("loading levels...");
                        var o = t.statusSprite.window;
                        t.addChild(o), o.center(), t.loader = new h.yW, t.loader.addEventListener(h.ju.COMPLETE, t.levelDataLoaded), t.loader.addEventListener(h.XD.IO_ERROR, t.IOErrorHandler), t.loader.addEventListener(h.P5.SECURITY_ERROR, t.securityErrorHandler), t.loader.load(r);
                    }, t.levelDataLoaded = function (e) {
                        var i;
                        t.statusSprite.die(), t.removeLoaderListeners(), t.refreshButton.setSpin(false);
                        var r = String(t.loader.data), o = r.substr(0, 8);
                        if (o.indexOf("<html>") > -1) return t.createPromptSprite("There was an unexpected system Error", "oh"), void t.updateRefreshButton(true);
                        if (o.indexOf("failure") > -1) {
                            var n = r.split(":");
                            return "invalid_action" == n[1] ? t.createPromptSprite("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" == n[1] ? t.createPromptSprite("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == n[1] ? t.createPromptSprite("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : t.createPromptSprite("An unknown Error has occurred.", "oh"), void t.updateRefreshButton(true);
                        }
                        t.updateRefreshButton();
                        var a = new h.hH(t.loader.data), c = (0, h.e$)(a["@pp"]);
                        c > 1 && (s.setLength = c), s.levelDataArray || (s.levelDataArray = []);
                        for (var d = null === (i = a.lv) || void 0 === i ? void 0 : i.length, p = 0; p < d; p++) {
                            var u = a.lv[p], m = new _.bm(u["@id"], u["@ln"], u["@ui"], u["@un"], u["@rg"], u["@vs"], u["@ps"], u["@dp"], u.uc[0].cdata, u["@pc"], 1, 1, 1, u["@dp"]);
                            s.levelDataArray.push(m), s._favorites && l.Z.favoriteLevelIds.push(m.id);
                        }
                        t.list && t.killList(), t.buildList();
                    }, t.IOErrorHandler = function (e) {
                        t.statusSprite && t.statusSprite.die(), t.removeLoaderListeners(), t.updateRefreshButton(), t.refreshButton.setSpin(false), t.createPromptSprite("Sorry, there was an IO Error. Try changing your CORS proxy?", "ugh, ok");
                    }, t.securityErrorHandler = function (e) {
                        t.statusSprite && t.statusSprite.die(), t.removeLoaderListeners(), t.updateRefreshButton(), t.refreshButton.setSpin(false), t.createPromptSprite("Sorry, there was a Security Error.", "ugh, ok");
                    }, t.dropMenuSelected = function (e) {
                        var i;
                        if (void 0 === e && (e = null), null != e) var r = e.target; else r = t.authorDropMenu;
                        var o = r.currentIndex;
                        r == t.authorDropMenu ? (i = 0, s.currentDropStates = o > 0 ? [1, 0, 0] : [1, 1, 1]) : i = r == t.sortDropMenu ? 1 : 2, s.currentDropSettings[i] = o, t.organizeDropMenus(), t.updateRefreshButton(null == e);
                    }, t.backPress = function (e) {
                        m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.GOTO_MAIN_MENU), t.dispatchEvent(new w.z4(w.z4.MAIN_MENU));
                    }, t.listFavorites = function (e) {
                        s._favorites || (t.searchTermButton && t.removeSearchTerm(), m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.GET_FAVORITES), s._favorites = true, t.createSearchTermButton(3), t.loadData());
                    }, t.openSearchMenu = function (e) {
                        t.searchMenu = new H;
                        var i = t.searchMenu.window;
                        t.addChild(i), i.center(), t._pixiSprite.interactive = false, i.interactive = true, t.searchMenu.addEventListener(H.SEARCH, t.beginSearch), t.searchMenu.addEventListener(H.CANCEL, t.closeSearchMenu);
                    }, t.closeSearchMenu = function (e) {
                        void 0 === e && (e = null), t._pixiSprite.interactive = true, t.searchMenu.removeEventListener(H.SEARCH, t.beginSearch), t.searchMenu.removeEventListener(H.CANCEL, t.closeSearchMenu), t.searchMenu.die(), t.searchMenu = null;
                    }, t.beginSearch = function (e) {
                        var i = t.searchMenu.searchTerm, r = t.searchMenu.searchType;
                        t.closeSearchMenu(), t.searchTermButton && t.removeSearchTerm(), r == H.LEVEL_NAME ? (s.savedTerm = i, t.createSearchTermButton(1), m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.LEVEL_SEARCH, i), t.loadData()) : r == H.AUTHOR_NAME && (s.savedTerm = i, t.createSearchTermButton(2), m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.AUTHOR_SEARCH, i), t.loadData());
                    }, t.removeSearchTerm = function (e) {
                        void 0 === e && (e = null), s.levelSearch = null, s.authorNameSearch = null, s._favorites = false, t.searchTermButton.removeEventListener(h.TF.MOUSE_UP, t.removeSearchTerm), t.removeChild(t.searchTermButton), t.searchTermButton = null, t.dropMenuSelected();
                    }, t.editFavorites = function (e) {
                        var i = e.type == w.TM.ADD_TO_FAVORITES;
                        if (l.Z.user_id <= 0) t.createPromptSprite("You must be logged in to edit your favorite levels.  Login or register for free up there on the right.", "ok"); else if (l.Z.disableUpload) t.createPromptSprite(l.Z.disableMessage, "OH FINE"); else {
                            var s = e.extra, r = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/user.hw"));
                            r.method = h.H9.POST;
                            var o = new h.JH;
                            if (o.level_id = s, r.data = o, i) {
                                var a = "adding level to favorites...";
                                o.action = "set_favorite", t.favoriteId = s;
                            } else a = "removing level from favorites...", o.action = "delete_favorite", t.favoriteId = -s;
                            t.statusSprite = new n.dU(a);
                            var c = t.statusSprite.window;
                            t.addChild(c), c.center(), t.loader = new h.yW, t.loader.addEventListener(h.ju.COMPLETE, t.editFavoritesComplete), t.loader.addEventListener(h.XD.IO_ERROR, t.IOErrorHandler), t.loader.addEventListener(h.P5.SECURITY_ERROR, t.securityErrorHandler), t.loader.load(r);
                        }
                    }, t.editFavoritesComplete = function (e) {
                        t.statusSprite.die(), t.removeLoaderListeners();
                        var i, s = String(t.loader.data), r = s.substr(0, 8), o = s.split(":");
                        r.indexOf("<html>") > -1 ? t.createPromptSprite("There was an unexpected system Error", "oh") : "failure" == o[0] ? "not_logged_in" == o[1] ? t.createPromptSprite("You must be logged in to edit your favorite levels.  Login or register for free up there on the right.", "ok") : "duplicate" == o[1] ? t.createPromptSprite("This level is already one of your favorite levels.", "ok") : "invalid_action" == o[1] ? t.createPromptSprite("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" == o[1] ? t.createPromptSprite("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == o[1] ? t.createPromptSprite("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : t.createPromptSprite("An unknown Error has occurred.", "oh") : "success" == o[0] && (t.createPromptSprite("Favorites list updated.", "ok"), t.favoriteId > 0 ? -1 == (i = l.Z.favoriteLevelIds.indexOf(t.favoriteId)) && l.Z.favoriteLevelIds.push(t.favoriteId) : t.favoriteId < 0 && (i = l.Z.favoriteLevelIds.indexOf(-t.favoriteId)) > -1 && l.Z.favoriteLevelIds.splice(i, 1));
                    }, t.flagLevel = function (e) {
                        var i = e.extra;
                        t.statusSprite = new n.dU("flagging level...");
                        var s = t.statusSprite.window;
                        t.addChild(s), s.center();
                        var r = new h.RW(l.Z.siteURL + l.Z.FLAG_LEVEL), o = new h.JH;
                        o.levelid = i, r.data = o, t.loader = new h.yW, t.loader.dataFormat = h.mN.VARIABLES, t.loader.addEventListener(h.ju.COMPLETE, t.flagComplete), t.loader.addEventListener(h.XD.IO_ERROR, t.IOErrorHandler), t.loader.addEventListener(h.P5.SECURITY_ERROR, t.securityErrorHandler), t.loader.load(r);
                    }, t.flagComplete = function (e) {
                        t.statusSprite.die(), t.removeLoaderListeners(), "error" != t.loader.data.ToFlash && t.createPromptSprite("Level flagged, Thank you.", "ok");
                    }, t.getLevelsFromAuthor = function (e) {
                        var i = e.extra;
                        t.updateAuthors(i.author_name, i.author_id), t.authorDropMenu.currentIndex = t.authorDropMenu.valueIndex(i.author_id), s.currentDropSettings[0] = t.authorDropMenu.currentIndex, t.searchTermButton && t.removeSearchTerm(), s.currentDropStates = [1, 0, 0], t.organizeDropMenus(), t.loadData();
                    }, t.flipPage = function (e) {
                        var i = s.currentSet;
                        s.currentPage = t.pageFlipper.currentPage, s.currentSet = Math.ceil(s.currentPage * s.pageLength / s.setLength);
                        var r = s.levelDataArray.length;
                        s.currentSet > i && r <= (s.currentSet - 1) * s.setLength ? t.loadDataOffset() : (t.killList(), t.buildList());
                    }, t.cloneAndDispatchEvent = function (e) {
                        e.levelDataObject && (s.lastLevelId = e.levelDataObject.id);
                        var i = e.clone();
                        i.target = W(t), t.dispatchEvent(i);
                    }, t.faceSelected = function (e) {
                        void 0 === e && (e = null), s.selectedCharacter = t.list.selectedCharacter;
                    }, t.updateScroller = function (e) {
                        void 0 === e && (e = null), t.scrollBar.updateScrollTab();
                    };
                    var i = (0, b.qX)("GameUI", "mc_level_browser");
                    t.__mc = i;
                    var r = [];
                    return i.children.forEach(function (e) {
                        var i;
                        e instanceof v.MovieClip ? (i = new h.KG(null, false)).setPixiMovieClip(e) : i = new h.jy(e, false), e.name ? (i.name = i.pixiSprite.name = e.name, t[e.name] = i) : i.name = i.pixiSprite.name = "unknown", r.push(i);
                    }), r.forEach(function (e) {
                        t.addChild(e);
                    }), t.backButton = (0, b.Ev)(n.bY, W(t), "backButton", { fileName: "GameUI", mcName: "mc_featured_back_button" }), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, X(t, i);
                var r = s.prototype;
                return r.init = function () {
                    this.mouseChildren = false, this.shadow.mouseEnabled = false, this.refreshButton = new J, this.addChild(this.refreshButton), this.refreshButton.x = this.shadow.x + this.shadow.width + 10, this.refreshButton.y = this.shadow.y - 22, this.refreshButton.setGlow(false), this.buildDropMenus(), this.searchButton = new n.Me("search by name", 4032711, 120), this.addChild(this.searchButton), this.searchButton.x = this.shadow.x, this.searchButton.y = this.shadow.y - 27, this.searchButton.y = this.shadow.y + this.shadow.height + 6, this.favoritesButton = new n.Me("list favorites", 16776805, 120, 6312772), this.addChild(this.favoritesButton), this.favoritesButton.x = this.searchButton.x + this.searchButton.width + 6, this.favoritesButton.y = this.searchButton.y, l.Z.user_id <= 0 && this.removeChild(this.favoritesButton), this.backButton.addEventListener(h.TF.MOUSE_UP, this.backPress), this.searchButton.addEventListener(h.TF.MOUSE_UP, this.openSearchMenu), this.favoritesButton.addEventListener(h.TF.MOUSE_UP, this.listFavorites), this.refreshButton._pixiSprite.on("pointertap", this.loadData.bind(this)), s.savedSearch > 0 && this.createSearchTermButton(s.savedSearch);
                }, r.activate = function () {
                    this.mouseChildren = true, s.levelDataArray ? this.buildList() : this.loadData();
                }, s.importLevelDataArray = function (e) {
                    s.levelDataArray = e;
                    var t = s.levelDataArray[0];
                    s.lastLevelId = t.id, s.currentPage = 1, s.currentSet = 1, s.levelSearch = null, s.authorNameSearch = null, s._favorites = false;
                }, s.importAuthor = function (e, t) {
                    var i = s.authorValues.indexOf(t);
                    -1 == i ? (s.authorValues.push(t), s.authorDisplay.push(e), s.currentDropSettings = [s.authorValues.length - 1, 0, 3], s.savedDropSettings = [s.authorValues.length - 1, 0, 3], s.currentDropStates = [1, 0, 0], s.savedDropStates = [1, 0, 0]) : (s.savedDropSettings = [i, 0, 3], s.savedDropStates = [1, 0, 0]), s.authorNameSearch = null, s.levelSearch = null, s._favorites = false, s.currentPage = 1, s.currentSet = 1, s.urlVariables = null, s.levelDataArray = null;
                }, r.loadDataOffset = function () {
                    this.refreshButton.setSpin(true);
                    var e = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                    e.method = h.H9.POST, e.data = s.urlVariables, s.urlVariables.page = s.currentSet, this.statusSprite = new n.dU("loading levels...");
                    var t = this.statusSprite.window;
                    this.addChild(t), t.center(), "get_all" == s.urlVariables.action && m.fX.trackEvent(m.fX.LEVEL_BROWSER, m.fX.PAGE_LEVELS, this.sortDropMenu.value + "_" + this.uploadDropMenu.value, s.currentSet), this.loader = new h.yW, this.loader.addEventListener(h.ju.COMPLETE, this.levelDataLoaded), this.loader.addEventListener(h.XD.IO_ERROR, this.IOErrorHandler), this.loader.addEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler), this.loader.load(e);
                }, r.createPromptSprite = function (e, t) {
                    var i = new n.sP(e, t).window;
                    this.addChild(i), i.center();
                }, r.removeLoaderListeners = function () {
                    this.loader.removeEventListener(h.ju.COMPLETE, this.flagComplete), this.loader.removeEventListener(h.ju.COMPLETE, this.levelDataLoaded), this.loader.removeEventListener(h.ju.COMPLETE, this.editFavoritesComplete), this.loader.removeEventListener(h.XD.IO_ERROR, this.IOErrorHandler), this.loader.removeEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler);
                }, r.buildDropMenus = function () {
                    var e = l.Z.user_id;
                    e > 0 && -1 == s.authorValues.indexOf(e) && (s.authorValues.push(e), s.authorDisplay.push(l.Z.username));
                    for (var t = l.Z.characterNames.concat("all", "any"), i = [], r = 0; r < l.Z.totalCharacters; r++) i.push(r + 1);
                    for (i = i.concat(0, -1), this.authorDropMenu = new C.m("author:", s.authorDisplay, s.authorValues, s.savedDropSettings[0]), this.charDropMenu = new C.m("playable character:", t, i, -1), this.sortDropMenu = new C.m("sort by:", ["newest", "oldest", "play count", "rating"], ["newest", "oldest", "plays", "rating"], s.savedDropSettings[1]), this.uploadDropMenu = new C.m("uploaded:", ["today", "this week", "this month", "anytime"], ["today", "week", "month", "anytime"], s.savedDropSettings[2]), this.addChild(this.authorDropMenu), this.addChild(this.sortDropMenu), this.addChild(this.uploadDropMenu), this.authorDropMenu.y = this.charDropMenu.y = this.sortDropMenu.y = this.uploadDropMenu.y = this.shadow.y - 21, this.authorDropMenu.addEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.charDropMenu.addEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.sortDropMenu.addEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.uploadDropMenu.addEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.dropMenuArray = [this.authorDropMenu, this.sortDropMenu, this.uploadDropMenu], r = 0; r < this.dropMenuArray.length; r++) s.currentDropStates[r] = s.savedDropStates[r];
                    this.organizeDropMenus();
                }, r.organizeDropMenus = function () {
                    for (var e = this.shadow.width + this.shadow.x, t = this.dropMenuArray.length - 1; t > -1; t--) {
                        var i = this.dropMenuArray[t];
                        1 == s.currentDropStates[t] ? (i.visible = true, i.xLeft = e - i.width, e = i.xLeft - s.dropMenuSpacing) : i.visible = false;
                    }
                }, r.updateRefreshButton = function (e) {
                    void 0 === e && (e = false);
                    for (var t = 0; t < this.dropMenuArray.length; t++) s.currentDropSettings[t] != s.savedDropSettings[t] && (e = true);
                    this.refreshButton.setGlow(e);
                }, r.createSearchTermButton = function (e) {
                    if (1 == e) {
                        s.levelSearch = s.savedTerm;
                        var t = "level name: '" + s.savedTerm + "'", i = 4032711, r = 16777215;
                    } else 2 == e ? (s.authorNameSearch = s.savedTerm, t = "author name: '" + s.savedTerm + "'", i = 16613761, r = 16777215) : 3 == e && (t = "favorites", i = 16776805, r = 6312772);
                    this.searchTermButton = new U(t, i, 120, r), this.addChild(this.searchTermButton), this.searchTermButton.x = this.shadow.x, this.searchTermButton.y = this.shadow.y - 27, s.currentDropStates = 3 == e ? [0, 0, 0] : [0, 1, 0], this.organizeDropMenus(), this.searchTermButton.addEventListener(h.TF.MOUSE_UP, this.removeSearchTerm);
                }, r.updateAuthors = function (e, t) {
                    -1 == s.authorValues.indexOf(t) && (s.authorValues.push(t), s.authorDisplay.push(e), this.authorDropMenu.addValue(e, t));
                }, r.buildList = function () {
                    var e = (s.currentPage - 1) * s.pageLength, t = e + s.pageLength;
                    t = Math.min(t, s.levelDataArray.length);
                    var i = s.levelDataArray.slice(e, t);
                    this.listContainer = new h.jy, this.list = new R(i, s.lastLevelId, s.selectedCharacter), s.lastLevelId = -1, this.listMask = new h.jy, this.listContainer.x = this.listHeader.x, this.listContainer.y = this.listHeader.y + this.listHeader.height, this.listMask.graphics.beginFill(16711680), this.listMask.graphics.drawRect(0, 0, this.shadow.width, this.shadow.height - this.listHeader.height), this.listMask.graphics.endFill(), this.list.mask = this.listMask, this.addChildAt(this.listContainer, this.getChildIndex(this.listHeader) + 1), this.listContainer.addChild(this.list), this.listContainer.addChild(this.listMask), this.list.mouseEnabled = true, this.list.addEventListener(R.UPDATE_SCROLLER, this.updateScroller), this.list.addEventListener(R.FACE_SELECTED, this.faceSelected), window.addEventListener("keydown", this.list.keyDownHandler, false), this.list.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.list.addEventListener(w.z4.EDITOR, this.cloneAndDispatchEvent), this.list.addEventListener(w.z4.REPLAY_BROWSER, this.cloneAndDispatchEvent), this.list.addEventListener(w.TM.USER, this.getLevelsFromAuthor), this.list.addEventListener(w.TM.FLAG, this.flagLevel), this.list.addEventListener(w.TM.ADD_TO_FAVORITES, this.editFavorites), this.list.addEventListener(w.TM.REMOVE_FROM_FAVORITES, this.editFavorites), this.scrollBar = new D.R(this.list, this.listMask, 22), this.scrollBar.x = this.shadow.x + this.shadow.width + 10, this.scrollBar.y = this.listContainer.y, this.addChildAt(this.scrollBar, 2), this.faceSelected(), this.pageFlipper && (this.pageFlipper.die(), this.pageFlipper.removeEventListener(j.FLIP_PAGE, this.flipPage), this.removeChild(this.pageFlipper), this.pageFlipper = null);
                    var r = s.levelDataArray.length;
                    if (0 == r) this.createPromptSprite("no levels found using these parameters", "ok"); else {
                        var o = r % s.setLength > 0;
                        this.pageFlipper = new j(s.currentPage, s.pageLength, r, o), this.addChild(this.pageFlipper), this.pageFlipper.x = this.shadow.x + this.shadow.width, this.pageFlipper.y = this.shadow.y + this.shadow.height + 7, this.pageFlipper.addEventListener(j.FLIP_PAGE, this.flipPage);
                    }
                }, r.killList = function () {
                    window.removeEventListener("keydown", this.list.keyDownHandler, false), this.list.removeEventListener(R.UPDATE_SCROLLER, this.updateScroller), this.list.removeEventListener(R.FACE_SELECTED, this.faceSelected), this.list.removeEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.list.removeEventListener(w.z4.EDITOR, this.cloneAndDispatchEvent), this.list.removeEventListener(w.z4.REPLAY_BROWSER, this.cloneAndDispatchEvent), this.list.removeEventListener(w.TM.USER, this.getLevelsFromAuthor), this.list.removeEventListener(w.TM.FLAG, this.flagLevel), this.list.removeEventListener(w.TM.ADD_TO_FAVORITES, this.editFavorites), this.list.removeEventListener(w.TM.REMOVE_FROM_FAVORITES, this.editFavorites), this.list.die(), this.list = null, this.scrollBar.die(), this.removeChild(this.scrollBar), this.scrollBar = null, this.removeChild(this.listContainer), this.listContainer = null, this.listMask = null;
                }, r.listMouseWheelHandler = function (e) {
                    var t = e.delta < 0;
                    this.scrollBar.step(t);
                }, r.die = function () {
                    this.authorDropMenu.removeEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.charDropMenu.removeEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.sortDropMenu.removeEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.uploadDropMenu.removeEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.authorDropMenu.die(), this.charDropMenu.die(), this.sortDropMenu.die(), this.uploadDropMenu.die(), this.pageFlipper && (this.pageFlipper.die(), this.pageFlipper.removeEventListener(j.FLIP_PAGE, this.flipPage)), this.searchButton.removeEventListener(h.TF.MOUSE_UP, this.openSearchMenu), this.favoritesButton.removeEventListener(h.TF.MOUSE_UP, this.listFavorites), this.backButton.removeEventListener(h.TF.MOUSE_UP, this.backPress), this.searchTermButton && this.searchTermButton.removeEventListener(h.TF.MOUSE_UP, this.removeSearchTerm), this.refreshButton._pixiSprite.off("pointertap"), this.list && this.killList();
                }, s;
            }(h.jy);
            Y.setLength = 500, Y.pageLength = 50, Y.dropMenuSpacing = 10, Y.currentDropSettings = [0, 0, 1], Y.savedDropSettings = [0, 0, 1], Y.currentDropStates = [1, 1, 1], Y.savedDropStates = [1, 1, 1], Y.savedSearch = 0, Y.selectedCharacter = -1, Y.authorDisplay = ["everyone"], Y.authorValues = [0], Y.lastLevelId = -1, Y.currentSet = 1, Y.currentPage = 1, i(63);
            var z = i(164);
            function Z(e, t) {
                return (Z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var $ = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).mouseUpHandler = function (e) {
                        if (t.appButton.active) {
                            z.f.trackEvent(z.f.MAIN_MENU, z.f.CLICK_IOS_LINK);
                            var i = new h.RW("https://itunes.apple.com/us/app/happy-wheels/id648668184?mt=8");
                            (0, h.hR)(i, "_blank");
                        }
                    }, t.googlePlayMouseUpHandler = function (e) {
                        if (t.googlePlayAppButton.active) {
                            z.f.trackEvent(z.f.MAIN_MENU, z.f.CLICK_GOOGLEPLAY_LINK);
                            var i = new h.RW("https://play.google.com/store/apps/details?id=com.fancyforce.happywheels");
                            (0, h.hR)(i, "_blank");
                        }
                    }, t.run = function (e) {
                        var i = .5 * e.delta;
                        t.star.rotation += i;
                    };
                    var i = new h.KG((0, b.qX)("GameUI", "iosButton"));
                    return i.convertChildren(), t.addChild(i), t.appButton = i.appButton, t.googlePlayAppButton = i.googlePlayAppButton, t.head = i.head, t.appButton.buttonMode = true, t.appButton.addEventListener(h.TF.MOUSE_UP, t.mouseUpHandler, false, 0, true), t.appButton.pixiSprite.on("pointerover", function () {
                        return t.appButton.active = true;
                    }), t.appButton.pixiSprite.on("pointerout", function () {
                        return t.appButton.active = false;
                    }), t.googlePlayAppButton.buttonMode = true, t.googlePlayAppButton.addEventListener(h.TF.MOUSE_UP, t.googlePlayMouseUpHandler, false, 0, true), t.googlePlayAppButton.pixiSprite.on("pointerover", function () {
                        return t.googlePlayAppButton.active = true;
                    }), t.googlePlayAppButton.pixiSprite.on("pointerout", function () {
                        return t.googlePlayAppButton.active = false;
                    }), t.star = i.children[i.children.length - 2].star, t.star.filters = [new h.pt(12.5, 90, 0, 1, 1, 1, .2, 3)], t.addEventListener(h.ju.ENTER_FRAME, t.run, false, 0, true), t;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Z(t, i), s;
            }(h.jy);
            function K(e, t) {
                return (K = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var q = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return (i = e.call(this) || this).backPress = function (e) {
                        var t = new w.z4(w.z4.MAIN_MENU);
                        t.target = function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(i), i.dispatchEvent(t);
                    }, i.__mc = new h.KG((0, b.qX)("GameUI", t)), i.__mc.convertChildren(), i.addChild(i.__mc), i.backButton = (0, b.Ev)(n.bY, i.__mc, "backButton", { fileName: "GameUI", mcName: "mc_featured_back_button" }), i.backButton.addEventListener(h.TF.MOUSE_UP, i.backPress), i;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, K(t, i), s.prototype.die = function () {
                    this.backButton.removeEventListener(h.TF.MOUSE_UP, this.backPress);
                }, s;
            }(h.jy), Q = i(492);
            function ee(e, t) {
                return (ee = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var te = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this, "mc_CreditsMenu") || this).scroll = function (e) {
                        t.creditsSprite.y -= .5 * Number(e.delta), t.creditsSprite.y < -50 - t.creditsSprite.height && (t.creditsSprite.y = 510);
                    }, t.creditsSprite = t.__mc.creditsSprite, t.creditsSprite.y = 510, t.addEventListener(h.ju.ENTER_FRAME, t.scroll);
                    var i = t.creditsSprite.getChildByName("benText1");
                    return i && new Q.H(i, "http://contactbenhaynes.com"), i = t.creditsSprite.getChildByName("jimText"), new Q.H(i, "https://totaljerkface.com"), i = t.creditsSprite.getChildByName("jackText"), new Q.H(i, "http://www.pekopeko.com"), (i = t.creditsSprite.getChildByName("brianText")) && new Q.H(i, "http://wateristhenewfire.com"), (i = t.creditsSprite.getChildByName("jonText")) && new Q.H(i, "http://www.jonathanbelsky.com"), (i = t.creditsSprite.getChildByName("andyText")) && new Q.H(i, "http://andypressman.com"), (i = t.creditsSprite.getChildByName("benText2")) && new Q.H(i, "http://contactbenhaynes.com"), i = t.creditsSprite.getChildByName("erinText"), new Q.H(i, "http://www.box2d.org"), t.addGoodboyCredits(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ee(t, i);
                var r = s.prototype;
                return r.addGoodboyCredits = function () {
                    var e = new h.SQ("Clarendon LT Std Bold", 20, 4032711, null, null, null, null, null, h.O3.CENTER), t = new h.nv;
                    t.defaultTextFormat = e, t.text = "JavaScript port by Goodboy Digital", t.y = this.creditsSprite.height + 30, t.pixiText.anchor.set(.5, 0), this.creditsSprite.addChild(t);
                    var i = y.Sprite.from("game-ui-101");
                    i.anchor.set(.5), i.y = t.y + 30, i.width = t.width, this.creditsSprite.pixiSprite.addChild(i);
                    var s = new h.SQ("Clarendon LT Std", 18, 16777215, false, null, null, null, null, h.O3.CENTER), r = new h.nv;
                    r.multiline = true, r.defaultTextFormat = s, r.text = "Matt Sayers\nMauro de Tarso\nSean Burns\nSean Mccumskay\nNadjaha Wohedally", r.y = t.y + 40, r.pixiText.anchor.set(.5, 0), this.creditsSprite.addChild(r), t.mouseEnabled = true, t.mouseChildren = true, new Q.H(t, "https://www.goodboydigital.com/");
                }, r.die = function () {
                    e.prototype.die.call(this), this.removeEventListener(h.ju.ENTER_FRAME, this.scroll);
                }, s;
            }(q);
            function ie(e, t) {
                return (ie = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            i(29);
            var se = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    (o = e.call(this) || this).handleMouseUp = function (e) {
                        e.target == o.bg && (o.highlight(), o.inputText.text = "", o.stage.addEventListener(h._d.KEY_DOWN, o.handleKeyDown), o.dispatchEvent(new h.ju(s.FOCUS_IN)));
                    }, o.handleFocusOut = function (e) {
                        o.stage.removeEventListener(h._d.KEY_DOWN, o.handleKeyDown), o.removeEventListener(FocusEvent.FOCUS_OUT, o.handleFocusOut);
                    }, o.handleKeyDown = function (e) {
                        o._keyCode = e.keyCode;
                        var t = new n.fF(n.fF.VALUE_CHANGE, null, o._keyCode);
                        t.target = function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(o), o.dispatchEvent(t);
                    };
                    var a = new h.KG((0, b.qX)("GameUI", "CustomizeKeyInput"));
                    return a.convertChildren(), o.addChild(a), o.labelText = h.nv.spriteToTextField(a.labelText, a), o.inputText = h.nv.spriteToTextField(a.inputText, a), o.defaultText = h.nv.spriteToTextField(a.defaultText, a), o.bg = a.bg, o.labelText.text = t, o.labelText.wordWrap = true, o.labelText.width = 1e3, o.inputText.text = o.lastInput = i, o.inputText.y += 2, o.inputText.wordWrap = true, o.inputText.width = 1e3, o.inputText.mouseEnabled = false, o.defaultText.text = r, o.defaultText.wordWrap = true, o.defaultText.width = 1e3, o.mouseEnabled = true, o.bg.addEventListener(h.TF.MOUSE_UP, o.handleMouseUp), o.bg.buttonMode = true, o.bg.tabEnabled = false, o.bg.useHandCursor = true, o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ie(t, i);
                var r, o, a = s.prototype;
                return a.disable = function () {
                    this.alpha = .5, this.bg.useHandCursor = false, this.bg.buttonMode = false, this.bg.removeEventListener(h.TF.MOUSE_UP, this.handleMouseUp);
                }, a.enable = function () {
                    this.alpha = 1, this.bg.useHandCursor = true, this.bg.buttonMode = true, this.bg.filters = [], this.bg.addEventListener(h.TF.MOUSE_UP, this.handleMouseUp);
                }, a.highlight = function (e) {
                    void 0 === e && (e = false);
                    var t = e ? 16711680 : 4032711;
                    this.bg.filters = [new h.Vw(t, 1, 3, 3, 100, 3)], this.alpha = 1;
                }, a.clearHighlight = function () {
                    this.alpha = .5, this.bg.filters = [];
                }, a.die = function () {
                    this.stage.removeEventListener(h._d.KEY_DOWN, this.handleKeyDown), this.bg.removeEventListener(h.TF.MOUSE_UP, this.handleMouseUp);
                }, r = s, (o = [{
                    key: "keyCode", get: function () {
                        return this._keyCode;
                    }, set: function (e) {
                        this._keyCode = e;
                    }
                }, {
                    key: "text", set: function (e) {
                        this.bg.filters = [], this.inputText.text = e, this.lastInput = e, this.stage.removeEventListener(h._d.KEY_DOWN, this.handleKeyDown), this.dispatchEvent(new h.ju(s.FOCUS_OUT));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function re(e, t) {
                return (re = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            se.FOCUS_IN = "focusin", se.FOCUS_OUT = "focusout";
            var oe = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this, "mc_CustomizeControlsMenu") || this).labels = ["Accelerate", "Decelerate", "Lean forward", "Lean back", "Primary action", "Secondary action 1", "Secondary action 2", "Eject", "Switch Camera"], t.keys = ["accelerate", "decelerate", "leanForward", "leanBack", "primaryAction", "secondaryAction1", "secondaryAction2", "eject", "switchCamera"], t.inputs = [], t.clickToChange = "Click on your settings to change the key.", t.enterUniqueKey = "Press a key not associated with another action.", t.handleMouseUp = function (e) {
                        if (e.target == t.restoreDefaultsButton) {
                            for (var i = 0; i < t.labels.length; i++) {
                                var s = l.Z[t.keys[i] + "DefaultCode"];
                                l.Z[t.keys[i] + "Code"] = s, l.Z.sharedObject.data.keyCodes[t.keys[i] + "Code"] = s, t.inputs[i].keyCode = s, t.inputs[i].text = t.keyCodeNames.get(s);
                            }
                            l.Z.sharedObject.flush();
                        }
                    }, t.handleFocusIn = function (e) {
                        t.statusText.text = t.enterUniqueKey;
                        for (var i = t.inputs.indexOf(e.target), s = 0; s < t.inputs.length; s++) if (s != i) {
                            var r = t.inputs[s];
                            r.disable(), r.clearHighlight();
                        }
                    }, t.handleFocusOut = function (e) {
                        for (var i = 0; i < t.inputs.length; i++) t.inputs[i].enable();
                        t.statusText.text = t.clickToChange;
                    }, t.handleValueChange = function (e) {
                        var i = e.value, s = e.target;
                        if (27 != i && 9 != i) {
                            for (var r, o = t.inputs.indexOf(s), n = true, a = 0; a < t.inputs.length; a++) if (a != o) {
                                var h = t.inputs[a];
                                i == h.keyCode ? (h.highlight(true), n = false, r = a) : h.clearHighlight();
                            }
                            n ? (s.text = t.keyCodeNames.get(i), l.Z[t.keys[o] + "Code"] = i, l.Z.sharedObject.data.keyCodes[t.keys[o] + "Code"] = i, l.Z.sharedObject.flush()) : t.statusText.text = "The '" + t.keyCodeNames.get(i) + "' is associated with '" + t.labels[r] + "'. Please press another key.";
                        } else s.text = s.lastInput;
                    }, t.statusText = h.nv.spriteToTextField(t.__mc.statusText, t.__mc), t.statusText.wordWrap = true, t.statusText.width = 1e3, t.restoreDefaultsButton = (0, b.Ev)(n.bY, t.__mc, "restoreDefaultsButton", { fileName: "GameUI", mcName: "mc_restore_defaults_button" }), t.keyCodeNames = new Map, t.keyCodeNames.set(8, "Backspace"), t.keyCodeNames.set(9, "Tab"), t.keyCodeNames.set(13, "Enter"), t.keyCodeNames.set(16, "Shift"), t.keyCodeNames.set(17, "Control"), t.keyCodeNames.set(20, "Caps Lock"), t.keyCodeNames.set(27, "Esc"), t.keyCodeNames.set(32, "Spacebar"), t.keyCodeNames.set(33, "Page Up"), t.keyCodeNames.set(34, "Page Down"), t.keyCodeNames.set(35, "End"), t.keyCodeNames.set(36, "Home"), t.keyCodeNames.set(37, "Left Arrow"), t.keyCodeNames.set(38, "Up Arrow"), t.keyCodeNames.set(39, "Right Arrow"), t.keyCodeNames.set(40, "Down Arrow"), t.keyCodeNames.set(45, "Insert"), t.keyCodeNames.set(46, "Delete"), t.keyCodeNames.set(144, "Num Lock"), t.keyCodeNames.set(145, "ScrLk"), t.keyCodeNames.set(19, "Pause/Break"), t.keyCodeNames.set(65, "A"), t.keyCodeNames.set(66, "B"), t.keyCodeNames.set(67, "C"), t.keyCodeNames.set(68, "D"), t.keyCodeNames.set(69, "E"), t.keyCodeNames.set(70, "F"), t.keyCodeNames.set(71, "G"), t.keyCodeNames.set(72, "H"), t.keyCodeNames.set(73, "I"), t.keyCodeNames.set(74, "J"), t.keyCodeNames.set(75, "K"), t.keyCodeNames.set(76, "L"), t.keyCodeNames.set(77, "M"), t.keyCodeNames.set(78, "N"), t.keyCodeNames.set(79, "O"), t.keyCodeNames.set(80, "P"), t.keyCodeNames.set(81, "Q"), t.keyCodeNames.set(82, "R"), t.keyCodeNames.set(83, "S"), t.keyCodeNames.set(84, "T"), t.keyCodeNames.set(85, "U"), t.keyCodeNames.set(86, "V"), t.keyCodeNames.set(87, "W"), t.keyCodeNames.set(88, "X"), t.keyCodeNames.set(89, "Y"), t.keyCodeNames.set(90, "Z"), t.keyCodeNames.set(48, "0"), t.keyCodeNames.set(49, "1"), t.keyCodeNames.set(50, "2"), t.keyCodeNames.set(51, "3"), t.keyCodeNames.set(52, "4"), t.keyCodeNames.set(53, "5"), t.keyCodeNames.set(54, "6"), t.keyCodeNames.set(55, "7"), t.keyCodeNames.set(56, "8"), t.keyCodeNames.set(57, "9"), t.keyCodeNames.set(186, ";"), t.keyCodeNames.set(59, ";"), t.keyCodeNames.set(187, "="), t.keyCodeNames.set(61, "="), t.keyCodeNames.set(171, "="), t.keyCodeNames.set(189, "-"), t.keyCodeNames.set(173, "-"), t.keyCodeNames.set(191, "/?"), t.keyCodeNames.set(192, "~"), t.keyCodeNames.set(219, "["), t.keyCodeNames.set(220, "|"), t.keyCodeNames.set(221, "]"), t.keyCodeNames.set(222, '"'), t.keyCodeNames.set(163, '"'), t.keyCodeNames.set(188, ","), t.keyCodeNames.set(190, "."), t.keyCodeNames.set(191, "/"), t.keyCodeNames.set(96, "Numpad 0"), t.keyCodeNames.set(97, "Numpad 1"), t.keyCodeNames.set(98, "Numpad 2"), t.keyCodeNames.set(99, "Numpad 3"), t.keyCodeNames.set(100, "Numpad 4"), t.keyCodeNames.set(101, "Numpad 5"), t.keyCodeNames.set(102, "Numpad 6"), t.keyCodeNames.set(103, "Numpad 7"), t.keyCodeNames.set(104, "Numpad 8"), t.keyCodeNames.set(105, "Numpad 9"), t.keyCodeNames.set(106, "Numpad *"), t.keyCodeNames.set(107, "Numpad +"), t.keyCodeNames.set(109, "Numpad -"), t.keyCodeNames.set(110, "Numpad ."), t.keyCodeNames.set(111, "Numpad /"), t.keyCodeNames.set(112, "F1"), t.keyCodeNames.set(113, "F2"), t.keyCodeNames.set(114, "F3"), t.keyCodeNames.set(115, "F4"), t.keyCodeNames.set(116, "F5"), t.keyCodeNames.set(117, "F6"), t.keyCodeNames.set(118, "F7"), t.keyCodeNames.set(119, "F8"), t.keyCodeNames.set(120, "F9"), t.keyCodeNames.set(122, "F11"), t.keyCodeNames.set(123, "F12"), t.keyCodeNames.set(124, "F13"), t.keyCodeNames.set(125, "F14"), t.keyCodeNames.set(126, "F15");
                    for (var i = 0; i < t.labels.length; i++) {
                        var s = t.labels[i] + ":", r = t.keyCodeNames.get(l.Z[t.keys[i] + "Code"]), o = t.keyCodeNames.get(l.Z[t.keys[i] + "DefaultCode"]), a = new se(s, r, o);
                        a.keyCode = l.Z[t.keys[i] + "Code"], a.addEventListener(n.fF.VALUE_CHANGE, t.handleValueChange), a.addEventListener(se.FOCUS_IN, t.handleFocusIn), a.addEventListener(se.FOCUS_OUT, t.handleFocusOut), t.inputs.push(a), a.x = 369, a.y = 102 + 32 * i, t.addChild(a);
                    }
                    return t.statusText.text = t.clickToChange, t.addEventListener(h.TF.MOUSE_UP, t.handleMouseUp), t;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, re(t, i), s.prototype.die = function () {
                    var t;
                    this.removeEventListener(h.TF.MOUSE_UP, this.handleMouseUp);
                    for (var i = 0; i < this.inputs.length; i++) (t = this.inputs[i]).removeEventListener(n.fF.VALUE_CHANGE, this.handleValueChange), t.removeEventListener(se.FOCUS_IN, this.handleFocusIn), t.removeEventListener(se.FOCUS_OUT, this.handleFocusOut), t.die();
                    e.prototype.die.call(this);
                }, s;
            }(q);
            function ne(e, t) {
                return (ne = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ae = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    void 0 === t && (t = "mc_OldMan"), (i = e.call(this) || this).bodyMinAngle = -6, i.bodyRange = 8, i.headMinAngle = -6, i.headRange = 6, i.armMinAngle = -10, i.armRange = 40, i.foreArmMinAngle = -15, i.foreArmRange = 30, i.jawTopY = -65.5, i.jawRangeY = 15, i.eye1LeftX = -24, i.eye1RangeX = 16, i.eye2LeftX = 34, i.eye2RangeX = 13, i.eye1TopY = -10, i.eye1RangeY = 6, i.eye2TopY = -3, i.eye2RangeY = 6, i.timeRange = 2.5, i.jawMoving = false, i._jawTween = 0, i.jawFinished = function () {
                        i.jawMoving = false;
                    };
                    var s = new h.KG((0, b.qX)("GameUI", t));
                    return s.convertChildren(), i.addChild(s), i.body = s.body, i.arm = i.body.getChildByName("arm"), i.foreArm = i.arm.getChildByName("foreArm"), i.head = i.body.getChildByName("head"), i.jaw = i.head.getChildByName("jaw"), i.eyes = i.head.getChildByName("eyes"), i.eye1 = i.eyes.getChildByName("eye1"), i.eye2 = i.eyes.getChildByName("eye2"), i._jawTween = (i.jaw.y - i.jawTopY) / i.jawRangeY, i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ne(t, i);
                var r, o, n = s.prototype;
                return n.slideIn = function () {
                    var e = this.rotation, t = this.x, i = this.y;
                    this.rotation = -45, this.x = -54, this.y = 575, L.iC.to(this, 2, { rotation: e, x: t, y: i, ease: L.Yp.easeOut, delay: 1 });
                }, n.step = function (e) {
                    void 0 === e && (e = 1);
                    var t = 1 - (e = e < 0 ? 0 : e > 1 ? 1 : e) + 1;
                    if (Math.random() < .02) {
                        var i = this.armMinAngle + Math.random() * this.armRange, s = Math.random() * this.timeRange + .5;
                        L.iC.to(this.arm, s * t, { rotation: i, ease: L.Yp.easeInOut });
                    }
                    if (Math.random() < .02 && (i = this.foreArmMinAngle + Math.random() * this.foreArmRange, s = Math.random() * this.timeRange + .5, L.iC.to(this.foreArm, s * t, { rotation: i, ease: L.Yp.easeInOut })), Math.random() < .02 && (i = this.bodyMinAngle + Math.random() * this.bodyRange, s = Math.random() * this.timeRange + .5, L.iC.to(this.body, s * t, { rotation: i, ease: L.Yp.easeInOut })), Math.random() < .02 && (i = this.headMinAngle + Math.random() * this.headRange, s = Math.random() * this.timeRange + .5, L.iC.to(this.head, s * t, { rotation: i, ease: L.Yp.easeInOut })), Math.random() < .1) {
                        if (this.jawMoving) return;
                        s = Math.random() * this.timeRange + .05, this.jawMoving = true, L.iC.to(this, s * t, { jawTween: Math.random(), ease: L.Yp.easeInOut, overwrite: 0, onComplete: this.jawFinished });
                    }
                    if (Math.random() < .005) {
                        var r = Math.random(), o = this.eye1LeftX + r * this.eye1RangeX;
                        s = Math.random() * this.timeRange + .5, L.iC.to(this.eye1, s * t, { x: o, ease: L.Yp.easeInOut }), o = this.eye2LeftX + r * this.eye2RangeX, L.iC.to(this.eye2, s * t, { x: o, ease: L.Yp.easeInOut });
                    }
                }, r = s, (o = [{
                    key: "jawTween", get: function () {
                        return this._jawTween;
                    }, set: function (e) {
                        this._jawTween = e, this.jaw.y = this.jawTopY + this._jawTween * this.jawRangeY;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function he(e, t) {
                return (he = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var le = function (e) {
                var t, i, s, r;
                function o() {
                    var t;
                    return (t = e.call(this, "FatLady") || this).jaw2 = t.head.getChildByName("jaw2"), t.jaw3 = t.head.getChildByName("jaw3"), t.jaw4 = t.head.getChildByName("jaw4"), t.jaw5 = t.head.getChildByName("jaw5"), t.jawTopY = -56.85, t.headMinAngle = -3, t.eye1LeftX = -32, t.eye1RangeX = 16, t.eye1TopY = 1, t.eye1RangeY = 5, t.eye2LeftX = 31, t.eye2RangeX = 11, t.eye2TopY = 0, t.eye2RangeY = 5, t.foreArmMinAngle = -25, t.foreArmRange = 60, t;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, he(t, i), s = o, (r = [{
                    key: "jawTween", get: function () {
                        return this._jawTween;
                    }, set: function (e) {
                        this._jawTween = e, this.jaw.y = this.jawTopY + this._jawTween * this.jawRangeY, this.jaw2.y = 6.5 * this._jawTween - 34, this.jaw3.x = 3.4 * this._jawTween - 76.9, this.jaw3.rotation = 0 + 11.5 * this._jawTween, this.jaw4.y = 5 * this._jawTween - 65.45, this.jaw5.x = 33.45 - 10 * this._jawTween, this.jaw5.y = 7.75 * this._jawTween - 16.55, this.jaw5.rotation = 0 + 10.4 * this._jawTween;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(s.prototype, r), Object.defineProperty(s, "prototype", { writable: false }), o;
            }(ae);
            function ce(e, t) {
                return (ce = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var de = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).rotate = function (e) {
                        var i = .5 * e.delta;
                        t.star.rotation += i;
                    };
                    var i = new h.KG((0, b.qX)("GameUI", "mc_featured_button_new_star"));
                    return i.convertChildren(), t.addChild(i), t.star = i.star, t.addEventListener(h.ju.ENTER_FRAME, t.rotate, false, 0, true), t;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ce(t, i), s;
            }(h.jy), pe = i(214);
            function ue(e, t) {
                return (ue = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var me = function (e) {
                var t, i, s, r;
                function o(t, i) {
                    var s;
                    void 0 === i && (i = false), s = e.call(this) || this;
                    var r = new h.KG((0, b.qX)("GameUI", "mc_FeaturedLevelButton"));
                    return r.convertChildren(), s.addChild(r), s.nameMC = r.nameMC, s.bg = r.bg, s.nameText = h.nv.spriteToTextField(s.nameMC.getChildByName("nameText"), s.nameMC), s.nameText.autoSize = h.ie.CENTER, s.nameText.selectable = false, s.nameText.embedFonts = true, s.nameText.y += 2, s.nameText.width = 1e3, null != t && (s.nameText.htmlText = "<b>" + pe.L.trimWhitespace(t) + "</b>"), s.buttonMode = true, s.mouseChildren = false, s.selected = false, s.nameMC.width > s.bg.width - 30 && (s.nameMC.width = s.bg.width - 30, s.nameMC.scaleY = s.nameMC.scaleX), i ? (s.newStar = new de, s.newStar.position.set(r.newStar.x, r.newStar.y), r.addChildAt(s.newStar, r.getChildIndex(r.newStar)), r.removeChild(r.newStar), r.newStar = s.newStar) : r.removeChild(r.newStar), s;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, ue(t, i), s = o, (r = [{
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, this._selected ? this.nameText.textColor = 16777215 : this.nameText.textColor = 2050921;
                    }
                }, {
                    key: "height", get: function () {
                        return this.bg.height;
                    }, set: function (e) {
                        this.pixiSprite.scale.y = 1;
                        var t = this.getRelativeBounds();
                        this.pixiSprite.scale.y = e / t.height;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(s.prototype, r), Object.defineProperty(s, "prototype", { writable: false }), o;
            }(h.jy), fe = i(168);
            function ye(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function ve(e, t) {
                return (ve = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ge = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).topY = 70, t.listSpacing = 10, t.scrollSpeed = 0, t.scrollAccel = 1, t.scrollMaxSpeed = 10, t.renderedLevelButtonsUntilIndex = -1, t.startY = 0, t.dataLoadComplete = function (e) {
                        t.removeLoaderListeners();
                        var i, r = String(t.loader.data), o = r.substr(0, 8);
                        if (o.indexOf("<html>") > -1) i = new n.sP("There was an unexpected system Error", "oh"); else if (o.indexOf("failure") > -1) {
                            var a = r.split(":");
                            i = "invalid_action" == a[1] ? new n.sP("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" == a[1] ? new n.sP("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == a[1] ? new n.sP("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : new n.sP("An unknown Error has occurred.", "oh");
                        }
                        if (i) {
                            var l = i.window;
                            return t.addChild(l), void l.center();
                        }
                        var c = new h.hH(t.loader.data);
                        s.levelDataArray = [];
                        var d = [], p = [];
                        if (!c.lv) {
                            s.levelDataArray = null;
                            var u = (i = new n.sP("There are no featured levels.", "oh")).window;
                            return t.addChild(u), void u.center();
                        }
                        for (var m = new Date, f = c.lv.length, y = 0; y < f; y++) {
                            var v = c.lv[y], g = new fe.b(v["@id"], v["@ln"], v["@ui"], v["@un"], v["@rg"], v["@vs"], v["@ps"], v["@dp"], v.uc[0].cdata, v["@pc"], "1", "1", "1", v["@df"]);
                            (m.getTime() - g.date_featured.getTime()) / 864e5 < 14 ? d.push(g) : p.push(g);
                        }
                        s.levelDataArray = d.concat(p), t.buildList();
                    }, t.securityErrorHandler = function (e) {
                        t.removeLoaderListeners();
                    }, t.startListScroll = function (e) {
                        t.list.removeEventListener(h.ju.ENTER_FRAME, t.stopScroll), t.list.addEventListener(h.ju.ENTER_FRAME, t.listScroll);
                    }, t.stopListScroll = function (e) {
                        t.list.removeEventListener(h.ju.ENTER_FRAME, t.listScroll), t.list.addEventListener(h.ju.ENTER_FRAME, t.stopScroll);
                    }, t.stopScroll = function (e) {
                        var i = .5 * e.delta;
                        t.scrollSpeed > 0 ? t.scrollSpeed -= 1 : t.scrollSpeed < 0 ? t.scrollSpeed += 1 : t.list.removeEventListener(h.ju.ENTER_FRAME, t.stopScroll), t.list.y += t.scrollSpeed * i, t.checkScrollLimits(), t.createLevelButtonsInView();
                    }, t.listScroll = function (e) {
                        var i = .5 * e.delta, s = t.listHitArea.mouseY / t.listHitArea.height;
                        s > .75 && t.scrollSpeed > -t.scrollMaxSpeed ? t.scrollSpeed -= t.scrollAccel : s < .25 && t.scrollSpeed < t.scrollMaxSpeed ? t.scrollSpeed += t.scrollAccel : t.scrollSpeed > 0 ? t.scrollSpeed -= 1 : t.scrollSpeed < 0 && (t.scrollSpeed += 1), t.list.y += t.scrollSpeed * i, t.createLevelButtonsInView(), t.checkScrollLimits();
                    }, t.mouseUpHandler = function (e) {
                        if (e.target instanceof me) t.selectItem(e.target); else switch (e.target) {
                            case t.backBtn:
                                z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.GOTO_MAIN_MENU), t.dispatchEvent(new w.z4(w.z4.MAIN_MENU));
                                break;
                            case t.browserBtn:
                                z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.GOTO_LEVEL_BROWSER), t.dispatchEvent(new w.z4(w.z4.LEVEL_BROWSER));
                                break;
                            case t.playBtn:
                                if (!t.currentItem) return;
                                var i = s.lastItemIndex = t.featuredList.indexOf(t.currentItem), r = s.levelDataArray[i];
                                if (1 == r.id) return void t.showUnplayableLevelPrompt();
                                z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.LOAD_LEVEL, "levelID_" + r.id), t.dispatchEvent(new w.z4(w.z4.SESSION, r));
                                break;
                            case t.viewReplaysBtn:
                                if (!t.currentItem) return;
                                if (i = s.lastItemIndex = t.featuredList.indexOf(t.currentItem), 1 == (r = s.levelDataArray[i]).id) return void t.showUnplayableLevelPrompt();
                                z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.GOTO_REPLAY_BROWSER, "levelID_" + r.id);
                                var o = new w.z4(w.z4.REPLAY_BROWSER, r);
                                o.target = ye(t), t.dispatchEvent(o);
                                break;
                            case t.authorSprite:
                                if (t.currentAuthorId) {
                                    var a = new h.RW(l.Z.siteURL + "profile.tjf?uid=" + t.currentAuthorId);
                                    (0, h.hR)(a, "_blank"), z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.GOTO_USER_PAGE, "userID_" + t.currentAuthorId);
                                }
                                break;
                            case t.otherLevelsBtn:
                                t.currentAuthorId && (n.xx.instance.hide(), Y.importAuthor(t.currentAuthorName, t.currentAuthorId), z.f.trackEvent(z.f.FEATURED_BROWSER, z.f.GET_LEVELS_BY_AUTHOR, "authorID_" + t.currentAuthorId), t.dispatchEvent(new w.z4(w.z4.LEVEL_BROWSER)));
                        }
                    }, t.mouseOverHandler = function (e) {
                        e.target === t.otherLevelsBtn && t.currentAuthorId && n.xx.instance.show("view other levels by this author", t.otherLevelsBtn, 5);
                    }, t.beginCommentScroll = function (e) {
                        t.commentsBg.addEventListener(h.ju.ENTER_FRAME, t.scrollComments);
                    }, t.endCommentScroll = function (e) {
                        t.commentsBg.removeEventListener(h.ju.ENTER_FRAME, t.scrollComments);
                    }, t.scrollComments = function (e) {
                        var i = .5 * e.delta, s = t.commentsBg.height / 2, r = (s - t.commentsBg.mouseY) / s * 10 * i;
                        t.commentsText.y += r, t.commentsText.y + t.commentsText.height < t.commentsBg.y + t.commentsBg.height && (t.commentsText.y = t.commentsBg.y + t.commentsBg.height - t.commentsText.height), t.commentsText.y > t.commentsBg.y + 5 && (t.commentsText.y = t.commentsBg.y + 5);
                    };
                    var i = (0, b.qX)("GameUI", "mc_FeaturedMenu");
                    t.mc = i;
                    var r = [];
                    return i.children.forEach(function (e) {
                        var i;
                        e instanceof v.MovieClip ? (i = new h.KG(null, false)).setPixiMovieClip(e) : i = new h.jy(e, false), e.name ? (i.name = i.pixiSprite.name = e.name, t[e.name] = i) : i.name = i.pixiSprite.name = "unknown", r.push(i);
                    }), r.forEach(function (e) {
                        t.addChild(e);
                    }), t.nameText = h.nv.spriteToTextField(t.nameText, ye(t)), t.authorText = h.nv.spriteToTextField(t.authorText, ye(t)), t.charText = h.nv.spriteToTextField(t.charText, ye(t)), t.commentsText = h.nv.spriteToTextField(t.commentsText, ye(t)), t.voteText = h.nv.spriteToTextField(t.voteText, ye(t)), t.playText = h.nv.spriteToTextField(t.playText, ye(t)), t.voteStars = (0, b.Ev)(E, ye(t), "voteStars"), t.playBtn = (0, b.Ev)(n.bY, ye(t), "playBtn", { fileName: "GameUI", mcName: "mc_featured_play_button" }), t.viewReplaysBtn = (0, b.Ev)(n.bY, ye(t), "viewReplaysBtn", { fileName: "GameUI", mcName: "mc_featured_vr_button" }), t.backBtn = (0, b.Ev)(n.bY, ye(t), "backBtn", { fileName: "GameUI", mcName: "mc_featured_back_button" }), t.browserBtn = (0, b.Ev)(n.bY, ye(t), "browserBtn", { fileName: "GameUI", mcName: "mc_featured_ulb_button" }), t.otherLevelsBtn && (t.otherLevelsBtn.mouseChildren = true, t.otherLevelsBtn.buttonMode = true), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ve(t, i);
                var r = s.prototype;
                return r.init = function () {
                    this.mouseChildren = false, this.formatTextFields(), s.levelDataArray ? this.buildList() : this.loadFeaturedData(), this.playBtn.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.viewReplaysBtn.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.backBtn.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.browserBtn.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.otherLevelsBtn && (this.otherLevelsBtn.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.otherLevelsBtn.addEventListener(h.TF.MOUSE_OVER, this.mouseOverHandler));
                }, r.activate = function () {
                    this.mouseChildren = true;
                }, r.formatTextFields = function () {
                    this.authorText && (this.authorSprite = new h.jy, this.authorSprite.x = this.authorText.x, this.authorSprite.y = this.authorText.y, this.authorSprite.x = 0, this.authorSprite.y = 0, this.authorSprite.addChild(this.authorText), this.addChild(this.authorSprite), this.authorSprite.mouseChildren = false, this.authorSprite.buttonMode = true, this.nameText.selectable = this.authorText.selectable = this.charText.selectable = this.commentsText.selectable = this.voteText.selectable = this.playText.selectable = false, this.nameText.embedFonts = this.authorText.embedFonts = this.charText.embedFonts = this.commentsText.embedFonts = this.voteText.embedFonts = this.playText.embedFonts = true, this.nameText.autoSize = this.authorText.autoSize = this.charText.autoSize = this.commentsText.autoSize = this.voteText.autoSize = this.playText.autoSize = h.ie.LEFT, this.nameText.wordWrap = this.authorText.wordWrap = this.charText.wordWrap = this.voteText.wordWrap = this.playText.wordWrap = false, this.commentsText.wordWrap = true, this.commentsText.mouseEnabled = false, this.commentMask = new h.jy, this.commentMask.graphics.beginFill(16777215, .1), this.commentMask.graphics.drawRect(0, 0, this.commentsBg.width, this.commentsBg.height), this.commentMask.graphics.endFill(), this.commentMask.x = this.commentsBg.x, this.commentMask.y = this.commentsBg.y, this.addChild(this.commentMask), this.commentsText.mask = this.commentMask);
                }, r.loadFeaturedData = function () {
                    var e = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                    e.method = h.H9.POST;
                    var t = new h.JH;
                    t.action = "get_featured", e.data = t, this.loader = new h.yW, this.addLoaderListeners(), this.loader.load(e);
                }, r.addLoaderListeners = function () {
                    this.loader && (this.loader.addEventListener(h.ju.COMPLETE, this.dataLoadComplete), this.loader.addEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler));
                }, r.removeLoaderListeners = function () {
                    this.loader && (this.loader.removeEventListener(h.ju.COMPLETE, this.dataLoadComplete), this.loader.removeEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler));
                }, r.buildList = function () {
                    this.featuredList = [], this.list = new h.jy, this.list.y = this.listSpacing, this.listHolder = new h.jy, this.listMask = new h.jy, this.listHitArea = new h.jy, this.listHitArea.graphics.beginFill(65280), this.listHitArea.graphics.drawRect(0, 0, 400, 430), this.listHitArea.graphics.endFill(), this.listMask.graphics.beginFill(16711680), this.listMask.graphics.drawRect(0, 0, 400.325, 430), this.listMask.graphics.endFill(), this.listHolder.y = this.listMask.y = this.topY, this.listHolder.addChild(this.listHitArea), this.listHolder.addChild(this.list), this.addChild(this.listHolder), this.addChild(this.listMask), this.listHolder.mask = this.listMask, this.listHolder.hitArea = this.listHitArea, this.listHitArea.alpha = 0, this.list.y = s.yVal, this.createLevelButtonsInView(), this.list.addChildAt(this.arrows, 0), this.list.addChildAt(this.hiliter, 0), this.hiliter.width += .5, this.hiliter.x -= .25, this.createLevelButtonsUntilIndex(s.lastItemIndex), this.selectItem(this.featuredList[s.lastItemIndex]), this.listHeight > this.listHitArea.height && (this.listHolder.addEventListener(h.TF.ROLL_OVER, this.startListScroll), this.listHolder.addEventListener(h.TF.ROLL_OUT, this.stopListScroll)), this.y = 0, this.mc.y = 0;
                }, r.createLevelButtonsInView = function () {
                    if (void 0 === this.featuredLevelButtonHeight) {
                        var e = new me("test", false);
                        this.featuredLevelButtonHeight = e.height;
                    }
                    var t = Math.max(0, -1 * (this.list.y - this.listSpacing)), i = Math.ceil(9 + t / (.5 * this.featuredLevelButtonHeight + 2 * this.listSpacing)) - 1;
                    i > s.levelDataArray.length - 1 && (i = s.levelDataArray.length - 1), this.createLevelButtonsUntilIndex(i);
                }, r.createLevelButtonsUntilIndex = function (e) {
                    if (this.renderedLevelButtonsUntilIndex < e) {
                        for (var t = new Date, i = this.renderedLevelButtonsUntilIndex + 1; i <= e; i++) {
                            var r = s.levelDataArray[i], o = (t.getTime() - r.date_featured.getTime()) / 864e5 < 14, n = new me(r.name, o);
                            n.x = 75, n.y = this.startY, this.startY += .5 * n.height + 2 * this.listSpacing, this.list.addChild(n), this.featuredList.push(n), this.featuredLevelButtonHeight = n.height, n.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.renderedLevelButtonsUntilIndex++;
                        }
                        this.listHeight = this.list.height;
                    }
                }, r.checkScrollLimits = function () {
                    this.list.y > this.listSpacing ? (this.list.y = 0 + this.listSpacing, this.scrollSpeed = 0) : this.list.y < this.listHitArea.height - (this.listHeight + this.listSpacing) && (this.list.y = this.listHitArea.height - (this.listHeight + this.listSpacing), this.scrollSpeed = 0), s.yVal = this.list.y;
                }, r.showUnplayableLevelPrompt = function () {
                    var e = new n.sP("This level is currently not playable.", "dangit").window;
                    this.stage && (this.stage.addChild(e), e.center());
                }, r.selectItem = function (e) {
                    this.currentItem && (this.currentItem.selected = false), this.currentItem = e, this.currentItem.selected = true;
                    var t = this.featuredList.indexOf(this.currentItem), i = s.levelDataArray[t];
                    this.populateFields(i), s.lastItemIndex = t, L.iC.to(this.hiliter, .85, { y: this.currentItem.y + 5, ease: L.Yp.easeInOut }), L.iC.to(this.arrows, 1, { y: this.currentItem.y + 5, ease: L.Yp.easeInOut });
                }, r.populateFields = function (e) {
                    if (this.authorText) {
                        this.currentAuthorId = e.author_id, this.currentAuthorName = e.author_name, this.nameText.htmlText = "<b>" + e.name + "</b>", this.authorText.htmlText = "<b>" + e.author_name + "</b>", this.voteText.htmlText = "<b>(" + e.votes + " votes)</b>";
                        var t = pe.L.addIntegerCommas(e.plays);
                        this.playText.htmlText = "<b>played " + t + " times", this.otherLevelsBtn.x = Math.round(this.authorText.x + this.authorText.textWidth + 10), this.otherLevelsBtn.buttonMode = true;
                        var i = e.character > 0 ? l.Z.characterNames[e.character - 1] : "any";
                        this.charText.htmlText = "<b>playable character: " + i + "</b>", this.voteStars.rating = e.average_rating, this.commentsText.text = e.comments, this.commentsBg.removeEventListener(h.ju.ENTER_FRAME, this.scrollComments), this.commentsBg.removeEventListener(h.TF.ROLL_OVER, this.beginCommentScroll), this.commentsBg.removeEventListener(h.TF.ROLL_OUT, this.endCommentScroll), this.commentsText.y = this.commentsBg.y + 5, this.commentsText.height > this.commentsBg.height && (this.commentsBg.addEventListener(h.TF.ROLL_OVER, this.beginCommentScroll), this.commentsBg.addEventListener(h.TF.ROLL_OUT, this.endCommentScroll));
                    }
                }, r.die = function () {
                    var e = this;
                    this.removeLoaderListeners(), this.loader && this.loader.close(), this.featuredList && this.featuredList.forEach(function (t) {
                        t.removeEventListener(h.TF.MOUSE_UP, e.mouseUpHandler);
                    }), this.playBtn.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.viewReplaysBtn.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.backBtn.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.browserBtn.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.otherLevelsBtn.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.otherLevelsBtn.removeEventListener(h.TF.MOUSE_OVER, this.mouseOverHandler), this.listHolder && (this.listHolder.removeEventListener(h.TF.ROLL_OVER, this.startListScroll), this.listHolder.removeEventListener(h.TF.ROLL_OUT, this.stopListScroll), this.list.removeEventListener(h.ju.ENTER_FRAME, this.stopScroll), this.list.removeEventListener(h.ju.ENTER_FRAME, this.listScroll)), this.commentsBg.removeEventListener(h.ju.ENTER_FRAME, this.scrollComments), this.commentsBg.removeEventListener(h.TF.ROLL_OVER, this.beginCommentScroll), this.commentsBg.removeEventListener(h.TF.ROLL_OUT, this.endCommentScroll);
                }, s;
            }(h.jy);
            ge.lastItemIndex = 0, ge.yVal = 10;
            var Se = i(395);
            function _e(e, t) {
                return (_e = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var we = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).keyDownHandler = function (e) {
                        t.errorText.text = "", 13 == e.keyCode && t.ifValidLoad();
                    }, t.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case t.loadButton:
                                t.ifValidLoad();
                                break;
                            case t.cancelButton:
                                t.dispatchEvent(new h.ju(s.CANCEL));
                        }
                    }, t.buildView(), t.createWindow(), t.dropMenu = new C.m("load:", ["level", "replay"], [s.LEVEL, s.REPLAY], s.index, 8947848), t.addChild(t.dropMenu), t.dropMenu.xLeft = 64, t.dropMenu.y = 35, t.loadButton = new n.Me("load", 16613761, 70), t.addChild(t.loadButton), t.loadButton.x = 25, t.loadButton.y = 114, t.cancelButton = new n.Me("cancel", 10066329, 70), t.addChild(t.cancelButton), t.cancelButton.x = 105, t.cancelButton.y = 114, t.addEventListener(h.TF.MOUSE_UP, t.mouseUpHandler), t.addEventListener(h._d.KEY_DOWN, t.keyDownHandler), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, _e(t, i);
                var r, o, a = s.prototype;
                return a.buildView = function () {
                    var e = new h.KG((0, b.qX)("GameUI", "mc_LoadLevelMenu"));
                    e.convertChildren(), this.addChild(e), this.searchText = h.nv.spriteToTextField(e.searchText, e), this.errorText = h.nv.spriteToTextField(e.errorText, e), this.errorText.wordWrap = true, this.errorText.width = 1e3, this.searchText.type = h.T3.INPUT, this.searchText._pixiTextInput.setInputStyle("width", "140px");
                }, a.createWindow = function () {
                    this._window = new n.Rz(false, this, true);
                }, a.ifValidLoad = function () {
                    this.searchText.text = this.searchText._pixiTextInput.text, this.errorText.text = "";
                    var e = true;
                    1 == this.searchText.text.split("=").length ? (isNaN(Number(this.searchText.text)) && (e = false), Number(this.searchText.text) < 1 && (e = false)) : -1 == this.searchText.text.indexOf("level_id") && -1 == this.searchText.text.indexOf("replay_id") && (e = false), e ? this.dispatchEvent(new h.ju(s.LOAD)) : this.errorText.text = "ID is invalid.";
                }, a.die = function () {
                    s.index = this.dropMenu.currentIndex, this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.searchText.removeEventListener(h._d.KEY_DOWN, this.keyDownHandler), this.searchText.destroy(), this.dropMenu.die(), this._window.closeWindow();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }, {
                    key: "loadType", get: function () {
                        return this.dropMenu.value;
                    }
                }, {
                    key: "loadID", get: function () {
                        return this.searchText.text;
                    }, set: function (e) {
                        this.searchText.text = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            we.REPLAY = "replay", we.LEVEL = "level", we.LOAD = "load", we.CANCEL = "cancel", we.index = 0;
            var be = i(103);
            function Ce(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function Le(e, t) {
                return (Le = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Be = function (e) {
                var t, i;
                function s(t, i, s) {
                    var r;
                    (r = e.call(this) || this).tweenTime = .4, r.maxScale = 1.5, r.rollOverHandler = function (e) {
                        L.iC.to(Ce(r), r.tweenTime, { scaleX: r.maxScale, scaleY: r.maxScale, ease: L.Yp.easeInOut }), be.i.instance.playSoundItem("SwishUp");
                    }, r.rollOutHandler = function (e) {
                        L.iC.to(Ce(r), r.tweenTime, { scaleX: 1, scaleY: 1, ease: L.Yp.easeInOut });
                    }, r.buttonMode = true, r.tabEnabled = false, r.createTextField(i, s), r.textField.htmlText = t, r.createHitBox();
                    var o = new h.pt(3, 90, 0, 1, 5, 5, .25, 1);
                    return r.textField.filters = [o], r.addEventListener(h.TF.ROLL_OVER, r.rollOverHandler, false, 0, true), r.addEventListener(h.TF.ROLL_OUT, r.rollOutHandler, false, 0, true), r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Le(t, i);
                var r, o, n = s.prototype;
                return n.disable = function () {
                    this.mouseEnabled = false, this.rollOutHandler();
                }, n.enable = function () {
                    this.mouseEnabled = true, this.rollOutHandler();
                }, n.createTextField = function (e, t) {
                    var i = new h.SQ("Clarendon LT Std Bold", e, t, null, null, null, null, null, h.O3.RIGHT);
                    this.textField = new h.nv, this.textField.defaultTextFormat = i, this.textField.width = 0, this.textField.height = 20, this.textField.autoSize = h.ie.RIGHT, this.textField.x = 0, this.textField.y = 0, this.textField.multiline = true, this.textField.wordWrap = false, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = h.ML.NORMAL, this.textField.mouseEnabled = false, this.addChild(this.textField);
                }, n.createHitBox = function () {
                    var e = this.textField.height, t = .55 * e, i = (e - t) / 2;
                    this.hitBox = new h.jy, this.hitBox.graphics.beginFill(16711680), this.hitBox.graphics.drawRect(0, 0, this.textField.width, t), this.hitBox.graphics.endFill(), this.hitBox.x = -this.hitBox.width, this.hitBox.alpha = 0, this.textField.y = -i, this.addChild(this.hitBox), this.hitArea = this.hitBox;
                }, n.addArrow = function () {
                    var e = new h.KG;
                    e.setPixiMovieClip((0, b.qX)("GameUI", "BigArrow")), e.x = -this.textField.width - 5, e.y = 8, e.alpha = 0, this.addChild(e), L.iC.to(e, .5, { alpha: 1, ease: L.Yp.easeOut });
                }, n.die = function () {
                    this.removeEventListener(h.TF.ROLL_OVER, this.rollOverHandler), this.removeEventListener(h.TF.ROLL_OUT, this.rollOutHandler);
                }, r = s, (o = [{
                    key: "height", get: function () {
                        return this.hitBox.height * this.scaleX;
                    }, set: function (e) {
                        this.pixiSprite.scale.y = 1;
                        var t = this.getRelativeBounds();
                        this.pixiSprite.scale.y = e / t.height;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function Ae(e, t) {
                return (Ae = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Ee = function (e) {
                var t, i;
                function s(t, i, s, r, o, n, a, h, l) {
                    return void 0 === h && (h = "GameUI"), void 0 === l && (l = "mc_options_Slider"), e.call(this, t, i, s, r, o, n, a, h, l) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Ae(t, i), s.prototype.prepare = function () {
                    this.sliderTab.addEventListener(h.TF.MOUSE_DOWN, this.mouseDownHandler), this.labelText.mouseEnabled = false, this.removeChild(this.labelText), this.inputText.defaultTextFormat = new h.SQ("Clarendon LT Std", 20, 16777215, null, null, null, null, null, null, null, null, null, 2), this.inputText.wordWrap = this.labelText.wordWrap = false, this.inputText.autoSize = this.labelText.autoSize = h.ie.LEFT, this.inputText.addEventListener(h._d.KEY_DOWN, this.keyDownHandlerBind), this.inputText.position.set(2, 2);
                }, s;
            }(n.a);
            function Me(e, t) {
                return (Me = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ke = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    if ((i = e.call(this, "mc_OptionsMenu") || this).mouseUpHandler = function (e) {
                        switch (e.target) {
                            case i.fCheck:
                                i.stage.displayState == h.CV.FULL_SCREEN_INTERACTIVE ? (i.stage.displayState = h.CV.NORMAL, i.stage.displayState == h.CV.NORMAL && i.fCheck.gotoAndStop(1)) : (i.stage.displayState = h.CV.FULL_SCREEN_INTERACTIVE, i.stage.displayState == h.CV.FULL_SCREEN_INTERACTIVE && i.fCheck.gotoAndStop(2));
                                break;
                            case i.increasedFramesCheck:
                                if (l.Z.use60FPS) i.increasedFramesCheck.gotoAndStop(1), l.Z.use60FPS = false, h.Xj.maxFPS = 30, i.sharedObject.data.use60FPS = false; else {
                                    var t = new n.AP("WARNING!\nDo not enable this if you are already struggling to run Happy Wheels at 30 FPS. This option does NOT increase performance and simply raises the FPS cap, so do not enable this if you are on a slow PC.\n\nThis option is still experimental, so expect some minor graphical issues. Turn this back off if you are not reaching 60 FPS during gameplay.", "raise fps cap to 60", "leave it at 30 fps", true, 280, 120, 5162061, 16613761);
                                    t.addEventListener(n.AP.ANSWER_CHOSEN, i.increasedFramesWarningAnswerChosen, false, 0, true), t.answer1Btn.helpString = "Disable again if you are not reaching 60 FPS.";
                                    var s = t.window;
                                    i.stage.addChild(s), s.center();
                                }
                                break;
                            case i.textureResolutionLowCheck:
                                i.chosenTextureResolution = "low", i.displayTextureResolutionChangePopup();
                                break;
                            case i.textureResolutionMediumCheck:
                                i.chosenTextureResolution = "medium", i.displayTextureResolutionChangePopup();
                                break;
                            case i.textureResolutionHighCheck:
                                i.chosenTextureResolution = "high", i.displayTextureResolutionChangePopup();
                                break;
                            case i.soundCheck:
                                1 == i.soundCheck.currentFrame ? (i.soundCheck.gotoAndStop(2), be.i.instance.mute(), z.f.trackEvent(z.f.OPTIONS, z.f.MUTE)) : (i.soundCheck.gotoAndStop(1), be.i.instance.unMute(), z.f.trackEvent(z.f.OPTIONS, z.f.UNMUTE));
                                break;
                            case i.CORSCheck:
                                // Show prompt dialog prefilled with current corsProxy
                                var newProxy = window.prompt(
                                "Enter CORS proxy URL:",
                                window.HW_SETTINGS.corsProxy || ""
                                );

                                // If user didn't cancel and input is not empty, update the setting
                                if (newProxy !== null) {
                                    window.HW_SETTINGS.corsProxy = newProxy;
                                    localStorage.setItem("proxy", newProxy);
                                    }
                                break;
                            case i.customizeControlsButton:
                                z.f.trackEvent(z.f.OPTIONS, z.f.CUSTOMIZE_CONTROLS);
                                var r = new w.z4(w.z4.CUSTOMIZE_CONTROLS);
                                r.target = function (e) {
                                    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return e;
                                }(i), i.dispatchEvent(r);
                        }
                    }, i.textureResolutionAnswerChosen = function (e) {
                        n.xx.instance.hide();
                        var t = e.target;
                        t.removeEventListener(n.AP.ANSWER_CHOSEN, i.textureResolutionAnswerChosen);
                        var s = t.index;
                        t.die(), 0 === s && (l.Z.textureResolution = i.chosenTextureResolution, i.sharedObject.data.textureResolution = i.chosenTextureResolution, window.parent.history.replaceState({}, document.title, window.parent.location.pathname), window.location.reload());
                    }, i.increasedFramesWarningAnswerChosen = function (e) {
                        n.xx.instance.hide();
                        var t = e.target;
                        t.removeEventListener(n.AP.ANSWER_CHOSEN, i.increasedFramesWarningAnswerChosen);
                        var s = t.index;
                        t.die(), 0 == s && (i.increasedFramesCheck.gotoAndStop(2), l.Z.use60FPS = true, h.Xj.maxFPS = 60, i.sharedObject.data.use60FPS = true);
                    }, i.mouseOverHandler = function (e) {
                        switch (e.target) {
                            case i.fCheck:
                                n.xx.instance.show("Performance may be greatly reduced when using fullscreen mode. Non-vector graphics will appear pixelated due to scaling up. The only blood setting that will look as intended will be setting 2, which is rendered in vector. Press escape at any time to exit fullscreen mode.", i.fCheck);
                                break;
                            case i.increasedFramesCheck:
                                var t;
                                t = l.Z.use60FPS ? "Turn this back off if you are not reaching 60 FPS." : "Experimental option to raise FPS cap to 60. Do not enable on a slow PC.", n.xx.instance.show(t, i.increasedFramesCheck);
                                break;
                            case i.CORSCheck:
                                n.xx.instance.show("Click this to change what server is used to connect to Happy Wheels. Do not change this if you don't know what it does.", i.CORSCheck);
                                break;
                            case i.textureResolutionLowCheck:
                                n.xx.instance.show("low", i.textureResolutionLowCheck);
                                break;
                            case i.textureResolutionMediumCheck:
                                n.xx.instance.show("medium", i.textureResolutionMediumCheck);
                                break;
                            case i.textureResolutionHighCheck:
                                n.xx.instance.show("high", i.textureResolutionHighCheck);
                        }
                    }, i.sliderChange = function (e) {
                        c.z.maxParticles = e.value, i.sharedObject.data.maxParticles = c.z.maxParticles;
                    }, i.bloodTypeSliderChange = function (e) {
                        l.Z.bloodSetting = e.value, l.Z.sharedObject.data.bloodSetting = l.Z.bloodSetting, z.f.trackEvent(z.f.OPTIONS, z.f.SET_BLOOD, "value_" + e.value);
                    }, i.renderResSliderChange = function (e) {
                        i.sharedObject.data.renderResolutionIncrease = e.value, i.sharedObject.flush(), l.Z.renderResolutionIncrease = e.value, nt.instance.resize();
                    }, i.renderResSlider = new Ee("", "", 1, true, 0, 4, 4), i.renderResSlider.x = 465, i.renderResSlider.y = 80, i.renderResSlider.inputText._pixiTextInput.maxLength = 1, i.renderResSlider.inputText.restrict = "1-4", i.addChild(i.renderResSlider), i.renderResSlider.setValue(l.Z.renderResolutionIncrease), i.renderResSlider.helpCaption = "This controls the game's render resolution. Increasing the resolution improves visual quality but can degrade performance.", i.renderResSlider.addEventListener(n.fF.VALUE_CHANGE, i.renderResSliderChange), i.increasedFramesCheck = i.__mc.increasedFramesCheck, i.increasedFramesCheck.buttonMode = true, i.increasedFramesCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.increasedFramesCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.CORSCheck = i.__mc.CORSCheck, i.CORSCheck.buttonMode = true, i.CORSCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.CORSCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.textureResolutionLowCheck = i.__mc.textureResolutionLowCheck, i.textureResolutionLowCheck.buttonMode = true, "low" !== l.Z.textureResolution && i.textureResolutionLowCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.textureResolutionLowCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.textureResolutionMediumCheck = i.__mc.textureResolutionMediumCheck, i.textureResolutionMediumCheck.buttonMode = true, "medium" !== l.Z.textureResolution && i.textureResolutionMediumCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.textureResolutionMediumCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.textureResolutionHighCheck = i.__mc.textureResolutionHighCheck, i.textureResolutionHighCheck.buttonMode = true, "high" !== l.Z.textureResolution && i.textureResolutionHighCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.textureResolutionHighCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.fCheck = i.__mc.fCheck, i.fCheck.buttonMode = true, i.fCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.fCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.soundCheck = i.__mc.soundCheck, i.soundCheck.buttonMode = true, i.soundCheck.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.soundCheck.addEventListener(h.TF.MOUSE_OVER, i.mouseOverHandler), i.customizeControlsButton = (0, b.Ev)(n.bY, i.__mc, "customizeControlsButton", { fileName: "GameUI", mcName: "mc_customize_keys_button" }), i.customizeControlsButton.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i.sharedObject = l.Z.sharedObject, t == h.CV.FULL_SCREEN_INTERACTIVE ? i.fCheck.gotoAndStop(2) : i.fCheck.gotoAndStop(1), l.Z.use60FPS ? i.increasedFramesCheck.gotoAndStop(2) : i.increasedFramesCheck.gotoAndStop(1), i.textureResolutionLowCheck.gotoAndStop("low" === l.Z.textureResolution ? 2 : 1), i.textureResolutionMediumCheck.gotoAndStop("medium" === l.Z.textureResolution ? 2 : 1), i.textureResolutionHighCheck.gotoAndStop("high" === l.Z.textureResolution ? 2 : 1), be.i.instance.isMuted ? i.soundCheck.gotoAndStop(2) : i.soundCheck.gotoAndStop(1), i.particleSlider = new Ee("", "", 4, true, 0, 2e3, 10), i.particleSlider.x = 465, i.particleSlider.y = 113, i.addChild(i.particleSlider), i.particleSlider.setValue(c.z.maxParticles), i.particleSlider.helpCaption = "This is the maximum number of particles that can be seen at once on screen.  Blood, broken glass, splintered wood, and other tiny flying objects are particles.  Lowering the number may increase performance.  If you don't want to see any spouting blood, set it to 0.", i.particleSlider.inputText._pixiTextInput.maxLength = 4, i.particleSlider.inputText.restrict = "0-9", i.particleSlider.addEventListener(n.fF.VALUE_CHANGE, i.sliderChange), i.bloodTypeSlider = new Ee("", "", 1, true, 1, 4, 3), i.bloodTypeSlider.x = 465, i.bloodTypeSlider.y = 143, i.bloodTypeSlider.inputText._pixiTextInput.maxLength = 1, i.bloodTypeSlider.inputText.restrict = "1-4", i.addChild(i.bloodTypeSlider), i.bloodTypeSlider.setValue(l.Z.bloodSetting), i.bloodTypeSlider.helpCaption = "This controls how the blood will look.<br><br>1) This is the original blood setting. It looks the worst but runs the fastest.<br><br>2) Each blood particle is drawn as a line. Runs slightly worse than 1 but looks a bit better<br><br>3) The blood looks like actual liquid. Runs a bit worse than 2. For the sake of performance, all blood is rendered on one layer.<br><br>4) This is just like setting 3, but has an additional bevel and blend mode applied. Only use this with a fast computer.", i.bloodTypeSlider.addEventListener(n.fF.VALUE_CHANGE, i.bloodTypeSliderChange), 1.9 == l.Z.CURRENT_VERSION) {
                        var s = l.Z.sharedObject;
                        if (null == s.data.renderresolutionpopup || l.Z.showArrowInOptionsMenu) {
                            s.data.renderresolutionpopup = 1, l.Z.showArrowInOptionsMenu = true;
                            var r = new h.KG;
                            r.setPixiMovieClip((0, b.qX)("GameUI", "BigArrow")), r.x = 265, r.y = 98, r.alpha = 0, i.addChild(r), L.iC.to(r, 1.5, { alpha: 1, ease: L.Yp.easeOut });
                        }
                    }
                    return i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Me(t, i);
                var r = s.prototype;
                return r.displayTextureResolutionChangePopup = function () {
                    var e = new n.AP("Changing this setting requires a game reload. Reload the game?", "yes", "no, nevermind", true, 280, 120, 5162061, 16613761);
                    e.addEventListener(n.AP.ANSWER_CHOSEN, this.textureResolutionAnswerChosen, false, 0, true);
                    var t = e.window;
                    this.stage.addChild(t), t.center();
                }, r.die = function () {
                    e.prototype.die.call(this), this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.removeEventListener(h.TF.MOUSE_OVER, this.mouseOverHandler), this.particleSlider.removeEventListener(n.fF.VALUE_CHANGE, this.sliderChange), this.bloodTypeSlider.removeEventListener(n.fF.VALUE_CHANGE, this.bloodTypeSliderChange), this.renderResSlider.removeEventListener(n.fF.VALUE_CHANGE, this.renderResSliderChange), this.bloodTypeSlider.die(), this.particleSlider.die();
                }, s;
            }(q);
            function xe(e, t) {
                return (xe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Oe = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    (i = e.call(this) || this).userPress = function (e) {
                        if (i.userBtn.active) {
                            var t = new h.RW(l.Z.siteURL + "profile.tjf?uid=" + i._replayDataObject.user_id);
                            (0, h.hR)(t, "_blank"), m.fX.trackEvent(m.fX.REPLAY_BROWSER, m.fX.GOTO_USER_PAGE, "userID_" + i._replayDataObject.user_id);
                        }
                    };
                    var s = new h.KG((0, b.qX)("GameUI", "mc_replaylistitem"));
                    return s.convertChildren(), i.addChild(s), i.bg = s.bg, i.characterFaces = s.characterFaces, i.userBtn = s.userBtn, i.accurateMc = s.accurateMc, i.userText = h.nv.spriteToTextField(s.userText, s), i.timeText = h.nv.spriteToTextField(s.timeText, s), i.viewsText = h.nv.spriteToTextField(s.viewsText, s), i.createdText = h.nv.spriteToTextField(s.createdText, s), i.voteStars = (0, b.Ev)(E, s, "voteStars", { mcName: "mc_votestars" }), i._replayDataObject = t, i.buttonMode = true, i.voteStars.mouseEnabled = false, i.timeText.embedFonts = i.userText.embedFonts = i.viewsText.embedFonts = i.createdText.embedFonts = true, i.timeText.selectable = i.userText.selectable = i.viewsText.selectable = i.createdText.selectable = false, i.userText.text = i._replayDataObject.user_name, i.timeText.text = i._replayDataObject.timeFrames < l.Z.maxReplayFrames ? String(m.LC.setToHundredths(i._replayDataObject.timeSeconds)) + " seconds" : "---", i.viewsText.text = m.LC.addIntegerCommas(i._replayDataObject.views), i.createdText.text = m.LC.shortenDate(i._replayDataObject.created), i.voteStars.rating = i._replayDataObject.average_rating, i.characterFaces.gotoAndStop(i._replayDataObject.character), 0 == i._replayDataObject.character && i.characterFaces.gotoAndStop(l.Z.totalCharacters + 1), i._replayDataObject.architecture == l.Z.architecture ? (i.accurateMc.gotoAndStop(1), i._accurate = true) : i.accurateMc.gotoAndStop(2), i.userBtn.width = i.userText.textWidth + 5, i.userBtn.visible = false, i.userBtn.addEventListener(h.TF.MOUSE_UP, i.userPress, false, 0, true), i.userBtn.pixiSprite.on("pointerover", function () {
                        return i.userBtn.active = true;
                    }), i.userBtn.pixiSprite.on("pointerout", function () {
                        return i.userBtn.active = false;
                    }), i.rollOut(), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, xe(t, i);
                var r, o, n = s.prototype;
                return n.rollOver = function () {
                    this.bg.gotoAndStop(2), this.textColor = 4032711;
                }, n.rollOut = function () {
                    this._selected ? this.rollOver() : (this.bg.gotoAndStop(1), this.textColor = 8947848);
                }, n.mouseDown = function () {
                    this._selected || (this.bg.gotoAndStop(3), this.textColor = 16777215);
                }, r = s, (o = [{
                    key: "textColor", set: function (e) {
                        this.timeText.textColor = this.userText.textColor = this.viewsText.textColor = this.createdText.textColor = e;
                    }
                }, {
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, this._selected ? (this.userText.htmlText = "<u>" + this.userText.text + "</u>", this.rollOver(), this.userBtn.visible = true, this.bg.alpha = 1, B.ij.instance.playSoundItem("MenuSelect2")) : (this.userText.htmlText = this.userText.text, this.rollOut(), this._faded && (this.bg.alpha = s.FADE_VALUE), this.userBtn.visible = false);
                    }
                }, {
                    key: "faded", get: function () {
                        return this._faded;
                    }, set: function (e) {
                        this._faded = e, this._faded && !this._selected ? this.bg.alpha = s.FADE_VALUE : this.bg.alpha = 1;
                    }
                }, {
                    key: "hidden", get: function () {
                        return this._hidden;
                    }, set: function (e) {
                        this.visible = !e, this._hidden = e;
                    }
                }, {
                    key: "accurate", get: function () {
                        return this._accurate;
                    }
                }, {
                    key: "height", get: function () {
                        return this._hidden ? 0 : s.BG_HEIGHT;
                    }
                }, {
                    key: "replayDataObject", get: function () {
                        return this._replayDataObject;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function Te(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function Pe(e, t) {
                return (Pe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            Oe.BG_HEIGHT = 22, Oe.FADE_VALUE = .5;
            var Re = function (e) {
                var t, i, s, r;
                function o(t) {
                    var i;
                    (i = e.call(this) || this).fullHeight = 110, i.baseHeight = 0, i.scroll = function (e) {
                        if (i.mouseX > 0 && i.mouseX < 250 && i.mouseY > 0 && i.mouseY < i.fullHeight) {
                            var t = .5 * e.delta, s = i.fullHeight / 2, r = (s - i.mouseY) / s * 10 * t;
                            i.comments.y += r, i.comments.y + i.comments.height < i.fullHeight && (i.comments.y = i.fullHeight - i.comments.height), i.comments.y > 0 && (i.comments.y = 0);
                        }
                    }, i.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case i.playButton:
                                m.fX.trackEvent(m.fX.REPLAY_BROWSER, m.fX.LOAD_REPLAY, "replayID_" + i._replayDataObject.id), i.dispatchEvent(new w.z4(w.z4.SESSION, null, i._replayDataObject));
                                break;
                            case i.flagButton:
                                i.dispatchEvent(new w.TM(w.TM.FLAG, i._replayDataObject.id)), o.flaggedReplays.push(i._replayDataObject.id), i.flagButton.disabled = true;
                        }
                    };
                    var s = (0, b.qX)("GameUI", "mc_replayselection");
                    i.__mc = s;
                    var r = [];
                    return s.children.forEach(function (e) {
                        var t;
                        e instanceof v.MovieClip ? (t = new h.KG(null, false)).setPixiMovieClip(e) : t = new h.jy(e, false), e.name ? (t.name = t.pixiSprite.name = e.name, i[e.name] = t) : t.name = t.pixiSprite.name = "unknown", r.push(t);
                    }), r.forEach(function (e) {
                        i.addChild(e);
                    }), i.descriptionText = h.nv.spriteToTextField(i.descriptionText, Te(i)), i.characterText = h.nv.spriteToTextField(i.characterText, Te(i)), i.commentsText = h.nv.spriteToTextField(i.commentsText, Te(i)), i.avgRatingText = h.nv.spriteToTextField(i.avgRatingText, Te(i)), i.wtdRatingText = h.nv.spriteToTextField(i.wtdRatingText, Te(i)), i.linkText = h.nv.spriteToTextField(i.linkText, Te(i)), i.playButton = (0, b.Ev)(n.bY, Te(i), "playButton", { fileName: "GameUI", mcName: "mc_replayselection_view_button" }), i.linkText.type = h.T3.INPUT, i.linkText._pixiTextInput._dom_input.setAttribute("readonly", ""), i.linkText._pixiTextInput.setInputStyle("width", "214px"), i._replayDataObject = t, i.shadow.mouseEnabled = false, i.descriptionText.autoSize = h.ie.LEFT, i.descriptionText.wordWrap = true, i.descriptionText.text = i._replayDataObject.comments, i.characterText.text = l.Z.characterNames[i._replayDataObject.character - 1], i.avgRatingText.text = String(m.LC.setToHundredths(i._replayDataObject.average_rating)) + " / 5.00 (" + i._replayDataObject.votes + " votes)", i.wtdRatingText.text = String(m.LC.setToHundredths(i._replayDataObject.weighted_rating)) + " / 5.00 (" + i._replayDataObject.votes + " votes)", i.linkText._pixiTextInput.text = l.Z.siteURL + "happy_wheels.tjf?replay_id=" + i._replayDataObject.id, i.flagButton = new n.Me("flag as inappropriate", 13421772, 188, 6312772), i.flagButton.x = 535, i.flagButton.y = 77, o.flaggedReplays.indexOf(t.id) > -1 && (i.flagButton.disabled = true), i.comments = new h.jy, i.addChild(i.comments), i.comments.addChild(i.descriptionText), i.comments.addChild(i.commentsText), i.comments.graphics.beginFill(15724527, 1), i.comments.graphics.drawRect(0, 0, 250, i.comments.height), i.comments.graphics.endFill(), i.comments.height > i.fullHeight && i.addEventListener(h.ju.ENTER_FRAME, i.scroll), i.addChild(i.shadow), i.maskSprite = new h.jy, i.maskSprite.graphics.beginFill(16711680), i.maskSprite.graphics.drawRect(0, 0, i.shadow.width, i.shadow.height), i.maskSprite.graphics.endFill(), i.maskSprite.visible = false, i.addEventListener(h.TF.MOUSE_UP, i.mouseUpHandler), i;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, Pe(t, i), o.prototype.die = function () {
                    this.removeEventListener(h.ju.ENTER_FRAME, this.scroll), this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler);
                }, s = o, (r = [{
                    key: "replayDataObject", get: function () {
                        return this._replayDataObject;
                    }
                }, {
                    key: "maskHeight", get: function () {
                        return this.baseHeight;
                    }, set: function (e) {
                        this.baseHeight = e, this.shadow.height = this.maskSprite.height = e, this.actualMask || (this.actualMask = new h.jy), this.addChild(this.actualMask), this.actualMask.graphics.clear(), this.actualMask.graphics.beginFill(16711680, .5), this.actualMask.graphics.drawRect(0, 0, this.shadow.width, this.baseHeight), this.pixiSprite.mask = this.actualMask.graphics.pixiGraphics;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(s.prototype, r), Object.defineProperty(s, "prototype", { writable: false }), o;
            }(h.jy);
            function De(e, t) {
                return (De = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            Re.flaggedReplays = [];
            var Ie = function (e) {
                var t, i;
                function s(t, i, r, o) {
                    var n;
                    void 0 === i && (i = -1), void 0 === r && (r = -1), void 0 === o && (o = false), (n = e.call(this) || this)._tweenVal = 0, n.tweenTime = .25, n.keyDownHandler = function (e) {
                        if (!n.opening) switch (e.keyCode) {
                            case 38:
                                n.selectPreviousListItem();
                                break;
                            case 40:
                                n.selectNextListItem();
                        }
                    }, n.mouseOverHandler = function (e) {
                        if (e) {
                            var t = e;
                            e.buttonDown ? t.mouseDown() : t.rollOver();
                        }
                    }, n.mouseOutHandler = function (e) {
                        e && e.rollOut();
                    }, n.mouseDownHandler = function (e) {
                        "bg" === e.target.name && e.target.parent.parent.mouseDown();
                    }, n.mouseUpHandler = function (e) {
                        if ("bg" === e.target.name) {
                            var t = e.target.parent.parent;
                            n.selectedListItem ? (t != n.selectedListItem ? (n.selectedListItem.selected = false, n.selectedListItem = t, n.selectedListItem.selected = true) : (n.selectedListItem.selected = false, n.selectedListItem = null), n.closing || n.closeSelection()) : (n.selectedListItem = t, t.selected = true, n.closing || n.openSelection());
                        } else if (e.target instanceof h.KG) {
                            var i = e.target;
                            "characterFaces" == i.name && (n.selectedCharacter = i.currentFrame, n.dispatchEvent(new h.ju(s.FACE_SELECTED)));
                        }
                    }, n.closingComplete = function () {
                        n.closing = false, n.removeChild(n.replaySelection), n.replaySelection = null, n.selectedListItem ? n.openSelection() : (n.organizeList(), n.dispatchEvent(new h.ju(s.UPDATE_SCROLLER)));
                    }, n.openComplete = function () {
                        n.opening = false;
                    }, n.cloneAndDispatchEvent = function (e) {
                        var t = e.clone();
                        n.dispatchEvent(t);
                    }, n.listItemArray = [];
                    for (var a = 0, l = t.length, c = function () {
                        var e = t[d], s = new Oe(e);
                        n.addChild(s), n.listItemArray.push(s), s.y = a, a += s.height, e.id == i && (n.selectedListItem = s), s.mouseEnabled = true, s.mouseChildren = true, s.bg.pixiSprite.on("pointerover", function () {
                            return n.mouseOverHandler(s);
                        }), s.bg.pixiSprite.on("pointerout", function () {
                            return n.mouseOutHandler(s);
                        }), s.bg.addEventListener(h.TF.MOUSE_DOWN, n.mouseDownHandler), s.bg.addEventListener(h.TF.MOUSE_UP, n.mouseUpHandler), s.characterFaces.addEventListener(h.TF.MOUSE_UP, n.mouseUpHandler);
                    }, d = 0; d < l; d++) c();
                    return n.selectedListItem && (n.selectedListItem.selected = true, n.openSelection()), n.selectedCharacter = r, n.inaccurateHidden = o, n.windowBind = n.keyDownHandler.bind(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(n)), window.addEventListener("keydown", n.windowBind, false), n;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, De(t, i);
                var r, o, n = s.prototype;
                return n.selectPreviousListItem = function () {
                    if (this.selectedListItem) {
                        var e = this.listItemArray.indexOf(this.selectedListItem);
                        if (0 == e) return;
                        this.selectedListItem.selected = false, e -= 1, this.selectedListItem = this.listItemArray[e], this.selectedListItem.selected = true, this.closing || this.closeSelection();
                    }
                }, n.selectNextListItem = function () {
                    if (this.selectedListItem) {
                        var e = this.listItemArray.indexOf(this.selectedListItem);
                        if (e == this.listItemArray.length - 1) return;
                        this.selectedListItem.selected = false, e += 1, this.selectedListItem = this.listItemArray[e], this.selectedListItem.selected = true, this.closing || this.closeSelection();
                    }
                }, n.closeSelection = function () {
                    this.closing = true, this.killReplaySelection(), L.iC.to(this, this.tweenTime, { tweenVal: 0, ease: L.Yp.easeInOut, onComplete: this.closingComplete });
                }, n.killReplaySelection = function () {
                    this.replaySelection.die(), this.replaySelection.removeEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.replaySelection.removeEventListener(w.TM.FLAG, this.cloneAndDispatchEvent);
                }, n.openSelection = function () {
                    var e = this.getChildIndex(this.selectedListItem) + 1;
                    this.replaySelection = new Re(this.selectedListItem.replayDataObject), this.replaySelection.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.replaySelection.addEventListener(w.TM.FLAG, this.cloneAndDispatchEvent), this.addChildAt(this.replaySelection, e), this.replaySelection.maskHeight = 0, this.opening = true, L.iC.to(this, this.tweenTime, { tweenVal: 1, ease: L.Yp.easeInOut, onComplete: this.openComplete });
                }, n.organizeList = function () {
                    var e;
                    this.selectedListItem && (e = this.selectedListItem.y);
                    for (var t, i = this.numChildren, s = 0, r = 0; r < i; r++) (t = this.getChildAt(r)).y = s, s += t instanceof Oe ? t.height : t instanceof Re ? t.maskHeight : t.height;
                    if (this.selectedListItem) {
                        var o = e - this.selectedListItem.y;
                        this.y += o, (o = this.y + this.selectedListItem.y) < 0 && (this.y -= o);
                    }
                    if (this.replaySelection && this.opening) {
                        var n = this.replaySelection.y + this.replaySelection.maskHeight;
                        (o = 352 - this.y - n) < 0 && (this.y += o);
                    }
                }, n.die = function () {
                    var e = this;
                    this.listItemArray.forEach(function (t) {
                        t.bg.pixiSprite.off("pointerover"), t.bg.pixiSprite.off("pointerout"), t.bg.removeEventListener(h.TF.MOUSE_DOWN, e.mouseDownHandler), t.bg.removeEventListener(h.TF.MOUSE_UP, e.mouseUpHandler), t.characterFaces.removeEventListener(h.TF.MOUSE_UP, e.mouseUpHandler);
                    }), window.removeEventListener("keydown", this.windowBind, false), this.replaySelection && this.killReplaySelection();
                }, r = s, (o = [{
                    key: "tweenVal", get: function () {
                        return this._tweenVal;
                    }, set: function (e) {
                        this._tweenVal = e, this.replaySelection.maskHeight = Math.round(this.replaySelection.fullHeight * e), this.organizeList(), this.dispatchEvent(new h.ju(s.UPDATE_SCROLLER));
                    }
                }, {
                    key: "height", get: function () {
                        for (var e = 0, t = this.listItemArray.length, i = 0; i < t; i++) e += this.listItemArray[i].height;
                        return this.replaySelection && (e += this.replaySelection.maskHeight), e;
                    }, set: function (e) {
                        throw new Error("cannot set list height manually");
                    }
                }, {
                    key: "selectedCharacter", get: function () {
                        return this._selectedCharacter;
                    }, set: function (e) {
                        if (e > 0 && this._selectedCharacter != e) {
                            this._highlightedArray = [];
                            for (var t = this.listItemArray.length, i = 0; i < t; i++) {
                                var r = this.listItemArray[i], o = r.characterFaces.currentFrame;
                                o == e ? (r.faded = false, this._highlightedArray.push(r)) : r.faded = true;
                            }
                            this._selectedCharacter = e;
                        } else {
                            for (this._highlightedArray = null, t = this.listItemArray.length, i = 0; i < t; i++) o = (r = this.listItemArray[i]).characterFaces.currentFrame, r.faded = false;
                            this._selectedCharacter = -1, this.dispatchEvent(new h.ju(s.FACE_SELECTED));
                        }
                    }
                }, {
                    key: "highlightedArray", get: function () {
                        return this._highlightedArray;
                    }
                }, {
                    key: "inaccurateHidden", get: function () {
                        return this._inaccurateHidden;
                    }, set: function (e) {
                        var t = this.listItemArray.length;
                        if (e) for (var i = 0; i < t; i++) {
                            var r = this.listItemArray[i];
                            r.hidden = !r.accurate, r.hidden && this.selectedListItem && r == this.selectedListItem && (this.selectedListItem.selected = false, this.selectedListItem = null, this.replaySelection && this.closeSelection());
                        } else for (i = 0; i < t; i++) (r = this.listItemArray[i]).hidden = false;
                        this._inaccurateHidden = e, this.organizeList(), this.dispatchEvent(new h.ju(s.UPDATE_SCROLLER));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function je(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function Fe(e, t) {
                return (Fe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            Ie.UPDATE_SCROLLER = "updatescroller", Ie.FACE_SELECTED = "faceselected";
            var Je = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    void 0 === t && (t = null), (i = e.call(this) || this).loadData = function (e) {
                        void 0 === e && (e = null);
                        for (var t = 0; t < i.dropMenuArray.length; t++) s.savedDropSettings[t] = s.currentDropSettings[t];
                        i.refreshButton.setSpin(true), s.replayDataArray = [];
                        var r = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"));
                        r.method = h.H9.POST, s.urlVariables = new h.JH, s.urlVariables.action = "get_all_by_level", s.urlVariables.page = s.currentSet = s.currentPage = 1, s.urlVariables.level_id = s._levelId, s.urlVariables.sortby = i.sortDropMenu.value, r.data = s.urlVariables, e && m.fX.trackEvent(m.fX.REPLAY_BROWSER, m.fX.REFRESH_REPLAYS, i.sortDropMenu.value), i.statusSprite = new n.dU("loading replays...");
                        var o = i.statusSprite.window;
                        i.addChild(o), o.center(), i.loader = new h.yW, i.loader.addEventListener(h.ju.COMPLETE, i.replayDataLoaded), i.loader.addEventListener(h.XD.IO_ERROR, i.IOErrorHandler), i.loader.addEventListener(h.P5.SECURITY_ERROR, i.securityErrorHandler), i.loader.load(r);
                    }, i.replayDataLoaded = function (e) {
                        var t;
                        i.statusSprite.die(), i.removeLoaderListeners(), i.refreshButton.setSpin(false);
                        var r = String(i.loader.data), o = r.substr(0, 8);
                        if (o.indexOf("<html>") > -1) return i.createPromptSprite("There was an unexpected system Error", "oh"), void i.updateRefreshButton(true);
                        if (o.indexOf("failure") > -1) {
                            var n = r.split(":");
                            return "invalid_action" == n[1] ? i.createPromptSprite("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" == n[1] ? i.createPromptSprite("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == n[1] ? i.createPromptSprite("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : i.createPromptSprite("An unknown Error has occurred.", "oh"), void i.updateRefreshButton(true);
                        }
                        i.updateRefreshButton();
                        var a = new h.hH(i.loader.data);
                        s.replayDataArray || (s.replayDataArray = []);
                        for (var l = null === (t = a.rp) || void 0 === t ? void 0 : t.length, c = 0; c < l; c++) {
                            var d = a.rp[c], p = new _.Xo(d["@id"], d["@li"], d["@ui"], d["@un"], d["@rg"], d["@vs"], d["@vw"], d["@dc"], d.uc[0].cdata, d["@pc"], d["@ct"], d["@ar"], d["@vr"]);
                            s.replayDataArray.push(p);
                        }
                        i.list && i.killList(), i.buildList();
                    }, i.IOErrorHandler = function (e) {
                        i.statusSprite && i.statusSprite.die(), i.removeLoaderListeners(), i.updateRefreshButton(), i.refreshButton.setSpin(false), i.createPromptSprite("Sorry, there was an IO Error. Try changing your CORS proxy?", "ugh, ok");
                    }, i.securityErrorHandler = function (e) {
                        i.statusSprite && i.statusSprite.die(), i.removeLoaderListeners(), i.updateRefreshButton(), i.refreshButton.setSpin(false), i.createPromptSprite("Sorry, there was a Security Error.", "ugh, ok");
                    }, i.dropMenuSelected = function (e) {
                        void 0 === e && (e = null);
                        var t = e.target, r = i.dropMenuArray.indexOf(t), o = t.currentIndex;
                        s.currentDropSettings[r] = o, i.organizeDropMenus(), i.updateRefreshButton(null == e);
                    }, i.backPress = function (e) {
                        i.backButton.removeEventListener(h.TF.MOUSE_UP, i.backPress), s.currentPage = 1, m.fX.trackEvent(m.fX.REPLAY_BROWSER, m.fX.GOTO_LEVEL_BROWSER);
                        var t = new w.z4(w.z4.PREVIOUS_MENU);
                        t.target = je(i), i.dispatchEvent(t);
                    }, i.flipPage = function (e) {
                        var t = s.currentSet;
                        s.currentPage = i.pageFlipper.currentPage, s.currentSet = Math.ceil(s.currentPage * s.pageLength / s.setLength);
                        var r = s.replayDataArray.length;
                        s.currentSet > t && r <= (s.currentSet - 1) * s.setLength ? i.loadDataOffset() : (i.killList(), i.buildList());
                    }, i.flagReplay = function (e) {
                        var t = e.extra;
                        i.statusSprite = new n.dU("flagging replay...");
                        var s = i.statusSprite.window;
                        i.addChild(s), s.center();
                        var r = new h.RW(l.Z.siteURL + l.Z.FLAG_REPLAY), o = new h.JH;
                        o.replayid = t, r.data = o, i.loader = new h.yW, i.loader.dataFormat = h.mN.VARIABLES, i.loader.addEventListener(h.ju.COMPLETE, i.flagComplete), i.loader.addEventListener(h.XD.IO_ERROR, i.IOErrorHandler), i.loader.addEventListener(h.P5.SECURITY_ERROR, i.securityErrorHandler), i.loader.load(r);
                    }, i.flagComplete = function (e) {
                        if (i.statusSprite.die(), i.removeLoaderListeners(), "error" != i.loader.data.ToFlash) {
                            var t = new n.sP("Replay flagged, Thank you.", "ok").window;
                            i.addChild(t), t.center();
                        }
                    }, i.cloneAndDispatchEvent = function (e) {
                        if (e.type == w.z4.SESSION) {
                            e.replayDataObject && (s.lastReplayId = e.replayDataObject.id);
                            var t = new w.z4(e.type, s._levelDataObject, e.replayDataObject, e.extra);
                            i.dispatchEvent(t);
                        } else {
                            var r = e.clone();
                            i.dispatchEvent(r);
                        }
                    }, i.faceSelected = function (e) {
                        void 0 === e && (e = null), s.selectedCharacter = i.list.selectedCharacter;
                    }, i.updateScroller = function (e) {
                        void 0 === e && (e = null), i.scrollBar.updateScrollTab();
                    }, i.archValueChange = function (e) {
                        s.hideInnaccurate = e.value, i.list.inaccurateHidden = s.hideInnaccurate, i.updateScroller();
                    }, i.archRollOver = function (e) {
                        n.xx.instance.show("When a replay is saved, the type of computer it was created on is saved along with it.  Computers that match this type will show the replay 100% accurately.  Those that do not will playback the replay with slightly different floating point math, which often (but not always) creates a different end result entirely.<br><br>Users may only rate replays they can view accurately.", i.archCheck);
                    };
                    var r = (0, b.qX)("GameUI", "mc_replay_browser");
                    i.__mc = r;
                    var o = [];
                    return r.children.forEach(function (e) {
                        var t;
                        e instanceof v.MovieClip ? (t = new h.KG(null, false)).setPixiMovieClip(e) : t = new h.jy(e, false), e.name ? (t.name = t.pixiSprite.name = e.name, i[e.name] = t) : t.name = t.pixiSprite.name = "unknown", o.push(t);
                    }), o.forEach(function (e) {
                        i.addChild(e);
                    }), i.titleText = h.nv.spriteToTextField(i.titleText, je(i)), i.backButton = (0, b.Ev)(n.bY, je(i), "backButton", { fileName: "GameUI", mcName: "mc_featured_back_button" }), t && (s._levelId = t.id, s._levelDataObject = t), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Fe(t, i);
                var r = s.prototype;
                return r.init = function () {
                    this.mouseChildren = false, this.shadow.mouseEnabled = false, this.refreshButton = new J, this.addChild(this.refreshButton), this.refreshButton.x = this.shadow.x + this.shadow.width + 10, this.refreshButton.y = this.shadow.y - 22, this.buildDropMenus(), this.titleText.htmlText = "Replays - " + s._levelDataObject.name, this.titleText.filters = [new h.Vw(16777215, void 0, void 0, void 0, .5, 2), new h.pt(6, 90, 0)];
                    var e = new h.nv;
                    e.htmlText = "by", e.defaultTextFormat = new h.SQ("clarendon", 15, 13421772, true, false, false, null, null, "left", 0, 0, 2), e.x = 102 + this.titleText._pixiText.width + 10, e.y = 5 + .5 * this.titleText._pixiText.height, e.filters = [new h.Vw(16777215, void 0, void 0, void 0, .5, 2), new h.pt(6, 90, 0)], this.addChild(e);
                    var t = new h.nv;
                    t.htmlText = s._levelDataObject.author_name, t.defaultTextFormat = new h.SQ("clarendon", 15, 16776805, true, false, false, null, null, "left", 0, 0, 2), t.x = e.x + e.width + 10, t.y = 5 + .5 * this.titleText.height, t.filters = [new h.Vw(16777215, void 0, void 0, void 0, .5, 2), new h.pt(6, 90, 0)], this.addChild(t), this.archCheck = new n.Jg("only show accurate replays", "hideInnaccurate", s.hideInnaccurate, true, false, 13421772), this.archCheck.x = this.shadow.x, this.archCheck.y = this.shadow.y - 23, this.addChild(this.archCheck), this.archCheck.addEventListener(n.fF.VALUE_CHANGE, this.archValueChange), this.archCheck.addEventListener(h.TF.ROLL_OVER, this.archRollOver), this.refreshButton.addEventListener(h.TF.MOUSE_UP, this.loadData), this.backButton.addEventListener(h.TF.MOUSE_UP, this.backPress);
                }, r.activate = function () {
                    this.mouseChildren = true, s.replayDataArray ? this.buildList() : this.loadData();
                }, s.importReplayDataArray = function (e, t) {
                    s.replayDataArray = e;
                    var i = s.replayDataArray[0];
                    s.lastReplayId = i.id, s._levelDataObject = t, s._levelId = t.id, s.currentPage = 1, s.currentSet = 1, s.hideInnaccurate = false;
                }, r.clearReplayList = function () {
                    s.replayDataArray = null, s.urlVariables = null;
                }, r.loadDataOffset = function () {
                    this.refreshButton.setSpin(true);
                    var e = new h.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"));
                    e.method = h.H9.POST, e.data = s.urlVariables, s.urlVariables.page = s.currentSet, this.statusSprite = new n.dU("loading replays...");
                    var t = this.statusSprite.window;
                    this.addChild(t), t.center(), m.fX.trackEvent(m.fX.REPLAY_BROWSER, m.fX.PAGE_REPLAYS, this.sortDropMenu.value, s.currentSet), this.loader = new h.yW, this.loader.addEventListener(h.ju.COMPLETE, this.replayDataLoaded), this.loader.addEventListener(h.XD.IO_ERROR, this.IOErrorHandler), this.loader.addEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler), this.loader.load(e);
                }, r.createPromptSprite = function (e, t) {
                    var i = new n.sP(e, t).window;
                    this.addChild(i), i.center();
                }, r.removeLoaderListeners = function () {
                    this.loader.removeEventListener(h.ju.COMPLETE, this.replayDataLoaded), this.loader.removeEventListener(h.XD.IO_ERROR, this.IOErrorHandler), this.loader.removeEventListener(h.P5.SECURITY_ERROR, this.securityErrorHandler);
                }, r.buildDropMenus = function () {
                    this.sortDropMenu = new C.m("sort by:", ["newest", "oldest", "rating", "completion time"], ["newest", "oldest", "rating", "completion_time"], s.savedDropSettings[0]), this.addChild(this.sortDropMenu), this.sortDropMenu.y = this.shadow.y - 21, this.sortDropMenu.addEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.dropMenuArray = [this.sortDropMenu], this.organizeDropMenus();
                }, r.organizeDropMenus = function () {
                    for (var e = this.shadow.width + this.shadow.x, t = this.dropMenuArray.length - 1; t > -1; t--) {
                        var i = this.dropMenuArray[t];
                        1 == s.dropStates[t] ? (i.visible = true, i.xLeft = e - i.width, e = i.xLeft - s.dropMenuSpacing) : i.visible = false;
                    }
                }, r.updateRefreshButton = function (e) {
                    void 0 === e && (e = false);
                    for (var t = 0; t < this.dropMenuArray.length; t++) s.currentDropSettings[t] != s.savedDropSettings[t] && (e = true);
                    this.refreshButton.setGlow(e);
                }, r.buildList = function () {
                    var e = (s.currentPage - 1) * s.pageLength, t = e + s.pageLength;
                    t = Math.min(t, s.replayDataArray.length);
                    var i = s.replayDataArray.slice(e, t);
                    this.listContainer = new h.jy, this.list = new Ie(i, s.lastReplayId, s.selectedCharacter, s.hideInnaccurate), s.lastReplayId = -1, this.listMask = new h.jy, this.listContainer.x = this.listHeader.x, this.listContainer.y = this.listHeader.y + this.listHeader.height, this.listMask.graphics.beginFill(16711680), this.listMask.graphics.drawRect(0, 0, this.shadow.width, this.shadow.height - this.listHeader.height), this.listMask.graphics.endFill(), this.list.mask = this.listMask, this.addChildAt(this.listContainer, this.getChildIndex(this.listHeader) + 1), this.listContainer.addChild(this.list), this.listContainer.addChild(this.listMask), this.list.addEventListener(Ie.UPDATE_SCROLLER, this.updateScroller), this.list.addEventListener(Ie.FACE_SELECTED, this.faceSelected), this.list.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.list.addEventListener(w.TM.FLAG, this.flagReplay), this.scrollBar = new D.R(this.list, this.listMask, 22), this.scrollBar.x = this.shadow.x + this.shadow.width + 10, this.scrollBar.y = this.listContainer.y, this.addChildAt(this.scrollBar, 2), this.faceSelected(), this.pageFlipper && (this.pageFlipper.die(), this.pageFlipper.removeEventListener(j.FLIP_PAGE, this.flipPage), this.removeChild(this.pageFlipper), this.pageFlipper = null);
                    var r = s.replayDataArray.length;
                    if (0 == r) {
                        var o = new n.sP("no replays found using these parameters", "ok").window;
                        this.addChild(o), o.center();
                    } else {
                        var a = r % s.setLength > 0;
                        this.pageFlipper = new j(s.currentPage, s.pageLength, r, a), this.addChild(this.pageFlipper), this.pageFlipper.x = this.shadow.x + this.shadow.width, this.pageFlipper.y = this.shadow.y + this.shadow.height + 7, this.pageFlipper.addEventListener(j.FLIP_PAGE, this.flipPage);
                    }
                }, r.killList = function () {
                    this.list.removeEventListener(Ie.UPDATE_SCROLLER, this.updateScroller), this.list.removeEventListener(Ie.FACE_SELECTED, this.faceSelected), this.list.removeEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.list.removeEventListener(w.TM.FLAG, this.flagReplay), this.list.die(), this.list = null, this.scrollBar.die(), this.removeChild(this.scrollBar), this.scrollBar = null, this.removeChild(this.listContainer), this.listContainer = null, this.listMask = null;
                }, r.listMouseWheelHandler = function (e) {
                    var t = e.delta < 0;
                    this.scrollBar.step(t);
                }, r.die = function () {
                    this.sortDropMenu.removeEventListener(C.m.ITEM_SELECTED, this.dropMenuSelected), this.sortDropMenu.die(), this.pageFlipper && (this.pageFlipper.die(), this.pageFlipper.removeEventListener(j.FLIP_PAGE, this.flipPage)), this.backButton.removeEventListener(h.TF.MOUSE_UP, this.backPress), this.archCheck.die(), this.archCheck.removeEventListener(n.fF.VALUE_CHANGE, this.archValueChange), this.archCheck.removeEventListener(h.TF.ROLL_OVER, this.archRollOver), this.refreshButton.removeEventListener(h.TF.MOUSE_UP, this.loadData), this.list && this.killList();
                }, s;
            }(h.jy);
            Je.pageLength = 50, Je.setLength = 500, Je.dropMenuSpacing = 10, Je.currentDropSettings = [3], Je.savedDropSettings = [3], Je.dropStates = [1], Je.selectedCharacter = -1, Je.lastReplayId = -1, Je.hideInnaccurate = false, Je.currentSet = 1;
            var Ge = i(396);
            function He(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function Ve(e, t) {
                return (Ve = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Ne = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).scrollSpeedX = 2, t.scrollSpeedY = 1, t.buttonX = 885, t.buttonSpacing = 10, t.spaceHeight = 0, t.menuCenter = 380, t.tweenTime = 1, t._tweenVal = 0, t.maskTransitioning = false, t.brokenBrowserAnswerChosen = function (e) {
                        n.xx.instance.hide();
                        var i = e.target;
                        i.removeEventListener(n.AP.ANSWER_CHOSEN, t.brokenBrowserAnswerChosen);
                        var s = i.index;
                        i.die(), 1 == s && (l.Z.sharedObject.data.brokenBrowserAlertAccepted = true);
                    }, t.introComplete = function () {
                        var e = l.Z.sharedObject;
                        1.6 == l.Z.CURRENT_VERSION && null == e.data.bloodpopup && (e.data.bloodpopup = 1, t.promptSprite = new n.sP("For those of you incapable of problem solving, I've set blood back to setting 1 by default. As stated several times, you can change the blood in the options menu. Here is a large, noticeable arrow pointing to the options menu. It's the button labelled: options.", "woah!", false, 250), t.addChild(t.promptSprite.window), t.promptSprite.window.x = 310, t.promptSprite.window.y = 320, t.optionsBtn.addArrow()), 1.9 == l.Z.CURRENT_VERSION && null == e.data.renderresolutionpopup && t.optionsBtn.addArrow();
                    }, t.organizeButtons = function (e) {
                        for (var i, s = 0, r = t.buttons.length, o = 0; o < r; o++) {
                            var n = t.buttons[o];
                            s += n.height;
                        }
                        i = s + t.spaceHeight;
                        var a = t.menuCenter - .5 * i;
                        for (o = 0; o < r; o++) (n = t.buttons[o]).y = a, a = n.y + n.height + t.buttonSpacing;
                        t.scrollSmoke();
                        var l = 30 / h.Xj.maxFPS;
                        t.oldMan.step(l);
                    }, t.scrollSmoke = function (e) {
                        void 0 === e && (e = null);
                        var i = 30 / h.Xj.maxFPS;
                        t.smokeSprite1.x += 2 * t.scrollSpeedX * i, t.smokeSprite1.y -= t.scrollSpeedY * i, t.smokeSprite2.x -= t.scrollSpeedX * i, t.smokeSprite2.y -= t.scrollSpeedY * i, t.smokeSprite1.x > 0 && (t.smokeSprite1.x -= t.smokeSprite1.width / 2), t.smokeSprite1.y < -t.smokeSprite1.height / 2 && (t.smokeSprite1.y += t.smokeSprite1.height / 2), t.smokeSprite2.x < -t.smokeSprite2.width / 2 && (t.smokeSprite2.x += t.smokeSprite2.width / 2), t.smokeSprite2.y < -t.smokeSprite2.height / 2 && (t.smokeSprite2.y += t.smokeSprite2.height / 2);
                    }, t.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case t.playBtn:
                                if (t.maskTransitioning) break;
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_FEATURED_BROWSER), t.openFeaturedMenu(), t.maskTransition(t.featuredMenu);
                                break;
                            case t.browseBtn:
                                if (t.maskTransitioning) break;
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_LEVEL_BROWSER), t.openLevelBrowser(), t.maskTransition(t.levelBrowser);
                                break;
                            case t.editorBtn:
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_EDITOR), s.currentMenu = null, t.dispatchEvent(new w.z4(w.z4.EDITOR));
                                break;
                            case t.loadLevelBtn:
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_LEVEL_REPLAY_LOADER), t.openLoadLevelMenu();
                                break;
                            case t.optionsBtn:
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_OPTIONS), t.openBasicMenu("options");
                                break;
                            case t.creditsBtn:
                                z.f.trackEvent(z.f.MAIN_MENU, z.f.GOTO_CREDITS), t.openBasicMenu("credits");
                                break;
                            case t.muteBtn:
                                l.Z.sharedObject.data.muted ? (z.f.trackEvent(z.f.MAIN_MENU, z.f.UNMUTE), be.i.instance.unMute(), t.muteBtn.gotoAndStop(1)) : (z.f.trackEvent(z.f.MAIN_MENU, z.f.MUTE), be.i.instance.mute(), t.muteBtn.gotoAndStop(2));
                                break;
                            default:
                                return;
                        }
                        be.i.instance.playSoundItem("MenuSelect");
                    }, t.beginLoad = function (e) {
                        var i = t.loadMenu.loadID, s = t.loadMenu.loadType, r = i.split("=");
                        if (r.length > 1) {
                            var o = r[0];
                            o.indexOf("levelid") > -1 ? s = we.LEVEL : o.indexOf("replayid") > -1 && (s = we.REPLAY), i = t.loadMenu.loadID = r[1];
                        }
                        if (s == we.LEVEL) {
                            t.statusSprite = new n.dU("loading level...");
                            var a = t.statusSprite.window;
                            t.addChild(a), a.center();
                            var l = new Se.p;
                            l.addEventListener(Se.p.LEVEL_LOADED, t.levelLoadComplete), l.addEventListener(Se.p.ID_NOT_FOUND, t.levelLoadComplete), l.addEventListener(Se.p.LOAD_ERROR, t.levelLoadComplete), l.load((0, h.e$)(i));
                        } else {
                            t.statusSprite = new n.dU("loading replay...");
                            var c = t.statusSprite.window;
                            t.addChild(c), c.center();
                            var d = new Ge.O;
                            d.addEventListener(Ge.O.REPLAY_AND_LEVEL_LOADED, t.replayLoadComplete), d.addEventListener(Ge.O.ID_NOT_FOUND, t.replayLoadComplete), d.addEventListener(Ge.O.LOAD_ERROR, t.replayLoadComplete), d.load((0, h.e$)(i));
                        }
                        t.closeLoadMenu(e);
                    }, t.closeLoadMenu = function (e) {
                        t.loadMenu.removeEventListener(we.LOAD, t.beginLoad), t.loadMenu.removeEventListener(we.CANCEL, t.closeLoadMenu), t.loadMenu.die(), t.loadMenu = null;
                    }, t.levelLoadComplete = function (e) {
                        var i = e.target;
                        if (i.removeEventListener(Se.p.LEVEL_LOADED, t.levelLoadComplete), i.removeEventListener(Se.p.ID_NOT_FOUND, t.levelLoadComplete), i.removeEventListener(Se.p.LOAD_ERROR, t.levelLoadComplete), i.die(), t.statusSprite.die(), e.type == Se.p.ID_NOT_FOUND) {
                            var r = new n.sP("Sorry, level not found.", "oh?"), o = r.window;
                            t.addChild(o), o.center();
                        } else {
                            var a;
                            if (e.type == Se.p.LOAD_ERROR) a = "system_error" == i.errorString ? "There was an unexpected system Error" : "invalid_action" == i.errorString ? "An invalid action was passed (you really shouldn't ever be seeing this)." : "bad_param" == i.errorString ? "A bad parameter was passed (you really shouldn't ever be seeing this)." : "app_error" == i.errorString ? "Sorry, there was an application error. It was most likely database related. Please try again in a moment." : "io_error" == i.errorString ? "Sorry, there was an IO Error. Try changing your CORS proxy?" : "security_error" == i.errorString ? "Sorry, there was a security Error." : "An unknown Error has occurred.", o = (r = new n.sP(a, "ok")).window, t.addChild(o), o.center(); else z.f.trackEvent(z.f.LEVEL_REPLAY_LOADER, z.f.LOAD_LEVEL, "levelID_" + i.levelDataObject.id), s.currentMenu = s.LEVEL_BROWSER, Y.importLevelDataArray([i.levelDataObject]), t.dispatchEvent(new w.z4(w.z4.SESSION, i.levelDataObject, null));
                        }
                    }, t.replayLoadComplete = function (e) {
                        var i = e.target;
                        if (i.removeEventListener(Ge.O.REPLAY_AND_LEVEL_LOADED, t.replayLoadComplete), i.removeEventListener(Ge.O.ID_NOT_FOUND, t.replayLoadComplete), i.removeEventListener(Ge.O.LOAD_ERROR, t.replayLoadComplete), i.die(), t.statusSprite.die(), e.type == Ge.O.ID_NOT_FOUND) {
                            var r = new n.sP("Sorry, replay not found.", "oh?"), o = r.window;
                            t.addChild(o), o.center();
                        } else {
                            var a;
                            if (e.type == Se.p.LOAD_ERROR) a = "system_error" == i.errorString ? "There was an unexpected system Error" : "invalid_action" == i.errorString ? "An invalid action was passed (you really shouldn't ever be seeing this)." : "bad_param" == i.errorString ? "A bad parameter was passed (you really shouldn't ever be seeing this)." : "app_error" == i.errorString ? "Sorry, there was an application error. It was most likely database related. Please try again in a moment." : "io_error" == i.errorString ? "Sorry, there was an IO Error. Try changing your CORS proxy?" : "security_error" == i.errorString ? "Sorry, there was a security Error." : "An unknown Error has occurred.", o = (r = new n.sP(a, "ok")).window, t.addChild(o), o.center(); else z.f.trackEvent(z.f.LEVEL_REPLAY_LOADER, z.f.LOAD_REPLAY, "replayID_" + i.replayDataObject.id), s.currentMenu = s.REPLAY_BROWSER, Y.importLevelDataArray([i.levelDataObject]), Je.importReplayDataArray([i.replayDataObject], i.levelDataObject), t.dispatchEvent(new w.z4(w.z4.SESSION, i.levelDataObject, i.replayDataObject));
                        }
                    }, t.maskTransitionComplete = function () {
                        t.maskTransitioning = false, t.featuredMenu && (t.featuredMenu.pixiSprite.mask = null), t.levelBrowser && (t.levelBrowser.pixiSprite.mask = null), t.pixiSprite.removeChild(t.menuMask), t.menuMask = null;
                    }, t.openCustomizeControls = function (e) {
                        t.basicMenuClosed(e), t.openBasicMenu("customize_controls");
                    }, t.basicMenuClosed = function (e) {
                        var i = e.target;
                        i.removeEventListener(w.z4.MAIN_MENU, t.basicMenuClosed), i.removeEventListener(w.z4.CUSTOMIZE_CONTROLS, t.openCustomizeControls), i.die(), t.removeChild(i), t.showButtons(), t.superPretzel && (t.superPretzel.volume = 1);
                    }, t.closeFeaturedMenu = function (e) {
                        void 0 === e && (e = null), t.featuredMenu.removeEventListener(w.z4.MAIN_MENU, t.closeFeaturedMenu), t.featuredMenu.removeEventListener(w.z4.SESSION, t.cloneAndDispatchEvent), t.featuredMenu.removeEventListener(w.z4.REPLAY_BROWSER, t.transToReplayBrowser), t.featuredMenu.removeEventListener(w.z4.LEVEL_BROWSER, t.transToLevelBrowser), t.featuredMenu.die(), t.removeChild(t.featuredMenu), t.featuredMenu = null, t.showButtons(), t.superPretzel && (t.superPretzel.volume = 1);
                    }, t.closeLevelBrowser = function (e) {
                        void 0 === e && (e = null), t.levelBrowser.removeEventListener(w.z4.MAIN_MENU, t.closeLevelBrowser), t.levelBrowser.removeEventListener(w.z4.SESSION, t.cloneAndDispatchEvent), t.levelBrowser.removeEventListener(w.z4.EDITOR, t.cloneAndDispatchEvent), t.levelBrowser.removeEventListener(w.z4.REPLAY_BROWSER, t.transToReplayBrowser), t.levelBrowser.die(), t.removeChild(t.levelBrowser), t.levelBrowser = null, t.showButtons(), t.superPretzel && (t.superPretzel.volume = 1);
                    }, t.openReplayBrowser = function (e) {
                        void 0 === e && (e = null), s.currentMenu = s.REPLAY_BROWSER, t.hideButtons(), t.replayBrowser = new Je(e), t.addChild(t.replayBrowser), t.replayBrowser.init(), t.replayBrowser.addEventListener(w.z4.PREVIOUS_MENU, t.transFromReplayBrowser), t.replayBrowser.addEventListener(w.z4.SESSION, t.cloneAndDispatchEvent), t.transitioning || t.replayBrowser.activate();
                    }, t.closeReplayBrowser = function (e) {
                        void 0 === e && (e = null), t.replayBrowser.removeEventListener(w.z4.PREVIOUS_MENU, t.transFromReplayBrowser), t.replayBrowser.removeEventListener(w.z4.SESSION, t.cloneAndDispatchEvent), t.replayBrowser.die(), t.removeChild(t.replayBrowser), t.replayBrowser = null, t.showButtons();
                    }, t.transToLevelBrowser = function (e) {
                        t.transitioning || (t.transitioning = true, t.featuredMenu.mouseChildren = false, t.openLevelBrowser(), t.levelBrowser.x = 900, t.leftBrowser = t.featuredMenu, t.rightBrowser = t.levelBrowser, t._tweenVal = 0, L.iC.to(He(t), t.tweenTime, { tweenVal: 1, ease: L.Yp.easeInOut, onComplete: t.transToLBComplete }));
                    }, t.transToLBComplete = function () {
                        t.transitioning = false, t.leftBrowser = null, t.rightBrowser = null, t.closeFeaturedMenu(), t.levelBrowser.activate(), t.hideButtons(), t.superPretzel && (t.superPretzel.volume = .5);
                    }, t.transToReplayBrowser = function (e) {
                        t.transitioning || (t.transitioning = true, e.target === t.featuredMenu ? (s.previousMenu = s.FEATURED_MENU, t.featuredMenu.mouseChildren = false, t.leftBrowser = t.featuredMenu) : (s.previousMenu = s.LEVEL_BROWSER, t.levelBrowser.mouseChildren = false, t.leftBrowser = t.levelBrowser), t.openReplayBrowser(e.levelDataObject), t.replayBrowser.clearReplayList(), t.replayBrowser.x = 900, t.rightBrowser = t.replayBrowser, t._tweenVal = 0, L.iC.to(He(t), t.tweenTime, { tweenVal: 1, ease: L.Yp.easeInOut, onComplete: t.transToComplete }));
                    }, t.transToComplete = function () {
                        t.transitioning = false, t.leftBrowser = null, t.rightBrowser = null, s.previousMenu == s.FEATURED_MENU ? t.closeFeaturedMenu() : t.closeLevelBrowser(), t.replayBrowser.activate(), t.hideButtons();
                    }, t.transFromReplayBrowser = function (e) {
                        t.transitioning || (t.transitioning = true, t.replayBrowser.mouseChildren = false, s.previousMenu == s.FEATURED_MENU ? (t.openFeaturedMenu(), t.featuredMenu.x = -900, t.leftBrowser = t.featuredMenu) : (t.openLevelBrowser(), t.levelBrowser.x = -900, t.leftBrowser = t.levelBrowser), t.rightBrowser = t.replayBrowser, t._tweenVal = 1, L.iC.to(He(t), t.tweenTime, { tweenVal: 0, ease: L.Yp.easeInOut, onComplete: t.transFromRBComplete }));
                    }, t.transFromRBComplete = function () {
                        t.transitioning = false, t.leftBrowser = null, t.rightBrowser = null, t.closeReplayBrowser(), s.previousMenu == s.FEATURED_MENU ? t.featuredMenu.activate() : t.levelBrowser.activate(), s.previousMenu = null, t.hideButtons();
                    }, t.cloneAndDispatchEvent = function (e) {
                        t.dispatchEvent(e.clone());
                    };
                    var i = new h.KG((0, b.qX)("GameUI", "mc_MainMenu"));
                    return i.convertChildren(), t.addChild(i), t.logo = i.logo, t.logobg = i.logobg, t.versionText = h.nv.pixiToFlash(i.versionText.pixiSprite, i), t.appLink = new $, t.appLink.position.set(i.appLink.x, i.appLink.y), i.addChildAt(t.appLink, i.getChildIndex(i.appLink)), i.removeChild(i.appLink), i.appLink = t.appLink, t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Ve(t, i);
                var r, o, a = s.prototype;
                return a.init = function () {
                    if (this.buildStage(), this.createButtons(), this.addEventListener(h.ju.ENTER_FRAME, this.organizeButtons), this.addEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), s.firstLoad) s.firstLoad = false, this.beginIntroAnimation(), this.alertBrokenBrowserBehaviour(); else switch (s.currentMenu) {
                        case s.FEATURED_MENU:
                            this.openFeaturedMenu();
                            break;
                        case s.LEVEL_BROWSER:
                            this.openLevelBrowser();
                            break;
                        case s.REPLAY_BROWSER:
                            this.openReplayBrowser();
                    }
                }, a.alertBrokenBrowserBehaviour = function () {
                    if (!l.Z.sharedObject.data.brokenBrowserAlertAccepted) {
                        var e = window.navigator;
                        if (void 0 !== e.brave && "isBrave" in e.brave) {
                            var t = new n.AP('It looks like you are using the Brave browser. Disable the "Brave Shields" if you notice anything strange, like text being spaced too far apart.', "alright", "don't show again", true, 280, 120, 5162061, 16613761);
                            t.addEventListener(n.AP.ANSWER_CHOSEN, this.brokenBrowserAnswerChosen, false, 0, true);
                            var i = t.window;
                            this.stage.addChild(i), i.center();
                        }
                    }
                }, s.setCurrentMenu = function (e) {
                    s.currentMenu = e, s.firstLoad = false;
                }, a.buildStage = function () {
                    var e = l.Z.sharedObject;
                    1 != e.data.fatlady ? (e.data.fatlady = 1, this.oldMan = new le) : this.oldMan = Math.random() > .5 ? new le : new ae, this.oldMan.x = 450, this.oldMan.y = 250, this.addChildAt(this.oldMan, 0), this.bg = new h.jy, this.bg.graphics.beginFill(51), this.bg.graphics.drawRect(0, 0, 900, 500), this.bg.graphics.endFill();
                    var t = h.PI.instance;
                    if (null == t.getTexture("smoke1")) {
                        var i = new h.Q$(900, 500, true, 0, true);
                        i.perlinNoise(900, 500, 10, 4, true, true, 0, true, null);
                        var s = i;
                        t.addTexture("smoke1", i), t.addTexture("smoke2", s);
                    } else i = t.getTexture("smoke1"), s = t.getTexture("smoke2");
                    this.smokeSprite1 = new h.jy, this.tileSmoke(this.smokeSprite1, i, 1), this.smokeSprite2 = new h.jy, this.tileSmoke(this.smokeSprite2, s, .75), this.smokeSprite1.alpha = .5, this.smokeSprite2.alpha = .5, this.addChildAt(this.smokeSprite2, 0), this.addChildAt(this.smokeSprite1, 0), this.addChildAt(this.bg, 0), this.versionText.text = "openWheels v " + pe.L.setToHundredths(l.Z.CURRENT_VERSION), null !== l.Z.CURRENT_VERSION_PATCH && l.Z.CURRENT_VERSION_PATCH > 0 && (this.versionText.text += "." + l.Z.CURRENT_VERSION_PATCH), this.versionText.buttonMode = true, this.versionText.interactive = true, this.versionText.addEventListener(h.TF.MOUSE_DOWN, this.openReleaseLogPage), this.setupTitleLabel();
                }, a.openReleaseLogPage = function (e) {
                    window.open("/happy_wheels_release_log.tjf", "_blank");
                }, a.setupTitleLabel = function () {
                    var e;
                    if (null !== (e = window.HW_SETTINGS) && void 0 !== e && e.titleLabel && !this.titleLabel) {
                        var t = new h.SQ("Clarendon LT Std", window.HW_SETTINGS.titleLabelSize || 12, window.HW_SETTINGS.titleLabelColor || 0, null, null, null, null, null, h.O3.CENTER);
                        this.titleLabel = new h.nv, this.titleLabel.defaultTextFormat = t, this.titleLabel.text = window.HW_SETTINGS.titleLabel || "", this.addChild(this.titleLabel), this.titleLabel.x = window.HW_SETTINGS.titleLabelX || 0, this.titleLabel.y = window.HW_SETTINGS.titleLabelY || 0, this.titleLabel.rotation = window.HW_SETTINGS.titleLabelRotation || 0, this.titleLabel.pixiText.anchor.set(.5), this.titleLabel.scale.set(0);
                        var i = new h.pt(3, 90, 0, 1, 5, 5, .25, 1);
                        this.titleLabel.filters = [i];
                    }
                }, a.tileSmoke = function (e, t, i) {
                    void 0 === i && (i = 1);
                    for (var s = 0; s < 4; s++) {
                        var r = new h.jy;
                        r.alpha = i, r.pixiSprite.texture = t.pixiTexture, r.x = Math.floor(s % 2) * t.pixiTexture.width, r.y = Math.floor(s / 2) * t.pixiTexture.height, e.addChild(r);
                    }
                }, a.createButtons = function () {
                    this.buttons = [];
                    var e = 4032711, t = 16613761;
                    l.Z.sharedObject, nt.instance.resize(), this.creditsBtn = new Be("CREDITS", 25, t), this.addChild(this.creditsBtn), this.optionsBtn = new Be("OPTIONS", 25, t), this.addChild(this.optionsBtn), this.editorBtn = new Be("LEVEL EDITOR", 30, e), this.addChild(this.editorBtn), this.loadLevelBtn = new Be("LOAD LEVEL/REPLAY", 30, e), this.addChild(this.loadLevelBtn), this.browseBtn = new Be("BROWSE LEVELS", 30, e), this.addChild(this.browseBtn), this.playBtn = new Be("PLAY", 56, e), this.addChild(this.playBtn), this.creditsBtn.x = this.loadLevelBtn.x = this.optionsBtn.x = this.editorBtn.x = this.browseBtn.x = this.playBtn.x = this.buttonX, this.buttons = [this.playBtn, this.browseBtn, this.loadLevelBtn, this.editorBtn, this.optionsBtn, this.creditsBtn], this.spaceHeight = (this.buttons.length - 1) * this.buttonSpacing, this.muteBtn = new h.KG, this.muteBtn.setPixiMovieClip((0, b.qX)("GameUI", "MuteButton")), this.muteBtn.x = this.stage.stageWidth - this.muteBtn.width - 5, this.muteBtn.y = 5, this.muteBtn.gotoAndStop(1), this.muteBtn.buttonMode = true, this.muteBtn.alpha = .7, this.addChild(this.muteBtn), this.muteBtn.interactive = true, this.muteBtn.gotoAndStop(l.Z.sharedObject.data.muted ? 2 : 1);
                }, a.beginIntroAnimation = function () {
                    this.bg.alpha = 0, this.smokeSprite1.alpha = 0, this.smokeSprite2.alpha = 0, this.logo.scaleX = this.logo.scaleY = this.logobg.scaleX = this.logobg.scaleY = 0, this.appLink.x = -265;
                    for (var e = this.buttons.length, t = 2, i = 0; i < e; i++) {
                        var s = this.buttons[i];
                        s.x = this.buttonX + 400, i == e - 1 ? L.iC.to(s, .5, { x: this.buttonX, ease: L.Yp.easeOut, delay: t, onComplete: this.introComplete }) : L.iC.to(s, .5, { x: this.buttonX, ease: L.Yp.easeOut, delay: t }), t += .15;
                    }
                    L.iC.to(this.smokeSprite1, 1, { alpha: .5 }), L.iC.to(this.smokeSprite2, 1, { alpha: .5 }), L.iC.to(this.bg, 2, { alpha: 1 }), L.iC.to(this.logo, .5, { scaleX: 2, scaleY: 2, ease: L.sm.easeOut, delay: 1.5 }), L.iC.to(this.logobg, .5, { scaleX: 2, scaleY: 2, ease: L.sm.easeOut, delay: 1.5 }), L.iC.to(this.appLink, .5, { x: 37.75, ease: L.Yp.easeOut, delay: 1.5 }), this.oldMan.slideIn(), this.superPretzel = be.i.instance.playSoundItem("SuperPretzel"), this.titleLabel && L.iC.to(this.titleLabel.scale, 2, { x: 1, y: 1, ease: L.tQ.easeOut, delay: 3 });
                    var prompt = showPrompt("Heya! Sorry to bother, but if you can, PLEASE play this game on the original website, https://totaljerkface.com. They're awesome, and I don't want to take away their ad revenue.", "ok");
                    this.stage.addChild(prompt.window);
                    prompt.window.center();
                }, a.openLoadLevelMenu = function () {
                    this.loadMenu = new we;
                    var e = this.loadMenu.window;
                    this.addChild(e), e.center(), this.loadMenu.addEventListener(we.LOAD, this.beginLoad), this.loadMenu.addEventListener(we.CANCEL, this.closeLoadMenu);
                }, a.IOErrorHandler = function (e) {
                    this.statusSprite && this.statusSprite.die(), e.target.removeEventListener(h.XD.IO_ERROR, this.IOErrorHandler);
                    var t = new n.sP("Sorry, there was a problem. Please wait a moment and then try again.", "ugh, ok").window;
                    this.addChild(t), t.center();
                }, a.maskTransition = function (e) {
                    this.maskTransitioning = true, this.menuMask = new y.Sprite(y.Texture.from("gameui-asset-26.png")), this.pixiSprite.addChild(this.menuMask), this.menuMask.x = this.menuMask.width, e.pixiSprite.mask = this.menuMask, L.iC.to(this.menuMask, .5, { x: -50, ease: L.Yp.easeOut, onComplete: this.maskTransitionComplete });
                }, a.hideButtons = function () {
                    for (var e = 0; e < this.buttons.length; e++) {
                        var t = this.buttons[e];
                        t.alpha = .25, t.disable();
                    }
                    this.logo.alpha = .25, this.logobg.alpha = .1, this.muteBtn.alpha = .25, this.titleLabel && (this.titleLabel.alpha = .1);
                }, a.showButtons = function () {
                    for (var e = 0; e < this.buttons.length; e++) {
                        var t = this.buttons[e];
                        t.alpha = 1, t.enable();
                    }
                    this.logo.alpha = 1, this.logobg.alpha = 1, this.muteBtn.alpha = .7, this.muteBtn.gotoAndStop(l.Z.sharedObject.data.muted ? 2 : 1), this.titleLabel && (this.titleLabel.alpha = 1);
                }, a.openBasicMenu = function (e) {
                    if (!this.transitioning) {
                        var t;
                        switch (e) {
                            case "options":
                                t = new ke(this.stage.displayState);
                                break;
                            case "credits":
                                t = new te;
                                break;
                            case "customize_controls":
                                t = new oe;
                                break;
                            default:
                                throw new Error("basic menu type not defined");
                        }
                        this.addChild(t), t.addEventListener(w.z4.MAIN_MENU, this.basicMenuClosed), t.addEventListener(w.z4.CUSTOMIZE_CONTROLS, this.openCustomizeControls), this.hideButtons(), this.superPretzel && (this.superPretzel.volume = .5);
                    }
                }, a.openFeaturedMenu = function () {
                    s.currentMenu = s.FEATURED_MENU, this.hideButtons(), this.featuredMenu = new ge, this.addChild(this.featuredMenu), this.featuredMenu.init(), this.featuredMenu.addEventListener(w.z4.MAIN_MENU, this.closeFeaturedMenu), this.featuredMenu.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.featuredMenu.addEventListener(w.z4.REPLAY_BROWSER, this.transToReplayBrowser), this.featuredMenu.addEventListener(w.z4.LEVEL_BROWSER, this.transToLevelBrowser), this.transitioning || this.featuredMenu.activate(), this.superPretzel && (this.superPretzel.volume = .5);
                }, a.openLevelBrowser = function (e) {
                    void 0 === e && (e = true), s.currentMenu = s.LEVEL_BROWSER, this.hideButtons(), this.levelBrowser = new Y, this.addChild(this.levelBrowser), this.levelBrowser.init(), this.levelBrowser.addEventListener(w.z4.MAIN_MENU, this.closeLevelBrowser), this.levelBrowser.addEventListener(w.z4.SESSION, this.cloneAndDispatchEvent), this.levelBrowser.addEventListener(w.z4.EDITOR, this.cloneAndDispatchEvent), this.levelBrowser.addEventListener(w.z4.REPLAY_BROWSER, this.transToReplayBrowser), this.transitioning || this.levelBrowser.activate(), this.superPretzel && (this.superPretzel.volume = .5);
                }, a.die = function () {
                    this.removeEventListener(h.ju.ENTER_FRAME, this.organizeButtons), this.removeEventListener(h.TF.MOUSE_UP, this.mouseUpHandler), this.versionText.removeEventListener(h.TF.MOUSE_DOWN, this.openReleaseLogPage), this.featuredMenu && this.closeFeaturedMenu(), this.levelBrowser && this.closeLevelBrowser(), this.replayBrowser && this.closeReplayBrowser(), this.superPretzel && (this.superPretzel.fadeOut(1), this.superPretzel = null);
                    for (var e = 0; e < this.buttons.length; e++) this.buttons[e].die();
                }, r = s, (o = [{
                    key: "tweenVal", get: function () {
                        return this._tweenVal;
                    }, set: function (e) {
                        this._tweenVal = e;
                        var t = Math.round(-900 * this._tweenVal);
                        this.leftBrowser.x = t, this.rightBrowser.x = t + 900;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy);
            function Ue() {
                var e = o;
                Ue = function () {
                    return t;
                };
                var t = {}, i = Object.prototype, s = i.hasOwnProperty, r = Object.defineProperty || function (e, t, i) {
                    e[t] = i.value;
                }, n = "function" == typeof Symbol ? Symbol : {}, a = n.iterator || "@@iterator", h = n.asyncIterator || "@@asyncIterator", l = n.toStringTag || "@@toStringTag";
                function c(e, t, i) {
                    return Object.defineProperty(e, t, { value: i, enumerable: true, configurable: true, writable: true }), e[t];
                }
                try {
                    c({}, "");
                } catch (e) {
                    c = function (e, t, i) {
                        return e[t] = i;
                    };
                }
                function d(t, i, s, o) {
                    var n, a, h, l, c = i && i.prototype instanceof m ? i : m, d = Object.create(c.prototype), f = new A(o || []);
                    return r(d, "_invoke", {
                        value: (n = t, a = s, h = f, e, e, l = "suspendedStart", function (e, t) {
                            if ("executing" === l) throw new Error("Generator is already running");
                            if ("completed" === l) {
                                if ("throw" === e) throw t;
                                return { value: void 0, done: true };
                            }
                            for (h.method = e, h.arg = t; ;) {
                                var i = h.delegate;
                                if (i) {
                                    var s = C(i, h);
                                    if (s) {
                                        if (s === u) continue;
                                        return s;
                                    }
                                }
                                if ("next" === h.method) h.sent = h._sent = h.arg; else if ("throw" === h.method) {
                                    if ("suspendedStart" === l) throw l = "completed", h.arg;
                                    h.dispatchException(h.arg);
                                } else "return" === h.method && h.abrupt("return", h.arg);
                                l = "executing";
                                var r = p(n, a, h);
                                if ("normal" === r.type) {
                                    if (l = h.done ? "completed" : "suspendedYield", r.arg === u) continue;
                                    return { value: r.arg, done: h.done };
                                }
                                "throw" === r.type && (l = "completed", h.method = "throw", h.arg = r.arg);
                            }
                        })
                    }), d;
                }
                function p(e, t, i) {
                    try {
                        return { type: "normal", arg: e.call(t, i) };
                    } catch (e) {
                        return { type: "throw", arg: e };
                    }
                }
                t.wrap = d;
                var u = {};
                function m() { }
                function f() { }
                function y() { }
                var v = {};
                c(v, a, function () {
                    return this;
                });
                var g = Object.getPrototypeOf, S = g && g(g(E([])));
                S && S !== i && s.call(S, a) && (v = S);
                var _ = y.prototype = m.prototype = Object.create(v);
                function w(e) {
                    ["next", "throw", "return"].forEach(function (t) {
                        c(e, t, function (e) {
                            return this._invoke(t, e);
                        });
                    });
                }
                function b(e, t) {
                    var i;
                    function o(i, r, n, a) {
                        var h = p(e[i], e, r);
                        if ("throw" !== h.type) {
                            var l = h.arg, c = l.value;
                            return c && "object" == typeof c && s.call(c, "__await") ? t.resolve(c.__await).then(function (e) {
                                o("next", e, n, a);
                            }, function (e) {
                                o("throw", e, n, a);
                            }) : t.resolve(c).then(function (e) {
                                l.value = e, n(l);
                            }, function (e) {
                                return o("throw", e, n, a);
                            });
                        }
                        a(h.arg);
                    }
                    r(this, "_invoke", {
                        value: function (e, s) {
                            function r() {
                                return new t(function (t, i) {
                                    o(e, s, t, i);
                                });
                            }
                            return i = i ? i.then(r, r) : r();
                        }
                    });
                }
                function C(e, t) {
                    var i = t.method, s = e.iterator[i];
                    if (void 0 === s) return t.delegate = null, "throw" === i && e.iterator.return && (t.method = "return", t.arg = void 0, C(e, t), "throw" === t.method) || "return" !== i && (t.method = "throw", t.arg = new TypeError("The iterator does not provide a '" + i + "' method")), u;
                    var r = p(s, e.iterator, t.arg);
                    if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, u;
                    var o = r.arg;
                    return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, u) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, u);
                }
                function L(e) {
                    var t = { tryLoc: e[0] };
                    1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
                }
                function B(e) {
                    var t = e.completion || {};
                    t.type = "normal", delete t.arg, e.completion = t;
                }
                function A(e) {
                    this.tryEntries = [{ tryLoc: "root" }], e.forEach(L, this), this.reset(true);
                }
                function E(e) {
                    if (e) {
                        var t = e[a];
                        if (t) return t.call(e);
                        if ("function" == typeof e.next) return e;
                        if (!isNaN(e.length)) {
                            var i = -1, r = function t() {
                                for (; ++i < e.length;) if (s.call(e, i)) return t.value = e[i], t.done = false, t;
                                return t.value = void 0, t.done = true, t;
                            };
                            return r.next = r;
                        }
                    }
                    return { next: M };
                }
                function M() {
                    return { value: void 0, done: true };
                }
                return f.prototype = y, r(_, "constructor", { value: y, configurable: true }), r(y, "constructor", { value: f, configurable: true }), f.displayName = c(y, l, "GeneratorFunction"), t.isGeneratorFunction = function (e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === f || "GeneratorFunction" === (t.displayName || t.name));
                }, t.mark = function (e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, y) : (e.__proto__ = y, c(e, l, "GeneratorFunction")), e.prototype = Object.create(_), e;
                }, t.awrap = function (e) {
                    return { __await: e };
                }, w(b.prototype), c(b.prototype, h, function () {
                    return this;
                }), t.AsyncIterator = b, t.async = function (e, i, s, r, o) {
                    void 0 === o && (o = Promise);
                    var n = new b(d(e, i, s, r), o);
                    return t.isGeneratorFunction(i) ? n : n.next().then(function (e) {
                        return e.done ? e.value : n.next();
                    });
                }, w(_), c(_, l, "Generator"), c(_, a, function () {
                    return this;
                }), c(_, "toString", function () {
                    return "[object Generator]";
                }), t.keys = function (e) {
                    var t = Object(e), i = [];
                    for (var s in t) i.push(s);
                    return i.reverse(), function e() {
                        for (; i.length;) {
                            var s = i.pop();
                            if (s in t) return e.value = s, e.done = false, e;
                        }
                        return e.done = true, e;
                    };
                }, t.values = E, A.prototype = {
                    constructor: A, reset: function (e) {
                        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(B), !e) for (var t in this) "t" === t.charAt(0) && s.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                    }, stop: function () {
                        this.done = true;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type) throw e.arg;
                        return this.rval;
                    }, dispatchException: function (e) {
                        if (this.done) throw e;
                        var t = this;
                        function i(i, s) {
                            return n.type = "throw", n.arg = e, t.next = i, s && (t.method = "next", t.arg = void 0), !!s;
                        }
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r], n = o.completion;
                            if ("root" === o.tryLoc) return i("end");
                            if (o.tryLoc <= this.prev) {
                                var a = s.call(o, "catchLoc"), h = s.call(o, "finallyLoc");
                                if (a && h) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                } else if (a) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                } else {
                                    if (!h) throw new Error("try statement without catch or finally");
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                }
                            }
                        }
                    }, abrupt: function (e, t) {
                        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                            var r = this.tryEntries[i];
                            if (r.tryLoc <= this.prev && s.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
                                var o = r;
                                break;
                            }
                        }
                        o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
                        var n = o ? o.completion : {};
                        return n.type = e, n.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, u) : this.complete(n);
                    }, complete: function (e, t) {
                        if ("throw" === e.type) throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), u;
                    }, finish: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), B(i), u;
                        }
                    }, catch: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.tryLoc === e) {
                                var s = i.completion;
                                if ("throw" === s.type) {
                                    var r = s.arg;
                                    B(i);
                                }
                                return r;
                            }
                        }
                        throw new Error("illegal catch attempt");
                    }, delegateYield: function (e, t, i) {
                        return this.delegate = { iterator: E(e), resultName: t, nextLoc: i }, "next" === this.method && (this.arg = void 0), u;
                    }
                }, t;
            }
            function We(e, t, i, s, r, o, n) {
                try {
                    var a = e[o](n), h = a.value;
                } catch (e) {
                    return void i(e);
                }
                a.done ? t(h) : Promise.resolve(h).then(s, r);
            }
            function Xe(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function Ye(e, t) {
                return (Ye = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            Ne.firstLoad = true, Ne.FEATURED_MENU = "featuredmenu", Ne.LEVEL_BROWSER = "levelbrowser", Ne.REPLAY_BROWSER = "replaybrowser";
            var ze = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return (i = e.call(this) || this)._replayID = -1, i._levelID = -1, i._userID = 0, i.levelLoadCompleteBind = i.levelLoadComplete.bind(Xe(i)), i.replayLoadCompleteBind = i.replayLoadComplete.bind(Xe(i)), i.openEditorBind = i.openEditor.bind(Xe(i)), i.receiveSessionFromMainMenuBind = i.receiveSessionFromMainMenu.bind(Xe(i)), i.closeEditorBind = i.closeEditor.bind(Xe(i)), i.closeSessionControllerBind = i.closeSessionController.bind(Xe(i)), i.testCompleteBind = i.testComplete.bind(Xe(i)), i.charIndex = 1, i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Ye(t, i);
                var r, o, a, d, p = s.prototype;
                return p.init = function () {
                    if (window.location.href.indexOf("localhost") > -1 ? (l.Z.siteURL = "../../", l.Z.pathPrefix = "") : (this._userID = 2, this._userName = "Jim Bonacci", l.Z.siteURL = "http://localhost:8081/"), this._readOnly && (l.Z.disableUpload = true), window.HW_SETTINGS) {
                        for (var e in window.HW_SETTINGS) l.Z[e] = window.HW_SETTINGS[e];
                        this._userID = window.HW_SETTINGS.user_id, this._userName = window.HW_SETTINGS.username;
                    }
                    this.createDebugText(), this.createBorderCover(), this.beginArchitectureTest();
                }, p.beginArchitectureTest = function () {
                    this.architectureTest = new S.$o, this.architectureTest.addEventListener(h.ju.COMPLETE, this.testCompleteBind), this.architectureTest.test();
                }, p.testComplete = function (e) {
                    this.architectureTest.removeEventListener(h.ju.COMPLETE, this.testCompleteBind), l.Z.architecture = this.architectureTest.result;
                    var t, i, s, r, o, a, d, p, u, m = l.Z.sharedObject;
                    m.data.keyCodes ? (l.Z.accelerateCode = m.data.keyCodes.accelerateCode, l.Z.decelerateCode = m.data.keyCodes.decelerateCode, l.Z.leanForwardCode = m.data.keyCodes.leanForwardCode, l.Z.leanBackCode = m.data.keyCodes.leanBackCode, l.Z.primaryActionCode = m.data.keyCodes.primaryActionCode, l.Z.secondaryAction1Code = m.data.keyCodes.secondaryAction1Code, l.Z.secondaryAction2Code = m.data.keyCodes.secondaryAction2Code, l.Z.ejectCode = m.data.keyCodes.ejectCode, l.Z.switchCameraCode = m.data.keyCodes.switchCameraCode) : (m.data.keyCodes = {}, m.data.keyCodes.accelerateCode = l.Z.accelerateDefaultCode, m.data.keyCodes.decelerateCode = l.Z.decelerateDefaultCode, m.data.keyCodes.leanForwardCode = l.Z.leanForwardDefaultCode, m.data.keyCodes.leanBackCode = l.Z.leanBackDefaultCode, m.data.keyCodes.primaryActionCode = l.Z.primaryActionDefaultCode, m.data.keyCodes.secondaryAction1Code = l.Z.secondaryAction1DefaultCode, m.data.keyCodes.secondaryAction2Code = l.Z.secondaryAction2DefaultCode, m.data.keyCodes.ejectCode = l.Z.ejectDefaultCode, m.data.keyCodes.switchCameraCode = l.Z.switchCameraDefaultCode, m.flush()), null != m.data.renderResolutionIncrease && (l.Z.renderResolutionIncrease = m.data.renderResolutionIncrease), null != m.data.use60FPS && (l.Z.use60FPS = m.data.use60FPS, h.Xj.maxFPS = l.Z.use60FPS ? 60 : 30), null != m.data.textureResolution && (l.Z.textureResolution = m.data.textureResolution), null != m.data.maxParticles && (c.z.maxParticles = m.data.maxParticles), null != m.data.bloodSetting && (l.Z.bloodSetting = m.data.bloodSetting), this.mouseHelper = new n.xx, this.addChild(this.mouseHelper), new h.PI, this.enterSession();
                    /*
                        #checkpoint
                        here they put a obfuscated [[[thing]]]
                        to check if the location.hostname equals
                        "totaljerkface"
                        I removed it.
                    */
                }, p.createDebugText = function () {
                    var e = l.Z.debugText = new S.SL;
                    this.addChild(e), l.Z.hideHUD && (e.visible = false);
                }, p.createBorderCover = function () {
                    this.borderCover = new h.jy;
                    var e = new Array, t = new Array;
                    this.borderCover.graphics.beginFill(0, 1), t.push(-500, -500), t.push(1400, -500), t.push(1400, 1e3), t.push(-500, 1e3), t.push(-500, -500), e.push(h.hr.MOVE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), t.push(0, 0), t.push(0, 500), t.push(900, 500), t.push(900, 0), t.push(0, 0), e.push(h.hr.MOVE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), e.push(h.hr.LINE_TO), this.borderCover.graphics.drawPath(e, t, h.p7.NON_ZERO), this.borderCover.graphics.endFill();
                }, p.enterSession = function () {
                    if (this._userID > 0 && (l.Z.user_id = this._userID, l.Z.username = this._userName), -1 !== this._levelID) {
                        var e = new _.pl;
                        e.addEventListener(_.pl.LEVEL_LOADED, this.levelLoadCompleteBind), e.addEventListener(_.pl.ID_NOT_FOUND, this.levelLoadCompleteBind), e.addEventListener(_.pl.LOAD_ERROR, this.levelLoadCompleteBind), e.load(this._levelID);
                    } else if (-1 !== this._replayID) {
                        var t = new _.Or;
                        t.addEventListener(_.Or.REPLAY_AND_LEVEL_LOADED, this.replayLoadCompleteBind), t.addEventListener(_.Or.ID_NOT_FOUND, this.replayLoadCompleteBind), t.addEventListener(_.Or.LOAD_ERROR, this.replayLoadCompleteBind), t.load(this._replayID);
                    } else this.openMainMenu();
                }, p.levelLoadComplete = function (e) {
                    var t = e.target;
                    t.removeEventListener(_.pl.LEVEL_LOADED, this.levelLoadCompleteBind), t.removeEventListener(_.pl.ID_NOT_FOUND, this.levelLoadCompleteBind), t.removeEventListener(_.pl.LOAD_ERROR, this.levelLoadCompleteBind), t.die(), e.type == _.pl.ID_NOT_FOUND || e.type == _.pl.LOAD_ERROR ? this.openMainMenu() : (Ne.setCurrentMenu(Ne.LEVEL_BROWSER), Y.importLevelDataArray([t.levelDataObject]), this.openSessionController(t.levelDataObject, null));
                }, p.replayLoadComplete = function (e) {
                    var t = e.target;
                    t.removeEventListener(_.Or.REPLAY_AND_LEVEL_LOADED, this.replayLoadCompleteBind), t.removeEventListener(_.Or.ID_NOT_FOUND, this.replayLoadCompleteBind), t.removeEventListener(_.Or.LOAD_ERROR, this.replayLoadCompleteBind), t.die(), e.type == _.Or.ID_NOT_FOUND ? this.openMainMenu() : (Ne.setCurrentMenu(Ne.REPLAY_BROWSER), Y.importLevelDataArray([t.levelDataObject]), Je.importReplayDataArray([t.replayDataObject], t.levelDataObject), this.openSessionController(t.levelDataObject, t.replayDataObject));
                }, p.openMainMenu = function () {
                    this.mainMenu = new Ne, this.addChildAt(this.mainMenu, 0), this.mainMenu.init(), this.mainMenu.addEventListener(w.z4.EDITOR, this.openEditorBind), this.mainMenu.addEventListener(w.z4.SESSION, this.receiveSessionFromMainMenuBind);
                }, p.closeMainMenu = function () {
                    this.mainMenu && (this.mainMenu.die(), this.removeChild(this.mainMenu), this.mainMenu.removeEventListener(w.z4.EDITOR, this.openEditorBind), this.mainMenu.removeEventListener(w.z4.SESSION, this.receiveSessionFromMainMenuBind), this.mainMenu = null);
                }, p.openEditor = (a = Ue().mark(function e(t) {
                    var i, s, r;
                    return Ue().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                this.closeMainMenu(), t.levelDataObject && (i = t.levelDataObject), s = l.Z.useDebug && l.Z.debugOptions.editorDebugDraw, r = l.Z.useDebug && l.Z.debugOptions.editorTestingMode, l.Z.currentlyInEditor = true, this.editor = new n.ML(i, s, r), l.Z.editor = this.editor, this.addChildAt(this.editor, 0), this.editor.init(), this.editor.addEventListener(w.z4.MAIN_MENU, this.closeEditorBind);
                            case 10:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                }), d = function () {
                    var e = this, t = arguments;
                    return new Promise(function (i, s) {
                        var r = a.apply(e, t);
                        function o(e) {
                            We(r, i, s, o, n, "next", e);
                        }
                        function n(e) {
                            We(r, i, s, o, n, "throw", e);
                        }
                        o(void 0);
                    });
                }, function (e) {
                    return d.apply(this, arguments);
                }), p.closeEditor = function (e) {
                    this.editor.die(), this.removeChild(this.editor), this.editor.removeEventListener(w.z4.MAIN_MENU, this.closeEditorBind), this.editor = null, l.Z.editor = null, l.Z.currentlyInEditor = false, this.openMainMenu();
                }, p.openSessionController = function (e, t) {
                    void 0 === t && (t = null), this.sessionController = new _.X_(this, e, t), this.sessionController.addEventListener(w.z4.MAIN_MENU, this.closeSessionControllerBind), this.sessionController.begin();
                }, p.closeSessionController = function (e) {
                    if (void 0 === e && (e = null), this.sessionController && (this.sessionController.die(), this.sessionController.removeEventListener(w.z4.MAIN_MENU, this.closeSessionControllerBind), this.sessionController = null), this.mainMenu && this.closeMainMenu(), 10 === e) {
                        var t = this.charIndex || 1, i = new _.bm(null, "test_level", null, "test_name", 0, 0, 0, null, null, t, 0, 0, 0, 0, null);
                        this.openSessionController(i);
                    } else this.openMainMenu();
                }, p.receiveSessionFromMainMenu = function (e) {
                    this.closeMainMenu(), this.openSessionController(e.levelDataObject, e.replayDataObject);
                }, r = s, (o = [{
                    key: "levelID", get: function () {
                        return this._levelID;
                    }, set: function (e) {
                        this._levelID = e;
                    }
                }, {
                    key: "replayID", get: function () {
                        return this._replayID;
                    }, set: function (e) {
                        this._replayID = e;
                    }
                }, {
                    key: "userID", get: function () {
                        return this._userID;
                    }, set: function (e) {
                        this._userID = e;
                    }
                }, {
                    key: "userName", get: function () {
                        return this._userName;
                    }, set: function (e) {
                        this._userName = e;
                    }
                }, {
                    key: "isMac", get: function () {
                        return this._isMac;
                    }, set: function (e) {
                        this._isMac = e;
                    }
                }, {
                    key: "readOnly", get: function () {
                        return this._readOnly;
                    }, set: function (e) {
                        this._readOnly = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(h.jy), Ze = i(557);
            function $e(e, t) {
                return ($e = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Ke = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this)._build(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, $e(t, i);
                var r = s.prototype;
                return r.updateProgress = function (e) {
                    this.loadingText.text = "Loading... " + Math.round(e) + "%";
                }, r.onShow = function () {
                    this._reset();
                }, r.onHidden = function () {
                    this.destroy({ children: true, texture: true, baseTexture: true });
                }, r._build = function () {
                    this.view = new y.Graphics, this.view.beginFill(4032711).drawRect(0, 0, 900, 500), this.addChild(this.view);
                    var e = ">> PLAY HAPPY WHEELS >>", t = new y.TextStyle({ fontFamily: ["Clarendon LT Std Bold"], fontSize: 30, fill: 16613761 }), i = y.TextMetrics.measureText(e, t), s = i.width + 40, r = i.height + 40, o = new y.Graphics;
                    o.beginFill(16777215), o.drawRoundedRect(450 - s / 2, 250 - r / 2, s, r, 24), o.endFill(), this.view.addChild(o);
                    var n = new y.Text(e, t);
                    n.anchor.set(.5), n.position.set(450, 250), this.view.addChild(n), this.loadingText = new y.Text("", { fontFamily: ["HelveticaNeueLT Std"], fontSize: 10, fill: 16777215 }), this.loadingText.anchor.set(0, 1), this.view.addChild(this.loadingText), this.loadingText.position.set(5, 495);
                }, r._reset = function () {
                    this.updateProgress(0);
                }, s;
            }(y.Container), qe = i(174), Qe = i(307), et = i(559);
            function tt() {
                var e = s;
                tt = function () {
                    return t;
                };
                var t = {}, i = Object.prototype, r = i.hasOwnProperty, o = Object.defineProperty || function (e, t, i) {
                    e[t] = i.value;
                }, n = "function" == typeof Symbol ? Symbol : {}, a = n.iterator || "@@iterator", h = n.asyncIterator || "@@asyncIterator", l = n.toStringTag || "@@toStringTag";
                function c(e, t, i) {
                    return Object.defineProperty(e, t, { value: i, enumerable: true, configurable: true, writable: true }), e[t];
                }
                try {
                    c({}, "");
                } catch (e) {
                    c = function (e, t, i) {
                        return e[t] = i;
                    };
                }
                function d(t, i, s, r) {
                    var n, a, h, l, c = i && i.prototype instanceof m ? i : m, d = Object.create(c.prototype), f = new A(r || []);
                    return o(d, "_invoke", {
                        value: (n = t, a = s, h = f, e, e, l = "suspendedStart", function (e, t) {
                            if ("executing" === l) throw new Error("Generator is already running");
                            if ("completed" === l) {
                                if ("throw" === e) throw t;
                                return { value: void 0, done: true };
                            }
                            for (h.method = e, h.arg = t; ;) {
                                var i = h.delegate;
                                if (i) {
                                    var s = C(i, h);
                                    if (s) {
                                        if (s === u) continue;
                                        return s;
                                    }
                                }
                                if ("next" === h.method) h.sent = h._sent = h.arg; else if ("throw" === h.method) {
                                    if ("suspendedStart" === l) throw l = "completed", h.arg;
                                    h.dispatchException(h.arg);
                                } else "return" === h.method && h.abrupt("return", h.arg);
                                l = "executing";
                                var r = p(n, a, h);
                                if ("normal" === r.type) {
                                    if (l = h.done ? "completed" : "suspendedYield", r.arg === u) continue;
                                    return { value: r.arg, done: h.done };
                                }
                                "throw" === r.type && (l = "completed", h.method = "throw", h.arg = r.arg);
                            }
                        })
                    }), d;
                }
                function p(e, t, i) {
                    try {
                        return { type: "normal", arg: e.call(t, i) };
                    } catch (e) {
                        return { type: "throw", arg: e };
                    }
                }
                t.wrap = d;
                var u = {};
                function m() { }
                function f() { }
                function y() { }
                var v = {};
                c(v, a, function () {
                    return this;
                });
                var g = Object.getPrototypeOf, S = g && g(g(E([])));
                S && S !== i && r.call(S, a) && (v = S);
                var _ = y.prototype = m.prototype = Object.create(v);
                function w(e) {
                    ["next", "throw", "return"].forEach(function (t) {
                        c(e, t, function (e) {
                            return this._invoke(t, e);
                        });
                    });
                }
                function b(e, t) {
                    var i;
                    function s(i, o, n, a) {
                        var h = p(e[i], e, o);
                        if ("throw" !== h.type) {
                            var l = h.arg, c = l.value;
                            return c && "object" == typeof c && r.call(c, "__await") ? t.resolve(c.__await).then(function (e) {
                                s("next", e, n, a);
                            }, function (e) {
                                s("throw", e, n, a);
                            }) : t.resolve(c).then(function (e) {
                                l.value = e, n(l);
                            }, function (e) {
                                return s("throw", e, n, a);
                            });
                        }
                        a(h.arg);
                    }
                    o(this, "_invoke", {
                        value: function (e, r) {
                            function o() {
                                return new t(function (t, i) {
                                    s(e, r, t, i);
                                });
                            }
                            return i = i ? i.then(o, o) : o();
                        }
                    });
                }
                function C(e, t) {
                    var i = t.method, s = e.iterator[i];
                    if (void 0 === s) return t.delegate = null, "throw" === i && e.iterator.return && (t.method = "return", t.arg = void 0, C(e, t), "throw" === t.method) || "return" !== i && (t.method = "throw", t.arg = new TypeError("The iterator does not provide a '" + i + "' method")), u;
                    var r = p(s, e.iterator, t.arg);
                    if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, u;
                    var o = r.arg;
                    return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, u) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, u);
                }
                function L(e) {
                    var t = { tryLoc: e[0] };
                    1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
                }
                function B(e) {
                    var t = e.completion || {};
                    t.type = "normal", delete t.arg, e.completion = t;
                }
                function A(e) {
                    this.tryEntries = [{ tryLoc: "root" }], e.forEach(L, this), this.reset(true);
                }
                function E(e) {
                    if (e) {
                        var t = e[a];
                        if (t) return t.call(e);
                        if ("function" == typeof e.next) return e;
                        if (!isNaN(e.length)) {
                            var i = -1, s = function t() {
                                for (; ++i < e.length;) if (r.call(e, i)) return t.value = e[i], t.done = false, t;
                                return t.value = void 0, t.done = true, t;
                            };
                            return s.next = s;
                        }
                    }
                    return { next: M };
                }
                function M() {
                    return { value: void 0, done: true };
                }
                return f.prototype = y, o(_, "constructor", { value: y, configurable: true }), o(y, "constructor", { value: f, configurable: true }), f.displayName = c(y, l, "GeneratorFunction"), t.isGeneratorFunction = function (e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === f || "GeneratorFunction" === (t.displayName || t.name));
                }, t.mark = function (e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, y) : (e.__proto__ = y, c(e, l, "GeneratorFunction")), e.prototype = Object.create(_), e;
                }, t.awrap = function (e) {
                    return { __await: e };
                }, w(b.prototype), c(b.prototype, h, function () {
                    return this;
                }), t.AsyncIterator = b, t.async = function (e, i, s, r, o) {
                    void 0 === o && (o = Promise);
                    var n = new b(d(e, i, s, r), o);
                    return t.isGeneratorFunction(i) ? n : n.next().then(function (e) {
                        return e.done ? e.value : n.next();
                    });
                }, w(_), c(_, l, "Generator"), c(_, a, function () {
                    return this;
                }), c(_, "toString", function () {
                    return "[object Generator]";
                }), t.keys = function (e) {
                    var t = Object(e), i = [];
                    for (var s in t) i.push(s);
                    return i.reverse(), function e() {
                        for (; i.length;) {
                            var s = i.pop();
                            if (s in t) return e.value = s, e.done = false, e;
                        }
                        return e.done = true, e;
                    };
                }, t.values = E, A.prototype = {
                    constructor: A, reset: function (e) {
                        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(B), !e) for (var t in this) "t" === t.charAt(0) && r.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                    }, stop: function () {
                        this.done = true;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type) throw e.arg;
                        return this.rval;
                    }, dispatchException: function (e) {
                        if (this.done) throw e;
                        var t = this;
                        function i(i, s) {
                            return n.type = "throw", n.arg = e, t.next = i, s && (t.method = "next", t.arg = void 0), !!s;
                        }
                        for (var s = this.tryEntries.length - 1; s >= 0; --s) {
                            var o = this.tryEntries[s], n = o.completion;
                            if ("root" === o.tryLoc) return i("end");
                            if (o.tryLoc <= this.prev) {
                                var a = r.call(o, "catchLoc"), h = r.call(o, "finallyLoc");
                                if (a && h) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                } else if (a) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                } else {
                                    if (!h) throw new Error("try statement without catch or finally");
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                }
                            }
                        }
                    }, abrupt: function (e, t) {
                        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                            var s = this.tryEntries[i];
                            if (s.tryLoc <= this.prev && r.call(s, "finallyLoc") && this.prev < s.finallyLoc) {
                                var o = s;
                                break;
                            }
                        }
                        o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
                        var n = o ? o.completion : {};
                        return n.type = e, n.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, u) : this.complete(n);
                    }, complete: function (e, t) {
                        if ("throw" === e.type) throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), u;
                    }, finish: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), B(i), u;
                        }
                    }, catch: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.tryLoc === e) {
                                var s = i.completion;
                                if ("throw" === s.type) {
                                    var r = s.arg;
                                    B(i);
                                }
                                return r;
                            }
                        }
                        throw new Error("illegal catch attempt");
                    }, delegateYield: function (e, t, i) {
                        return this.delegate = { iterator: E(e), resultName: t, nextLoc: i }, "next" === this.method && (this.arg = void 0), u;
                    }
                }, t;
            }
            function it(e, t, i, s, r, o, n) {
                try {
                    var a = e[o](n), h = a.value;
                } catch (e) {
                    return void i(e);
                }
                a.done ? t(h) : Promise.resolve(h).then(s, r);
            }
            function st(e) {
                return function () {
                    var t = this, i = arguments;
                    return new Promise(function (s, r) {
                        var o = e.apply(t, i);
                        function n(e) {
                            it(o, s, r, n, a, "next", e);
                        }
                        function a(e) {
                            it(o, s, r, n, a, "throw", e);
                        }
                        n(void 0);
                    });
                };
            }
            function rt(e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e, ot(e, t);
            }
            function ot(e, t) {
                return (ot = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var nt = function (e) {
                function t() {
                    var i, s = { manifest: Ze, antialias: !y.utils.isMobile.any, preserveDrawingBuffer: true, loadingScreenClass: Ke, screenManagerOptions: { defaultTransition: new g.T }, fps: l.Z.useDebug, upload: l.Z.uploadGraphics };
                    return (i = e.call(this, s) || this).updatePixiResolution(), i.safeSize = { width: 900, height: 500 }, i.maxSize = { width: 900, height: 500 }, l.Z.sharedObject = h.hc.getLocal("options135"), (0, m.TL)(f), g.fc.instance.version = l.Z.sharedObject.data.textureResolution || "high", t.instance = function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(i), Promise.all([i.startup(), qe.P0.loadSoundSprite(), (0, et.m)("./fonts/ClarendonLTStd.css", "Clarendon LT Std"), (0, et.m)("./fonts/Bank-Gothic-Medium.css", "Bank Gothic"), (0, et.m)("./fonts/HelveticaNeueLTStd-Bd.css", "HelveticaNeueLT Std Bold"), (0, et.m)("./fonts/HelveticaNeueLTStd-Md.css", "HelveticaNeueLT Std Med")]).then(function () {
                        Qe.n_({ category: "debug", message: "assets (with audio) loaded", level: "debug" }), i.tempGameScreen = new at(i.options, i.renderer), i.screenManager.addScreen(i.tempGameScreen, "TempGameScene"), i.screenManager.gotoScreen("TempGameScene");
                    }), i;
                }
                rt(t, e);
                var i, s = t.prototype;
                return s.onAssetsLoaded = (i = st(tt().mark(function e() {
                    return tt().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                Qe.n_({ category: "debug", message: "assets (without audio) loaded", level: "debug" });
                            case 1:
                            case "end":
                                return e.stop();
                        }
                    }, e);
                })), function () {
                    return i.apply(this, arguments);
                }), s.updatePixiResolution = function () {
                    h.Hf.main && (h.Hf.main.quality = "HIGH");
                    var e = (screen.availHeight || screen.height - 30) <= window.innerHeight, t = .5 + .5 * l.Z.renderResolutionIncrease;
                    e && (t *= 1.35), t = Math.round(10 * t) / 10, t = Math.max(t, .75), y.settings.RESOLUTION = t, y.settings.FILTER_RESOLUTION = 2;
                }, s.resize = function () {
                    this.updatePixiResolution();
                    var e = this.safeSize.width, t = this.safeSize.height;
                    this.w = e, this.h = t, this.renderer.resolution = y.settings.RESOLUTION, this.renderer.plugins.interaction.resolution = y.settings.RESOLUTION, this.renderer.resize(e, t), this.screenManager.resize(e, t);
                    var i = window.innerWidth / window.innerHeight > this.safeSize.width / this.safeSize.height, s = i ? e / (t / window.innerHeight) : window.innerWidth, r = i ? window.innerHeight : t / (e / window.innerWidth), o = (window.innerWidth - s) / 2, n = (window.innerHeight - r) / 2;
                    this.view.style.width = s + "px", this.view.style.height = r + "px", this.view.style.left = o + "px", this.view.style.top = n + "px";
                }, t;
            }(g.gV);
            nt.instance = null;
            var at = function (e) {
                function t(t, i) {
                    var s;
                    return (s = e.call(this) || this).options = t, s.renderer = i, s;
                }
                rt(t, e);
                var i, s = t.prototype;
                return s.onShown = function () {
                    this.stage || this.init();
                }, s.init = (i = st(tt().mark(function e() {
                    var t, i;
                    return tt().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                this.stage = new h.Hf(this.renderer), this.addChild(this.stage._pixiSprite), window.HW_SETTINGS.level_id && (t = parseInt(window.HW_SETTINGS.level_id)), window.HW_SETTINGS.replay_id && (i = parseInt(window.HW_SETTINGS.replay_id)), this.happyWheels = new ze(this.options), this.happyWheels.levelID = t || -1, this.happyWheels.replayID = i || -1, this.happyWheels.charIndex = 1, this.stage.addChild(this.happyWheels), this.happyWheels.init();
                            case 10:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                })), function () {
                    return i.apply(this, arguments);
                }), t;
            }(y.Container);
            y.Text.prototype.render = function (e) {
                this.resolution = 2 * e.resolution, this._autoResolution && this._resolution !== e.resolution && (this._resolution = e.resolution, this.dirty = true), this.updateText(true), y.Sprite.prototype.render.call(this, e);
            };
        }, 101: (e, t, i) => {
            "use strict";
            i.d(t, { GR: () => O, PW: () => d, jc: () => f, DN: () => P, Z4: () => v, rv: () => S, X0: () => M, oH: () => b, Ry: () => A, Wl: () => te, k5: () => E, JS: () => se, L6: () => F, Vh: () => G, oe: () => V, HQ: () => U, $C: () => oe, cS: () => ae, VF: () => Y, Xr: () => K, JV: () => Q, QK: () => Z, Pj: () => k, ms: () => R, wJ: () => D, U$: () => le }), i(73), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(24), r = i(74), o = i(59), n = (i(30), i(13), i(29), i(20), i(18), i(31), i(34), i(40)), a = i(6), h = i(126), l = i(15);
            function c(e, t) {
                return (c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var d = function (e) {
                var t, i;
                function d(t, i, r, o, n, a) {
                    var h;
                    return void 0 === n && (n = -1), void 0 === a && (a = "Char1"), (h = e.call(this) || this).main = true, h.mc_scale = 2, h.shapeRefScale = 5, h._currentPose = 0, h._bleedCounter = 0, h.neckBreakLimit = 75, h.spineLimit = 95, h.torsoBreakLimit = 160, h.intestineLimit = 240, h.shoulderBreakLimit = 65, h.shoulderSnapLimit = 80, h.hipBreakLimit = 85, h.hipSnapLimit = 100, h.elbowBreakLimit = 60, h.elbowLigamentLimit = 70, h.kneeBreakLimit = 65, h.kneeLigamentLimit = 80, h.lineThickness = 1, h.lineColor = 16711680, h.lineAlpha = 1, h.brainRadius = 12, h.voicePriority = -1, h.keyDownHandler = function (e) {
                        switch (e.keyCode) {
                            case l.Z.leanBackCode:
                                h.leftPressed = true;
                                break;
                            case l.Z.accelerateCode:
                                h.upPressed = true;
                                break;
                            case l.Z.leanForwardCode:
                                h.rightPressed = true;
                                break;
                            case l.Z.decelerateCode:
                                h.downPressed = true;
                                break;
                            case l.Z.primaryActionCode:
                                h.spacePressed = true;
                                break;
                            case l.Z.secondaryAction1Code:
                                h.shiftPressed = true;
                                break;
                            case l.Z.secondaryAction2Code:
                                h.ctrlPressed = true;
                                break;
                            case l.Z.ejectCode:
                                h.zPressed = true;
                                break;
                            case l.Z.switchCameraCode:
                                h.switchCamera();
                        }
                    }, h.keyUpHandler = function (e) {
                        switch (e.keyCode) {
                            case l.Z.leanBackCode:
                                h.leftPressed = false;
                                break;
                            case l.Z.accelerateCode:
                                h.upPressed = false;
                                break;
                            case l.Z.leanForwardCode:
                                h.rightPressed = false;
                                break;
                            case l.Z.decelerateCode:
                                h.downPressed = false;
                                break;
                            case l.Z.primaryActionCode:
                                h.spacePressed = false;
                                break;
                            case l.Z.secondaryAction1Code:
                                h.shiftPressed = false;
                                break;
                            case l.Z.secondaryAction2Code:
                                h.ctrlPressed = false;
                                break;
                            case l.Z.ejectCode:
                                h.zPressed = false;
                        }
                    }, h.contactResultHandler = function (e) {
                        var t = e.shape, i = e.impulse;
                        i > h.contactImpulseDict.get(t) && (h.contactResultBuffer.get(t) ? i > h.contactResultBuffer.get(t).impulse && h.contactResultBuffer.set(t, e) : h.contactResultBuffer.set(t, e));
                    }, h.contactAddHandler = function (e) {
                        var t = e.shape1, i = t.m_body, r = e.shape2, o = r.m_body.m_mass;
                        if (!(h.contactAddBuffer.get(t) || r.m_isSensor || 0 != o && o < i.m_mass)) {
                            var n = s.Yt.b2Dot(e.velocity, e.normal);
                            (n = Math.abs(n)) > 4 && h.contactAddBuffer.set(t, n);
                        }
                    }, h.sourceObject = r, h.groupID = n, h.tag = a, h.session = o, h.m_physScale = o.m_physScale, h.character_scale = h.m_physScale * h.mc_scale, h._startX = t / h.m_physScale, h._startY = i / h.m_physScale, h.composites = [], h.voiceArray = [], h.actionsVector = new Array, h;
                }
                i = e, (t = d).prototype = Object.create(i.prototype), t.prototype.constructor = t, c(t, i);
                var p, u, m = d.prototype;
                return m.addKeyListeners = function () {
                    l.Z.stageSprite.addEventListener(a._d.KEY_DOWN, this.keyDownHandler), l.Z.stageSprite.addEventListener(a._d.KEY_UP, this.keyUpHandler);
                }, m.removeKeyListeners = function () {
                    l.Z.stageSprite.removeEventListener(a._d.KEY_DOWN, this.keyDownHandler), l.Z.stageSprite.removeEventListener(a._d.KEY_UP, this.keyUpHandler), this.leftPressed = false, this.rightPressed = false, this.upPressed = false, this.downPressed = false, this.spacePressed = false;
                }, m.doNothing = function () {
                    this.leftAndRightActions(), this.upAndDownActions(), this.spaceNullActions(), this.shiftNullActions(), this.ctrlNullActions(), this.zNullActions();
                }, m.checkKeyStates = function () {
                    var e = "";
                    this.dead ? (this.leftPressed ? this.rightPressed ? e += "11" : e += "10" : this.rightPressed ? e += "01" : e += "00", this.upPressed ? this.downPressed ? e += "11" : e += "10" : this.downPressed ? e += "01" : e += "00", this.spacePressed ? e += "1" : e += "0", this.shiftPressed ? e += "1" : e += "0", this.ctrlPressed ? e += "1" : e += "0", this.zPressed ? e += "1" : e += "0") : this.userVehicle ? e = this.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? (this.leftAndRightActions(), e += "11") : (this.leftPressedActions(), e += "10") : this.rightPressed ? (this.rightPressedActions(), e += "01") : (this.leftAndRightActions(), e += "00"), this.upPressed ? this.downPressed ? (this.upAndDownActions(), e += "11") : (this.upPressedActions(), e += "10") : this.downPressed ? (this.downPressedActions(), e += "01") : (this.upAndDownActions(), e += "00"), this.spacePressed ? (this.spacePressedActions(), e += "1") : (this.spaceNullActions(), e += "0"), this.shiftPressed ? (this.shiftPressedActions(), e += "1") : (this.shiftNullActions(), e += "0"), this.ctrlPressed ? (this.ctrlPressedActions(), e += "1") : (this.ctrlNullActions(), e += "0"), this.zPressed ? (this.zPressedActions(), e += "1") : (this.zNullActions(), e += "0")), this.dispatchEvent(new n.j3(n.j3.ADD_ENTRY, e));
                }, m.checkReplayData = function (e, t) {
                    this.dead ? ("1" == t.charAt(0) ? "1" == t.charAt(1) ? (e.leftKeyON(), e.rightKeyON()) : (e.leftKeyON(), e.rightKeyOFF()) : "1" == t.charAt(1) ? (e.leftKeyOFF(), e.rightKeyON()) : (e.rightKeyOFF(), e.leftKeyOFF()), "1" == t.charAt(2) ? "1" == t.charAt(3) ? (e.upKeyON(), e.downKeyON()) : (e.upKeyON(), e.downKeyOFF()) : "1" == t.charAt(3) ? (e.upKeyOFF(), e.downKeyON()) : (e.upKeyOFF(), e.downKeyOFF()), "1" == t.charAt(4) ? e.spaceKeyON() : e.spaceKeyOFF(), "1" == t.charAt(5) ? e.shiftKeyON() : e.shiftKeyOFF(), "1" == t.charAt(6) ? e.ctrlKeyON() : e.ctrlKeyOFF(), "1" == t.charAt(7) ? e.zKeyON() : e.zKeyOFF()) : this.userVehicle ? this.userVehicle.operateReplayData(this._session.iteration, t, e) : ("1" == t.charAt(0) ? "1" == t.charAt(1) ? (this.leftAndRightActions(), e.leftKeyON(), e.rightKeyON()) : (this.leftPressedActions(), e.leftKeyON(), e.rightKeyOFF()) : "1" == t.charAt(1) ? (this.rightPressedActions(), e.leftKeyOFF(), e.rightKeyON()) : (this.leftAndRightActions(), e.rightKeyOFF(), e.leftKeyOFF()), "1" == t.charAt(2) ? "1" == t.charAt(3) ? (this.upAndDownActions(), e.upKeyON(), e.downKeyON()) : (this.upPressedActions(), e.upKeyON(), e.downKeyOFF()) : "1" == t.charAt(3) ? (this.downPressedActions(), e.upKeyOFF(), e.downKeyON()) : (this.upAndDownActions(), e.upKeyOFF(), e.downKeyOFF()), "1" == t.charAt(4) ? (this.spacePressedActions(), e.spaceKeyON()) : (this.spaceNullActions(), e.spaceKeyOFF()), "1" == t.charAt(5) ? (this.shiftPressedActions(), e.shiftKeyON()) : (this.shiftNullActions(), e.shiftKeyOFF()), "1" == t.charAt(6) ? (this.ctrlPressedActions(), e.ctrlKeyON()) : (this.ctrlNullActions(), e.ctrlKeyOFF()), "1" == t.charAt(7) ? (this.zPressedActions(), e.zKeyON()) : (this.zNullActions(), e.zKeyOFF()));
                }, m.preActions = function () { }, m.actions = function () {
                    this.checkPose(), this._dead || (this.checkVocals(), this.voiceArray = [], this._dying && this.checkBleedOut());
                    for (var e = this.actionsVector.length, t = 0; t < e; t++) (0, this.actionsVector[t])();
                }, m.removeAction = function (e) {
                    var t = this.actionsVector.indexOf(e);
                    t > -1 && this.actionsVector.splice(t, 1);
                }, m.switchCamera = function () { }, m.checkVocals = function () {
                    var e = this.voiceArray.length - 1;
                    if (this.voiceSound) {
                        if (this.voiceSound.soundChannel) {
                            if (e > this.voicePriority) {
                                this.voiceSound.stopSound();
                                var t = this.voiceArray[e];
                                this.voiceSound = o.ij.instance.playAreaSoundInstance(this.tag + t, this.head1Body), this.voicePriority = e;
                            }
                            return;
                        }
                        this.voiceSound = null, this.voicePriority = -1;
                    }
                    e < 0 || (t = this.voiceArray[e], this.voiceSound = o.ij.instance.playAreaSoundInstance(this.tag + t, this.head1Body), this.voicePriority = e);
                }, m.checkBleedOut = function () {
                    this._bleedCounter += 1, this._bleedCounter == d.BLEED_OUT_TOTAL && (this.dead = true);
                }, m.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, m.leftPressedActions = function () {
                    this.chestBody.ApplyImpulse(new s._m(-1, 0), this.chestBody.GetWorldCenter());
                }, m.rightPressedActions = function () {
                    this.chestBody.ApplyImpulse(new s._m(1, 0), this.chestBody.GetWorldCenter());
                }, m.upPressedActions = function () {
                    this.chestBody.ApplyImpulse(new s._m(0, -1), this.chestBody.GetWorldCenter());
                }, m.downPressedActions = function () {
                    this.chestBody.ApplyImpulse(new s._m(0, 1), this.chestBody.GetWorldCenter());
                }, m.leftAndRightActions = function () { }, m.upAndDownActions = function () { }, m.spacePressedActions = function () { }, m.spaceNullActions = function () { }, m.shiftPressedActions = function () { }, m.shiftNullActions = function () { }, m.ctrlPressedActions = function () { }, m.ctrlNullActions = function () { }, m.zPressedActions = function () { }, m.zNullActions = function () { }, m.create = function () {
                    this.createFilters(), this.createBodies(), this.createJoints(), this.createMovieClips(), this.setLimits(), this.createDictionaries();
                }, m.createFilters = function () {
                    this.defaultFilter = new s.fT, this.defaultFilter.groupIndex = this.groupID, this.defaultFilter.categoryBits = 260, this.defaultFilter.maskBits = 270, this.zeroFilter = new s.fT, this.zeroFilter.groupIndex = 0, this.zeroFilter.categoryBits = 260, this.lowerBodyFilter = new s.fT, this.lowerBodyFilter.categoryBits = 260, this.lowerBodyFilter.maskBits = 270, this.lowerBodyFilter.groupIndex = this.groupID - 5;
                }, m.setLimits = function () {
                    var e = this.head1Body.GetMass() / d.DEF_HEAD_MASS, t = this.chestBody.GetMass() / d.DEF_CHEST_MASS, i = this.pelvisBody.GetMass() / d.DEF_PELVIS_MASS, s = this.upperArm1Body.GetMass() / d.DEF_UPPERARM_MASS, r = this.lowerArm1Body.GetMass() / d.DEF_LOWERARM_MASS, o = this.upperLeg1Body.GetMass() / d.DEF_UPPERLEG_MASS, n = this.lowerLeg1Body.GetMass() / d.DEF_LOWERLEG_MASS;
                    this.headSmashLimit = d.DEF_HEAD_SMASH * e, this.chestSmashLimit = d.DEF_CHEST_SMASH * t, this.pelvisSmashLimit = d.DEF_PELVIS_SMASH * i, this.footSmashLimit = d.DEF_FOOT_SMASH * n, this.neckBreakLimit = Math.round(85 * e), this.spineLimit = Math.round(105 * e), this.torsoBreakLimit = Math.round(180 * i), this.intestineLimit = Math.round(260 * i), this.shoulderBreakLimit = Math.round(75 * s), this.shoulderSnapLimit = Math.round(90 * s), this.hipBreakLimit = Math.round(95 * o), this.hipSnapLimit = Math.round(110 * o), this.elbowBreakLimit = Math.round(70 * r), this.elbowLigamentLimit = Math.round(80 * r), this.kneeBreakLimit = Math.round(80 * n), this.kneeLigamentLimit = Math.round(95 * n);
                }, m.reset = function () {
                    this.dead = false, this._dying = false, this._currentPose = 0, this._bleedCounter = 0, this.createFilters(), this.createBodies(), this.createJoints(), this.resetMovieClips(), this.createDictionaries(), this.cameraFocus = this.chestBody;
                }, m.die = function () {
                    this.brainBody = null, this.heartBody = null, this.upperArm3Body = null, this.upperArm4Body = null, this.upperLeg3Body = null, this.upperLeg4Body = null, this.headBloodFlow = null, this.stomachBloodFlow = null, this.neckBloodFlow = null, this.shoulder1BloodFlow = null, this.shoulder2BloodFlow = null, this.hip1BloodFlow = null, this.hip2BloodFlow = null, this.chunks = [], this.voiceArray = [], this.voiceSound = null, this.voicePriority = -1;
                    for (var e = 0; e < this.composites.length; e++) this.composites[e] instanceof E && this.composites[e].die();
                    this.kneeLigament1 = null, this.kneeLigament2 = null, this.elbowLigament1 = null, this.elbowLigament2 = null, this.composites = [], this.intestineChain && (this.intestineChain = null), this.spinalChord && (this.spinalChord.die(), this.spinalChord = null), this.actionsVector = new Array, this.userVehicle = null, this.vehicleArm1Joint = null, this.vehicleArm2Joint = null;
                }, m.paint = function () {
                    for (var e = 0; e < this.paintVector.length; e++) {
                        var t = this.paintVector[e], i = t.GetInterpolatedWorldCenter();
                        t.m_userData.x = i.x * this.m_physScale, t.m_userData.y = i.y * this.m_physScale, t.m_userData.rotation = t.GetInterpolatedAngle() * d.oneEightyOverPI % 360;
                    }
                    for (e = 0; e < this.composites.length; e++) this.composites[e].paint();
                }, m.createDictionaries = function () {
                    this.contactResultBuffer = new Map, this.contactAddBuffer = new Map, this.contactAddSounds = new Map, this.contactImpulseDict = new Map, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.contactImpulseDict.set(this.chestShape, this.chestSmashLimit), this.contactImpulseDict.set(this.pelvisShape, this.pelvisSmashLimit), this.contactImpulseDict.set(this.lowerLeg1Shape, this.footSmashLimit), this.contactImpulseDict.set(this.lowerLeg2Shape, this.footSmashLimit), this.contactImpulseDict.set(this.lowerArm1Shape, 1e-8), this.contactImpulseDict.set(this.lowerArm2Shape, 1e-8), this.contactAddSounds.set(this.head1Shape, "Thud1"), this.contactAddSounds.set(this.chestShape, "Thud2"), this.contactAddSounds.set(this.pelvisShape, "Thud2");
                }, m.createBodies = function () {
                    var e = this._session.m_world;
                    this.paintVector = new Array, this.chunks = [];
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, n = new s.Oi, a = new s.Oi, h = new s.Oi, l = new s.Oi, c = new s.Oi, p = new s.Oi, u = new s.Oi, m = new s.Oi, f = new s.Vb, y = new s.lB;
                    f.density = 1, f.friction = .3, f.restitution = .1, f.filter = this.defaultFilter, y.density = 1, y.friction = .3, y.restitution = .1, y.filter = this.defaultFilter, this.shapeGuide || (this.shapeGuide = this.sourceObject.shapeGuide), this.shapeGuide.parent && this.shapeGuide.parent.removeChild(this.shapeGuide);
                    var v = this.shapeGuide.chestShape;
                    t.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), t.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.chestBody = e.CreateBody(t), this.chestBody.AllowSleeping(false), this.chestShape = this.chestBody.CreateShape(f), this.chestShape.SetUserData(this), this.chestShape.SetMaterial(2), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, v = this.shapeGuide.headShape, i.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), i.angle = v.rotation / d.oneEightyOverPI, y.radius = v.scaleX * this.shapeRefScale / this.character_scale, this.head1Body = e.CreateBody(i), this.head1Body.AllowSleeping(false), this.head1Shape = this.head1Body.CreateShape(y), this.head1Shape.SetMaterial(2), this.head1Shape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.head1Shape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.head1Shape, this.contactAddHandler), this.head1Body.SetMassFromShapes(), this.paintVector.push(this.head1Body), v = this.shapeGuide.pelvisShape, o.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), o.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.pelvisBody = e.CreateBody(o), this.pelvisBody.AllowSleeping(false), this.pelvisShape = this.pelvisBody.CreateShape(f), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.paintVector.push(this.pelvisBody), v = this.shapeGuide.upperArm1Shape, n.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), n.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.upperArm1Body = e.CreateBody(n), this.upperArm1Body.CreateShape(f), this.upperArm1Body.SetMassFromShapes(), this.paintVector.push(this.upperArm1Body), v = this.shapeGuide.upperArm2Shape, c.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), c.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.upperArm2Body = e.CreateBody(c), this.upperArm2Body.CreateShape(f), this.upperArm2Body.SetMassFromShapes(), this.paintVector.push(this.upperArm2Body), v = this.shapeGuide.upperLeg1Shape, h.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), h.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.upperLeg1Body = e.CreateBody(h), this.upperLeg1Body.CreateShape(f), this.upperLeg1Body.SetMassFromShapes(), this.paintVector.push(this.upperLeg1Body), v = this.shapeGuide.upperLeg2Shape, u.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), u.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.upperLeg2Body = e.CreateBody(u), this.upperLeg2Body.CreateShape(f), this.upperLeg2Body.SetMassFromShapes(), this.paintVector.push(this.upperLeg2Body), v = this.shapeGuide.lowerArm1Shape, a.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), a.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.lowerArm1Body = e.CreateBody(a), this.lowerArm1Shape = this.lowerArm1Body.CreateShape(f), this.lowerArm1Body.SetMassFromShapes(), this.paintVector.push(this.lowerArm1Body), v = this.shapeGuide.lowerArm2Shape, p.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), p.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.lowerArm2Body = e.CreateBody(p), this.lowerArm2Shape = this.lowerArm2Body.CreateShape(f), this.lowerArm2Body.SetMassFromShapes(), this.paintVector.push(this.lowerArm2Body), v = this.shapeGuide.lowerLeg1Shape, l.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), l.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.lowerLeg1Body = e.CreateBody(l), this.lowerLeg1Shape = this.lowerLeg1Body.CreateShape(f), this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg1Shape, this.contactResultHandler), this.lowerLeg1Body.SetMassFromShapes(), this.paintVector.push(this.lowerLeg1Body), v = this.shapeGuide.lowerLeg2Shape, m.position.Set(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale), m.angle = v.rotation / d.oneEightyOverPI, f.SetAsBox(v.scaleX * this.shapeRefScale / this.character_scale, v.scaleY * this.shapeRefScale / this.character_scale), this.lowerLeg2Body = e.CreateBody(m), this.lowerLeg2Shape = this.lowerLeg2Body.CreateShape(f), this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg2Shape, this.contactResultHandler), this.lowerLeg2Body.SetMassFromShapes(), this.paintVector.push(this.lowerLeg2Body), v = this.shapeGuide.intestineShape, this.intestineLength = v.width, v = this.shapeGuide.ligamentShape, this.ligamentLength = v.width, v = this.shapeGuide.headChunkShape, this.headChunkRadius = v.width / 2, v = this.shapeGuide.chestChunkShape, this.chestChunkRadius = v.width / 2, v = this.shapeGuide.pelvisChunkShape, this.pelvisChunkRadius = v.width / 2;
                }, m.createMovieClips = function () {
                    var e = this._session.containerSprite;
                    this.upperArm2MC = this.sourceObject.upperArm2, this.upperArm2MC.scaleX = this.upperArm2MC.scaleY = 1 / this.mc_scale, this.upperArm4MC = this.sourceObject.upperArm4, this.upperArm4MC.scaleX = this.upperArm4MC.scaleY = 1 / this.mc_scale, this.upperArm4MC.visible = false, this.lowerArm2MC = this.sourceObject.lowerArm2, this.lowerArm2MC.scaleX = this.lowerArm2MC.scaleY = 1 / this.mc_scale, this.upperLeg2MC = this.sourceObject.upperLeg2, this.upperLeg2MC.scaleX = this.upperLeg2MC.scaleY = 1 / this.mc_scale, this.upperLeg4MC = this.sourceObject.upperLeg4, this.upperLeg4MC.scaleX = this.upperLeg4MC.scaleY = 1 / this.mc_scale, this.upperLeg4MC.visible = false, this.lowerLeg2MC = this.sourceObject.lowerLeg2, this.lowerLeg2MC.scaleX = this.lowerLeg2MC.scaleY = 1 / this.mc_scale, this.foot2MC = this.sourceObject.foot2, this.foot2MC.scaleX = this.foot2MC.scaleY = 1 / this.mc_scale, this.foot2MC.visible = false, this.intestineMCs = [];
                    for (var t = 1; t < 11; t++) {
                        var i = this.sourceObject["intestine" + t];
                        i.scaleX = i.scaleY = 1 / this.mc_scale, this.intestineMCs.push(i), i.visible = false;
                    }
                    for (this.head1MC = this.sourceObject.head, this.head1MC.scaleX = this.head1MC.scaleY = 1 / this.mc_scale, this.chestMC = this.sourceObject.chest, this.chestMC.scaleX = this.chestMC.scaleY = 1 / this.mc_scale, this.chestMC.wound.visible = false, this.chestMC.neck.visible = false, this.chestChunkMCs = [], t = 1; t < 5; t++) {
                        var s = this.sourceObject["chestChunk" + t];
                        s.scaleX = s.scaleY = 1 / this.mc_scale, this.chestChunkMCs.push(s), s.visible = false;
                    }
                    for (this.spineMCs = [], t = 1; t < 11; t++) {
                        var r = this.sourceObject["spine" + t];
                        r.scaleX = r.scaleY = 1 / this.mc_scale, this.spineMCs.push(r), r.visible = false;
                    }
                    for (this.pelvisMC = this.sourceObject.pelvis, this.pelvisMC.scaleX = this.pelvisMC.scaleY = 1 / this.mc_scale, this.pelvisMC.wound.visible = false, this.pelvisChunkMCs = [], t = 1; t < 4; t++) {
                        var o = this.sourceObject["pelvisChunk" + t];
                        o.scaleX = o.scaleY = 1 / this.mc_scale, this.pelvisChunkMCs.push(o), o.visible = false;
                    }
                    for (this.heartMC = this.sourceObject.heart, this.heartMC.scaleX = this.heartMC.scaleY = 1 / this.mc_scale, this.heartMC.visible = false, this.heartMC.stop(), this.brainMC = this.sourceObject.brain, this.brainMC.scaleX = this.brainMC.scaleY = 1 / this.mc_scale, this.brainMC.visible = false, this.headChunkMCs = [], t = 1; t < 5; t++) {
                        var n = this.sourceObject["headChunk" + t];
                        n.scaleX = n.scaleY = 1 / this.mc_scale, this.headChunkMCs.push(n), n.visible = false;
                    }
                    for (this.upperLeg1MC = this.sourceObject.upperLeg1, this.upperLeg1MC.scaleX = this.upperLeg1MC.scaleY = 1 / this.mc_scale, this.upperLeg3MC = this.sourceObject.upperLeg3, this.upperLeg3MC.scaleX = this.upperLeg3MC.scaleY = 1 / this.mc_scale, this.upperLeg3MC.visible = false, this.lowerLeg1MC = this.sourceObject.lowerLeg1, this.lowerLeg1MC.scaleX = this.lowerLeg1MC.scaleY = 1 / this.mc_scale, this.foot1MC = this.sourceObject.foot1, this.foot1MC.scaleX = this.foot1MC.scaleY = 1 / this.mc_scale, this.foot1MC.visible = false, this.upperArm1MC = this.sourceObject.upperArm1, this.upperArm1MC.scaleX = this.upperArm1MC.scaleY = 1 / this.mc_scale, this.upperArm3MC = this.sourceObject.upperArm3, this.upperArm3MC.scaleX = this.upperArm3MC.scaleY = 1 / this.mc_scale, this.upperArm3MC.visible = false, this.lowerArm1MC = this.sourceObject.lowerArm1, this.lowerArm1MC.scaleX = this.lowerArm1MC.scaleY = 1 / this.mc_scale, this.head1Body.SetUserData(this.head1MC), this.chestBody.SetUserData(this.chestMC), this.pelvisBody.SetUserData(this.pelvisMC), this.upperArm1Body.SetUserData(this.upperArm1MC), this.upperArm2Body.SetUserData(this.upperArm2MC), this.upperLeg1Body.SetUserData(this.upperLeg1MC), this.upperLeg2Body.SetUserData(this.upperLeg2MC), this.lowerArm1Body.SetUserData(this.lowerArm1MC), this.lowerArm2Body.SetUserData(this.lowerArm2MC), this.lowerLeg1Body.SetUserData(this.lowerLeg1MC), this.lowerLeg2Body.SetUserData(this.lowerLeg2MC), e.addChild(this.upperArm2MC), e.addChild(this.upperArm4MC), e.addChild(this.lowerArm2MC), e.addChild(this.upperLeg2MC), e.addChild(this.upperLeg4MC), e.addChild(this.lowerLeg2MC), e.addChild(this.foot2MC), t = 0; t < this.intestineMCs.length; t++) e.addChild(this.intestineMCs[t]);
                    for (e.addChild(this.head1MC), e.addChild(this.chestMC), t = 0; t < this.chestChunkMCs.length; t++) e.addChild(this.chestChunkMCs[t]);
                    for (t = 0; t < this.spineMCs.length; t++) e.addChild(this.spineMCs[t]);
                    for (e.addChild(this.pelvisMC), t = 0; t < this.pelvisChunkMCs.length; t++) e.addChild(this.pelvisChunkMCs[t]);
                    for (e.addChild(this.heartMC), e.addChild(this.brainMC), t = 0; t < this.headChunkMCs.length; t++) e.addChild(this.headChunkMCs[t]);
                    e.addChild(this.upperLeg1MC), e.addChild(this.upperLeg3MC), e.addChild(this.lowerLeg1MC), e.addChild(this.foot1MC), e.addChild(this.upperArm1MC), e.addChild(this.upperArm3MC), e.addChild(this.lowerArm1MC);
                }, m.resetMovieClips = function () {
                    this.upperArm2MC.gotoAndStop(1), this.upperArm2MC.visible = true, this.upperArm4MC.gotoAndStop(1), this.upperArm4MC.visible = false, this.lowerArm2MC.gotoAndStop(1), this.lowerArm2MC.hand.gotoAndStop(1), this.upperLeg2MC.gotoAndStop(1), this.upperLeg2MC.visible = true, this.upperLeg4MC.gotoAndStop(1), this.upperLeg4MC.visible = false, this.lowerLeg2MC.gotoAndStop(1), this.foot2MC.visible = false;
                    for (var e = 0; e < 10; e++) {
                        var t = this.intestineMCs[e];
                        t.visible = false, t.x = -500, t.y = -500;
                    }
                    for (this.head1MC.gotoAndStop(1), this.head1MC.visible = true, this.chestMC.gotoAndStop(1), this.chestMC.visible = true, this.chestMC.wound.visible = false, this.chestMC.neck.visible = false, e = 0; e < 4; e++) this.chestChunkMCs[e].visible = false;
                    for (e = 0; e < 10; e++) {
                        var i = this.spineMCs[e];
                        i.visible = false, i.x = -500, i.y = -500;
                    }
                    for (this.pelvisMC.gotoAndStop(1), this.pelvisMC.visible = true, this.pelvisMC.wound.visible = false, e = 0; e < 3; e++) this.pelvisChunkMCs[e].visible = false;
                    for (this.heartMC.visible = false, this.heartMC.stop(), this.brainMC.visible = false, e = 0; e < 4; e++) this.headChunkMCs[e].visible = false;
                    this.upperLeg1MC.gotoAndStop(1), this.upperLeg1MC.visible = true, this.upperLeg3MC.gotoAndStop(1), this.upperLeg3MC.visible = false, this.lowerLeg1MC.gotoAndStop(1), this.foot1MC.visible = false, this.upperArm1MC.gotoAndStop(1), this.upperArm1MC.visible = true, this.upperArm3MC.gotoAndStop(1), this.upperArm3MC.visible = false, this.lowerArm1MC.gotoAndStop(1), this.lowerArm1MC.hand.gotoAndStop(1), this.head1Body.SetUserData(this.head1MC), this.chestBody.SetUserData(this.chestMC), this.pelvisBody.SetUserData(this.pelvisMC), this.upperArm1Body.SetUserData(this.upperArm1MC), this.upperArm2Body.SetUserData(this.upperArm2MC), this.upperLeg1Body.SetUserData(this.upperLeg1MC), this.upperLeg2Body.SetUserData(this.upperLeg2MC), this.lowerArm1Body.SetUserData(this.lowerArm1MC), this.lowerArm2Body.SetUserData(this.lowerArm2MC), this.lowerLeg1Body.SetUserData(this.lowerLeg1MC), this.lowerLeg2Body.SetUserData(this.lowerLeg2MC);
                }, m.createJoints = function () {
                    var e, t = this._session.m_world, i = new s.tu;
                    i.enableLimit = true, i.maxMotorTorque = 4;
                    var r = new s._m, o = this.shapeGuide.headAnchor;
                    r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.head1Body.GetAngle() - this.chestBody.GetAngle(), i.lowerAngle = -20 / (180 / Math.PI) - e, i.upperAngle = 20 / (180 / Math.PI) - e, i.Initialize(this.chestBody, this.head1Body, r), this.neckJoint = t.CreateJoint(i), o = this.shapeGuide.pelvisAnchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.pelvisBody.GetAngle() - this.chestBody.GetAngle(), i.lowerAngle = -5 / (180 / Math.PI) - e, i.upperAngle = 5 / (180 / Math.PI) - e, i.Initialize(this.chestBody, this.pelvisBody, r), this.waistJoint = t.CreateJoint(i), o = this.shapeGuide.upperArmAnchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.upperArm1Body.GetAngle() - this.chestBody.GetAngle(), i.lowerAngle = -180 / (180 / Math.PI) - e, i.upperAngle = 60 / (180 / Math.PI) - e, i.Initialize(this.chestBody, this.upperArm1Body, r), this.shoulderJoint1 = t.CreateJoint(i), e = this.upperArm2Body.GetAngle() - this.chestBody.GetAngle(), i.lowerAngle = -180 / (180 / Math.PI) - e, i.upperAngle = 60 / (180 / Math.PI) - e, i.Initialize(this.chestBody, this.upperArm2Body, r), this.shoulderJoint2 = t.CreateJoint(i), o = this.shapeGuide.lowerArm1Anchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle(), i.lowerAngle = -160 / (180 / Math.PI) - e, i.upperAngle = 0 / (180 / Math.PI) - e, i.Initialize(this.upperArm1Body, this.lowerArm1Body, r), this.elbowJoint1 = t.CreateJoint(i), o = this.shapeGuide.lowerArm2Anchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle(), i.lowerAngle = -160 / (180 / Math.PI) - e, i.upperAngle = 0 / (180 / Math.PI) - e, i.Initialize(this.upperArm2Body, this.lowerArm2Body, r), this.elbowJoint2 = t.CreateJoint(i), o = this.shapeGuide.upperLegAnchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle(), i.lowerAngle = -150 / (180 / Math.PI) - e, i.upperAngle = 10 / (180 / Math.PI) - e, i.Initialize(this.pelvisBody, this.upperLeg1Body, r), this.hipJoint1 = t.CreateJoint(i), e = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle(), i.lowerAngle = -150 / (180 / Math.PI) - e, i.upperAngle = 10 / (180 / Math.PI) - e, i.Initialize(this.pelvisBody, this.upperLeg2Body, r), this.hipJoint2 = t.CreateJoint(i), o = this.shapeGuide.lowerLeg1Anchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.lowerLeg1Body.GetAngle() - this.upperLeg1Body.GetAngle(), i.lowerAngle = 0 / (180 / Math.PI) - e, i.upperAngle = 150 / d.oneEightyOverPI - e, i.Initialize(this.upperLeg1Body, this.lowerLeg1Body, r), this.kneeJoint1 = t.CreateJoint(i), o = this.shapeGuide.lowerLeg2Anchor, r.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), e = this.lowerLeg2Body.GetAngle() - this.upperLeg2Body.GetAngle(), i.lowerAngle = 0 / d.oneEightyOverPI - e, i.upperAngle = 150 / d.oneEightyOverPI - e, i.Initialize(this.upperLeg2Body, this.lowerLeg2Body, r), this.kneeJoint2 = t.CreateJoint(i);
                }, m.resetJointLimits = function () {
                    var e, t, i, s = d.oneEightyOverPI;
                    t = -20 / s - (e = this.head1Body.GetAngle() - this.chestBody.GetAngle() - this.neckJoint.GetJointAngle()), i = 20 / s - e, this.neckJoint.SetLimits(t, i), t = -5 / s - (e = this.pelvisBody.GetAngle() - this.chestBody.GetAngle() - this.waistJoint.GetJointAngle()), i = 5 / s - e, this.waistJoint.SetLimits(t, i), t = -180 / s - (e = this.shoulderJoint1.m_body2.GetAngle() - this.shoulderJoint1.m_body1.GetAngle() - this.shoulderJoint1.GetJointAngle()), i = 60 / s - e, this.shoulderJoint1.SetLimits(t, i), t = -180 / s - (e = this.shoulderJoint2.m_body2.GetAngle() - this.shoulderJoint2.m_body1.GetAngle() - this.shoulderJoint2.GetJointAngle()), i = 60 / s - e, this.shoulderJoint2.SetLimits(t, i), t = -160 / s - (e = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle() - this.elbowJoint1.GetJointAngle()), i = 0 / s - e, this.elbowJoint1.SetLimits(t, i), t = -160 / s - (e = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle() - this.elbowJoint2.GetJointAngle()), i = 0 / s - e, this.elbowJoint2.SetLimits(t, i), t = -150 / s - (e = this.hipJoint1.m_body2.GetAngle() - this.hipJoint1.m_body1.GetAngle() - this.hipJoint1.GetJointAngle()), i = 10 / s - e, this.hipJoint1.SetLimits(t, i), t = -150 / s - (e = this.hipJoint2.m_body2.GetAngle() - this.hipJoint2.m_body1.GetAngle() - this.hipJoint2.GetJointAngle()), i = 10 / s - e, this.hipJoint2.SetLimits(t, i), t = 0 / s - (e = this.lowerLeg1Body.GetAngle() - this.upperLeg1Body.GetAngle() - this.kneeJoint1.GetJointAngle()), i = 150 / s - e, this.kneeJoint1.SetLimits(t, i), t = 0 / s - (e = this.lowerLeg2Body.GetAngle() - this.upperLeg2Body.GetAngle() - this.kneeJoint2.GetJointAngle()), i = 150 / s - e, this.kneeJoint2.SetLimits(t, i);
                }, m.handleContactBuffer = function () {
                    this.handleContactResults(), this.handleContactAdds();
                }, m.handleContactResults = function () {
                    var e;
                    this.contactResultBuffer.get(this.head1Shape) && (e = this.contactResultBuffer.get(this.head1Shape), this.headSmash1(e.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), this.contactResultBuffer.get(this.chestShape) && (e = this.contactResultBuffer.get(this.chestShape), this.chestSmash(e.impulse), this.contactResultBuffer.delete(this.chestShape), this.contactAddBuffer.delete(this.chestShape)), this.contactResultBuffer.get(this.pelvisShape) && (e = this.contactResultBuffer.get(this.pelvisShape), this.pelvisSmash(e.impulse), this.contactResultBuffer.delete(this.pelvisShape), this.contactAddBuffer.delete(this.pelvisShape)), this.contactResultBuffer.get(this.lowerLeg1Shape) && (e = this.contactResultBuffer.get(this.lowerLeg1Shape), this.footSmash1(e.impulse), this.contactResultBuffer.delete(this.lowerLeg1Shape), this.contactAddBuffer.delete(this.lowerLeg1Shape)), this.contactResultBuffer.get(this.lowerLeg2Shape) && (e = this.contactResultBuffer.get(this.lowerLeg2Shape), this.footSmash2(e.impulse), this.contactResultBuffer.delete(this.lowerLeg2Shape), this.contactAddBuffer.delete(this.lowerLeg2Shape)), this.contactResultBuffer.get(this.lowerArm1Shape) && (e = this.contactResultBuffer.get(this.lowerArm1Shape), this.grabAction(this.lowerArm1Body, e.otherShape, e.otherShape.GetBody()), this.contactResultBuffer.delete(this.lowerArm1Shape)), this.contactResultBuffer.get(this.lowerArm2Shape) && (e = this.contactResultBuffer.get(this.lowerArm2Shape), this.grabAction(this.lowerArm2Body, e.otherShape, e.otherShape.GetBody()), this.contactResultBuffer.delete(this.lowerArm2Shape));
                }, m.handleContactAdds = function () {
                    var e = this;
                    this.contactAddBuffer.forEach(function (t, i) {
                        var s = e.contactAddSounds.get(i);
                        i.m_body && o.ij.instance.playAreaSoundInstance(s, i.m_body), e.contactAddBuffer.delete(i);
                    });
                }, m.checkJoints = function () {
                    this.checkRevJoint(this.waistJoint, this.torsoBreakLimit, this.torsoBreak.bind(this)), this.checkRevJoint(this.neckJoint, this.neckBreakLimit, this.neckBreak.bind(this)), this.checkRevJoint(this.shoulderJoint1, this.shoulderBreakLimit, this.shoulderBreak1.bind(this)), this.checkRevJoint(this.shoulderJoint2, this.shoulderBreakLimit, this.shoulderBreak2.bind(this)), this.checkRevJoint(this.elbowJoint1, this.elbowBreakLimit, this.elbowBreak1.bind(this)), this.checkRevJoint(this.elbowJoint2, this.elbowBreakLimit, this.elbowBreak2.bind(this)), this.checkRevJoint(this.hipJoint1, this.hipBreakLimit, this.hipBreak1.bind(this)), this.checkRevJoint(this.hipJoint2, this.hipBreakLimit, this.hipBreak2.bind(this)), this.checkRevJoint(this.kneeJoint1, this.kneeBreakLimit, this.kneeBreak1.bind(this)), this.checkRevJoint(this.kneeJoint2, this.kneeBreakLimit, this.kneeBreak2.bind(this));
                    for (var e = 0; e < this.composites.length; e++) this.composites[e].checkJoints();
                }, m.checkRevJoint = function (e, t, i) {
                    if (e && !e.broken) {
                        var s = e.GetReactionForce().Length();
                        if (s > t) return void i(s);
                        var r = e.GetAnchor1(), o = e.GetAnchor2(), n = o.x - r.x, a = o.y - r.y;
                        Math.sqrt(n * n + a * a) > .5 && i(1e3);
                    }
                }, m.checkDistJoint = function (e, t, i) {
                    if (e && !e.broken) {
                        var s = Math.abs(e.m_impulse);
                        s > t && i(s);
                    }
                }, m.headSmash1 = function (e) {
                    if (this.contactImpulseDict.delete(this.head1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.head1Shape), this._session.contactListener.deleteListener(r.$S.ADD, this.head1Shape), this.dead = true, this.neckJoint.broken) this.headBloodFlow.stopSpewing(), this.head1MC.visible = false, this.spinalChord && this.spinalChord.spineBreak2(10); else if (this.neckJoint.broken = true, this.head1MC.visible = false, this.chestMC.neck.visible = true, this.chestShape.m_userData != d.GRIND_STATE) {
                        var t = this.shapeGuide.spineAnchor;
                        this.neckBloodFlow = this._session.particleController.createBloodFlow(2.5, 4, this.chestBody, new s._m(t.x / this.character_scale, t.y / this.character_scale), 270, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.chestMC));
                    }
                    var i = new s.lB;
                    i.density = 1, i.friction = .3, i.restitution = .1, i.radius = this.headChunkRadius / this.character_scale, i.filter = this.zeroFilter;
                    for (var n = this.head1Body.GetPosition(), a = this.head1Body.GetAngle(), h = 4 / this.character_scale, l = (new s._m, 0); l < this.headChunkMCs.length; l++) {
                        var c = new s.Oi;
                        c.userData = this.headChunkMCs[l], c.userData.visible = true, c.position.Set(n.x + Math.sin(a) * h, n.y + Math.cos(a) * h);
                        var p = this._session.m_world.CreateBody(c);
                        p.CreateShape(i), p.SetMassFromShapes(), p.SetLinearVelocity(this.head1Body.GetLinearVelocityFromWorldPoint(c.position)), p.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(p), this.chunks.push(p), a += Math.PI / 2;
                    }
                    i.radius = this.brainRadius / this.character_scale;
                    var u = new s.Oi;
                    u.userData = this.brainMC, this.brainMC.visible = true, u.position.Set(n.x, n.y), u.angle = this.head1Body.GetAngle(), this.brainBody = this._session.m_world.CreateBody(u), this.brainBody.CreateShape(i), this.brainBody.SetMassFromShapes(), this.brainBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.brainBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.brainBody), this._session.particleController.createBloodBurst(5, 15, this.head1Body, 200, new s._m, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.brainMC)), o.ij.instance.playAreaSoundInstance("HeadSmash", this.head1Body), this._session.m_world.DestroyBody(this.head1Body);
                }, m.chestSmash = function (e) {
                    this.contactImpulseDict.delete(this.chestShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.chestShape), this._session.contactListener.deleteListener(r.$S.ADD, this.chestShape), this.dead = true, this.neckJoint.broken ? this.spinalChord && this.spinalChord.spineBreak1(10) : this.neckBreak(this.spineLimit, false, false), this.chestMC.neck.visible = false, this.shoulderJoint1 && (this.shoulderJoint1.broken ? this.upperArm3Body && (this._session.m_world.DestroyJoint(this.shoulderJoint1), this.upperArm3Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.upperArm3Body.GetShapeList()), this.upperArm3MC.gotoAndStop(8)) : this.shoulderBreak1(this.shoulderSnapLimit + 1, false)), this.shoulderJoint2 && (this.shoulderJoint2.broken ? this.upperArm4Body && (this._session.m_world.DestroyJoint(this.shoulderJoint2), this.upperArm4Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.upperArm4Body.GetShapeList()), this.upperArm4MC.gotoAndStop(8)) : this.shoulderBreak2(this.shoulderSnapLimit + 1, false)), this.waistJoint.broken ? this.intestineChain && this.intestineChain.intestineBreak2(10) : (this.torsoBreak(this.intestineLimit - 1, false), this.intestineChain.intestineBreak2(10));
                    var t = new s.lB;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.radius = this.chestChunkRadius / this.character_scale, t.filter = this.zeroFilter;
                    for (var i = this.chestBody.GetInterpolatedPosition(), n = this.chestBody.GetInterpolatedAngle() + Math.PI / 4, a = 5 / this.character_scale, h = (new s._m, 0); h < this.chestChunkMCs.length; h++) {
                        var l = new s.Oi;
                        l.userData = this.chestChunkMCs[h], l.userData.visible = true, l.position.Set(i.x + Math.sin(n) * a, i.y + Math.cos(n) * a), l.angle = this.chestBody.GetAngle();
                        var c = this._session.m_world.CreateBody(l);
                        c.CreateShape(t), c.SetMassFromShapes(), c.SetLinearVelocity(this.chestBody.GetLinearVelocityFromWorldPoint(l.position)), c.SetAngularVelocity(this.chestBody.GetAngularVelocity()), this.paintVector.push(c), this.chunks.push(c), n += Math.PI / 2;
                    }
                    this.heartMC.visible = true, t.radius = this.headChunkRadius / this.character_scale;
                    var d = new s.Oi;
                    d.userData = this.heartMC, this.heartMC.play(), d.position.Set(i.x, i.y), d.angle = this.chestBody.GetAngle(), this.heartBody = this._session.m_world.CreateBody(d), this.heartBody.CreateShape(t), this.heartBody.SetMassFromShapes(), this.heartBody.SetLinearVelocity(this.chestBody.GetLinearVelocity()), this.heartBody.SetAngularVelocity(this.chestBody.GetAngularVelocity()), this.paintVector.push(this.heartBody), this.stomachBloodFlow && this.stomachBloodFlow.stopSpewing(), this.neckBloodFlow && this.neckBloodFlow.stopSpewing(), this.shoulder1BloodFlow && this.shoulder1BloodFlow.stopSpewing(), this.shoulder2BloodFlow && this.shoulder2BloodFlow.stopSpewing(), this._session.particleController.createBloodBurst(5, 20, this.chestBody, 300, new s._m, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.heartMC)), o.ij.instance.playAreaSoundInstance("ChestSmash", this.chestBody), this.chestBody.SetAngularVelocity(0), this.chestBody.SetLinearVelocity(new s._m), this._session.m_world.DestroyBody(this.chestBody), this.chestMC.visible = false, this.cameraFocus = this.heartBody, this.heartBody.CopyInterpolation(this.chestBody), this._session.camera.focus == this.chestBody && (this._session.camera.focus = this.cameraFocus);
                }, m.pelvisSmash = function (e) {
                    this.contactImpulseDict.delete(this.pelvisShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.pelvisShape), this._session.contactListener.deleteListener(r.$S.ADD, this.pelvisShape), this.hipJoint1 && (this.hipJoint1.broken ? this.upperLeg3Body && (this._session.m_world.DestroyJoint(this.hipJoint1), this.upperLeg3Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.upperLeg3Body.GetShapeList()), this.upperLeg3MC.gotoAndStop(8)) : this.hipBreak1(this.hipSnapLimit + 1, false)), this.hipJoint2 && (this.hipJoint2.broken ? this.upperLeg4Body && (this._session.m_world.DestroyJoint(this.hipJoint2), this.upperLeg4Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.upperLeg4Body.GetShapeList()), this.upperLeg4MC.gotoAndStop(8)) : this.hipBreak2(this.hipSnapLimit + 1, false)), this.waistJoint.broken ? this.intestineChain && this.intestineChain.intestineBreak1(10) : this.torsoBreak(this.intestineLimit), this.hip1BloodFlow && this.hip1BloodFlow.stopSpewing(), this.hip2BloodFlow && this.hip2BloodFlow.stopSpewing();
                    var t = new s.lB;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.radius = this.pelvisChunkRadius / this.character_scale, t.filter = this.zeroFilter;
                    for (var i = this.pelvisBody.GetPosition(), n = this.pelvisBody.GetAngle(), a = 3 / this.character_scale, h = (new s._m, 0); h < this.pelvisChunkMCs.length; h++) {
                        var l = new s.Oi;
                        l.userData = this.pelvisChunkMCs[h], l.userData.visible = true, l.position.Set(i.x + Math.sin(n) * a, i.y + Math.cos(n) * a), l.angle = this.pelvisBody.GetAngle();
                        var c = this._session.m_world.CreateBody(l);
                        c.CreateShape(t), c.SetMassFromShapes(), c.SetLinearVelocity(this.pelvisBody.GetLinearVelocityFromWorldPoint(l.position)), c.SetAngularVelocity(this.pelvisBody.GetAngularVelocity()), this.paintVector.push(c), this.chunks.push(c), n += 2 * Math.PI / 3;
                    }
                    this._session.particleController.createBloodBurst(5, 15, this.pelvisBody, 200, new s._m, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.pelvisMC)), o.ij.instance.playAreaSoundInstance("PelvisSmash", this.pelvisBody), this._session.m_world.DestroyBody(this.pelvisBody), this.pelvisMC.visible = false, this.addVocals("Pelvis", 5);
                }, m.footSmash1 = function (e) {
                    this.contactImpulseDict.delete(this.lowerLeg1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerLeg1Shape), this._session.contactListener.deleteListener(r.$S.ADD, this.lowerLeg1Shape);
                    var t = new s.Vb, i = new s.Oi, n = this.shapeGuide.footShape, a = this.lowerLeg1Body.GetWorldPoint(new s._m(n.x / this.character_scale, n.y / this.character_scale));
                    i.position = a, i.angle = this.lowerLeg1Body.GetAngle(), i.userData = this.foot1MC, this.foot1MC.visible = true, t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter, t.SetAsBox(n.scaleX * this.shapeRefScale / this.character_scale, n.scaleY * this.shapeRefScale / this.character_scale), this.foot1Body = this._session.m_world.CreateBody(i), this.foot1Body.CreateShape(t), this.foot1Body.SetMassFromShapes(), this.foot1Body.SetLinearVelocity(this.lowerLeg1Body.GetLinearVelocity()), this.foot1Body.SetAngularVelocity(this.lowerLeg1Body.GetAngularVelocity()), this.paintVector.push(this.foot1Body);
                    var h = this.shapeGuide.lowerLeg1Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerLeg1Body, 50, new s._m(0, 5 * h.scaleY / this.character_scale), this._session.containerSprite), 2 == this.lowerLeg1MC.currentFrame ? this.lowerLeg1MC.gotoAndStop(4) : this.lowerLeg1MC.gotoAndStop(3);
                    var l = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + l, this.lowerLeg1Body), this.addVocals("Foot1", 0);
                }, m.footSmash2 = function (e) {
                    this.contactImpulseDict.delete(this.lowerLeg2Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerLeg2Shape), this._session.contactListener.deleteListener(r.$S.ADD, this.lowerLeg2Shape);
                    var t = new s.Vb, i = new s.Oi, n = this.shapeGuide.footShape, a = this.lowerLeg2Body.GetWorldPoint(new s._m(n.x / this.character_scale, n.y / this.character_scale));
                    i.position = a, i.angle = this.lowerLeg2Body.GetAngle(), i.userData = this.foot2MC, this.foot2MC.visible = true, t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter, t.SetAsBox(n.scaleX * this.shapeRefScale / this.character_scale, n.scaleY * this.shapeRefScale / this.character_scale), this.foot2Body = this._session.m_world.CreateBody(i), this.foot2Body.CreateShape(t), this.foot2Body.SetMassFromShapes(), this.foot2Body.SetLinearVelocity(this.lowerLeg2Body.GetLinearVelocity()), this.foot2Body.SetAngularVelocity(this.lowerLeg2Body.GetAngularVelocity()), this.paintVector.push(this.foot2Body);
                    var h = this.shapeGuide.lowerLeg2Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerLeg2Body, 50, new s._m(0, 5 * h.scaleY / this.character_scale), this._session.containerSprite), 2 == this.lowerLeg2MC.currentFrame ? this.lowerLeg2MC.gotoAndStop(4) : this.lowerLeg2MC.gotoAndStop(3);
                    var l = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + l, this.lowerLeg2Body), this.addVocals("Foot2", 0);
                }, m.torsoBreak = function (e, t, i) {
                    void 0 === t && (t = true), void 0 === i && (i = true), this.waistJoint.broken = true, this._dying = true, this._session.m_world.DestroyJoint(this.waistJoint), this.chestMC.gotoAndStop(2), this.pelvisMC.wound.visible = true, this.pelvisShape.m_userData != d.GRIND_STATE && (this.pelvisBody.GetShapeList().SetFilterData(this.lowerBodyFilter), this._session.m_world.Refilter(this.pelvisBody.GetShapeList()));
                    var r = this.upperLeg1Body.GetShapeList();
                    if (-3 != r.m_filter.groupIndex && (r.SetFilterData(this.lowerBodyFilter), this.session.m_world.Refilter(r)), -3 != (r = this.upperLeg2Body.GetShapeList()).m_filter.groupIndex && (r.SetFilterData(this.lowerBodyFilter), this.session.m_world.Refilter(r)), this.lowerLeg1Body.GetShapeList().SetFilterData(this.lowerBodyFilter), this.lowerLeg2Body.GetShapeList().SetFilterData(this.lowerBodyFilter), this._session.m_world.Refilter(this.lowerLeg1Body.GetShapeList()), this._session.m_world.Refilter(this.lowerLeg2Body.GetShapeList()), e < this.intestineLimit && this.chestShape.m_userData != d.GRIND_STATE && this.pelvisShape.m_userData != d.GRIND_STATE) {
                        var n = this.intestineLimit - this.torsoBreakLimit, a = e - this.torsoBreakLimit, h = n / 8, l = Math.ceil(a / h) + 1;
                        this.intestineChain = new M(this, l, this.intestineLength), this.composites.push(this.intestineChain);
                    }
                    t && this.chestShape.m_userData != d.GRIND_STATE && (this.stomachBloodFlow = this._session.particleController.createBloodFlow(2, 3, this.chestBody, new s._m(0, 0), 90, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.chestMC))), i && o.ij.instance.playAreaSoundInstance("LimbRip1", this.pelvisBody), this.addVocals("Torso", 5);
                }, m.neckBreak = function (e, t, i) {
                    if (void 0 === t && (t = true), void 0 === i && (i = true), this.dead = true, this.neckJoint.broken = true, this._session.m_world.DestroyJoint(this.neckJoint), this.head1MC.gotoAndStop(2), this.chestMC.neck.visible = true, this.head1Shape.m_userData != d.GRIND_STATE && (this.head1Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.head1Body.GetShapeList()), this.headBloodFlow = this._session.particleController.createBloodFlow(2.5, 4, this.head1Body, new s._m(0, 0), 90, 150, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.head1MC))), t && this.chestShape.m_userData != d.GRIND_STATE) {
                        var r = this.shapeGuide.spineAnchor;
                        this.neckBloodFlow = this._session.particleController.createBloodFlow(2.5, 4, this.chestBody, new s._m(r.x / this.character_scale, r.y / this.character_scale), 270, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.chestMC));
                    }
                    if (e < this.spineLimit && this.chestShape.m_userData != d.GRIND_STATE && this.head1Shape.m_userData != d.GRIND_STATE) {
                        var n = this.spineLimit - this.neckBreakLimit, a = e - this.neckBreakLimit, h = n / 9, l = Math.ceil(a / h) + 1;
                        this.spinalChord = new k(this, l, this.ligamentLength), this.composites.push(this.spinalChord);
                    }
                    i && o.ij.instance.playAreaSoundInstance("NeckBreak", this.head1Body);
                }, m.shoulderBreak1 = function (e, t) {
                    if (void 0 === t && (t = true), this.shoulderJoint1.broken = true, e > this.shoulderSnapLimit) {
                        this._session.m_world.DestroyJoint(this.shoulderJoint1);
                        var i = this.upperArm1Body.GetShapeList();
                        if (i.SetFilterData(this.zeroFilter), i.SetMaterial(2), i.SetUserData(this), this._session.m_world.Refilter(i), (i = this.lowerArm1Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperArm1MC.currentFrame ? this.upperArm1MC.gotoAndStop(7) : this.upperArm1MC.gotoAndStop(4), this.chestMC.wound.visible = true, t && this.chestShape.m_userData != d.GRIND_STATE) {
                            var r = this.chestMC.wound;
                            this.shoulder1BloodFlow = this._session.particleController.createBloodFlow(0, 1, this.chestBody, new s._m(r.x / this.character_scale, r.y / this.character_scale), 270, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperArm1MC)), o.ij.instance.playAreaSoundInstance("LimbRip2", this.upperArm1Body);
                        }
                        r = this.shapeGuide.upperArm1Shape, this.arm1BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperArm1Body, new s._m(0, r.scaleY * -this.shapeRefScale / this.character_scale), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperArm1MC)), this.addVocals("Shoulder1", 3);
                    } else {
                        var n = new s.Oi, a = new s.Vb;
                        this.upperArm3MC.visible = true, n.userData = this.upperArm3MC;
                        var h = this.shoulderJoint1.GetAnchor1();
                        n.position.Set(h.x, h.y), n.angle = this.upperArm1Body.GetAngle();
                        var l = this.shapeGuide.sevArm1Shape;
                        a.density = 1, a.friction = .3, a.restitution = .1, a.filter = this.defaultFilter, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperArm3Body = this._session.m_world.CreateBody(n), this.upperArm3Body.CreateShape(a), this.upperArm3Body.SetMassFromShapes(), this.upperArm3Body.SetLinearVelocity(this.upperArm1Body.GetLinearVelocity()), this.upperArm3Body.SetAngularVelocity(this.upperArm1Body.GetAngularVelocity()), this.paintVector.push(this.upperArm3Body), this._session.m_world.DestroyJoint(this.shoulderJoint1), this.shoulderJoint1 = null;
                        var c = new s.tu;
                        c.enableLimit = true, c.maxMotorTorque = 4;
                        var p = this.upperArm3Body.GetAngle() - this.chestBody.GetAngle();
                        c.lowerAngle = -180 / (180 / Math.PI) - p, c.upperAngle = 60 / (180 / Math.PI) - p, c.Initialize(this.chestBody, this.upperArm3Body, h), this.shoulderJoint1 = this._session.m_world.CreateJoint(c), this.shoulderJoint1.broken = true, (i = this.upperArm1Body.GetShapeList()).SetFilterData(this.zeroFilter), i.SetMaterial(2), i.SetUserData(this), this._session.m_world.Refilter(i), (i = this.lowerArm1Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperArm1MC.currentFrame ? this.upperArm1MC.gotoAndStop(6) : this.upperArm1MC.gotoAndStop(3), this.upperArm3MC.gotoAndStop(2), t && (this.shoulder1BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperArm3Body, new s._m(0, 0), 90, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperArm1MC)), o.ij.instance.playAreaSoundInstance("LimbRip2", this.upperArm1Body)), this.addVocals("Shoulder1", 3);
                    }
                    this.vehicleArm1Joint && (this._session.m_world.DestroyJoint(this.vehicleArm1Joint), this.vehicleArm1Joint = null, null == this.vehicleArm2Joint && this.userVehicleEject());
                }, m.shoulderBreak2 = function (e, t) {
                    if (void 0 === t && (t = true), this.shoulderJoint2.broken = true, e > this.shoulderSnapLimit) {
                        this._session.m_world.DestroyJoint(this.shoulderJoint2);
                        var i = this.upperArm2Body.GetShapeList();
                        if (i.SetFilterData(this.zeroFilter), i.SetMaterial(2), i.SetUserData(this), this._session.m_world.Refilter(i), (i = this.lowerArm2Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperArm2MC.currentFrame ? this.upperArm2MC.gotoAndStop(7) : this.upperArm2MC.gotoAndStop(4), t && this.chestShape.m_userData != d.GRIND_STATE) {
                            var r = this.chestMC.wound;
                            this.shoulder2BloodFlow = this._session.particleController.createBloodFlow(0, 1, this.chestBody, new s._m(r.x / this.character_scale, r.y / this.character_scale), 270, 500, this.session.containerSprite, this.session.containerSprite.getChildIndex(this.upperArm2MC)), o.ij.instance.playAreaSoundInstance("LimbRip2", this.upperArm2Body);
                        }
                        r = this.shapeGuide.upperArm2Shape, this.arm2BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperArm2Body, new s._m(0, r.scaleY * -this.shapeRefScale / this.character_scale), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.chestMC)), this.addVocals("Shoulder2", 3);
                    } else {
                        var n = new s.Oi, a = new s.Vb;
                        this.upperArm4MC.visible = true, n.userData = this.upperArm4MC;
                        var h = this.shoulderJoint2.GetAnchor1();
                        n.position.Set(h.x, h.y), n.angle = this.upperArm2Body.GetAngle();
                        var l = this.shapeGuide.sevArm1Shape;
                        a.density = 1, a.friction = .3, a.restitution = .1, a.filter = this.defaultFilter, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperArm4Body = this._session.m_world.CreateBody(n), this.upperArm4Body.CreateShape(a), this.upperArm4Body.SetMassFromShapes(), this.upperArm4Body.SetLinearVelocity(this.upperArm2Body.GetLinearVelocity()), this.upperArm4Body.SetAngularVelocity(this.upperArm2Body.GetAngularVelocity()), this.paintVector.push(this.upperArm4Body), this._session.m_world.DestroyJoint(this.shoulderJoint2), this.shoulderJoint2 = null;
                        var c = new s.tu;
                        c.enableLimit = true, c.maxMotorTorque = 4;
                        var p = this.upperArm4Body.GetAngle() - this.chestBody.GetAngle();
                        c.lowerAngle = -180 / (180 / Math.PI) - p, c.upperAngle = 60 / (180 / Math.PI) - p, c.Initialize(this.chestBody, this.upperArm4Body, h), this.shoulderJoint2 = this._session.m_world.CreateJoint(c), this.shoulderJoint2.broken = true, (i = this.upperArm2Body.GetShapeList()).SetFilterData(this.zeroFilter), i.SetMaterial(2), i.SetUserData(this), this._session.m_world.Refilter(i), (i = this.lowerArm2Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperArm2MC.currentFrame ? this.upperArm2MC.gotoAndStop(6) : this.upperArm2MC.gotoAndStop(3), this.upperArm4MC.gotoAndStop(2), t && (this.shoulder2BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperArm4Body, new s._m(0, 0), 90, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperArm2MC)), o.ij.instance.playAreaSoundInstance("LimbRip2", this.upperArm2Body)), this.addVocals("Shoulder2", 3);
                    }
                    this.vehicleArm2Joint && (this._session.m_world.DestroyJoint(this.vehicleArm2Joint), this.vehicleArm2Joint = null, null == this.vehicleArm1Joint && this.userVehicleEject());
                }, m.elbowBreak1 = function (e) {
                    switch (this.elbowJoint1.broken = true, this._session.m_world.DestroyJoint(this.elbowJoint1), this.lowerArm1Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerArm1Body.GetShapeList()), this.lowerArm1MC.gotoAndStop(2), this.upperArm1MC.currentFrame) {
                        case 3:
                            this.upperArm1MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperArm1MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperArm1MC.gotoAndStop(5);
                    }
                    this.lowerArm1MC.gotoAndStop(2);
                    var t = this.shapeGuide.lowerArm1Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerArm1Body, 50, new s._m(0, t.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.elbowLigamentLimit && (this.elbowLigament1 = new E(this.upperArm1Body, this.lowerArm1Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.elbowLigament1));
                    var i = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + i, this.lowerArm1Body), this.addVocals("Elbow1", 1), this.vehicleArm1Joint && (this._session.m_world.DestroyJoint(this.vehicleArm1Joint), this.vehicleArm1Joint = null, null == this.vehicleArm2Joint && this.userVehicleEject());
                }, m.elbowBreak2 = function (e) {
                    switch (this.elbowJoint2.broken = true, this._session.m_world.DestroyJoint(this.elbowJoint2), this.lowerArm2Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerArm2Body.GetShapeList()), this.lowerArm2MC.gotoAndStop(2), this.upperArm2MC.currentFrame) {
                        case 3:
                            this.upperArm2MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperArm2MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperArm2MC.gotoAndStop(5);
                    }
                    this.lowerArm2MC.gotoAndStop(2);
                    var t = this.shapeGuide.lowerArm2Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerArm2Body, 50, new s._m(0, t.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.elbowLigamentLimit && (this.elbowLigament2 = new E(this.upperArm2Body, this.lowerArm2Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.elbowLigament2));
                    var i = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + i, this.lowerArm2Body), this.addVocals("Elbow2", 1), this.vehicleArm2Joint && (this._session.m_world.DestroyJoint(this.vehicleArm2Joint), this.vehicleArm2Joint = null, null == this.vehicleArm1Joint && this.userVehicleEject());
                }, m.hipBreak1 = function (e, t) {
                    if (void 0 === t && (t = true), this.hipJoint1.broken = true, e > this.hipSnapLimit) {
                        this._session.m_world.DestroyJoint(this.hipJoint1);
                        var i = this.upperLeg1Body.GetShapeList();
                        i.SetFilterData(this.zeroFilter), i.SetMaterial(2), i.m_isSensor = false, i.SetUserData(this), this._session.m_world.Refilter(i), (i = this.lowerLeg1Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperLeg1MC.currentFrame ? this.upperLeg1MC.gotoAndStop(7) : this.upperLeg1MC.gotoAndStop(4), this.pelvisMC.gotoAndStop(2), t && this.pelvisShape.m_userData != d.GRIND_STATE && (this.hip1BloodFlow = this._session.particleController.createBloodFlow(0, 1, this.pelvisBody, new s._m(0, 0), 90, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg1MC)), o.ij.instance.playAreaSoundInstance("LimbRip3", this.upperLeg1Body));
                        var r = this.shapeGuide.upperLeg1Shape;
                        this.thigh1BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg1Body, new s._m(0, r.scaleY * -this.shapeRefScale / this.character_scale), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg1MC)), this.addVocals("Hip1", 4);
                    } else {
                        var n = new s.Oi, a = new s.Vb;
                        this.upperLeg3MC.visible = true, n.userData = this.upperLeg3MC;
                        var h = this.hipJoint1.GetAnchor1();
                        n.position.Set(h.x, h.y), n.angle = this.upperLeg1Body.GetAngle();
                        var l = this.shapeGuide.sevLeg1Shape;
                        a.density = 1, a.friction = .3, a.restitution = .1, a.filter = this.defaultFilter, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperLeg3Body = this._session.m_world.CreateBody(n), this.upperLeg3Body.CreateShape(a), this.upperLeg3Body.SetMassFromShapes(), this.upperLeg3Body.SetLinearVelocity(this.upperLeg1Body.GetLinearVelocity()), this.upperLeg3Body.SetAngularVelocity(this.upperLeg1Body.GetAngularVelocity()), this.paintVector.push(this.upperLeg3Body), this._session.m_world.DestroyJoint(this.hipJoint1), this.hipJoint1 = null;
                        var c = new s.tu;
                        c.enableLimit = true, c.maxMotorTorque = 4;
                        var p = this.upperLeg3Body.GetAngle() - this.pelvisBody.GetAngle();
                        c.lowerAngle = -150 / (180 / Math.PI) - p, c.upperAngle = 10 / (180 / Math.PI) - p, c.Initialize(this.pelvisBody, this.upperLeg3Body, h), this.hipJoint1 = this._session.m_world.CreateJoint(c), this.hipJoint1.broken = true, l = this.shapeGuide.sevLeg2Shape, this.upperLeg1Body.DestroyShape(this.upperLeg1Body.GetShapeList()), a.filter = this.zeroFilter, a.userData = 1, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperLeg1Body.CreateShape(a), this.upperLeg1Body.SetMassFromShapes(), this.lowerLeg1Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerLeg1Body.GetShapeList()), 5 == this.upperLeg1MC.currentFrame ? this.upperLeg1MC.gotoAndStop(6) : this.upperLeg1MC.gotoAndStop(3), this.upperLeg3MC.gotoAndStop(2), t && (this.hip1BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg3Body, new s._m(0, 0), 90, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg3MC)), o.ij.instance.playAreaSoundInstance("LimbRip3", this.upperLeg1Body)), r = this.shapeGuide.sevLeg2Shape, this.thigh1BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg1Body, new s._m(0, 0), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg1MC)), this.addVocals("Hip1", 4);
                    }
                }, m.hipBreak2 = function (e, t) {
                    if (void 0 === t && (t = true), this.hipJoint2.broken = true, e > this.hipSnapLimit) {
                        this._session.m_world.DestroyJoint(this.hipJoint2);
                        var i = this.upperLeg2Body.GetShapeList();
                        i.SetFilterData(this.zeroFilter), i.SetMaterial(2), i.m_isSensor = false, i.SetUserData(this), this._session.m_world.Refilter(i), i = this.lowerLeg2Body.GetShapeList(), (i = this.lowerLeg2Body.GetShapeList()).SetFilterData(this.zeroFilter), this._session.m_world.Refilter(i), 5 == this.upperLeg2MC.currentFrame ? this.upperLeg2MC.gotoAndStop(7) : this.upperLeg2MC.gotoAndStop(4), t && this.pelvisShape.m_userData != d.GRIND_STATE && (this.hip2BloodFlow = this._session.particleController.createBloodFlow(0, 1, this.pelvisBody, new s._m(0, 0), 90, 500, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg2MC)), o.ij.instance.playAreaSoundInstance("LimbRip4", this.upperLeg2Body));
                        var r = this.shapeGuide.upperLeg2Shape;
                        this.thigh2BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg2Body, new s._m(0, r.scaleY * -this.shapeRefScale / this.character_scale), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg2MC)), this.addVocals("Hip2", 4);
                    } else {
                        var n = new s.Oi, a = new s.Vb;
                        this.upperLeg4MC.visible = true, n.userData = this.upperLeg4MC;
                        var h = this.hipJoint2.GetAnchor1();
                        n.position.Set(h.x, h.y), n.angle = this.upperLeg2Body.GetAngle();
                        var l = this.shapeGuide.sevLeg1Shape;
                        a.density = 1, a.friction = .3, a.restitution = .1, a.filter = this.defaultFilter, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperLeg4Body = this._session.m_world.CreateBody(n), this.upperLeg4Body.CreateShape(a), this.upperLeg4Body.SetMassFromShapes(), this.upperLeg4Body.SetLinearVelocity(this.upperLeg2Body.GetLinearVelocity()), this.upperLeg4Body.SetAngularVelocity(this.upperLeg2Body.GetAngularVelocity()), this.paintVector.push(this.upperLeg4Body), this._session.m_world.DestroyJoint(this.hipJoint2), this.hipJoint2 = null;
                        var c = new s.tu;
                        c.enableLimit = true, c.maxMotorTorque = 4;
                        var p = this.upperLeg4Body.GetAngle() - this.pelvisBody.GetAngle();
                        c.lowerAngle = -150 / (180 / Math.PI) - p, c.upperAngle = 10 / (180 / Math.PI) - p, c.Initialize(this.pelvisBody, this.upperLeg4Body, h), this.hipJoint2 = this._session.m_world.CreateJoint(c), this.hipJoint2.broken = true, l = this.shapeGuide.sevLeg2Shape, this.upperLeg2Body.DestroyShape(this.upperLeg2Body.GetShapeList()), a.filter = this.zeroFilter, a.userData = 1, a.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, new s._m(0, l.y / this.character_scale), 0), this.upperLeg2Body.CreateShape(a), this.upperLeg2Body.SetMassFromShapes(), this.lowerLeg2Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerLeg2Body.GetShapeList()), 5 == this.upperLeg2MC.currentFrame ? this.upperLeg2MC.gotoAndStop(6) : this.upperLeg2MC.gotoAndStop(3), this.upperLeg4MC.gotoAndStop(2), t && (this.hip2BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg4Body, new s._m(0, 0), 90, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg4MC)), o.ij.instance.playAreaSoundInstance("LimbRip4", this.upperLeg2Body)), r = this.shapeGuide.sevLeg2Shape, this.thigh2BloodFlow = this._session.particleController.createBloodFlow(1, 3, this.upperLeg2Body, new s._m(0, 0), 270, 200, this._session.containerSprite, this._session.containerSprite.getChildIndex(this.upperLeg2MC)), this.addVocals("Hip2", 4);
                    }
                }, m.kneeBreak1 = function (e) {
                    this.kneeJoint1.broken = true, this._session.m_world.DestroyJoint(this.kneeJoint1);
                    var t = this.lowerLeg1Body.GetShapeList();
                    switch (t.SetFilterData(this.zeroFilter), t.m_isSensor = false, this._session.m_world.Refilter(t), 3 == this.lowerLeg1MC.currentFrame ? this.lowerLeg1MC.gotoAndStop(4) : this.lowerLeg1MC.gotoAndStop(2), this.upperLeg1MC.currentFrame) {
                        case 3:
                            this.upperLeg1MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperLeg1MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperLeg1MC.gotoAndStop(5);
                    }
                    var i = this.shapeGuide.lowerLeg1Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerLeg1Body, 50, new s._m(0, i.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.kneeLigamentLimit && (this.kneeLigament1 = new E(this.upperLeg1Body, this.lowerLeg1Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.kneeLigament1));
                    var r = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + r, this.upperLeg1Body), this.addVocals("Knee1", 2);
                }, m.kneeBreak2 = function (e) {
                    this.kneeJoint2.broken = true, this._session.m_world.DestroyJoint(this.kneeJoint2);
                    var t = this.lowerLeg2Body.GetShapeList();
                    switch (t.SetFilterData(this.zeroFilter), t.m_isSensor = false, this._session.m_world.Refilter(t), 3 == this.lowerLeg2MC.currentFrame ? this.lowerLeg2MC.gotoAndStop(4) : this.lowerLeg2MC.gotoAndStop(2), this.upperLeg2MC.currentFrame) {
                        case 3:
                            this.upperLeg2MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperLeg2MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperLeg2MC.gotoAndStop(5);
                    }
                    var i = this.shapeGuide.lowerLeg2Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerLeg2Body, 50, new s._m(0, i.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.kneeLigamentLimit && (this.kneeLigament2 = new E(this.upperLeg2Body, this.lowerLeg2Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.kneeLigament2));
                    var r = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + r, this.upperLeg2Body), this.addVocals("Knee2", 2);
                }, m.supermanPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 2.6, 2), this.setJoint(this.hipJoint2, 2.6, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 0, 20), this.setJoint(this.shoulderJoint2, 0, 20), this.setJoint(this.elbowJoint1, 2.5, 15), this.setJoint(this.elbowJoint2, 2.5, 15);
                }, m.tuckPose = function () {
                    this.setJoint(this.neckJoint, .69, 2), this.setJoint(this.hipJoint1, 0, 2), this.setJoint(this.hipJoint2, 0, 2), this.setJoint(this.kneeJoint1, 2, 10), this.setJoint(this.kneeJoint2, 2, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, m.pushupPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 2.6, 2), this.setJoint(this.hipJoint2, 2.6, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 1.7, 20), this.setJoint(this.shoulderJoint2, 1.7, 20), this.setJoint(this.elbowJoint1, 2.5, 15), this.setJoint(this.elbowJoint2, 2.5, 15);
                }, m.archPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3, 2), this.setJoint(this.hipJoint2, 3, 2), this.setJoint(this.kneeJoint1, 2, 10), this.setJoint(this.kneeJoint2, 2, 10), this.setJoint(this.shoulderJoint1, 0, 20), this.setJoint(this.shoulderJoint2, 0, 20), this.setJoint(this.elbowJoint1, 1, 15), this.setJoint(this.elbowJoint2, 1, 15);
                }, m.leftWalkPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 2.8, 5), this.setJoint(this.hipJoint2, 1.75, 2.5), this.setJoint(this.kneeJoint1, .5, 10), this.setJoint(this.kneeJoint2, .2, 10), this.setJoint(this.shoulderJoint1, 2.5, 10), this.setJoint(this.shoulderJoint2, 4, 10), this.setJoint(this.elbowJoint1, 2, 15), this.setJoint(this.elbowJoint2, 2.5, 15);
                }, m.rightWalkPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 1.75, 2.5), this.setJoint(this.hipJoint2, 2.8, 5), this.setJoint(this.kneeJoint1, .2, 5), this.setJoint(this.kneeJoint2, .5, 5), this.setJoint(this.shoulderJoint1, 4, 10), this.setJoint(this.shoulderJoint2, 2.5, 10), this.setJoint(this.elbowJoint1, 2.5, 15), this.setJoint(this.elbowJoint2, 2, 15);
                }, m.armsForwardPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.shoulderJoint1, 1.5, 20), this.setJoint(this.shoulderJoint2, 1.5, 20), this.setJoint(this.elbowJoint1, 2, 15), this.setJoint(this.elbowJoint2, 2, 15);
                }, m.armsOverheadPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.shoulderJoint1, 0, 20), this.setJoint(this.shoulderJoint2, 0, 20), this.setJoint(this.elbowJoint1, 2.5, 15), this.setJoint(this.elbowJoint2, 2.5, 15);
                }, m.holdPositionPose = function () {
                    this.holdJoint(this.neckJoint), this.holdJoint(this.hipJoint1), this.holdJoint(this.hipJoint2), this.holdJoint(this.kneeJoint1), this.holdJoint(this.kneeJoint2), this.holdJoint(this.shoulderJoint1), this.holdJoint(this.shoulderJoint2), this.holdJoint(this.elbowJoint1), this.holdJoint(this.elbowJoint2);
                }, m.cancelPose = function () {
                    this.neckJoint && this.neckJoint.IsMotorEnabled() && this.neckJoint.EnableMotor(false), this.shoulderJoint1 && this.shoulderJoint1.IsMotorEnabled() && this.shoulderJoint1.EnableMotor(false), this.shoulderJoint2 && this.shoulderJoint2.IsMotorEnabled() && this.shoulderJoint2.EnableMotor(false), this.elbowJoint1 && this.elbowJoint1.IsMotorEnabled() && this.elbowJoint1.EnableMotor(false), this.elbowJoint2 && this.elbowJoint2.IsMotorEnabled() && this.elbowJoint2.EnableMotor(false), this.hipJoint1 && this.hipJoint1.IsMotorEnabled() && this.hipJoint1.EnableMotor(false), this.hipJoint2 && this.hipJoint2.IsMotorEnabled() && this.hipJoint2.EnableMotor(false), this.kneeJoint1 && this.kneeJoint1.IsMotorEnabled() && this.kneeJoint1.EnableMotor(false), this.kneeJoint2 && this.kneeJoint2.IsMotorEnabled() && this.kneeJoint2.EnableMotor(false);
                }, m.holdJoint = function (e) {
                    e.IsMotorEnabled() || e.EnableMotor(true), e.SetMotorSpeed(0);
                }, m.setJoint = function (e, t, i, s) {
                    void 0 === s && (s = 10), e.IsMotorEnabled() || e.EnableMotor(true);
                    var r = -1, o = e.m_lowerAngle + t, n = e.GetJointAngle() - o;
                    n < 0 && (r = 1, n = Math.abs(n));
                    var a = Math.min(i * Math.pow(n, 2), s) * r;
                    e.SetMotorSpeed(a);
                }, m.remoteEject = function () {
                    this.eject();
                }, m.eject = function () { }, m.userVehicleEject = function () {
                    this.userVehicle && (this.userVehicle.removeCharacter(this), this.userVehicle = null, this.vehicleArm1Joint && (this._session.m_world.DestroyJoint(this.vehicleArm1Joint), this.vehicleArm1Joint = null), this.vehicleArm2Joint && (this._session.m_world.DestroyJoint(this.vehicleArm2Joint), this.vehicleArm2Joint = null), this.releaseGrip(), this.currentPose = 0);
                }, m.startGrab = function () {
                    this._session.version >= 1.11 ? this.grabbing || (this.grabbing = true, this.shoulderJoint1.broken || this.elbowJoint1.broken || this._session.contactListener.registerListener(r.$S.RESULT, this.lowerArm1Shape, this.contactResultHandler), this.shoulderJoint2.broken || this.elbowJoint2.broken || this._session.contactListener.registerListener(r.$S.RESULT, this.lowerArm2Shape, this.contactResultHandler)) : this.grabbing ? this.endGrab() : (this.grabbing = true, this.shoulderJoint1.broken || this.elbowJoint1.broken || (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.registerListener(r.$S.RESULT, this.lowerArm1Shape, this.contactResultHandler)), this.shoulderJoint2.broken || this.elbowJoint2.broken || (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.registerListener(r.$S.RESULT, this.lowerArm2Shape, this.contactResultHandler)));
                }, m.endGrab = function () {
                    this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape);
                }, m.grabAction = function (e, t, i) {
                    var o = e.GetShapeList(), n = e.GetWorldPoint(new s._m(0, o.GetVertices()[2].y)), a = new s.tu;
                    if (i.IsStatic() || (a.enableLimit = true), a.maxMotorTorque = 4, a.Initialize(i, e, n), e == this.lowerArm1Body) if (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), t.GetUserData() instanceof h.xJ) {
                        var l = t.GetUserData();
                        if (this.userVehicle && l != this.userVehicle) this.gripJoint1 = this._session.m_world.CreateJoint(a); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm1Joint = this._session.m_world.CreateJoint(a), this.currentPose = 0, this.userVehicle.characterPose) {
                            case 0:
                                break;
                            case 1:
                                this.currentPose = 10;
                                break;
                            case 2:
                                this.currentPose = 11;
                                break;
                            case 3:
                                this.currentPose = 12;
                        }
                    } else this.gripJoint1 = this._session.m_world.CreateJoint(a);
                    if (e == this.lowerArm2Body) if (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), t.GetUserData() instanceof h.xJ) if (l = t.GetUserData(), this.userVehicle && l != this.userVehicle) this.gripJoint2 = this._session.m_world.CreateJoint(a); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm2Joint = this._session.m_world.CreateJoint(a), this.currentPose = 0, this.userVehicle.characterPose) {
                        case 0:
                            break;
                        case 1:
                            this.currentPose = 10;
                            break;
                        case 2:
                            this.currentPose = 11;
                            break;
                        case 3:
                            this.currentPose = 12;
                    } else this.gripJoint2 = this._session.m_world.CreateJoint(a);
                }, m.releaseGrip = function () {
                    this.grabbing && (this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2), this.grabbing = false, this.endGrab(), this.gripJoint1 && (this._session.m_world.DestroyJoint(this.gripJoint1), this.gripJoint1 = null), this.gripJoint2 && (this._session.m_world.DestroyJoint(this.gripJoint2), this.gripJoint2 = null));
                }, m.addVocals = function (e, t) {
                    this.voiceArray[t] = e;
                }, m.randomVocals = function (e) {
                    return ["Elbow1", "Elbow2", "Knee1", "Knee2", "Shoulder1", "Shoulder2", "Hip1", "Hip2", "Knee1", "Spikes"][e];
                }, m.shapeImpale = function (e, t, i, r) {
                    if (void 0 === t && (t = true), void 0 === i && (i = null), void 0 === r && (r = 0), e == this.chestShape || e == this.pelvisShape) {
                        var o = e.GetBody().GetPosition().x.toString(), n = parseInt(o.charAt(o.length - 1));
                        this.addVocals(this.randomVocals(n), 5);
                    } else if (e == this.head1Shape) if (t) if (i) {
                        var a = e.GetBody().GetWorldCenter();
                        new s._m(i.x - a.x, i.y - a.y).LengthSquared() < r ? (this.eject(), this.dead = true) : (o = e.GetBody().GetPosition().x.toString(), n = parseInt(o.charAt(o.length - 1)), this.addVocals(this.randomVocals(n), 5));
                    } else this.eject(), this.dead = true; else o = e.GetBody().GetPosition().x.toString(), n = parseInt(o.charAt(o.length - 1)), this.addVocals(this.randomVocals(n), 5);
                }, m.grindShape = function (e) {
                    switch (e) {
                        case this.head1Shape:
                            this.head1Shape.SetUserData(d.GRIND_STATE), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape), this.session.contactListener.deleteListener(r.$S.RESULT, this.head1Shape), this.session.contactListener.deleteListener(r.$S.ADD, this.head1Shape), this.headBloodFlow && this.headBloodFlow.stopSpewing();
                            break;
                        case this.chestShape:
                            this.chestShape.SetUserData(d.GRIND_STATE), this.contactResultBuffer.delete(this.chestShape), this.contactAddBuffer.delete(this.chestShape), this.session.contactListener.deleteListener(r.$S.RESULT, this.chestShape), this.session.contactListener.deleteListener(r.$S.ADD, this.chestShape), this.neckBloodFlow && this.neckBloodFlow.stopSpewing(), this.shoulder1BloodFlow && this.shoulder1BloodFlow.stopSpewing(), this.shoulder2BloodFlow && this.shoulder2BloodFlow.stopSpewing(), this.stomachBloodFlow && this.stomachBloodFlow.stopSpewing();
                            break;
                        case this.pelvisShape:
                            this.pelvisShape.SetUserData(d.GRIND_STATE), this.contactResultBuffer.delete(this.pelvisShape), this.contactAddBuffer.delete(this.pelvisShape), this.session.contactListener.deleteListener(r.$S.RESULT, this.pelvisShape), this.session.contactListener.deleteListener(r.$S.ADD, this.pelvisShape), this.hip1BloodFlow && this.hip1BloodFlow.stopSpewing(), this.hip2BloodFlow && this.hip2BloodFlow.stopSpewing();
                            break;
                        case this.upperArm1Body.GetShapeList():
                            this.arm1BloodFlow && this.arm1BloodFlow.stopSpewing();
                            break;
                        case this.upperArm2Body.GetShapeList():
                            this.arm2BloodFlow && this.arm2BloodFlow.stopSpewing();
                            break;
                        case this.upperLeg1Body.GetShapeList():
                            this.thigh1BloodFlow && this.thigh1BloodFlow.stopSpewing();
                            break;
                        case this.upperLeg2Body.GetShapeList():
                            this.thigh2BloodFlow && this.thigh2BloodFlow.stopSpewing();
                    }
                }, m.removeBody = function (e) {
                    switch (e) {
                        case this.head1Body:
                            this.neckJoint.broken || this.neckBreak(0, true, true), this.spinalChord && this.spinalChord.spineBreak2(10);
                            break;
                        case this.chestBody:
                            this.neckJoint.broken || this.neckBreak(0, true, true), this.shoulderJoint1.broken || this.shoulderBreak1(0, true), this.shoulderJoint2.broken || this.shoulderBreak2(0, true), this.waistJoint.broken || this.torsoBreak(0), this.intestineChain && this.intestineChain.intestineBreak2(10), this.spinalChord && this.spinalChord.spineBreak1(10);
                            break;
                        case this.pelvisBody:
                            this.hipJoint1.broken || this.hipBreak1(0, true), this.hipJoint2.broken || this.hipBreak2(0, true), this.waistJoint.broken || this.torsoBreak(0), this.intestineChain && this.intestineChain.intestineBreak1(10);
                            break;
                        case this.upperArm1Body:
                            this.shoulderJoint1.broken || this.shoulderBreak1(0, true), this.elbowJoint1.broken || this.elbowBreak1(1e3), this.arm1BloodFlow && this.arm1BloodFlow.stopSpewing(), this.elbowLigament1 && this.elbowLigament1.remoteBreak();
                            break;
                        case this.upperArm2Body:
                            this.shoulderJoint2.broken || this.shoulderBreak2(0, true), this.elbowJoint2.broken || this.elbowBreak2(1e3), this.arm2BloodFlow && this.arm2BloodFlow.stopSpewing(), this.elbowLigament2 && this.elbowLigament2.remoteBreak();
                            break;
                        case this.upperLeg1Body:
                            this.hipJoint1.broken || this.hipBreak1(0, true), this.kneeJoint1.broken || this.kneeBreak1(1e3), this.thigh1BloodFlow && this.thigh1BloodFlow.stopSpewing(), this.kneeLigament1 && this.kneeLigament1.remoteBreak();
                            break;
                        case this.upperLeg2Body:
                            this.hipJoint2.broken || this.hipBreak2(0, true), this.kneeJoint2.broken || this.kneeBreak2(1e3), this.thigh2BloodFlow && this.thigh2BloodFlow.stopSpewing(), this.kneeLigament2 && this.kneeLigament2.remoteBreak();
                    }
                }, m.explodeShape = function (e, t) {
                    switch (e) {
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / d.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var r = this.pelvisBody.GetMass() / d.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * r, .7)) && this.pelvisSmash(0);
                    }
                }, p = d, (u = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e;
                    }
                }, {
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }, {
                    key: "currentPose", get: function () {
                        return this._currentPose;
                    }, set: function (e) {
                        e != this._currentPose && (this._currentPose = e, 0 == this._currentPose && this.cancelPose());
                    }
                }, {
                    key: "centralBody", get: function () {
                        return this.heartBody ? this.heartBody : this.chestBody;
                    }
                }, {
                    key: "startX", set: function (e) {
                        this._startX = e / this.m_physScale;
                    }
                }, {
                    key: "startY", set: function (e) {
                        this._startY = e / this.m_physScale;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(p.prototype, u), Object.defineProperty(p, "prototype", { writable: false }), d;
            }(a.pB);
            function p(e, t) {
                return (p = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            d.DEF_HEAD_MASS = .05456, d.DEF_CHEST_MASS = .17171, d.DEF_PELVIS_MASS = .0735, d.DEF_UPPERARM_MASS = .07019, d.DEF_LOWERARM_MASS = .07784, d.DEF_UPPERLEG_MASS = .14914, d.DEF_LOWERLEG_MASS = .10218, d.DEF_HEAD_SMASH = 3, d.DEF_CHEST_SMASH = 7.5, d.DEF_PELVIS_SMASH = 5.5, d.DEF_FOOT_SMASH = 4, d.oneEightyOverPI = 180 / Math.PI, d.BLEED_OUT_TOTAL = 150, d.GRIND_STATE = 1;
            var u = function (e) {
                var t, i;
                function n(t, i, r, o, n, a) {
                    var h;
                    return void 0 === n && (n = -1), void 0 === a && (a = "Char3"), (h = e.call(this, t, i, r, o, n, a) || this).wheelMaxSpeed = 20, h.wheelContacts = 0, h.backContacts = 0, h.frontContacts = 0, h.accelStep = 1, h.maxTorque = 20, h.impulseMagnitude = 3, h.impulseOffset = 1, h.maxSpinAV = 5, h.frameSmashLimit = 200, h.wheelSmashLimit = 200, h.contactFrameResultHandler = function (e) {
                        var t = e.impulse;
                        t > h.contactImpulseDict.get(h.frameShape1) && (h.contactResultBuffer.get(h.frameShape1) ? t > h.contactResultBuffer.get(h.frameShape1).impulse && h.contactResultBuffer.set(h.frameShape1, e) : h.contactResultBuffer.set(h.frameShape1, e));
                    }, h.handleContactResults = function () {
                        var t;
                        e.prototype.handleContactResults.call(function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(h)), h.contactResultBuffer.get(h.frameShape1) && (t = h.contactResultBuffer.get(h.frameShape1), h.frameSmash(t.impulse, t.normal), h.contactResultBuffer.delete(h.frameShape1), h.contactAddBuffer.delete(h.frameShape1), h.contactAddBuffer.delete(h.frameShape2), h.contactAddBuffer.delete(h.frameShape3)), h.contactResultBuffer.get(h.frontWheelShape) && (t = h.contactResultBuffer.get(h.frontWheelShape), h.frontWheelSmash(t.impulse, t.normal), h.contactResultBuffer.delete(h.frontWheelShape), h.contactAddBuffer.delete(h.frontWheelShape)), h.contactResultBuffer.get(h.backWheelShape) && (t = h.contactResultBuffer.get(h.backWheelShape), h.backWheelSmash(t.impulse, t.normal), h.contactResultBuffer.delete(h.backWheelShape), h.contactAddBuffer.delete(h.backWheelShape));
                    }, h.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            e.shape1 == h.frontWheelShape ? h.frontContacts += 1 : h.backContacts += 1, h.wheelContacts = h.frontContacts + h.backContacts;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(h.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && h.contactAddBuffer.set(t, "hit");
                            }
                        }
                    }, h.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (e.shape1 == h.frontWheelShape ? h.frontContacts -= 1 : h.backContacts -= 1, h.wheelContacts = h.frontContacts + h.backContacts);
                    }, h;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, p(t, i);
                var a, h, l = n.prototype;
                return l.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(r, -i), this.frameBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.leanBackPose();
                    }
                }, l.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(r, -i), this.frameBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y))), this.leanForwardPose();
                    }
                }, l.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, l.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, l.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, l.upAndDownActions = function () {
                    this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false)), this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, l.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true)), this.backWheelJoint.SetMotorSpeed(0), this.frontWheelJoint.SetMotorSpeed(0));
                }, l.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, l.zPressedActions = function () {
                    this.eject();
                }, l.actions = function () {
                    if (this.wheelContacts > 0) {
                        var t = Math.abs(this.backWheelBody.GetAngularVelocity());
                        t > 18 ? (this.wheelLoop3 || (this.wheelLoop3 = o.ij.instance.playAreaSoundLoop("BikeLoop3", this.backWheelBody, 0), this.wheelLoop3.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null)) : t > 9 ? (this.wheelLoop2 || (this.wheelLoop2 = o.ij.instance.playAreaSoundLoop("BikeLoop2", this.backWheelBody, 0), this.wheelLoop2.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : t > 1 ? (this.wheelLoop1 || (this.wheelLoop1 = o.ij.instance.playAreaSoundLoop("BikeLoop1", this.backWheelBody, 0), this.wheelLoop1.fadeIn(.2)), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : (this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null));
                    } else this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null);
                    e.prototype.actions.call(this);
                }, l.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                        case 6:
                        case 7:
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, l.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.wheelContacts = 0, this.frontContacts = 0, this.backContacts = 0;
                }, l.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.frontWheelBody.GetInterpolatedWorldCenter();
                    this.frontWheelMC.x = t.x * this.m_physScale, this.frontWheelMC.y = t.y * this.m_physScale, this.frontWheelMC.inner.rotation = this.frontWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360, t = this.backWheelBody.GetInterpolatedWorldCenter(), this.backWheelMC.x = t.x * this.m_physScale, this.backWheelMC.y = t.y * this.m_physScale, this.backWheelMC.inner.rotation = this.backWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360;
                }, l.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.frameShape1, this.frameSmashLimit), this.contactImpulseDict.set(this.frontWheelShape, this.wheelSmashLimit), this.contactImpulseDict.set(this.backWheelShape, this.wheelSmashLimit), this.contactAddSounds.set(this.backWheelShape, "TireHit1"), this.contactAddSounds.set(this.frontWheelShape, "TireHit2"), this.contactAddSounds.set(this.frameShape1, "BikeHit3"), this.contactAddSounds.set(this.frameShape2, "BikeHit2"), this.contactAddSounds.set(this.frameShape3, "BikeHit1");
                }, l.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, a = new s.Oi, h = new s.Vb, l = new s.lB;
                    h.density = 2, h.friction = .3, h.restitution = .1, h.filter.categoryBits = 513, l.density = 5, l.friction = 1, l.restitution = .3, l.filter.categoryBits = 513, this.frameBody = this._session.m_world.CreateBody(t), h.vertexCount = 3;
                    for (var c = 0; c < 3; c++) d = this.shapeGuide["seatVert" + [c + 1]], h.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    for (this.frameShape1 = this.frameBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape1, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frameShape1, this.contactAddHandler), h.filter = this.zeroFilter, h.vertexCount = 4, c = 0; c < 4; c++) {
                        var d = this.shapeGuide["frameVert" + [c + 1]];
                        h.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    }
                    for (this.frameShape2 = this.frameBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape2, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frameShape2, this.contactAddHandler), h.vertexCount = 3, c = 0; c < 3; c++) d = this.shapeGuide["forkVert" + [c + 1]], h.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    this.frameShape3 = this.frameBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape3, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frameShape3, this.contactAddHandler), this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody);
                    var p = this.shapeGuide.backWheelShape;
                    i.position.Set(this._startX + p.x / this.character_scale, this._startY + p.y / this.character_scale), i.angle = p.rotation / n.oneEightyOverPI, l.radius = p.width / 2 / this.character_scale, this.backWheelBody = this._session.m_world.CreateBody(i), this.backWheelShape = this.backWheelBody.CreateShape(l), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.backWheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.backWheelShape, this.wheelContactRemove), p = this.shapeGuide.frontWheelShape, o.position.Set(this._startX + p.x / this.character_scale, this._startY + p.y / this.character_scale), o.angle = p.rotation / n.oneEightyOverPI, l.radius = p.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(o), this.frontWheelShape = this.frontWheelBody.CreateShape(l), this.frontWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.frontWheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.frontWheelShape, this.wheelContactRemove), p = this.shapeGuide.gearShape, a.position.Set(this._startX + p.x / this.character_scale, this._startY + p.y / this.character_scale), a.angle = p.rotation / n.oneEightyOverPI, l.radius = p.width / 2 / this.character_scale, this.gearBody = this._session.m_world.CreateBody(a), this.gearBody.CreateShape(l), this.gearBody.SetMassFromShapes(), this.paintVector.push(this.gearBody);
                    var u = this.upperLeg1Body.GetShapeList();
                    u.m_isSensor = true, (u = this.upperLeg2Body.GetShapeList()).m_isSensor = true, (u = this.lowerLeg1Body.GetShapeList()).m_isSensor = true, (u = this.lowerLeg2Body.GetShapeList()).m_isSensor = true;
                }, l.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.backWheelMC = this.sourceObject.backWheel, this.backWheelMC.scaleX = this.backWheelMC.scaleY = 1 / this.mc_scale, this.frontWheelMC = this.sourceObject.frontWheel, this.frontWheelMC.scaleX = this.frontWheelMC.scaleY = 1 / this.mc_scale, this.gearMC = this.sourceObject.gear, this.gearMC.scaleX = this.gearMC.scaleY = 1 / this.mc_scale, this.forkMC = this.sourceObject.fork, this.forkMC.scaleX = this.forkMC.scaleY = 1 / this.mc_scale, this.brokenFrameMC = this.sourceObject.brokenFrame, this.brokenFrameMC.scaleX = this.brokenFrameMC.scaleY = 1 / this.mc_scale, this.seatMC = this.sourceObject.seat, this.seatMC.scaleX = this.seatMC.scaleY = 1 / this.mc_scale, this.frontWheelMC.gotoAndStop(1), this.backWheelMC.gotoAndStop(1), this.frontWheelMC.inner.broken.visible = false, this.backWheelMC.inner.broken.visible = false, this.forkMC.visible = false, this.brokenFrameMC.visible = false, this.seatMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this.gearBody.SetUserData(this.gearMC), this._session.containerSprite.addChildAt(this.backWheelMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frontWheelMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.gearMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenFrameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.seatMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.forkMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, l.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frontWheelMC.gotoAndStop(1), this.backWheelMC.gotoAndStop(1), this.frameMC.visible = true, this.frontWheelMC.inner.broken.visible = false, this.backWheelMC.inner.broken.visible = false, this.frontWheelMC.inner.spokes.visible = true, this.backWheelMC.inner.spokes.visible = true, this.forkMC.visible = false, this.brokenFrameMC.visible = false, this.seatMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this.gearBody.SetUserData(this.gearMC);
                }, l.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = n.oneEightyOverPI;
                    i = -110 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint1.SetLimits(i, r), i = -110 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint2.SetLimits(i, r), i = -60 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -60 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = -20 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 0 / o - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.tu;
                    a.maxMotorTorque = this.maxTorque;
                    var h = new s._m, l = this.shapeGuide.backWheelShape;
                    h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.backWheelBody, h), this.backWheelJoint = this._session.m_world.CreateJoint(a), l = this.shapeGuide.frontWheelShape, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.frontWheelBody, h), this.frontWheelJoint = this._session.m_world.CreateJoint(a), (new s.qO).Initialize(this.frameBody, this.pelvisBody, this.pelvisBody.GetPosition(), this.pelvisBody.GetPosition()), h.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), a.Initialize(this.frameBody, this.pelvisBody, h), this.framePelvis = this._session.m_world.CreateJoint(a), l = this.shapeGuide.handleAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.lowerArm1Body, h), this.frameHand1 = this._session.m_world.CreateJoint(a), a.Initialize(this.frameBody, this.lowerArm2Body, h), this.frameHand2 = this._session.m_world.CreateJoint(a), l = this.shapeGuide.gearShape, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.gearBody, h), this.frameGear = this._session.m_world.CreateJoint(a);
                    var c = new s.PO;
                    c.body1 = this.backWheelBody, c.body2 = this.gearBody, c.joint1 = this.backWheelJoint, c.joint2 = this.frameGear, this.gearJoint = this._session.m_world.CreateJoint(c), this.gearJoint.m_ratio *= -1, l = this.shapeGuide.gearAnchor1, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.gearBody, this.lowerLeg1Body, h), this.gearFoot1 = this._session.m_world.CreateJoint(a), l = this.shapeGuide.gearAnchor2, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.gearBody, this.lowerLeg2Body, h), this.gearFoot2 = this._session.m_world.CreateJoint(a);
                }, l.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this.session.m_world;
                        this.framePelvis && (e.DestroyJoint(this.framePelvis), this.framePelvis = null), this.frameHand1 && (e.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (e.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.gearFoot1 && (e.DestroyJoint(this.gearFoot1), this.gearFoot1 = null), this.gearFoot2 && (e.DestroyJoint(this.gearFoot2), this.gearFoot2 = null), this.frontWheelBody.GetShapeList().SetFilterData(this.zeroFilter), this.backWheelBody.GetShapeList().SetFilterData(this.zeroFilter), e.Refilter(this.frontWheelBody.GetShapeList()), e.Refilter(this.backWheelBody.GetShapeList());
                        for (var t = this.frameBody.GetShapeList(); t; t = t.m_next) t.SetFilterData(this.zeroFilter), e.Refilter(t);
                        (t = this.upperLeg1Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.upperLeg2Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.lowerLeg1Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.lowerLeg2Body.GetShapeList()).m_isSensor = false, e.Refilter(t);
                    }
                }, l.frameSmash = function (e, t) {
                    this.contactImpulseDict.delete(this.frameShape1);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.frameShape1), i.deleteListener(r.$S.RESULT, this.frameShape2), i.deleteListener(r.$S.RESULT, this.frameShape3), i.deleteListener(r.$S.ADD, this.frameShape1), i.deleteListener(r.$S.ADD, this.frameShape2), i.deleteListener(r.$S.ADD, this.frameShape3), i.deleteListener(r.$S.ADD, this.frontWheelShape), i.deleteListener(r.$S.REMOVE, this.frontWheelShape), i.deleteListener(r.$S.ADD, this.backWheelShape), i.deleteListener(r.$S.REMOVE, this.backWheelShape), this.eject(), this.frameMC.gotoAndStop(2), this.forkMC.visible = true, this.brokenFrameMC.visible = true, this.seatMC.visible = true, this.frameMC.visible = false, this._session.m_world.DestroyJoint(this.frontWheelJoint), this._session.m_world.DestroyJoint(this.backWheelJoint), this._session.version > 1.69 && this._session.m_world.DestroyJoint(this.gearJoint);
                    var n = new s.Oi, a = new s.Oi, h = new s.Oi, l = new s.Vb;
                    l.density = 2, l.friction = .3, l.restitution = .1, l.filter = this.zeroFilter, n.position = a.position = h.position = this.frameBody.GetPosition(), n.angle = a.angle = h.angle = this.frameBody.GetAngle();
                    var c, d = this._session.m_world.CreateBody(n), p = this._session.m_world.CreateBody(a), u = this._session.m_world.CreateBody(h);
                    l.vertexCount = 3;
                    for (var m = 0; m < 3; m++) c = this.shapeGuide["forkVert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (d.CreateShape(l), d.SetMassFromShapes(), d.SetLinearVelocity(this.frameBody.GetLinearVelocity()), d.SetAngularVelocity(this.frameBody.GetAngularVelocity()), d.m_userData = this.forkMC, this.paintVector.push(d), l.vertexCount = 4, m = 0; m < 4; m++) c = this.shapeGuide["brokenVert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    var f = p.CreateShape(l);
                    for (p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocity()), p.SetAngularVelocity(this.frameBody.GetAngularVelocity()), p.m_userData = this.brokenFrameMC, this.paintVector.push(p), l.vertexCount = 3, m = 0; m < 3; m++) c = this.shapeGuide["seatVert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    u.CreateShape(l), u.SetMassFromShapes(), u.SetLinearVelocity(this.frameBody.GetLinearVelocity()), u.SetAngularVelocity(this.frameBody.GetAngularVelocity()), u.m_userData = this.seatMC, this.paintVector.push(u), this._session.m_world.DestroyBody(this.frameBody), this._session.contactListener.registerListener(r.$S.ADD, f, this.contactAddHandler), this.contactAddSounds.set(f, "BikeHit2"), o.ij.instance.playAreaSoundInstance("BikeSmash1", p);
                }, l.frontWheelSmash = function (e, t) {
                    this.frontWheelMC.gotoAndStop(2), this.frontWheelMC.inner.spokes.visible = false, this.frontWheelMC.inner.broken.visible = true, this.contactImpulseDict.delete(this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.frontWheelShape);
                    var i = this.frontWheelBody.GetShapeList();
                    this.frontWheelBody.DestroyShape(i);
                    var a = new s.Vb;
                    a.density = 2, a.friction = .3, a.restitution = .1, this.ejected ? a.filter = this.zeroFilter : a.filter.categoryBits = 513;
                    var h = Math.atan2(t.y, t.x) - this.frontWheelBody.GetAngle();
                    this.frontWheelMC.inner.broken.rotation = h * n.oneEightyOverPI, a.SetAsOrientedBox(25 / this.character_scale, 50 / this.character_scale, new s._m(0, 0), h), this.frontWheelBody.CreateShape(a), o.ij.instance.playAreaSoundInstance("BikeTireSmash1", this.frontWheelBody);
                }, l.backWheelSmash = function (e, t) {
                    this.backWheelMC.gotoAndStop(2), this.backWheelMC.inner.spokes.visible = false, this.backWheelMC.inner.broken.visible = true, this.contactImpulseDict.delete(this.backWheelShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.backWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.backWheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.backWheelShape);
                    var i = this.backWheelBody.GetShapeList();
                    this.backWheelBody.DestroyShape(i);
                    var a = new s.Vb;
                    a.density = 2, a.friction = .3, a.restitution = .1, this.ejected ? a.filter = this.zeroFilter : a.filter.categoryBits = 513;
                    var h = Math.atan2(t.y, t.x) - this.backWheelBody.GetAngle();
                    this.backWheelMC.inner.broken.rotation = h * n.oneEightyOverPI, a.SetAsOrientedBox(25 / this.character_scale, 50 / this.character_scale, new s._m(0, 0), h), this.backWheelBody.CreateShape(a), o.ij.instance.playAreaSoundInstance("BikeTireSmash1", this.backWheelBody);
                }, l.checkEject = function () {
                    this.frameHand1 || this.frameHand2 || this.gearFoot1 || this.gearFoot2 || this.eject();
                }, l.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, l.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, l.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, l.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, l.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, l.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, l.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, l.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.gearFoot1 && (this._session.m_world.DestroyJoint(this.gearFoot1), this.gearFoot1 = null), this.checkEject());
                }, l.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.gearFoot2 && (this._session.m_world.DestroyJoint(this.gearFoot2), this.gearFoot2 = null), this.checkEject());
                }, l.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 2), this.setJoint(this.elbowJoint1, 1.04, 15), this.setJoint(this.elbowJoint2, 1.04, 15);
                }, l.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, 1, 1), this.setJoint(this.elbowJoint1, 0, 15), this.setJoint(this.elbowJoint2, 0, 15);
                }, a = n, (h = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function m(e, t) {
                return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var f = function (e) {
                var t, i;
                function o(t, i, s, r, o, n, a) {
                    var h;
                    return void 0 === o && (o = -2), void 0 === n && (n = "kid"), void 0 === a && (a = null), (h = e.call(this, t, i, s, r, o, n) || this).detachLimit = 200, h.detachSeat = function (e) {
                        if (h.frameSeatJoint.broken = true, h.detached = true, h._session.m_world.DestroyJoint(h.frameSeatJoint), h.ejected) for (t = h.seatBody.GetShapeList(); t; t = t.m_next) t.m_isSensor = false, h._session.m_world.Refilter(t); else {
                            h.refilterShit(h.head1Body.GetShapeList()), h.refilterShit(h.pelvisBody.GetShapeList()), h.refilterShit(h.chestBody.GetShapeList()), h.refilterShit(h.upperArm1Body.GetShapeList()), h.refilterShit(h.upperArm2Body.GetShapeList()), h.refilterShit(h.lowerArm1Body.GetShapeList()), h.refilterShit(h.lowerArm2Body.GetShapeList()), h.refilterShit(h.upperLeg1Body.GetShapeList()), h.refilterShit(h.upperLeg2Body.GetShapeList()), h.refilterShit(h.lowerLeg1Body.GetShapeList()), h.refilterShit(h.lowerLeg2Body.GetShapeList());
                            for (var t = h.seatBody.GetShapeList(); t; t = t.m_next) t.SetFilterData(h.extraFilter), t.m_isSensor = false, h._session.m_world.Refilter(t);
                        }
                    }, h.dad = a, h;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, m(t, i);
                var n, a, h = o.prototype;
                return h.leftPressedActions = function () {
                    this.ejected && (this.currentPose = 1);
                }, h.rightPressedActions = function () {
                    this.ejected && (this.currentPose = 2);
                }, h.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, h.upPressedActions = function () {
                    this.ejected && (this.currentPose = 3);
                }, h.downPressedActions = function () {
                    this.ejected && (this.currentPose = 4);
                }, h.upAndDownActions = function () {
                    this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, h.spacePressedActions = function () {
                    this.ejected && this.startGrab();
                }, h.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, h.zPressedActions = function () {
                    this.eject();
                }, h.ctrlPressedActions = function () {
                    this.eject();
                }, h.createFilters = function () {
                    this.defaultFilter = new s.fT, this.defaultFilter.groupIndex = this.groupID, this.defaultFilter.categoryBits = 260, this.defaultFilter.maskBits = 270, this.zeroFilter = new s.fT, this.zeroFilter.groupIndex = 0, this.zeroFilter.categoryBits = 260, this.lowerBodyFilter = new s.fT, this.lowerBodyFilter.categoryBits = 260, this.lowerBodyFilter.groupIndex = this.groupID - 5, this.extraFilter = new s.fT, this.extraFilter.groupIndex = this.groupID, this.extraFilter.categoryBits = 260;
                }, h.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.detached = false;
                }, h.die = function () {
                    e.prototype.die.call(this), this.seatBody = null;
                }, h.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactAddSounds.set(this.seatShape1, "BikeHit3");
                }, h.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Vb;
                    i.density = 1, i.friction = .3, i.restitution = .1, i.filter = this.defaultFilter, i.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["seat1Vert" + [o + 1]];
                        i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    }
                    for (this.seatBody = this._session.m_world.CreateBody(t), this.seatShape1 = this.seatBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.ADD, this.seatShape1, this.contactAddHandler), o = 0; o < 4; o++) n = this.shapeGuide["seat2Vert" + [o + 1]], i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    for (this.seatBody.CreateShape(i), o = 0; o < 4; o++) n = this.shapeGuide["seat3Vert" + [o + 1]], i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    i.isSensor = true, this.seatBody.CreateShape(i), this.seatBody.SetMassFromShapes(), this.paintVector.push(this.seatBody);
                }, h.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.seatMC = this.sourceObject.seat, this.seatMC.scaleX = this.seatMC.scaleY = 1 / this.mc_scale;
                    var t = this.seatBody.GetLocalCenter();
                    t = new s._m((this._startX - t.x) * this.character_scale, (this._startY - t.y) * this.character_scale);
                    var i = this.shapeGuide.seat3Vert3, r = new s._m(i.x + t.x, i.y + t.y);
                    this.seatMC.inner.x = r.x, this.seatMC.inner.y = r.y, this.seatBody.SetUserData(this.seatMC), this._session.containerSprite.addChildAt(this.seatMC, this._session.containerSprite.getChildIndex(this.upperArm1MC));
                }, h.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.seatBody.SetUserData(this.seatMC);
                }, h.createJoints = function () {
                    e.prototype.createJoints.call(this);
                    var t = new s.tu, i = new s._m, r = this._session.character, o = this.shapeGuide.frameSeatAnchor;
                    t.enableLimit = true, t.lowerAngle = 0, t.upperAngle = 0, i.Set(this._startX + o.x / this.character_scale, this._startY + o.y / this.character_scale), t.Initialize(r.frameBody, this.seatBody, i), this.frameSeatJoint = this._session.m_world.CreateJoint(t), t.enableLimit = false, i.Set(this.chestBody.GetPosition().x, this.chestBody.GetPosition().y), t.Initialize(this.seatBody, this.chestBody, i), this.seatChest = this._session.m_world.CreateJoint(t), i.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), t.Initialize(this.seatBody, this.pelvisBody, i), this.seatPelvis = this._session.m_world.CreateJoint(t), i.Set(this.upperLeg1Body.GetPosition().x, this.upperLeg1Body.GetPosition().y), t.Initialize(this.seatBody, this.upperLeg1Body, i), this.seatLeg1 = this._session.m_world.CreateJoint(t), i.Set(this.upperLeg2Body.GetPosition().x, this.upperLeg2Body.GetPosition().y), t.Initialize(this.seatBody, this.upperLeg2Body, i), this.seatLeg2 = this._session.m_world.CreateJoint(t);
                }, h.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.checkRevJoint(this.frameSeatJoint, this.detachLimit, this.detachSeat);
                }, h.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits(), this._session.m_world.DestroyJoint(this.seatPelvis), this.seatPelvis = null, this._session.m_world.DestroyJoint(this.seatChest), this.seatChest = null, this.seatLeg1 && (this._session.m_world.DestroyJoint(this.seatLeg1), this.seatLeg1 = null), this.seatLeg2 && (this._session.m_world.DestroyJoint(this.seatLeg2), this.seatLeg2 = null);
                        var e = this._session.m_world;
                        this.detached || (this.refilterShit(this.head1Body.GetShapeList()), this.refilterShit(this.pelvisBody.GetShapeList()), this.refilterShit(this.chestBody.GetShapeList()), this.refilterShit(this.upperArm1Body.GetShapeList()), this.refilterShit(this.upperArm2Body.GetShapeList()), this.refilterShit(this.lowerArm1Body.GetShapeList()), this.refilterShit(this.lowerArm2Body.GetShapeList()), this.refilterShit(this.upperLeg1Body.GetShapeList()), this.refilterShit(this.upperLeg2Body.GetShapeList()), this.refilterShit(this.lowerLeg1Body.GetShapeList()), this.refilterShit(this.lowerLeg2Body.GetShapeList()));
                        for (var t = this.seatBody.GetShapeList(); t; t = t.m_next) t.SetFilterData(this.zeroFilter), e.Refilter(t);
                    }
                }, h.refilterShit = function (e) {
                    e.m_filter.maskBits == this.defaultFilter.maskBits && (e.m_filter = this.extraFilter, this._session.m_world.Refilter(e));
                }, h.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, h.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, h.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, h.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.seatLeg1 && (this._session.m_world.DestroyJoint(this.seatLeg1), this.seatLeg1 = null);
                }, h.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.seatLeg2 && (this._session.m_world.DestroyJoint(this.seatLeg2), this.seatLeg2 = null);
                }, n = o, (a = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null), this.dad.mourn()));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(d);
            function y(e, t) {
                return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var v = function (e) {
                var t, i;
                function n(t, i, s, r, n, a, h) {
                    var l;
                    return void 0 === n && (n = -2), void 0 === a && (a = "kid"), void 0 === h && (h = null), (l = e.call(this, t, i, s, r, n, a) || this).detachLimit = 400, l.maxTorque = 20, l.frameSmashLimit = 50, l.wheelMaxSpeed = 27.7, l.accelStep = 1.385, l.contactFrameResultHandler = function (e) {
                        var t = e.impulse;
                        t > l.contactImpulseDict.get(l.frameShape) && (l.contactResultBuffer.get(l.frameShape) ? t > l.contactResultBuffer.get(l.frameShape).impulse && l.contactResultBuffer.set(l.frameShape, e) : l.contactResultBuffer.set(l.frameShape, e));
                    }, l.detachFrame = function (e) {
                        l.detached || (l.connectingJoint.broken = true, l.detached = true, l._session.m_world.DestroyJoint(l.connectingJoint), l.refilterShit(l.head1Body.GetShapeList()), l.refilterShit(l.pelvisBody.GetShapeList()), l.refilterShit(l.chestBody.GetShapeList()), l.refilterShit(l.upperArm1Body.GetShapeList()), l.refilterShit(l.upperArm2Body.GetShapeList()), l.refilterShit(l.lowerArm1Body.GetShapeList()), l.refilterShit(l.lowerArm2Body.GetShapeList()), l.endShape.m_isSensor = false, l._session.m_world.Refilter(l.endShape), o.ij.instance.playAreaSoundInstance("StrapSnap1", l.frameBody));
                    }, l.shapeRefScale = 50, l.mom = h, l;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, y(t, i);
                var a, h, l = n.prototype;
                return l.leftPressedActions = function () {
                    this.ejected && (this.currentPose = 1);
                }, l.rightPressedActions = function () {
                    this.ejected && (this.currentPose = 2);
                }, l.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, l.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.wheelJoint.IsMotorEnabled() || this.wheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.wheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.wheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, l.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.wheelJoint.IsMotorEnabled() || this.wheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.wheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.wheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, l.upAndDownActions = function () {
                    this.wheelJoint.IsMotorEnabled() && this.wheelJoint.EnableMotor(false), this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, l.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : (this.wheelJoint.IsMotorEnabled() || this.wheelJoint.EnableMotor(true), this.wheelJoint.SetMotorSpeed(0));
                }, l.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, l.zPressedActions = function () {
                    this.eject();
                }, l.ctrlPressedActions = function () {
                    this.eject();
                }, l.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.wheelBody.GetInterpolatedWorldCenter();
                    this.wheelMC.x = t.x * this.m_physScale, this.wheelMC.y = t.y * this.m_physScale, this.wheelMC.inner.rotation = this.wheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360;
                }, l.createFilters = function () {
                    e.prototype.createFilters.call(this), this.extraFilter = new s.fT, this.extraFilter.groupIndex = this.groupID, this.extraFilter.categoryBits = 260;
                }, l.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.detached = false;
                }, l.die = function () {
                    e.prototype.die.call(this);
                }, l.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.frameShape, this.frameSmashLimit), this.contactAddSounds.set(this.wheelShape, "TireHit1"), this.contactAddSounds.set(this.frameShape, "BikeHit3"), this.contactAddSounds.set(this.midShape, "BikeHit2"), this.contactAddSounds.set(this.handleShape, "BikeHit1");
                }, l.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, a = new s.Vb, h = new s.lB;
                    a.density = 2, a.friction = .3, a.restitution = .1, a.filter.categoryBits = 513, h.density = 5, h.friction = 1, h.restitution = .3, h.filter.categoryBits = 513, this.frameBody = this._session.m_world.CreateBody(t), a.vertexCount = 3;
                    for (var l = 0; l < 3; l++) c = this.shapeGuide["seatVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.seatShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.seatShape, this.contactFrameResultHandler), a.filter = this.zeroFilter, l = 0; l < 3; l++) {
                        var c = this.shapeGuide["frameVert" + [l + 1]];
                        a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    }
                    for (this.frameShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frameShape, this.contactAddHandler), l = 0; l < 3; l++) c = this.shapeGuide["handleVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.handleShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.handleShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.handleShape, this.contactAddHandler), a.vertexCount = 4, l = 0; l < 4; l++) c = this.shapeGuide["midVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.midShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.midShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.midShape, this.contactAddHandler), l = 0; l < 4; l++) c = this.shapeGuide["endVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    this.endShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.endShape, this.contactFrameResultHandler), this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody);
                    var d = this.shapeGuide.wheelShape;
                    i.position.Set(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale), i.angle = d.rotation / n.oneEightyOverPI, h.radius = d.width / 2 / this.character_scale, this.wheelBody = this._session.m_world.CreateBody(i), this.wheelShape = this.wheelBody.CreateShape(h), this.wheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.wheelShape, this.contactAddHandler), d = this.shapeGuide.gearShape, o.position.Set(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale), o.angle = d.rotation / n.oneEightyOverPI, h.radius = d.width / 2 / this.character_scale, this.gearBody = this._session.m_world.CreateBody(o), this.gearBody.CreateShape(h), this.gearBody.SetMassFromShapes(), this.paintVector.push(this.gearBody);
                    var p = this.upperLeg1Body.GetShapeList();
                    p.m_isSensor = true, (p = this.upperLeg2Body.GetShapeList()).m_isSensor = true, (p = this.lowerLeg1Body.GetShapeList()).m_isSensor = true, (p = this.lowerLeg2Body.GetShapeList()).m_isSensor = true, this.endShape.m_isSensor = true;
                }, l.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.gearMC = this.sourceObject.gear, this.gearMC.scaleX = this.gearMC.scaleY = 1 / this.mc_scale, this.wheelMC = this.sourceObject.wheel, this.wheelMC.scaleX = this.wheelMC.scaleY = 1 / this.mc_scale, this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.forkMC = this.sourceObject.fork, this.forkMC.scaleX = this.forkMC.scaleY = 1 / this.mc_scale, this.brokenFrameMC = this.sourceObject.brokenFrame, this.brokenFrameMC.scaleX = this.brokenFrameMC.scaleY = 1 / this.mc_scale, this.seatMC = this.sourceObject.seat, this.seatMC.scaleX = this.seatMC.scaleY = 1 / this.mc_scale;
                    var t = this.frameBody.GetLocalCenter();
                    t = new s._m((this._startX - t.x) * this.character_scale, (this._startY - t.y) * this.character_scale);
                    var i = this.shapeGuide.frameVert1, r = new s._m(i.x + t.x, i.y + t.y);
                    this.frameMC.inner.x = r.x, this.frameMC.inner.y = r.y, this.forkMC.visible = false, this.brokenFrameMC.visible = false, this.seatMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.gearBody.SetUserData(this.gearMC), this.wheelBody.SetUserData(this.wheelMC), this._session.containerSprite.addChildAt(this.wheelMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.gearMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenFrameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.seatMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.forkMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, l.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frameMC.visible = true, this.forkMC.visible = false, this.brokenFrameMC.visible = false, this.seatMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.gearBody.SetUserData(this.gearMC), this.wheelBody.SetUserData(this.wheelMC);
                }, l.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = n.oneEightyOverPI;
                    i = 10 / o - (t = this.lowerLeg1Body.GetAngle() - this.upperLeg1Body.GetAngle()), r = 150 / o - t, i = 10 / o - (t = this.lowerLeg2Body.GetAngle() - this.upperLeg2Body.GetAngle()), r = 150 / o - t, i = -110 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint1.SetLimits(i, r), i = -110 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint2.SetLimits(i, r), i = -60 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -60 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = -20 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 0 / o - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.tu;
                    a.maxMotorTorque = this.maxTorque;
                    var h = new s._m, l = this.shapeGuide.wheelShape;
                    h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.wheelBody, h), this.wheelJoint = this._session.m_world.CreateJoint(a), h.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), a.Initialize(this.frameBody, this.pelvisBody, h), this.framePelvis = this._session.m_world.CreateJoint(a), l = this.shapeGuide.handleAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.lowerArm1Body, h), this.frameHand1 = this._session.m_world.CreateJoint(a), a.Initialize(this.frameBody, this.lowerArm2Body, h), this.frameHand2 = this._session.m_world.CreateJoint(a), l = this.shapeGuide.gearShape, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.gearBody, h), this.frameGear = this._session.m_world.CreateJoint(a);
                    var c = new s.PO;
                    c.body1 = this.wheelBody, c.body2 = this.gearBody, c.joint1 = this.wheelJoint, c.joint2 = this.frameGear, this.gearJoint = this._session.m_world.CreateJoint(c), this.gearJoint.m_ratio *= -1, l = this.shapeGuide.gearAnchor1, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.gearBody, this.lowerLeg1Body, h), this.gearFoot1 = this._session.m_world.CreateJoint(a), l = this.shapeGuide.gearAnchor2, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.gearBody, this.lowerLeg2Body, h), this.gearFoot2 = this._session.m_world.CreateJoint(a), l = this.shapeGuide.connectAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.mom.frameBody, this.frameBody, h), a.enableLimit = true, a.lowerAngle = -35 / o, a.upperAngle = 35 / o, this.connectingJoint = this._session.m_world.CreateJoint(a);
                }, l.handleContactResults = function () {
                    var t;
                    e.prototype.handleContactResults.call(this), this.contactResultBuffer.get(this.frameShape) && (t = this.contactResultBuffer.get(this.frameShape), this.frameSmash(t.impulse, t.normal), this.contactResultBuffer.delete(this.frameShape), this.contactAddBuffer.delete(this.frameShape), this.contactAddBuffer.delete(this.midShape), this.contactAddBuffer.delete(this.handleShape)), this.contactResultBuffer.get(this.wheelShape) && (t = this.contactResultBuffer.get(this.wheelShape), this.contactResultBuffer.delete(this.wheelShape), this.contactAddBuffer.delete(this.wheelShape));
                }, l.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.detached || this.checkRevJoint(this.connectingJoint, this.detachLimit, this.detachFrame);
                }, l.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this.session.m_world;
                        this.framePelvis && (e.DestroyJoint(this.framePelvis), this.framePelvis = null), this.frameHand1 && (e.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (e.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.gearFoot1 && (e.DestroyJoint(this.gearFoot1), this.gearFoot1 = null), this.gearFoot2 && (e.DestroyJoint(this.gearFoot2), this.gearFoot2 = null), this.wheelShape.SetFilterData(this.zeroFilter), e.Refilter(this.wheelShape), this.seatShape.SetFilterData(this.zeroFilter), e.Refilter(this.seatShape), this.frameShape.SetFilterData(this.zeroFilter), e.Refilter(this.frameShape), this.midShape.SetFilterData(this.zeroFilter), e.Refilter(this.midShape), this.handleShape.SetFilterData(this.zeroFilter), e.Refilter(this.handleShape), this.refilterShit(this.head1Body.GetShapeList()), this.refilterShit(this.pelvisBody.GetShapeList()), this.refilterShit(this.chestBody.GetShapeList()), this.refilterShit(this.upperArm1Body.GetShapeList()), this.refilterShit(this.upperArm2Body.GetShapeList()), this.refilterShit(this.lowerArm1Body.GetShapeList()), this.refilterShit(this.lowerArm2Body.GetShapeList()), this.refilterShit(this.upperLeg1Body.GetShapeList()), this.refilterShit(this.upperLeg2Body.GetShapeList()), this.refilterShit(this.lowerLeg1Body.GetShapeList()), this.refilterShit(this.lowerLeg2Body.GetShapeList()), this.wheelJoint.EnableMotor(false);
                    }
                }, l.refilterShit = function (e) {
                    e.m_isSensor = false, e.m_filter.maskBits == this.defaultFilter.maskBits && (e.m_filter = this.extraFilter), this._session.m_world.Refilter(e);
                }, l.checkEject = function () {
                    this.frameHand1 || this.frameHand2 || this.gearFoot1 || this.gearFoot2 || this.eject();
                }, l.frameSmash = function (e, t) {
                    this.contactImpulseDict.delete(this.frameShape);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.frameShape), i.deleteListener(r.$S.RESULT, this.midShape), i.deleteListener(r.$S.RESULT, this.handleShape), i.deleteListener(r.$S.RESULT, this.seatShape), i.deleteListener(r.$S.RESULT, this.endShape), i.deleteListener(r.$S.ADD, this.frameShape), i.deleteListener(r.$S.ADD, this.midShape), i.deleteListener(r.$S.ADD, this.handleShape), i.deleteListener(r.$S.ADD, this.wheelShape), i.deleteListener(r.$S.REMOVE, this.wheelShape), this.eject(), this.detached = true, this.forkMC.visible = true, this.brokenFrameMC.visible = true, this.seatMC.visible = true, this.frameMC.visible = false, this._session.m_world.DestroyJoint(this.wheelJoint), this._session.m_world.DestroyJoint(this.gearJoint);
                    var n = new s.Oi, a = new s.Oi, h = new s.Oi, l = new s.Vb;
                    l.density = 2, l.friction = .3, l.restitution = .1, l.filter = this.zeroFilter, n.position = a.position = h.position = this.frameBody.GetPosition(), n.angle = a.angle = h.angle = this.frameBody.GetAngle();
                    var c, d = this._session.m_world.CreateBody(n), p = this._session.m_world.CreateBody(a), u = this._session.m_world.CreateBody(h);
                    l.vertexCount = 3;
                    for (var m = 0; m < 3; m++) c = this.shapeGuide["broken2Vert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (d.CreateShape(l), d.SetMassFromShapes(), d.SetLinearVelocity(this.frameBody.GetLinearVelocity()), d.SetAngularVelocity(this.frameBody.GetAngularVelocity()), d.m_userData = this.forkMC, this.paintVector.push(d), l.vertexCount = 4, m = 0; m < 4; m++) c = this.shapeGuide["brokenVert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    var f = p.CreateShape(l);
                    for (p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocity()), p.SetAngularVelocity(this.frameBody.GetAngularVelocity()), p.m_userData = this.brokenFrameMC, this.paintVector.push(p), l.vertexCount = 3, m = 0; m < 3; m++) c = this.shapeGuide["seatVert" + [m + 1]], l.vertices[m] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    u.CreateShape(l), u.SetMassFromShapes(), u.SetLinearVelocity(this.frameBody.GetLinearVelocity()), u.SetAngularVelocity(this.frameBody.GetAngularVelocity()), u.m_userData = this.seatMC, this.paintVector.push(u), this._session.m_world.DestroyBody(this.frameBody), this._session.contactListener.registerListener(r.$S.ADD, f, this.contactAddHandler), this.contactAddSounds.set(f, "BikeHit2"), o.ij.instance.playAreaSoundInstance("BikeSmash1", p);
                }, l.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, l.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, l.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, l.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, l.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, l.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, l.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, l.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, l.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.gearFoot1 && (this._session.m_world.DestroyJoint(this.gearFoot1), this.gearFoot1 = null, null == this.gearFoot2 && (this._session.m_world.DestroyJoint(this.framePelvis), this.framePelvis = null)), this.checkEject());
                }, l.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.gearFoot2 && (this._session.m_world.DestroyJoint(this.gearFoot2), this.gearFoot2 = null, null == this.gearFoot1 && (this._session.m_world.DestroyJoint(this.framePelvis), this.framePelvis = null)), this.checkEject());
                }, l.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.kneeJoint1.broken || this.refilterShit(this.lowerLeg1Shape), this.gearFoot1 && (this._session.m_world.DestroyJoint(this.gearFoot1), this.gearFoot1 = null, null == this.gearFoot2 && (this._session.m_world.DestroyJoint(this.framePelvis), this.framePelvis = null)), this.checkEject());
                }, l.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.kneeJoint2.broken || this.refilterShit(this.lowerLeg2Shape), this.gearFoot2 && (this._session.m_world.DestroyJoint(this.gearFoot2), this.gearFoot2 = null, null == this.gearFoot1 && (this._session.m_world.DestroyJoint(this.framePelvis), this.framePelvis = null)), this.checkEject());
                }, a = n, (h = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null)));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function g(e, t) {
                return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var S = function (e) {
                var t, i;
                function n(t, i, o, n, a, h, l) {
                    var c;
                    return void 0 === a && (a = -3), void 0 === h && (h = "kid"), void 0 === l && (l = null), (c = e.call(this, t, i, o, n, a, h) || this).ejectImpulse = .75, c.detachLimit = 100, c.basketSmashLimit = 3, c.wheelMaxSpeed = 27.7, c.accelStep = 1.385, c.contactBasketResultHandler = function (e) {
                        var t = e.impulse;
                        t > c.contactImpulseDict.get(c.basketShape1) && (c.contactResultBuffer.get(c.basketShape1) ? t > c.contactResultBuffer.get(c.basketShape1).impulse && c.contactResultBuffer.set(c.basketShape1, e) : c.contactResultBuffer.set(c.basketShape1, e));
                    }, c.detachBasket = function (e) {
                        if (!c.detached) {
                            c.connectingJoint.broken = true, c.detached = true, c._session.m_world.DestroyJoint(c.connectingJoint), c.basketBody.DestroyShape(c.basketShape1), c.basketBody.DestroyShape(c.basketShape2), c.basketBody.DestroyShape(c.basketShape3);
                            var t = c._session.contactListener;
                            t.deleteListener(r.$S.RESULT, c.basketShape1), t.deleteListener(r.$S.RESULT, c.basketShape2), t.deleteListener(r.$S.RESULT, c.basketShape3), t.deleteListener(r.$S.ADD, c.basketShape1), t.deleteListener(r.$S.ADD, c.basketShape2), t.deleteListener(r.$S.ADD, c.basketShape3), c.ejected || (c.refilterShit(c.head1Body.GetShapeList()), c.refilterShit(c.pelvisBody.GetShapeList()), c.refilterShit(c.chestBody.GetShapeList()), c.refilterShit(c.upperArm1Body.GetShapeList()), c.refilterShit(c.upperArm2Body.GetShapeList()), c.refilterShit(c.lowerArm1Body.GetShapeList()), c.refilterShit(c.lowerArm2Body.GetShapeList()), c.refilterShit(c.upperLeg1Body.GetShapeList()), c.refilterShit(c.upperLeg2Body.GetShapeList()), c.refilterShit(c.lowerLeg1Body.GetShapeList()), c.refilterShit(c.lowerLeg2Body.GetShapeList()));
                            var i = new s.Vb;
                            i.density = 1, i.friction = .3, i.restitution = .1, i.filter = c.zeroFilter, i.vertexCount = 4;
                            for (var o = 0; o < 4; o++) n = c.shapeGuide["crate2Right" + [o + 1]], i.vertices[o] = new s._m(c._startX + n.x / c.character_scale, c._startY + n.y / c.character_scale);
                            for (c.basketShape4 = c.basketBody.CreateShape(i), t.registerListener(r.$S.RESULT, c.basketShape4, c.contactBasketResultHandler), t.registerListener(r.$S.ADD, c.basketShape4, c.contactAddHandler), o = 0; o < 4; o++) {
                                var n = c.shapeGuide["crate2Bottom" + [o + 1]];
                                i.vertices[o] = new s._m(c._startX + n.x / c.character_scale, c._startY + n.y / c.character_scale);
                            }
                            for (c.basketShape5 = c.basketBody.CreateShape(i), t.registerListener(r.$S.RESULT, c.basketShape5, c.contactBasketResultHandler), t.registerListener(r.$S.ADD, c.basketShape5, c.contactAddHandler), o = 0; o < 4; o++) n = c.shapeGuide["crate2Left" + [o + 1]], i.vertices[o] = new s._m(c._startX + n.x / c.character_scale, c._startY + n.y / c.character_scale);
                            c.basketShape6 = c.basketBody.CreateShape(i), t.registerListener(r.$S.RESULT, c.basketShape6, c.contactBasketResultHandler), t.registerListener(r.$S.ADD, c.basketShape6, c.contactAddHandler), c.contactAddSounds.set(c.basketShape4, "BasketHit"), c.contactAddSounds.set(c.basketShape5, "BasketHit"), c.contactAddSounds.set(c.basketShape6, "BasketHit"), c.basketBody.SetMassFromShapes();
                            var a = c.basketBody.GetLocalCenter();
                            a = new s._m((c._startX - a.x) * c.character_scale, (c._startY - a.y) * c.character_scale);
                            var h = c.shapeGuide.crateLeft1, l = new s._m(h.x + a.x, h.y + a.y);
                            c.basketMC.inner.x = l.x, c.basketMC.inner.y = l.y, c.basketMC.inner.frame.visible = false;
                        }
                    }, c.shapeRefScale = 50, c.mom = l, c;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, g(t, i);
                var a, h, l = n.prototype;
                return l.leftPressedActions = function () {
                    this.ejected && (this.currentPose = 1);
                }, l.rightPressedActions = function () {
                    this.ejected && (this.currentPose = 2);
                }, l.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, l.upPressedActions = function () {
                    this.ejected && (this.currentPose = 3);
                }, l.downPressedActions = function () {
                    this.ejected && (this.currentPose = 4);
                }, l.upAndDownActions = function () {
                    this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, l.spacePressedActions = function () {
                    this.ejected && this.startGrab();
                }, l.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, l.zPressedActions = function () {
                    this.eject();
                }, l.shiftPressedActions = function () {
                    this.eject();
                }, l.createFilters = function () {
                    e.prototype.createFilters.call(this), this.extraFilter = new s.fT, this.extraFilter.groupIndex = this.groupID, this.extraFilter.categoryBits = 260;
                }, l.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.detached = false;
                }, l.die = function () {
                    e.prototype.die.call(this);
                }, l.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.basketShape1, this.basketSmashLimit), this.contactAddSounds.set(this.basketShape1, "BasketHit"), this.contactAddSounds.set(this.basketShape2, "BasketHit"), this.contactAddSounds.set(this.basketShape3, "BasketHit");
                }, l.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Vb;
                    i.density = 1, i.friction = .3, i.restitution = .1, i.filter = this.mom.defaultFilter, this.basketBody = this._session.m_world.CreateBody(t), i.vertexCount = 4;
                    for (var o = 0; o < 4; o++) n = this.shapeGuide["crateRight" + [o + 1]], i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    for (this.basketShape1 = this.basketBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.basketShape1, this.contactBasketResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.basketShape1, this.contactAddHandler), o = 0; o < 4; o++) {
                        var n = this.shapeGuide["crateBottom" + [o + 1]];
                        i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    }
                    for (this.basketShape2 = this.basketBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.basketShape2, this.contactBasketResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.basketShape2, this.contactAddHandler), o = 0; o < 4; o++) n = this.shapeGuide["crateLeft" + [o + 1]], i.vertices[o] = new s._m(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale);
                    this.basketShape3 = this.basketBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.basketShape3, this.contactBasketResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.basketShape3, this.contactAddHandler), this.basketBody.SetMassFromShapes(), this.paintVector.push(this.basketBody);
                }, l.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this);
                    var t = this.sourceObject.basketPieces;
                    this._session.particleController.createBMDArray("basketPieces", t), this.basketMC = this.sourceObject.basket, this.basketMC.scaleX = this.basketMC.scaleY = 1 / this.mc_scale;
                    var i = this.basketBody.GetLocalCenter();
                    i = new s._m((this._startX - i.x) * this.character_scale, (this._startY - i.y) * this.character_scale);
                    var r = this.shapeGuide.crateLeft1, o = new s._m(r.x + i.x, r.y + i.y);
                    this.basketMC.inner.x = o.x, this.basketMC.inner.y = o.y, this.basketBody.SetUserData(this.basketMC), this._session.containerSprite.addChild(this.basketMC);
                }, l.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this);
                    var t = this.sourceObject.basketPieces;
                    this._session.particleController.createBMDArray("basketPieces", t), this.basketMC.visible = true, this.basketMC.inner.frame.visible = false, this.basketBody.SetUserData(this.basketMC);
                }, l.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = n.oneEightyOverPI;
                    i = 50 / o - (t = this.lowerLeg1Body.GetAngle() - this.upperLeg1Body.GetAngle()), r = 150 / o - t, this.kneeJoint1.SetLimits(i, r), i = 50 / o - (t = this.lowerLeg2Body.GetAngle() - this.upperLeg2Body.GetAngle()), r = 150 / o - t, this.kneeJoint2.SetLimits(i, r), i = -110 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = -40 / o - t, i = -110 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = -40 / o - t, i = -160 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = -20 / o - t, this.elbowJoint1.SetLimits(i, r), i = -160 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = -20 / o - t, this.elbowJoint2.SetLimits(i, r), i = -10 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 10 / o - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.tu, h = new s._m, l = this.shapeGuide.crateAnchor;
                    h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.enableLimit = true, a.lowerAngle = 0, a.upperAngle = 0, a.Initialize(this.mom.frameBody, this.basketBody, h), this.connectingJoint = this._session.m_world.CreateJoint(a), a.enableLimit = false, h.SetV(this.lowerArm1Body.GetWorldPoint(new s._m(0, this.lowerArm1Shape.GetVertices()[2].y))), a.Initialize(this.basketBody, this.lowerArm1Body, h), this.basketHand1 = this._session.m_world.CreateJoint(a), h.SetV(this.lowerArm2Body.GetWorldPoint(new s._m(0, this.lowerArm2Shape.GetVertices()[2].y))), a.Initialize(this.basketBody, this.lowerArm2Body, h), this.basketHand2 = this._session.m_world.CreateJoint(a);
                    var c = new s.wN;
                    h.SetV(this.pelvisBody.GetWorldCenter()), c.enableLimit = true, c.upperTranslation = .25, c.lowerTranslation = 0;
                    var d = 25 / o;
                    c.Initialize(this.basketBody, this.pelvisBody, h, new s._m(Math.sin(d), -Math.cos(d))), this.basketPelvis = this._session.m_world.CreateJoint(c);
                }, l.handleContactResults = function () {
                    var t;
                    e.prototype.handleContactResults.call(this), this.contactResultBuffer.get(this.basketShape1) && (t = this.contactResultBuffer.get(this.basketShape1), this.basketSmash(t.impulse, t.normal), this.contactResultBuffer.delete(this.basketShape1), this.contactAddBuffer.delete(this.basketShape1), this.contactAddBuffer.delete(this.basketShape2), this.contactAddBuffer.delete(this.basketShape3), this.basketShape4 && (this.contactAddBuffer.delete(this.basketShape4), this.contactAddBuffer.delete(this.basketShape5), this.contactAddBuffer.delete(this.basketShape6)));
                }, l.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.detached || this.checkRevJoint(this.connectingJoint, this.detachLimit, this.detachBasket);
                }, l.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this.session.m_world;
                        this.basketPelvis && (e.DestroyJoint(this.basketPelvis), this.basketPelvis = null), this.basketHand1 && (e.DestroyJoint(this.basketHand1), this.basketHand1 = null), this.basketHand2 && (e.DestroyJoint(this.basketHand2), this.basketHand2 = null), this.detached || (this.refilterShit(this.head1Body.GetShapeList()), this.refilterShit(this.pelvisBody.GetShapeList()), this.refilterShit(this.chestBody.GetShapeList()), this.refilterShit(this.upperArm1Body.GetShapeList()), this.refilterShit(this.upperArm2Body.GetShapeList()), this.refilterShit(this.lowerArm1Body.GetShapeList()), this.refilterShit(this.lowerArm2Body.GetShapeList()), this.refilterShit(this.upperLeg1Body.GetShapeList()), this.refilterShit(this.upperLeg2Body.GetShapeList()), this.refilterShit(this.lowerLeg1Body.GetShapeList()), this.refilterShit(this.lowerLeg2Body.GetShapeList()));
                        var t = this.basketBody.GetAngle() - Math.PI / 2, i = Math.cos(t) * this.ejectImpulse, r = Math.sin(t) * this.ejectImpulse;
                        this.chestBody.ApplyImpulse(new s._m(i, r), this.chestBody.GetWorldCenter()), this.pelvisBody.ApplyImpulse(new s._m(i, r), this.pelvisBody.GetWorldCenter());
                    }
                }, l.refilterShit = function (e) {
                    e.m_filter.maskBits == this.defaultFilter.maskBits && (e.m_filter = this.extraFilter, this._session.m_world.Refilter(e));
                }, l.basketSmash = function (e, t) {
                    this.contactImpulseDict.delete(this.basketShape1);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.basketShape1), i.deleteListener(r.$S.RESULT, this.basketShape2), i.deleteListener(r.$S.RESULT, this.basketShape3), i.deleteListener(r.$S.ADD, this.basketShape1), i.deleteListener(r.$S.ADD, this.basketShape2), i.deleteListener(r.$S.ADD, this.basketShape3), this.basketShape4 && (i.deleteListener(r.$S.RESULT, this.basketShape4), i.deleteListener(r.$S.RESULT, this.basketShape5), i.deleteListener(r.$S.RESULT, this.basketShape6), i.deleteListener(r.$S.ADD, this.basketShape4), i.deleteListener(r.$S.ADD, this.basketShape5), i.deleteListener(r.$S.ADD, this.basketShape6)), this.eject(), this.detached = true, this.basketMC.visible = false, this._session.m_world.DestroyJoint(this.connectingJoint), this._session.m_world.DestroyBody(this.basketBody);
                    var s = this.basketBody.GetWorldCenter();
                    this._session.particleController.createPointBurst("basketPieces", s.x * this.m_physScale, s.y * this.m_physScale, 5, 20, 30), o.ij.instance.playAreaSoundInstance("BasketSmash", this.basketBody);
                }, l.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, l.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, l.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, l.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, l.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.basketHand1 && (this._session.m_world.DestroyJoint(this.basketHand1), this.basketHand1 = null), this.basketHand2 || this.eject());
                }, l.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.basketHand2 && (this._session.m_world.DestroyJoint(this.basketHand2), this.basketHand2 = null), this.basketHand1 || this.eject());
                }, l.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.basketHand1 && (this._session.m_world.DestroyJoint(this.basketHand1), this.basketHand1 = null), this.basketHand2 || this.eject());
                }, l.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.basketHand2 && (this._session.m_world.DestroyJoint(this.basketHand2), this.basketHand2 = null), this.basketHand1 || this.eject());
                }, a = n, (h = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null)));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function _(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function w(e, t) {
                return (w = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var b = function (e) {
                var t, i;
                function r(t, i, s, r, o, n) {
                    var a;
                    return void 0 === o && (o = -1), void 0 === n && (n = "Char3"), (a = e.call(this, t, i, s, r, o, n) || this).helmetSmashLimit = 2, a.handleContactBuffer = function () {
                        e.prototype.handleContactBuffer.call(_(a)), a.kid.handleContactBuffer();
                    }, a.handleContactResults = function () {
                        var e;
                        a.contactResultBuffer.get(a.helmetShape) && (e = a.contactResultBuffer.get(a.helmetShape), a.helmetSmash(e.impulse), a.contactResultBuffer.delete(a.head1Shape), a.contactAddBuffer.delete(a.head1Shape)), a.contactResultBuffer.get(a.head1Shape) && (e = a.contactResultBuffer.get(a.head1Shape), a.headSmash1(e.impulse), a.contactResultBuffer.delete(a.head1Shape), a.contactAddBuffer.delete(a.head1Shape)), a.contactResultBuffer.get(a.chestShape) && (e = a.contactResultBuffer.get(a.chestShape), a.chestSmash(e.impulse), a.contactResultBuffer.delete(a.chestShape), a.contactAddBuffer.delete(a.chestShape)), a.contactResultBuffer.get(a.pelvisShape) && (e = a.contactResultBuffer.get(a.pelvisShape), a.pelvisSmash(e.impulse), a.contactResultBuffer.delete(a.pelvisShape), a.contactAddBuffer.delete(a.pelvisShape)), a.contactResultBuffer.get(a.lowerLeg1Shape) && (e = a.contactResultBuffer.get(a.lowerLeg1Shape), a.footSmash1(e.impulse), a.contactResultBuffer.delete(a.lowerLeg1Shape), a.contactAddBuffer.delete(a.lowerLeg1Shape)), a.contactResultBuffer.get(a.lowerLeg2Shape) && (e = a.contactResultBuffer.get(a.lowerLeg2Shape), a.footSmash2(e.impulse), a.contactResultBuffer.delete(a.lowerLeg2Shape), a.contactAddBuffer.delete(a.lowerLeg2Shape)), a.contactResultBuffer.get(a.frameShape1) && (e = a.contactResultBuffer.get(a.frameShape1), a.frameSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.frameShape1)), a.contactResultBuffer.get(a.frontWheelShape) && (e = a.contactResultBuffer.get(a.frontWheelShape), a.frontWheelSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.frontWheelShape), a.contactAddBuffer.delete(a.frontWheelShape)), a.contactResultBuffer.get(a.backWheelShape) && (e = a.contactResultBuffer.get(a.backWheelShape), a.backWheelSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.backWheelShape), a.contactAddBuffer.delete(a.backWheelShape)), a.contactResultBuffer.get(a.lowerArm1Shape) && (e = a.contactResultBuffer.get(a.lowerArm1Shape), a.grabAction(a.lowerArm1Body, e.otherShape, e.otherShape.GetBody()), a.contactResultBuffer.delete(a.lowerArm1Shape)), a.contactResultBuffer.get(a.lowerArm2Shape) && (e = a.contactResultBuffer.get(a.lowerArm2Shape), a.grabAction(a.lowerArm2Body, e.otherShape, e.otherShape.GetBody()), a.contactResultBuffer.delete(a.lowerArm2Shape));
                    }, a.kid = new f(t, i, s.kid, r, -2, "Kid1", _(a)), a;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, w(t, i);
                var o, n, h = r.prototype;
                return h.checkKeyStates = function () {
                    e.prototype.checkKeyStates.call(this), this.kid.dead || (this.kid.userVehicle ? this.kid.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? this.kid.leftAndRightActions() : this.kid.leftPressedActions() : this.rightPressed ? this.kid.rightPressedActions() : this.kid.leftAndRightActions(), this.upPressed ? this.downPressed ? this.kid.upAndDownActions() : this.kid.upPressedActions() : this.downPressed ? this.kid.downPressedActions() : this.kid.upAndDownActions(), this.spacePressed ? this.kid.spacePressedActions() : this.kid.spaceNullActions(), this.shiftPressed ? this.kid.shiftPressedActions() : this.kid.shiftNullActions(), this.ctrlPressed ? this.kid.ctrlPressedActions() : this.kid.ctrlNullActions(), this.zPressed ? this.kid.zPressedActions() : this.kid.zNullActions()));
                }, h.checkReplayData = function (t, i) {
                    e.prototype.checkReplayData.call(this, t, i), this.kid.dead || (this.kid.userVehicle ? this.kid.userVehicle.operateReplayData(this._session.iteration, i) : ("1" == i.charAt(0) ? "1" == i.charAt(1) ? this.kid.leftAndRightActions() : this.kid.leftPressedActions() : "1" == i.charAt(1) ? this.kid.rightPressedActions() : this.kid.leftAndRightActions(), "1" == i.charAt(2) ? "1" == i.charAt(3) ? this.kid.upAndDownActions() : this.kid.upPressedActions() : "1" == i.charAt(3) ? this.kid.downPressedActions() : this.kid.upAndDownActions(), "1" == i.charAt(4) ? this.kid.spacePressedActions() : this.kid.spaceNullActions(), "1" == i.charAt(5) ? this.kid.shiftPressedActions() : this.kid.shiftNullActions(), "1" == i.charAt(6) ? this.kid.ctrlPressedActions() : this.kid.ctrlNullActions(), "1" == i.charAt(7) ? this.kid.zPressedActions() : this.kid.zNullActions()));
                }, h.switchCamera = function () {
                    this._session.camera.focus == this.cameraFocus ? this._session.camera.focus = this.kid.cameraFocus : this._session.camera.focus = this.cameraFocus;
                }, h.shiftPressedActions = function () {
                    this.eject();
                }, h.actions = function () {
                    e.prototype.actions.call(this), this.kid.actions();
                }, h.create = function () {
                    this.createFilters(), this.createBodies(), this.createJoints(), this.createMovieClips(), this.setLimits(), this.createDictionaries(), this.kid.create(), this.dispatchEvent(new a.ju(a.ju.COMPLETE));
                }, h.reset = function () {
                    e.prototype.reset.call(this), this.helmetOn = true, this.kid.reset();
                }, h.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null, this.kid.die();
                }, h.paint = function () {
                    e.prototype.paint.call(this), this.kid.paint();
                }, h.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, h.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.helmetMC.visible = false, this.head1MC.helmet.visible = true;
                }, h.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit);
                }, h.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.kid.checkJoints();
                }, h.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null, this.helmetOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, h.mourn = function () {
                    this._dead || this.addVocals("Damnit", 3);
                }, h.explodeShape = function (e, t) {
                    switch (e) {
                        case this.helmetShape:
                            t > .85 && this.helmetSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / r.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var o = this.pelvisBody.GetMass() / r.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * o, .7)) && this.pelvisSmash(0);
                    }
                }, o = r, (n = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e, this.kid && (this.kid.session = this._session);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), r;
            }(u), C = i(393);
            function L(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function B(e, t) {
                return (B = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var A = function (e) {
                var t, i;
                function r(t, i, s, r, o, n) {
                    var a;
                    return void 0 === o && (o = -1), void 0 === n && (n = "Char4"), (a = e.call(this, t, i, s, r, o, n) || this).helmetSmashLimit = 2, a.handleContactResults = function () {
                        var e;
                        a.contactResultBuffer.get(a.helmetShape) && (e = a.contactResultBuffer.get(a.helmetShape), a.helmetSmash(e.impulse), a.contactResultBuffer.delete(a.head1Shape), a.contactAddBuffer.delete(a.head1Shape)), a.contactResultBuffer.get(a.head1Shape) && (e = a.contactResultBuffer.get(a.head1Shape), a.headSmash1(e.impulse), a.contactResultBuffer.delete(a.head1Shape), a.contactAddBuffer.delete(a.head1Shape)), a.contactResultBuffer.get(a.chestShape) && (e = a.contactResultBuffer.get(a.chestShape), a.chestSmash(e.impulse), a.contactResultBuffer.delete(a.chestShape), a.contactAddBuffer.delete(a.chestShape)), a.contactResultBuffer.get(a.pelvisShape) && (e = a.contactResultBuffer.get(a.pelvisShape), a.pelvisSmash(e.impulse), a.contactResultBuffer.delete(a.pelvisShape), a.contactAddBuffer.delete(a.pelvisShape)), a.contactResultBuffer.get(a.lowerLeg1Shape) && (e = a.contactResultBuffer.get(a.lowerLeg1Shape), a.footSmash1(e.impulse), a.contactResultBuffer.delete(a.lowerLeg1Shape), a.contactAddBuffer.delete(a.lowerLeg1Shape)), a.contactResultBuffer.get(a.lowerLeg2Shape) && (e = a.contactResultBuffer.get(a.lowerLeg2Shape), a.footSmash2(e.impulse), a.contactResultBuffer.delete(a.lowerLeg2Shape), a.contactAddBuffer.delete(a.lowerLeg2Shape)), a.contactResultBuffer.get(a.frameShape1) && (e = a.contactResultBuffer.get(a.frameShape1), a.frameSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.frameShape1)), a.contactResultBuffer.get(a.frontWheelShape) && (e = a.contactResultBuffer.get(a.frontWheelShape), a.frontWheelSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.frontWheelShape), a.contactAddBuffer.delete(a.frontWheelShape)), a.contactResultBuffer.get(a.backWheelShape) && (e = a.contactResultBuffer.get(a.backWheelShape), a.backWheelSmash(e.impulse, e.normal), a.contactResultBuffer.delete(a.backWheelShape), a.contactAddBuffer.delete(a.backWheelShape)), a.contactResultBuffer.get(a.lowerArm1Shape) && (e = a.contactResultBuffer.get(a.lowerArm1Shape), a.grabAction(a.lowerArm1Body, e.otherShape, e.otherShape.GetBody()), a.contactResultBuffer.delete(a.lowerArm1Shape)), a.contactResultBuffer.get(a.lowerArm2Shape) && (e = a.contactResultBuffer.get(a.lowerArm2Shape), a.grabAction(a.lowerArm2Body, e.otherShape, e.otherShape.GetBody()), a.contactResultBuffer.delete(a.lowerArm2Shape));
                    }, a.shapeRefScale = 50, a.frameSmashLimit = 100, a.daughter = new v(t, i, s.daughter, r, -2, "Kid2", L(a)), a.son = new S(t, i, s.son, r, -3, "Kid1", L(a)), a;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, B(t, i);
                var o, n, h = r.prototype;
                return h.checkKeyStates = function () {
                    e.prototype.checkKeyStates.call(this), this.daughter.dead || (this.daughter.userVehicle ? this.daughter.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? this.daughter.leftAndRightActions() : this.daughter.leftPressedActions() : this.rightPressed ? this.daughter.rightPressedActions() : this.daughter.leftAndRightActions(), this.upPressed ? this.downPressed ? this.daughter.upAndDownActions() : this.daughter.upPressedActions() : this.downPressed ? this.daughter.downPressedActions() : this.daughter.upAndDownActions(), this.spacePressed ? this.daughter.spacePressedActions() : this.daughter.spaceNullActions(), this.shiftPressed ? this.daughter.shiftPressedActions() : this.daughter.shiftNullActions(), this.ctrlPressed ? this.daughter.ctrlPressedActions() : this.daughter.ctrlNullActions(), this.zPressed ? this.daughter.zPressedActions() : this.daughter.zNullActions())), this.son.dead || (this.son.userVehicle ? this.son.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? this.son.leftAndRightActions() : this.son.leftPressedActions() : this.rightPressed ? this.son.rightPressedActions() : this.son.leftAndRightActions(), this.upPressed ? this.downPressed ? this.son.upAndDownActions() : this.son.upPressedActions() : this.downPressed ? this.son.downPressedActions() : this.son.upAndDownActions(), this.spacePressed ? this.son.spacePressedActions() : this.son.spaceNullActions(), this.shiftPressed ? this.son.shiftPressedActions() : this.son.shiftNullActions(), this.ctrlPressed ? this.son.ctrlPressedActions() : this.son.ctrlNullActions(), this.zPressed ? this.son.zPressedActions() : this.son.zNullActions()));
                }, h.checkReplayData = function (t, i) {
                    e.prototype.checkReplayData.call(this, t, i), this.daughter.dead || (this.daughter.userVehicle ? this.daughter.userVehicle.operateReplayData(this._session.iteration, i) : ("1" == i.charAt(0) ? "1" == i.charAt(1) ? this.daughter.leftAndRightActions() : this.daughter.leftPressedActions() : "1" == i.charAt(1) ? this.daughter.rightPressedActions() : this.daughter.leftAndRightActions(), "1" == i.charAt(2) ? "1" == i.charAt(3) ? this.daughter.upAndDownActions() : this.daughter.upPressedActions() : "1" == i.charAt(3) ? this.daughter.downPressedActions() : this.daughter.upAndDownActions(), "1" == i.charAt(4) ? this.daughter.spacePressedActions() : this.daughter.spaceNullActions(), "1" == i.charAt(5) ? this.daughter.shiftPressedActions() : this.daughter.shiftNullActions(), "1" == i.charAt(6) ? this.daughter.ctrlPressedActions() : this.daughter.ctrlNullActions(), "1" == i.charAt(7) ? this.daughter.zPressedActions() : this.daughter.zNullActions())), this.son.dead || (this.son.userVehicle ? this.son.userVehicle.operateReplayData(this._session.iteration, i) : ("1" == i.charAt(0) ? "1" == i.charAt(1) ? this.son.leftAndRightActions() : this.son.leftPressedActions() : "1" == i.charAt(1) ? this.son.rightPressedActions() : this.son.leftAndRightActions(), "1" == i.charAt(2) ? "1" == i.charAt(3) ? this.son.upAndDownActions() : this.son.upPressedActions() : "1" == i.charAt(3) ? this.son.downPressedActions() : this.son.upAndDownActions(), "1" == i.charAt(4) ? this.son.spacePressedActions() : this.son.spaceNullActions(), "1" == i.charAt(5) ? this.son.shiftPressedActions() : this.son.shiftNullActions(), "1" == i.charAt(6) ? this.son.ctrlPressedActions() : this.son.ctrlNullActions(), "1" == i.charAt(7) ? this.son.zPressedActions() : this.son.zNullActions()));
                }, h.switchCamera = function () {
                    this._session.camera.focus == this.cameraFocus ? this._session.camera.focus = this.daughter.cameraFocus : this._session.camera.focus == this.daughter.cameraFocus ? this._session.camera.focus = this.son.cameraFocus : this._session.camera.focus = this.cameraFocus;
                }, h.actions = function () {
                    e.prototype.actions.call(this), this.daughter.actions(), this.son.actions();
                }, h.create = function () {
                    this.createFilters(), this.createBodies(), this.createJoints(), this.createMovieClips(), this.setLimits(), this.createDictionaries(), this.daughter.create(), this.son.create(), this._session instanceof C.i && (this.daughter.wheelJoint.SetMotorSpeed(0), this.daughter.wheelJoint.EnableMotor(true)), this.dispatchEvent(new a.ju(a.ju.COMPLETE));
                }, h.reset = function () {
                    e.prototype.reset.call(this), this.helmetOn = true, this.daughter.reset(), this.son.reset();
                }, h.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null, this.daughter.die(), this.son.die();
                }, h.paint = function () {
                    e.prototype.paint.call(this), this.daughter.paint(), this.son.paint();
                }, h.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, h.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.helmetMC.visible = false, this.head1MC.helmet.visible = true;
                }, h.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit);
                }, h.handleContactBuffer = function () {
                    e.prototype.handleContactBuffer.call(this), this.daughter.handleContactBuffer(), this.son.handleContactBuffer();
                }, h.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.daughter.checkJoints(), this.son.checkJoints();
                }, h.frameSmash = function (t, i) {
                    e.prototype.frameSmash.call(this, t, i), this.daughter.detachFrame(0), this.son.detachBasket(0);
                }, h.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null, this.helmetOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, h.mourn = function () {
                    this._dead || this.addVocals("Damnit", 3);
                }, h.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, h.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, h.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.gearFoot1 && (this._session.m_world.DestroyJoint(this.gearFoot1), this.gearFoot1 = null), this.checkEject());
                }, h.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.gearFoot2 && (this._session.m_world.DestroyJoint(this.gearFoot2), this.gearFoot2 = null), this.checkEject());
                }, h.explodeShape = function (e, t) {
                    switch (e) {
                        case this.helmetShape:
                            t > .85 && this.helmetSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / r.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var o = this.pelvisBody.GetMass() / r.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * o, .7)) && this.pelvisSmash(0);
                    }
                }, o = r, (n = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e, this.daughter && (this.daughter.session = this._session), this.son && (this.son.session = this._session);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), r;
            }(u), E = function () {
                function e(e, t, i, s, r) {
                    if (void 0 === r && (r = null), this.numPoints = 2, this.lineThickness = 2, this.lineColor = 16711680, this.lineAlpha = 1, this.upperBody = e, this.lowerBody = t, this.ligamentLength = i, this.character_scale = s, this.m_physScale = l.Z.currentSession.m_physScale, r instanceof Y) {
                        var o = r;
                        this.antiGrav = o.antiGravArray;
                    } else if (r instanceof Z) {
                        var n = r;
                        this.antiGrav = n.antiGravArray;
                    }
                    this.create();
                }
                var t = e.prototype;
                return t.create = function () {
                    var e = new s.Oi, t = new s.lB;
                    this.ligFilter = new s.fT, this.ligFilter.categoryBits = 2056, this.ligFilter.maskBits = 2056, t.density = 1, t.friction = .3, t.restitution = .1, t.radius = 7 / this.character_scale, t.filter = this.ligFilter;
                    var i = this.upperBody.GetShapeList().GetVertices()[2].y, r = this.upperBody.GetAngle() + Math.PI / 2, o = new s._m(this.upperBody.GetPosition().x + Math.cos(r) * i, this.upperBody.GetPosition().y + Math.sin(r) * i);
                    i = this.lowerBody.GetShapeList().GetVertices()[0].y, r = this.lowerBody.GetAngle() + Math.PI / 2;
                    for (var n = new s._m(this.lowerBody.GetPosition().x + Math.cos(r) * i, this.lowerBody.GetPosition().y + Math.sin(r) * i), h = n.x - o.x, c = n.y - n.y, d = h / (this.numPoints + 1), p = c / (this.numPoints + 1), u = [], m = l.Z.currentSession.m_world, f = 1; f <= this.numPoints; f++) {
                        e.position.Set(o.x + d * f, o.y + p * f), e.fixedRotation = true;
                        var y = m.CreateBody(e);
                        y.CreateShape(t), y.SetMassFromShapes(), y.SetLinearVelocity(this.upperBody.GetLinearVelocity()), y.CopyInterpolation(this.upperBody), u.push(y);
                    }
                    if (this.antiGrav) for (f = 0; f < this.numPoints; f++) this.antiGrav.push(u[f]);
                    this.ligJoints = [];
                    var v = new s.qO, g = this.ligamentLength / this.character_scale;
                    for (v.Initialize(this.upperBody, u[0], o, u[0].GetPosition()), v.length = g, v.collideConnected = false, this.mainJoint = m.CreateJoint(v), this.ligJoints.push(this.mainJoint), f = 0; f < this.numPoints - 1; f++) {
                        var S = u[f], _ = u[f + 1];
                        v.Initialize(S, _, S.GetPosition(), _.GetPosition()), v.length = g, this.ligJoints.push(m.CreateJoint(v));
                    }
                    v.Initialize(_, this.lowerBody, _.GetPosition(), n), v.length = g, this.ligJoints.push(m.CreateJoint(v)), this.ligSprite = new a.jy;
                    var w = l.Z.currentSession.containerSprite;
                    w.addChildAt(this.ligSprite, w.getChildIndex(this.upperBody.GetUserData()));
                }, t.paint = function () {
                    this.ligSprite.graphics.clear(), this.ligSprite.graphics.lineStyle(this.lineThickness, this.lineColor, this.lineAlpha);
                    var e = this.mainJoint.GetInterpolatedAnchor1();
                    this.ligSprite.graphics.moveTo(e.x * this.m_physScale, e.y * this.m_physScale);
                    for (var t = 0; t < this.ligJoints.length - 1; t++) {
                        var i = this.ligJoints[t];
                        e = i.GetBody2().GetInterpolatedPosition(), this.ligSprite.graphics.lineTo(e.x * this.m_physScale, e.y * this.m_physScale);
                    }
                    e = (i = this.ligJoints[t]).GetInterpolatedAnchor2(), this.ligSprite.graphics.lineTo(e.x * this.m_physScale, e.y * this.m_physScale), e = this.lowerBody.GetInterpolatedWorldCenter(), this.ligSprite.graphics.lineTo(e.x * this.m_physScale, e.y * this.m_physScale);
                }, t.checkJoints = function () {
                    this.mainJoint.broken || Math.abs(this.mainJoint.m_impulse) > .5 && this.breakJoint();
                }, t.breakJoint = function () {
                    var e = new s.Oi, t = new s.lB;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.radius = 3 / this.character_scale, t.filter = this.ligFilter;
                    var i = this.mainJoint.GetAnchor1();
                    e.position.Set(i.x, i.y), e.fixedRotation = true;
                    var r = l.Z.currentSession.m_world.CreateBody(e);
                    r.CreateShape(t), r.SetMassFromShapes(), r.SetLinearVelocity(this.upperBody.GetLinearVelocity()), this.mainJoint.broken = true, this.mainJoint.m_body1 = r, this.mainJoint.m_localAnchor1.Set(0, 0), this.antiGrav && this.antiGrav.push(r), r.CopyInterpolation(this.upperBody), o.ij.instance.playAreaSoundInstance("LigTear2", r);
                }, t.remoteBreak = function () {
                    var e = new s.Oi, t = new s.lB;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.radius = 3 / this.character_scale, t.filter = this.ligFilter;
                    var i = l.Z.currentSession.m_world, r = this.mainJoint.GetAnchor1();
                    e.position.Set(r.x, r.y), e.fixedRotation = true;
                    var n = i.CreateBody(e);
                    n.CreateShape(t), n.SetMassFromShapes(), n.SetLinearVelocity(this.upperBody.GetLinearVelocity());
                    var a = this.mainJoint.m_body2;
                    l.Z.currentSession.m_world.DestroyJoint(this.mainJoint);
                    var h = new s.qO, c = this.ligamentLength / this.character_scale;
                    h.Initialize(n, a, n.GetPosition(), a.GetPosition()), h.length = c, h.collideConnected = false, this.mainJoint = i.CreateJoint(h), this.mainJoint.broken = true, this.ligJoints[0] = this.mainJoint, this.antiGrav && this.antiGrav.push(n), o.ij.instance.playAreaSoundInstance("LigTear2", n);
                }, t.die = function () {
                    this.ligSprite && (this.ligSprite.parent.removeChild(this.ligSprite), this.ligSprite = null), this.antiGrav && (this.antiGrav = null);
                }, e;
            }(), M = function () {
                function e(e, t, i) {
                    if (this.character = e, this.totalIntestines = t, this.intestineLength = i, this.m_physScale = e.m_physScale, this.chestBody = e.chestBody, this.pelvisBody = e.pelvisBody, this.intestineMCs = e.intestineMCs, e instanceof Y) {
                        var s = e;
                        this.antiGrav = s.antiGravArray;
                    } else if (e instanceof Z) {
                        var r = e;
                        this.antiGrav = r.antiGravArray;
                    }
                    this.create();
                }
                var t = e.prototype;
                return t.create = function () {
                    var e = this.character.session.m_world, t = this.character.character_scale, i = this.character.mc_scale, r = new s.Oi, o = new s.lB;
                    o.density = 1, o.friction = .3, o.restitution = .1, o.radius = 5 / t, o.filter = this.character.zeroFilter;
                    var n = this.pelvisBody.GetShapeList().GetVertices()[0].y, a = this.pelvisBody.GetAngle() + Math.PI / 2, h = new s._m(this.pelvisBody.GetPosition().x + Math.cos(a) * n, this.pelvisBody.GetPosition().y + Math.sin(a) * n);
                    n = this.chestBody.GetShapeList().GetVertices()[2].y, a = this.chestBody.GetAngle() + Math.PI / 2;
                    for (var l = new s._m(this.chestBody.GetPosition().x + Math.cos(a) * n, this.chestBody.GetPosition().y + Math.sin(a) * n), c = h.x, d = h.y, p = l.x - c, u = l.y - d, m = p / (this.totalIntestines + 1), f = u / (this.totalIntestines + 1), y = [], v = 1; v <= this.totalIntestines; v++) {
                        r.position.Set(c + m * v, d + f * v), r.fixedRotation = true;
                        var g = e.CreateBody(r);
                        g.CreateShape(o), g.SetMassFromShapes(), g.SetLinearVelocity(this.chestBody.GetLinearVelocity()), y.push(g), g.CopyInterpolation(this.chestBody);
                    }
                    if (this.antiGrav) for (v = 0; v < this.totalIntestines; v++) this.antiGrav.push(y[v]);
                    var S = new s.qO, _ = this.intestineLength / t;
                    for (S.Initialize(this.pelvisBody, y[0], h, y[0].GetPosition()), S.length = _, S.collideConnected = false, this.pelvisIntestineJoint = e.CreateJoint(S), this.intestineJoints = [], v = 0; v <= this.totalIntestines - 2; v++) {
                        var w = y[v], b = y[v + 1];
                        S.Initialize(w, b, w.GetPosition(), b.GetPosition()), S.length = _, S.collideConnected = false, this.intestineJoints.push(e.CreateJoint(S));
                    }
                    for (w = y[this.totalIntestines - 1], S.Initialize(w, this.chestBody, w.GetPosition(), l), S.length = _, S.collideConnected = false, this.intestineChestJoint = e.CreateJoint(S), v = 0; v < this.intestineMCs.length; v++) {
                        var C = this.intestineMCs[v];
                        C.x = -200, C.y = -200, C.visible = true, C.scaleX = C.scaleY = 1 / i;
                    }
                }, t.paint = function () {
                    if (this.pelvisIntestineJoint) {
                        var e = this.intestineMCs[0], t = this.pelvisIntestineJoint.GetInterpolatedAnchor1();
                        e.x = t.x * this.m_physScale, e.y = t.y * this.m_physScale;
                        var i = this.pelvisIntestineJoint.GetBody2().GetInterpolatedPosition(), s = Math.atan2(t.y - i.y, t.x - i.x);
                        e.rotation = s * (180 / Math.PI);
                        var r = Math.sqrt(Math.pow(i.x - t.x, 2) + Math.pow(i.y - t.y, 2)), o = r / this.pelvisIntestineJoint.m_length;
                        e.inner.scaleX = o;
                    }
                    for (var n = 0; n < this.intestineJoints.length; n++) {
                        var a = this.intestineJoints[n];
                        e = this.intestineMCs[n + 1], t = a.GetBody1().GetInterpolatedPosition(), e.x = t.x * this.m_physScale, e.y = t.y * this.m_physScale, i = a.GetBody2().GetInterpolatedPosition(), s = Math.atan2(t.y - i.y, t.x - i.x), e.rotation = s * (180 / Math.PI), o = (r = Math.sqrt(Math.pow(i.x - t.x, 2) + Math.pow(i.y - t.y, 2))) / a.m_length, e.inner.scaleX = o;
                    }
                    this.intestineChestJoint && (t = i, (e = this.intestineMCs[this.intestineMCs.length - 1]).x = t.x * this.m_physScale, e.y = t.y * this.m_physScale, i = this.intestineChestJoint.GetInterpolatedAnchor2(), s = Math.atan2(t.y - i.y, t.x - i.x), e.rotation = s * (180 / Math.PI), o = (r = Math.sqrt(Math.pow(i.x - t.x, 2) + Math.pow(i.y - t.y, 2))) / this.intestineChestJoint.m_length, e.inner.scaleX = o);
                }, t.intestineBreak1 = function (e) {
                    this.intestineMCs[0].visible = false, null != this.pelvisIntestineJoint && (this.pelvisIntestineJoint.broken = true, this.character.session.m_world.DestroyJoint(this.pelvisIntestineJoint), this.pelvisIntestineJoint = null, o.ij.instance.playAreaSoundInstance("LigTear1", this.pelvisBody));
                }, t.intestineBreak2 = function (e) {
                    this.intestineMCs[this.intestineMCs.length - 1].visible = false, null != this.intestineChestJoint && (this.intestineChestJoint.broken = true, this.character.session.m_world.DestroyJoint(this.intestineChestJoint), this.intestineChestJoint = null, o.ij.instance.playAreaSoundInstance("LigTear1", this.chestBody));
                }, t.checkJoints = function () {
                    this.checkDistJoint(this.pelvisIntestineJoint, 1.5, this.intestineBreak1.bind(this)), this.checkDistJoint(this.intestineChestJoint, 1.5, this.intestineBreak2.bind(this));
                }, t.checkDistJoint = function (e, t, i) {
                    if (e && !e.broken) {
                        var s = Math.abs(e.m_impulse);
                        s > t && i(s);
                    }
                }, e;
            }(), k = function () {
                function e(e, t, i) {
                    if (this.lineThickness = 1, this.lineColor = 16711680, this.lineAlpha = 1, this.character = e, this.totalVertebrae = t, this.spineLength = i, this.spineMCs = e.spineMCs, this.m_physScale = e.m_physScale, this.chestBody = e.chestBody, this.head1Body = e.head1Body, e instanceof Y) {
                        var s = e;
                        this.antiGrav = s.antiGravArray;
                    } else if (e instanceof Z) {
                        var r = e;
                        this.antiGrav = r.antiGravArray;
                    }
                    this.create();
                }
                var t = e.prototype;
                return t.create = function () {
                    var e = this.character.session.m_world, t = this.character.character_scale, i = this.character.mc_scale, r = new s.Oi, o = new s.lB;
                    o.density = 1, o.friction = .3, o.restitution = .1, o.radius = 5 / t, o.filter = this.character.zeroFilter;
                    for (var n = this.head1Body.GetShapeList().GetRadius(), h = this.head1Body.GetWorldPoint(new s._m(0, n)), l = this.character.shapeGuide.spineAnchor, c = this.chestBody.GetWorldPoint(new s._m(l.x / t, l.y / t)), d = h.x - c.x, p = h.y - c.y, u = d / (this.totalVertebrae + 1), m = p / (this.totalVertebrae + 1), f = [], y = 1; y <= this.totalVertebrae; y++) {
                        r.position.Set(c.x + u * y, c.y + m * y), r.fixedRotation = true;
                        var v = e.CreateBody(r);
                        v.CreateShape(o), v.SetMassFromShapes(), v.SetLinearVelocity(this.head1Body.GetLinearVelocity()), f.push(v), v.CopyInterpolation(this.head1Body);
                    }
                    if (this.antiGrav) for (y = 0; y < this.totalVertebrae; y++) this.antiGrav.push(f[y]);
                    var g = new s.qO, S = this.spineLength / t;
                    for (g.Initialize(this.chestBody, f[0], c, f[0].GetPosition()), g.length = S, g.collideConnected = false, this.neckVertebraJoint = e.CreateJoint(g), this.vertebraJoints = [], y = 0; y <= this.totalVertebrae - 2; y++) {
                        var _ = f[y], w = f[y + 1];
                        g.Initialize(_, w, _.GetPosition(), w.GetPosition()), g.length = S, g.collideConnected = false, this.vertebraJoints.push(e.CreateJoint(g));
                    }
                    for (_ = f[this.totalVertebrae - 1], g.Initialize(_, this.head1Body, _.GetPosition(), h), g.length = S, g.collideConnected = false, this.vertebraHeadJoint = e.CreateJoint(g), y = 0; y < this.spineMCs.length; y++) {
                        var b = this.spineMCs[y];
                        b.x = -200, b.y = -200, b.visible = true, b.scaleX = b.scaleY = 1 / i;
                    }
                    this.spineSprite = new a.jy, this.character.session.containerSprite.addChildAt(this.spineSprite, this.character.session.containerSprite.getChildIndex(this.spineMCs[0]));
                }, t.paint = function () {
                    if (this.spineSprite.graphics.clear(), this.spineSprite.graphics.lineStyle(this.lineThickness, this.lineColor, this.lineAlpha), this.neckVertebraJoint) {
                        var e = this.neckVertebraJoint.GetInterpolatedAnchor1();
                        this.spineSprite.graphics.moveTo(e.x * this.m_physScale, e.y * this.m_physScale), e = this.vertebraJoints[0].GetBody1().GetInterpolatedPosition(), this.spineSprite.graphics.lineTo(e.x * this.m_physScale, e.y * this.m_physScale);
                    } else e = this.vertebraJoints[0].GetBody1().GetInterpolatedPosition(), this.spineSprite.graphics.moveTo(e.x * this.m_physScale, e.y * this.m_physScale);
                    for (var t = 0; t < this.vertebraJoints.length; t++) {
                        var i = this.vertebraJoints[t], s = this.spineMCs[t];
                        e = i.GetBody1().GetInterpolatedPosition(), s.x = e.x * this.m_physScale, s.y = e.y * this.m_physScale;
                        var r = i.GetBody2().GetInterpolatedPosition(), o = Math.atan2(e.y - r.y, e.x - r.x);
                        s.rotation = o * (180 / Math.PI), this.spineSprite.graphics.lineTo(r.x * this.m_physScale, r.y * this.m_physScale);
                    }
                    e = r, (s = this.spineMCs[t]).x = e.x * this.m_physScale, s.y = e.y * this.m_physScale, this.vertebraHeadJoint ? (r = this.vertebraHeadJoint.GetInterpolatedAnchor2(), o = Math.atan2(e.y - r.y, e.x - r.x), s.rotation = o * (180 / Math.PI), this.spineSprite.graphics.lineTo(r.x * this.m_physScale, r.y * this.m_physScale)) : s.rotation = this.spineMCs[t - 1].rotation;
                }, t.spineBreak1 = function (e) {
                    null != this.neckVertebraJoint && (this.neckVertebraJoint.broken = true, this.character.session.m_world.DestroyJoint(this.neckVertebraJoint), this.neckVertebraJoint = null, o.ij.instance.playAreaSoundInstance("LigTear1", this.chestBody));
                }, t.spineBreak2 = function (e) {
                    null != this.vertebraHeadJoint && (this.vertebraHeadJoint.broken = true, this.character.session.m_world.DestroyJoint(this.vertebraHeadJoint), this.vertebraHeadJoint = null);
                }, t.checkJoints = function () {
                    this.checkDistJoint(this.neckVertebraJoint, .5, this.spineBreak1.bind(this)), this.checkDistJoint(this.vertebraHeadJoint, .5, this.spineBreak2.bind(this));
                }, t.checkDistJoint = function (e, t, i) {
                    if (e && !e.broken) {
                        var s = Math.abs(e.m_impulse);
                        s > t && i(s);
                    }
                }, t.die = function () {
                    this.spineSprite.parent.removeChild(this.spineSprite), this.spineSprite = null, this.antiGrav && (this.antiGrav = null);
                }, e;
            }(), x = i(25), O = function () {
                function e(e, t, i) {
                    var s = this;
                    this.checkContact = function (e) {
                        e.impulse > s.stabImpulse && 2 & e.otherShape.m_material && !s.sensor && (s.stab = true, s.character.bladeActions.indexOf(s) < 0 && s.character.bladeActions.push(s));
                    }, this.checkAdd = function (e) {
                        if (2 & e.shape2.m_material) {
                            var t = e.shape2.GetBody();
                            s.bodiesToAdd.push(t), s.normals.push(e.normal), s.add = true;
                        }
                    }, this.checkRemove = function (e) {
                        if (2 & e.shape2.m_material) {
                            var t = e.shape2.GetBody();
                            (s.bjDictionary.get(t) || s.bodiesToAdd.indexOf(t) > -1) && (s.bodiesToRemove.push(t), s.remove = true);
                        }
                    }, this.body = e, this.character = i, this.rightSide = t, this.m_physScale = i.session.m_physScale, this.shape = e.GetShapeList(), this.stabImpulse = 3 * e.m_mass, this.fatal = true, this.bodiesToAdd = [], this.normals = [], this.bodiesToRemove = [], this.bjDictionary = new Map, this.countDictionary = new Map, i.session.contactListener.registerListener(r.$S.RESULT, this.shape, this.checkContact), this.createSprites();
                }
                var t = e.prototype;
                return t.createSprites = function () {
                    this.sprite = new a.jy, this.maskSprite = new a.jy, this.character.session.level.background.addChild(this.sprite);
                    var e = this.body.GetShapeList(), t = e.m_vertexCount, i = e.m_vertices[0], r = [], o = 0, n = new s._m(i.x * this.m_physScale, i.y * this.m_physScale), h = this.rightSide ? 5592411 : 13421772;
                    this.sprite.graphics.beginFill(h), this.maskSprite.graphics.beginFill(h), this.sprite.graphics.moveTo(n.x, n.y), this.maskSprite.graphics.moveTo(n.x, n.y);
                    for (var l = [], c = 0; c < t; c++) i = e.m_vertices[c], n = new s._m(i.x * this.m_physScale, i.y * this.m_physScale), this.rightSide && n.y < 0 || !this.rightSide && n.y > 0 || (l[c] = n.Copy(), o++), this.sprite.graphics.lineTo(n.x, n.y), this.maskSprite.graphics.lineTo(n.x, n.y), r.push(n);
                    n = r[0], this.sprite.graphics.lineTo(n.x, n.y), this.maskSprite.graphics.lineTo(n.x, n.y), this.sprite.graphics.endFill(), this.maskSprite.graphics.endFill();
                    var d = this.rightSide ? -1.5 : 1.5;
                    for (c = 0; c < t; c++) {
                        var p = l[c];
                        if (p) if (1 == o) {
                            var u = p.Copy(), m = c > 0 ? c - 1 : t - 1, f = r[m];
                            this.trimVert(p, f, d), r[c] = p, f = r[m = c < t - 1 ? c + 1 : 0], this.trimVert(u, f, d), r.splice(m, 0, u);
                        } else {
                            l[m = c > 0 ? c - 1 : t - 1] && (m = c < t - 1 ? c + 1 : 0);
                            var y = r[m];
                            this.trimVert(p, y, d), p.y = d, r[c] = p;
                        }
                    }
                    for (h = 9408664, this.sprite.graphics.beginFill(h), n = r[0], this.sprite.graphics.moveTo(n.x, n.y), c = 1; c < r.length; c++) n = r[c], this.sprite.graphics.lineTo(n.x, n.y);
                    n = r[0], this.sprite.graphics.lineTo(n.x, n.y), this.sprite.graphics.endFill();
                }, t.trimVert = function (e, t, i) {
                    if (t.x != e.x) {
                        var s = (t.y - e.y) / (t.x - e.x), r = t.y - s * t.x;
                        e.x = (i - r) / s;
                    }
                    e.y = i;
                }, t.paint = function () {
                    var t = this.body.GetInterpolatedPosition();
                    this.sprite.x = t.x * this.m_physScale, this.sprite.y = t.y * this.m_physScale, this.sprite.rotation = this.body.GetInterpolatedAngle() * e.oneEightyOverPI % 360;
                }, t.actions = function () {
                    if (this.stab) {
                        this.stab = false;
                        var e = this.character.session, t = e.m_world, i = e.contactListener;
                        i.deleteListener(n.ec.RESULT, this.shape);
                        var o = this.shape.GetFilterData().Copy();
                        o.maskBits = 8, this.shape.SetFilterData(o), t.Refilter(this.shape);
                        var a = new s.Vb;
                        a.isSensor = true, a.filter.categoryBits = 8, a.filter.maskBits = 4, a.vertexCount = this.shape.GetVertexCount(), a.vertices = this.shape.GetVertices(), this.sensor = this.body.CreateShape(a), i.registerListener(r.$S.ADD, this.sensor, this.checkAdd), i.registerListener(r.$S.REMOVE, this.sensor, this.checkRemove);
                    } else {
                        if (this.add) {
                            for (var h = 0; h < this.bodiesToAdd.length; h++) this.createPrisJoint(this.bodiesToAdd[h], this.normals[h]);
                            this.bodiesToAdd = [], this.normals = [], this.add = false;
                        }
                        if (this.remove) {
                            for (h = 0; h < this.bodiesToRemove.length; h++) this.removeJoint(this.bodiesToRemove[h]);
                            this.bodiesToRemove = [], this.remove = false, this.checkZeroJoints();
                        }
                    }
                }, t.checkZeroJoints = function () {
                    var e = 0;
                    if (this.bjDictionary.forEach(function (t, i) {
                        e += 1;
                    }), 0 == e) {
                        var t = this.character.session, i = t.contactListener;
                        i.deleteListener(n.ec.RESULT, this.shape);
                        var o = new s.fT;
                        o.categoryBits = 8, this.shape.SetFilterData(o), t.m_world.Refilter(this.shape), i.registerListener(n.ec.RESULT, this.shape, this.checkContact), i.deleteListener(r.$S.ADD, this.sensor), i.deleteListener(r.$S.REMOVE, this.sensor), this.body.DestroyShape(this.sensor), this.sensor = null;
                        var a = this.character.bladeActions, h = a.indexOf(this);
                        a.splice(h, 1);
                    }
                }, t.createPrisJoint = function (t, i) {
                    if (this.bjDictionary.get(t)) {
                        var r = this.countDictionary.get(t);
                        this.countDictionary.set(t, r + 1);
                    } else {
                        var n = this.character.session, a = t.GetShapeList(), l = a.GetUserData();
                        (l instanceof d || l instanceof h.bx) && l.shapeImpale(a, this.fatal);
                        var c = new s.wN, p = t.GetWorldCenter();
                        if (c.Initialize(this.body, t, p, i), c.collideConnected = true, c.enableMotor = true, c.maxMotorForce = 30, c.motorSpeed = 0, this.bjDictionary.set(t, n.m_world.CreateJoint(c)), this.countDictionary.set(t, 1), t != this.previousBody && (this.previousBody = t, n.particleController.createPointBloodBurst(p.x * this.m_physScale, p.y * this.m_physScale, 5, 15, e.bloodParticles), this.paintBlood(p.x * this.m_physScale, p.y * this.m_physScale), !this.fleshSound)) {
                            var u = Math.ceil(3 * Math.random());
                            this.fleshSound = o.ij.instance.playAreaSoundInstance("ImpaleSpikes" + u, this.body), this.fleshSound && this.fleshSound.addEventListener(o.id.AREA_SOUND_STOP, this.fleshSoundStopped, false, 0, true);
                        }
                    }
                }, t.removeJoint = function (e) {
                    var t = this.countDictionary.get(e);
                    if (0 == (t -= 1)) {
                        var i = this.bjDictionary.get(e);
                        this.character.session.m_world.DestroyJoint(i), this.bjDictionary.delete(e), this.countDictionary.delete(e);
                    } else this.countDictionary.set(e, t);
                }, t.fleshSoundStopped = function (e) {
                    this.fleshSound && (this.fleshSound.removeEventListener(o.id.AREA_SOUND_STOP, this.fleshSoundStopped), this.fleshSound = null);
                }, t.paintBlood = function (e, t) {
                    if (!this.bitmap) {
                        var i = this.sprite.getBounds(this.sprite);
                        this.bmd = new a.Q$(Math.ceil(i.width), Math.ceil(i.height), true, 0), this.bitmap = new a.eY(this.bmd), this.bitmap.x = i.x, this.bitmap.y = i.y, this.sprite.addChild(this.bitmap);
                    }
                    var s = new a.E9(e, t);
                    s = this.character.session.level.background.localToGlobal(s), s = this.sprite.globalToLocal(s);
                    var r = new a.KG((0, x.qX)("Game", "GlassBloodMC"));
                    r.convertChildren(r.pixiSprite), r.inner.x = s.x, r.inner.y = s.y, r.inner.rotation = 360 * Math.random(), Math.random() > .5 && (r.inner.scaleX = -1), r.mask = this.maskSprite;
                    var o = new a.y3;
                    o.translate(-this.bitmap.x, -this.bitmap.y), this.bmd.draw(r, o), r.mask = null;
                }, e;
            }();
            function T(e, t) {
                return (T = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            O.oneEightyOverPI = 180 / Math.PI, O.bloodParticles = 50, i(551);
            var P = function (e) {
                var t, i;
                function n(t, i, s, r) {
                    var o;
                    return (o = e.call(this, t, i, s, r, -1, "Heli") || this).maxTorque = 1e5, o.impulseMagnitude = .5, o.impulseLeft = 1, o.impulseRight = 1, o.impulseOffset = 1, o.maxSpinAV = 3.5, o.helmetSmashLimit = 2, o.copterSmashLimit = 40, o.bladeSmashLimit = 30, o.ejectImpulse = 2, o.hoverState = 0, o.targetAng = 0, o.spinAcceleration = 0, o.accelStep = .025, o.decelStep = .02, o.maxStep = .1, o.ropeMaxLength = 3, o.ropeSpeed = .05, o.numRopeSegments = 20, o.isLoud = false, o.soundDelay = 10, o.soundDelayCount = 0, o.contactCopterResultHandler = function (e) {
                        var t = e.impulse;
                        t > o.contactImpulseDict.get(o.backShape) && (o.contactResultBuffer.get(o.backShape) ? t > o.contactResultBuffer.get(o.backShape).impulse && o.contactResultBuffer.set(o.backShape, e) : o.contactResultBuffer.set(o.backShape, e));
                    }, o.bladeContactResultHandler = function (e) {
                        var t = e.impulse;
                        o.bladeContactArray.push(e), t > o.contactImpulseDict.get(o.bladeShape) && (o.contactResultBuffer.get(o.bladeShape) ? t > o.contactResultBuffer.get(o.bladeShape).impulse && o.contactResultBuffer.set(o.bladeShape, e) : o.contactResultBuffer.set(o.bladeShape, e));
                    }, o.magnetContactResult = function (e) {
                        var t = e.otherShape, i = o.magnetShapeArray.indexOf(t);
                        if (i > -1) {
                            var s = o.magnetContactArray[i];
                            e.impulse > s.impulse && (o.magnetContactArray[i] = e);
                        } else o.magnetShapeArray.push(t), o.magnetContactArray.push(e);
                    }, o.shapeRefScale = 50, o.COMArray = [], o.magnetContactArray = [], o.magnetShapeArray = [], o.bladeContactArray = [], o.bladeActions = [], o;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, T(t, i);
                var h, l, c = n.prototype;
                return c.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        if (this.spinAcceleration > 0 && (this.spinAcceleration = -this.spinAcceleration), this.spinAcceleration -= this.accelStep, this.spinAcceleration < -this.maxStep && (this.spinAcceleration = -this.maxStep), this.targetAng += this.spinAcceleration, this.bladeSmashed) {
                            var e = this.copterBody.GetAngle(), t = (this.copterBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                            t < 0 && (t = 0), t > 1 && (t = 1);
                            var i = Math.cos(e) * this.impulseLeft * t, r = Math.sin(e) * this.impulseLeft * t, o = this.copterBody.GetLocalCenter();
                            this.copterBody.ApplyImpulse(new s._m(r, -i), this.copterBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.copterBody.ApplyImpulse(new s._m(-r, i), this.copterBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                        }
                        this.currentPose = 7;
                    }
                }, c.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        if (this.spinAcceleration < 0 && (this.spinAcceleration = -this.spinAcceleration), this.spinAcceleration += this.accelStep, this.spinAcceleration > this.maxStep && (this.spinAcceleration = this.maxStep), this.targetAng += this.spinAcceleration, this.bladeSmashed) {
                            var e = this.copterBody.GetAngle(), t = (this.copterBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                            t < 0 && (t = 0), t > 1 && (t = 1);
                            var i = Math.cos(e) * this.impulseRight * t, r = Math.sin(e) * this.impulseRight * t, o = this.copterBody.GetLocalCenter();
                            this.copterBody.ApplyImpulse(new s._m(-r, i), this.copterBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.copterBody.ApplyImpulse(new s._m(r, -i), this.copterBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                        }
                        this.currentPose = 8;
                    }
                }, c.leftAndRightActions = function () {
                    this.ejected ? 1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0) : (this.targetAng > 0 ? (this.spinAcceleration -= this.decelStep, this.spinAcceleration < -this.maxStep && (this.spinAcceleration = -this.maxStep), this.targetAng += this.spinAcceleration, this.targetAng < 0 && (this.targetAng = 0)) : this.targetAng < 0 && (this.spinAcceleration += this.decelStep, this.spinAcceleration > this.maxStep && (this.spinAcceleration = this.maxStep), this.targetAng += this.spinAcceleration, this.targetAng > 0 && (this.targetAng = 0)), 7 != this._currentPose && 8 != this._currentPose || (this.currentPose = 0));
                }, c.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : this.bladeSmashed || (this.hoverState = 1, this.isLoud || (this.isLoud = true, this.heliLoop.fadeTo(.75, .25)));
                }, c.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : this.bladeSmashed || (this.hoverState = -1, this.isLoud || (this.isLoud = true, this.heliLoop.fadeTo(.75, .25)));
                }, c.upAndDownActions = function () {
                    this.ejected ? 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0) : this.bladeSmashed || (this.hoverState = 0, this.isLoud && (this.isLoud = false, this.heliLoop.fadeTo(.5, .25)));
                }, c.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : this.spaceOff && (this.spaceOff = false, this.magnetized = !this.magnetized, this.magnetized ? (this.magnetMC.play(), this.magnetMC.lights.visible = true, this.magnetLoop = o.ij.instance.playAreaSoundLoop("MagnetBuzz", this.magnetBody, 0), this.magnetLoop.fadeIn(.25)) : (this.magnetMC.stop(), this.magnetMC.lights.visible = false, this.magnetLoop && this.magnetLoop.fadeOut(.25)));
                }, c.spaceNullActions = function () {
                    this.ejected ? this.releaseGrip() : this.spaceOff = true;
                }, c.shiftPressedActions = function () {
                    if (this.ejected) this.currentPose = 7; else {
                        var e = this.magnetJoint1.m_maxLength;
                        this.magnetJoint1.m_maxLength -= this.ropeSpeed, this.magnetJoint2.m_maxLength -= this.ropeSpeed, this.magnetJoint1.m_maxLength < this.ropeMinLength && (this.magnetJoint1.m_maxLength = this.magnetJoint2.m_maxLength = this.ropeMinLength), e != this.magnetJoint1.m_maxLength && this.resizeRope();
                    }
                }, c.shiftNullActions = function () {
                    this.ejected && 7 == this._currentPose && (this.currentPose = 0);
                }, c.ctrlPressedActions = function () {
                    if (this.ejected) this.currentPose = 8; else {
                        var e = this.magnetJoint1.m_maxLength;
                        this.magnetJoint1.m_maxLength += this.ropeSpeed, this.magnetJoint2.m_maxLength += this.ropeSpeed, this.magnetJoint1.m_maxLength > this.ropeMaxLength && (this.magnetJoint1.m_maxLength = this.magnetJoint2.m_maxLength = this.ropeMaxLength), e != this.magnetJoint1.m_maxLength && this.resizeRope();
                    }
                }, c.resizeRope = function () {
                    for (var e = .8 * this.magnetJoint1.m_maxLength / this.numRopeSegments, t = 0; t < this.numRopeSegments; t++) this.ropeSprings[t].length = e;
                }, c.ctrlNullActions = function () {
                    this.ejected && 8 == this._currentPose && (this.currentPose = 0);
                }, c.zPressedActions = function () {
                    this.eject();
                }, c.preActions = function () {
                    this.currCOM = this.getCenterOfMass();
                }, c.actions = function () {
                    e.prototype.actions.call(this), this.bladeSmashed || (this.balanceCopter(), this.hoverCopter()), this.bladeImpactSound && (this.soundDelayCount += 1, this.soundDelayCount >= this.soundDelay && (this.bladeImpactSound = null, this.soundDelayCount = 0, this.soundDelay = Math.round(20 * Math.random()) + 5));
                }, c.balanceCopter = function () {
                    for (var e = this.copterBody.GetAngularVelocity(); this.targetAng > Math.PI;) this.targetAng -= 2 * Math.PI;
                    for (; this.targetAng < -Math.PI;) this.targetAng += 2 * Math.PI;
                    for (var t = this.copterBody.GetAngle(); t > Math.PI;) t -= 2 * Math.PI;
                    for (; t < -Math.PI;) t += 2 * Math.PI;
                    var i = e - 3 * -Math.sin(t - this.targetAng);
                    this.copterBody.m_angularVelocity -= i;
                }, c.hoverCopter = function () {
                    var e = this.copterBody.GetAngle(), t = new s._m(Math.sin(e), -Math.cos(e)), i = this.copterBody.GetLinearVelocityFromWorldPoint(this.currCOM), r = s.Yt.b2Dot(i, t), o = this.totalMass * .3333333333333333, n = .31 * this.totalMass;
                    if (r = r > 0 ? Math.min(r, 10) : Math.max(r, -10), this.hoverState >= 0) {
                        if (this.copterBody.ApplyImpulse(new s._m(t.x * o, t.y * o), this.currCOM), 0 == this.hoverState) return;
                        var a = n - n * r / 10;
                    } else a = -0.5 - (n + n * r / 10);
                    this.copterBody.ApplyImpulse(new s._m(t.x * a, t.y * a), this.currCOM);
                }, c.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            break;
                        case 6:
                            this.lungePoseLeft();
                            break;
                        case 7:
                            this.leanBackPose();
                            break;
                        case 8:
                            this.leanForwardPose();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, c.reset = function () {
                    e.prototype.reset.call(this), this.targetAng = 0, this.spinAcceleration = 0, this.hoverState = 0, this.isLoud = false, this.helmetOn = true, this.copterSmashed = false, this.bladeSmashed = false, this.magnetized = false, this.ejected = false, this.bladeShards = null, this.magnetContactArray = [], this.magnetShapeArray = [], this.bladeContactArray = [], this.bladeActions = [];
                }, c.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null, this.heliLoop && (this.heliLoop.stopSound(), this.heliLoop = null), this.magnetLoop && (this.magnetLoop.stopSound(), this.magnetLoop = null);
                }, c.paint = function () {
                    if (e.prototype.paint.call(this), this.copterFrontMC.x = this.copterMC.x, this.copterFrontMC.y = this.copterMC.y, this.copterFrontMC.rotation = this.copterMC.rotation, this.bladeShards) for (i = 0; i < 4; i++) this.bladeShards[i].paint();
                    var t = this.ropePoints[0];
                    this.copterSmashed || t.setPosition(this.copterBody.GetInterpolatedWorldPoint(this.copterAnchorPoint)), (t = this.ropePoints[this.numRopeSegments]).setPosition(this.magnetBody.GetInterpolatedWorldPoint(this.magnetAnchorPoint));
                    for (var i = 0; i < this.numRopeSegments + 1; i++) (t = this.ropePoints[i]).step();
                    for (i = 0; i < 20; i++) for (var s = 0; s < this.numRopeSegments; s++) {
                        var r = this.ropeSprings[s];
                        r.resolve();
                    }
                    this.ropeSprite.graphics.clear(), this.ropeSprite.graphics.lineStyle(1, 3355443);
                    var o = (r = this.ropeSprings[0]).p1.currPos, n = r.p2.currPos;
                    for (this.ropeSprite.graphics.moveTo(o.x * this.m_physScale, o.y * this.m_physScale), this.ropeSprite.graphics.lineTo(n.x * this.m_physScale, n.y * this.m_physScale), i = 1; i < this.numRopeSegments; i++) n = (r = this.ropeSprings[i]).p2.currPos, this.ropeSprite.graphics.lineTo(n.x * this.m_physScale, n.y * this.m_physScale);
                }, c.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Vb, i = new s.lB, a = new s.Oi, h = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.defaultFilter, this.paintVector.splice(this.paintVector.indexOf(this.chestBody), 1), this.paintVector.splice(this.paintVector.indexOf(this.pelvisBody), 1), this._session.m_world.DestroyBody(this.chestBody), this._session.m_world.DestroyBody(this.pelvisBody);
                    var l = this.shapeGuide.chestShape;
                    a.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.angle = l.rotation / (180 / Math.PI), this.chestBody = this._session.m_world.CreateBody(a), t.vertexCount = 6;
                    for (var c = 0; c < 6; c++) {
                        var d = this.shapeGuide["chestVert" + [c]];
                        t.vertices[c] = new s._m(d.x / this.character_scale, d.y / this.character_scale);
                    }
                    for (this.chestShape = this.chestBody.CreateShape(t), this.chestShape.SetMaterial(2), this.chestShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.chestBody.AllowSleeping(false), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, l = this.shapeGuide.pelvisShape, h.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.angle = l.rotation / (180 / Math.PI), this.pelvisBody = this._session.m_world.CreateBody(h), t.vertexCount = 5, c = 0; c < 5; c++) d = this.shapeGuide["pelvisVert" + [c]], t.vertices[c] = new s._m(d.x / this.character_scale, d.y / this.character_scale);
                    this.pelvisShape = this.pelvisBody.CreateShape(t), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.pelvisBody.AllowSleeping(false), this.paintVector.push(this.pelvisBody);
                    var p = new s.Oi;
                    p.linearDamping = .4, this.copterBody = this._session.m_world.CreateBody(p), this.paintVector.push(this.copterBody), t.density = 3, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter, l = this.shapeGuide.bladeShape;
                    var u = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m = l.rotation / n.oneEightyOverPI;
                    for (t.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, u, m), this.bladeShape = this.copterBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.bladeShape, this.bladeContactResultHandler), this.bladeLocalCenter = u.Copy(), l = this.shapeGuide.stemShape, u = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m = l.rotation / n.oneEightyOverPI, t.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, u, m), this.stemShape = this.copterBody.CreateShape(t), l = this.shapeGuide.handleShape, u = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m = l.rotation / n.oneEightyOverPI, t.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, u, m), t.vertexCount = 4, c = 0; c < 4; c++) l = this.shapeGuide["baseVert" + [c]], t.vertices[c] = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale);
                    for (this.baseShape = this.copterBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.ADD, this.baseShape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.baseShape, this.contactCopterResultHandler), t.vertexCount = 5, c = 0; c < 5; c++) l = this.shapeGuide["backVert" + [c]], t.vertices[c] = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale);
                    for (this.backShape = this.copterBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.ADD, this.backShape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.backShape, this.contactCopterResultHandler), l = this.shapeGuide.magnetShape, p.linearDamping = 0, t.filter = new s.fT, t.filter.categoryBits = this.zeroFilter.categoryBits, t.filter.maskBits = this.zeroFilter.maskBits, p.angularDamping = 1, p.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), this.magnetBody = this._session.m_world.CreateBody(p), this.paintVector.push(this.magnetBody), t.SetAsBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale), this.magnetShape = this.magnetBody.CreateShape(t), this.magnetBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.magnetShape, this.magnetContactResult), p.angularDamping = 0, this.cameraSecondFocus = this.magnetBody, t.filter = this.defaultFilter, l = this.shapeGuide.leg1Shape, u = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m = l.rotation / n.oneEightyOverPI, t.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, u, m), this.leg1Shape = this.copterBody.CreateShape(t), l = this.shapeGuide.leg2Shape, u = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m = l.rotation / n.oneEightyOverPI, t.SetAsOrientedBox(l.scaleX * this.shapeRefScale / this.character_scale, l.scaleY * this.shapeRefScale / this.character_scale, u, m), this.leg2Shape = this.copterBody.CreateShape(t), i.density = 3, i.friction = 0, i.restitution = .3, i.filter = this.zeroFilter, l = this.shapeGuide.wheel1Shape, i.radius = .5 * l.width / this.character_scale, i.localPosition = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), this.wheel1Shape = this.copterBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.ADD, this.wheel1Shape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.wheel1Shape, this.contactResultHandler), l = this.shapeGuide.wheel2Shape, i.radius = .5 * l.width / this.character_scale, i.localPosition = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), this.wheel2Shape = this.copterBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.ADD, this.wheel2Shape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.wheel2Shape, this.contactResultHandler), this.copterBody.SetMassFromShapes(), t.vertexCount = 4, t.density = 0, t.isSensor = true, c = 0; c < 4; c++) l = this.shapeGuide["magnetVert" + [c]], t.vertices[c] = new s._m(l.x / this.character_scale, l.y / this.character_scale);
                    for (this.magnetRangeSensor = this.magnetBody.CreateShape(t), this.magnetBody.SetMassFromShapes(), this.magnetBody.DestroyShape(this.magnetRangeSensor), this.vertsBrokenCopter = [], c = 0; c < 7; c++) {
                        for (var f = [], y = 0; y < 6; y++) (l = this.shapeGuide["broken_" + (c + 1) + "_" + (y + 1)]) && f.push(new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale));
                        this.vertsBrokenCopter.push(f);
                    }
                    for (this.COMArray = [this.copterBody, this.head1Body, this.chestBody, this.pelvisBody, this.upperArm1Body, this.lowerArm1Body, this.upperArm2Body, this.lowerArm2Body, this.upperLeg1Body, this.lowerLeg1Body, this.upperLeg2Body, this.lowerLeg2Body], this.vertsBrokenCopter = [], c = 1; c < 8; c++) {
                        for (f = [], y = 0; y < 4; y++) (l = this.shapeGuide["broken" + c + "Vert" + y]) && f.push(new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale));
                        this.vertsBrokenCopter.push(f);
                    }
                    this.heliLoop = o.ij.instance.playAreaSoundLoop("HeliLoop", this.copterBody, 0), this.heliLoop.fadeTo(.5, 1);
                }, c.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    i = -10 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 10 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s.tu;
                    n.maxMotorTorque = this.maxTorque, n.enableLimit = false, n.lowerAngle = 0, n.upperAngle = 0;
                    var a = new s._m, h = this.shapeGuide.seatAnchor;
                    a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.copterBody, this.pelvisBody, a), this.copterPelvis = this._session.m_world.CreateJoint(n), h = this.shapeGuide.handleAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.copterBody, this.lowerArm1Body, a), this.copterHand1 = this._session.m_world.CreateJoint(n), n.Initialize(this.copterBody, this.lowerArm2Body, a), this.copterHand2 = this._session.m_world.CreateJoint(n);
                    var l = this.getCenterOfMass();
                    this.magnetBody.SetXForm(new s._m(l.x, this.magnetBody.GetWorldCenter().y), 0), this.COMArray.push(this.magnetBody), h = this.shapeGuide.magnetAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), a.x = l.x;
                    var c = this.magnetBody.GetWorldCenter();
                    c.y -= 20 / this.character_scale, this.copterAnchorPoint = this.copterBody.GetLocalPoint(a), this.magnetAnchorPoint = this.magnetBody.GetLocalPoint(c);
                    var d = new s.wy;
                    d.Initialize(this.copterBody, this.magnetBody, a, c), d.collideConnected = true, this.magnetJoint1 = this._session.m_world.CreateJoint(d), d.localAnchor1.x -= 84 / this.character_scale, d.localAnchor2.x -= 84 / this.character_scale, this.magnetJoint2 = this._session.m_world.CreateJoint(d), this._session.m_world.DestroyJoint(this.magnetJoint2), this.ropeMinLength = this.magnetJoint1.m_maxLength, this.ropeSprings = [], this.ropePoints = [];
                    var p, u = a.Copy(), m = c.Copy(), f = (m.x - u.x) / this.numRopeSegments, y = (m.y - u.y) / this.numRopeSegments, v = new R(u, true);
                    this.ropePoints.push(v);
                    for (var g = 0; g < this.numRopeSegments; g++) {
                        p = g < this.numRopeSegments - 1 ? new R(new s._m(u.x + f * (g + 1), u.y + y * (g + 1)), false) : new R(m, true), this.ropePoints.push(p);
                        var S = new D(v, p);
                        this.ropeSprings.push(S), v = p;
                    }
                    this.resizeRope();
                }, c.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this._session.containerSprite.addChildAt(this.pelvisMC, this._session.containerSprite.getChildIndex(this.chestMC));
                    var t = this.sourceObject.copterShards;
                    this._session.particleController.createBMDArray("copterShards", t), this.copterMC = this.sourceObject.copter, this.copterMC.scaleX = this.copterMC.scaleY = 1 / this.mc_scale, this.copterFrontMC = this.sourceObject.copterFront, this.copterFrontMC.scaleX = this.copterFrontMC.scaleY = 1 / this.mc_scale, this.magnetMC = this.sourceObject.magnet, this.magnetMC.lights.visible = false, this.magnetMC.scaleX = this.magnetMC.scaleY = 1 / this.mc_scale, this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false;
                    var i, r = this.copterBody.GetLocalCenter();
                    r = new s._m((this._startX - r.x) * this.character_scale, (this._startY - r.y) * this.character_scale), this.copterMC.inner.x = this.copterFrontMC.inner.x = r.x, this.copterMC.inner.y = this.copterFrontMC.inner.y = r.y, this.copterBody.SetUserData(this.copterMC), this.magnetBody.SetUserData(this.magnetMC), this.ropeSprite = new a.jy, this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.magnetMC, this._session.containerSprite.getChildIndex(this.head1MC)), this._session.containerSprite.addChildAt(this.ropeSprite, this._session.containerSprite.getChildIndex(this.head1MC)), this._session.containerSprite.addChildAt(this.copterMC, this._session.containerSprite.getChildIndex(this.head1MC)), this._session.containerSprite.addChildAt(this.copterFrontMC, this._session.containerSprite.getChildIndex(this.upperArm1MC)), this.copterMC.inner.propeller.play(), this.copterMC.inner.brokenPropeller.visible = false, this.brokenCopterMCs = [];
                    for (var o = 1; o < 8; o++) (i = this.sourceObject["broken" + o]).scaleX = i.scaleY = 1 / this.mc_scale, i.visible = false, this.brokenCopterMCs.push(i), this._session.containerSprite.addChild(i);
                }, c.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.helmetMC.visible = false, this.head1MC.helmet.visible = true, this.copterFrontMC.inner.leg1.visible = true, this.copterFrontMC.inner.leg2.visible = true, this.copterFrontMC.visible = true, this.copterMC.visible = true, this.copterMC.inner.propeller.visible = true, this.copterMC.inner.brokenPropeller.visible = false;
                    for (var t = 0; t < 7; t++) this.brokenCopterMCs[t].visible = false;
                    this.copterBody.SetUserData(this.copterMC), this.magnetBody.SetUserData(this.magnetMC), this.magnetMC.gotoAndStop(1), this.magnetMC.lights.visible = false, this.ropeSprite.graphics.clear();
                    var i = this.sourceObject.copterShards;
                    this._session.particleController.createBMDArray("copterShards", i);
                }, c.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit), this.contactImpulseDict.set(this.backShape, this.copterSmashLimit), this.contactImpulseDict.set(this.bladeShape, this.bladeSmashLimit), this.contactImpulseDict.set(this.wheel1Shape, this.copterSmashLimit), this.contactImpulseDict.set(this.wheel2Shape, this.copterSmashLimit), this.contactAddSounds.set(this.wheel1Shape, "CarTire1"), this.contactAddSounds.set(this.wheel2Shape, "CarTire1"), this.contactAddSounds.set(this.backShape, "BikeHit3"), this.contactAddSounds.set(this.baseShape, "BikeHit1");
                }, c.handleContactResults = function () {
                    var t;
                    this.contactResultBuffer.get(this.helmetShape) && (t = this.contactResultBuffer.get(this.helmetShape), this.helmetSmash(t.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), e.prototype.handleContactResults.call(this), this.handleBladeContacts(), this.contactResultBuffer.get(this.backShape) && (t = this.contactResultBuffer.get(this.backShape), this.copterSmash(t), this.contactResultBuffer.delete(this.backShape), this.contactAddBuffer.delete(this.backShape), this.contactAddBuffer.delete(this.baseShape), this.contactAddBuffer.delete(this.wheel1Shape), this.contactAddBuffer.delete(this.wheel2Shape), this.contactResultBuffer.delete(this.bladeShape), this.contactResultBuffer.delete(this.wheel1Shape), this.contactResultBuffer.delete(this.wheel2Shape)), this.contactResultBuffer.get(this.bladeShape) && (t = this.contactResultBuffer.get(this.bladeShape), this.bladeSmash(t), this.contactResultBuffer.delete(this.bladeShape)), this.contactResultBuffer.get(this.wheel1Shape) && (t = this.contactResultBuffer.get(this.wheel1Shape), this.copterLegSmash(this.wheel1Shape, t), this.contactResultBuffer.delete(this.wheel1Shape), this.contactAddBuffer.delete(this.wheel1Shape)), this.contactResultBuffer.get(this.wheel2Shape) && (t = this.contactResultBuffer.get(this.wheel2Shape), this.copterLegSmash(this.wheel2Shape, t), this.contactResultBuffer.delete(this.wheel2Shape), this.contactAddBuffer.delete(this.wheel2Shape)), this.handleMagnetContacts();
                    for (var i = 0; i < this.bladeActions.length; i++) this.bladeActions[i].actions();
                }, c.handleMagnetContacts = function () {
                    if (this.magnetized) {
                        var e = this.magnetContactArray.length;
                        if (e > 0) for (var t = new Map, i = this.magnetBody.GetJointList(); i; i = i.next) (f = i.joint) instanceof s.M && t.set(f.m_body2, f);
                        var r = new s.Cc;
                        this.magnetRangeSensor.ComputeAABB(r, this.magnetBody.m_xf);
                        for (var o = 0; o < e; o++) {
                            var n = this.magnetContactArray[o], a = n.otherShape, h = a.GetBody();
                            if (null != h) {
                                var l = n.position, c = h.GetMass(), d = new s.Cc;
                                if (a.ComputeAABB(d, h.m_xf), !(d.lowerBound.x > r.upperBound.x || d.upperBound.x < r.lowerBound.x || d.lowerBound.y > r.upperBound.y || d.upperBound.y < r.lowerBound.y)) {
                                    var p = this.COMArray.indexOf(h);
                                    if (this.magnetBody.GetLocalPoint(l).y > 0 && c > 0 && p < 0 && !t.get(h)) {
                                        var u = new s.tu;
                                        u.collideConnected = true, u.enableLimit = true, u.upperAngle = 3 * Math.PI / 180, u.lowerAngle = -3 * Math.PI / 180, u.Initialize(this.magnetBody, h, l), this._session.m_world.CreateJoint(u);
                                    }
                                }
                            }
                        }
                    } else {
                        var m = [];
                        for (i = this.magnetBody.GetJointList(); i; i = i.next) {
                            var f;
                            (f = i.joint) != this.magnetJoint1 && f != this.magnetJoint2 && m.push(f);
                        }
                        for (e = m.length, o = 0; o < e; o++) f = m[o], this._session.m_world.DestroyJoint(f);
                    }
                    this.magnetContactArray = [], this.magnetShapeArray = [];
                }, c.handleBladeContacts = function () {
                    if (!this.bladeSmashed) {
                        for (var e = this.bladeContactArray.length, t = 0; t < e; t++) {
                            var i = this.bladeContactArray[t], r = i.otherShape, n = r.GetBody(), h = i.position, l = n.GetMass(), c = this.copterBody.GetLocalPoint(h), d = new s._m(c.x - this.bladeLocalCenter.x, c.y - this.bladeLocalCenter.y);
                            if (d.Normalize(), d.MulM(this.copterBody.m_xf.R), l > 0) {
                                var p = n.m_invMass + this.copterBody.m_invMass, u = 3 * n.m_invMass / p, m = 3 * this.copterBody.m_invMass / p, f = new s._m(d.x * u, d.y * u), y = new s._m(d.x * m, d.y * m);
                                if (n.ApplyImpulse(f, h), this.copterBody.ApplyImpulse(y.Negative(), h), 7 & r.m_material) {
                                    var v = String(h.x);
                                    if ((0, a.e$)(v.charAt(v.length - 1)) < 7) {
                                        var g = "BladeFlesh" + Math.ceil(3 * Math.random());
                                        o.ij.instance.playAreaSoundInstance(g, n);
                                    } else this.bladeImpactSound || (g = "MetalRicochet" + Math.ceil(3 * Math.random()), this.bladeImpactSound = o.ij.instance.playAreaSoundInstance(g, n), this.session.particleController.createSparkBurstPoint(h, new s._m(5 * f.x, 5 * f.y), 5, 50, 20));
                                } else this.bladeImpactSound || (g = "MetalRicochet" + Math.ceil(3 * Math.random()), this.bladeImpactSound = o.ij.instance.playAreaSoundInstance(g, n), this.session.particleController.createSparkBurstPoint(h, new s._m(5 * f.x, 5 * f.y), 5, 50, 20));
                            } else {
                                var S = new s._m(3 * d.x, 3 * d.y);
                                this.copterBody.ApplyImpulse(S.Negative(), h), this.bladeImpactSound || (g = "MetalRicochet" + Math.ceil(3 * Math.random()), this.bladeImpactSound = o.ij.instance.playAreaSoundInstance(g, this.copterBody, .4), this.session.particleController.createSparkBurstPoint(h, new s._m(5 * S.x, 5 * S.y), 5, 50, 20));
                            }
                        }
                        this.bladeContactArray = [];
                    }
                }, c.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        this.copterPelvis && (e.DestroyJoint(this.copterPelvis), this.copterPelvis = null), this.copterHand1 && (e.DestroyJoint(this.copterHand1), this.copterHand1 = null), this.copterHand2 && (e.DestroyJoint(this.copterHand2), this.copterHand2 = null);
                        for (var t = this.copterBody.GetShapeList(); t; t = t.m_next) t != this.bladeShape && (t.SetFilterData(this.zeroFilter), e.Refilter(t));
                        this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                        var i = this.copterBody.GetAngle(), r = Math.cos(i) * this.ejectImpulse, o = Math.sin(i) * this.ejectImpulse;
                        this.chestBody.ApplyImpulse(new s._m(r, o), this.chestBody.GetWorldCenter()), this.pelvisBody.ApplyImpulse(new s._m(r, o), this.pelvisBody.GetWorldCenter()), this.COMArray = [this.copterBody, this.magnetBody], this.targetAng = 0, this._session.camera.removeSecondFocus();
                    }
                }, c.grabAction = function (t, i, s) {
                    i != this.bladeShape && e.prototype.grabAction.call(this, t, i, s);
                }, c.getCenterOfMass = function () {
                    var e = new s._m;
                    this.totalMass = 0;
                    for (var t = this.COMArray.length, i = 0; i < t; i++) {
                        var r = this.COMArray[i], o = r.GetWorldCenter(), n = r.GetMass();
                        e.x += o.x * n, e.y += o.y * n, this.totalMass += n;
                    }
                    return e.Multiply(1 / this.totalMass), e;
                }, c.removeFromCOMArray = function (e) {
                    var t = this.COMArray.indexOf(e);
                    t > -1 && this.COMArray.splice(t, 1);
                }, c.copterSmash = function (e) {
                    this.contactImpulseDict.delete(this.backShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.backShape), t.deleteListener(r.$S.RESULT, this.baseShape), t.deleteListener(r.$S.RESULT, this.wheel1Shape), t.deleteListener(r.$S.RESULT, this.wheel2Shape), t.deleteListener(r.$S.ADD, this.backShape), t.deleteListener(r.$S.ADD, this.baseShape), t.deleteListener(r.$S.ADD, this.wheel1Shape), t.deleteListener(r.$S.ADD, this.wheel2Shape), this.copterSmashed = true, this.bladeSmashed || this.bladeSmash(e), 1 == this.copterFrontMC.inner.leg1.visible && this.copterLegSmash(this.wheel1Shape, e, false), 1 == this.copterFrontMC.inner.leg2.visible && this.copterLegSmash(this.wheel2Shape, e, false);
                    var i = this.copterBody.GetLocalCenter();
                    this.eject();
                    var n = this._session.m_world, a = this.copterBody.GetPosition(), h = this.copterBody.GetAngle(), l = (this.copterBody.GetLinearVelocity(), this.copterBody.GetAngularVelocity());
                    n.DestroyBody(this.copterBody), this.copterMC.visible = this.copterFrontMC.visible = false;
                    var c = new s.Oi;
                    c.position = a, c.angle = h;
                    var d = new s.Vb;
                    d.density = 3, d.friction = .3, d.restitution = .3, d.filter = this.zeroFilter;
                    for (var p = 0; p < 5; p++) {
                        var u = n.CreateBody(c), m = this.vertsBrokenCopter[p], f = this.brokenCopterMCs[p];
                        d.vertexCount = m.length, d.vertices = m, u.CreateShape(d), u.SetMassFromShapes(), u.SetAngularVelocity(l), u.SetLinearVelocity(this.copterBody.GetLinearVelocityFromLocalPoint(u.GetLocalCenter())), u.SetUserData(f), f.visible = true, this.paintVector.push(u);
                    }
                    this.ropePoints[0].fixed = false, i = this.copterBody.GetWorldCenter(), this._session.particleController.createPointBurst("copterShards", i.x * this.m_physScale, i.y * this.m_physScale, 30, 30, 70), o.ij.instance.playAreaSoundInstance("MetalSmashHeavy2", this.copterBody);
                }, c.bladeSmash = function (e) {
                    this.contactImpulseDict.delete(this.bladeShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.bladeShape), this.bladeSmashed = true;
                    var t = this.copterBody.GetLocalPoint(e.position);
                    t.Subtract(this.bladeLocalCenter);
                    var i = 20 / this.character_scale, n = -5 / this.character_scale, a = 5 / this.character_scale, h = 235 / this.character_scale;
                    if (t.x < 0) var l = false, c = -200 / this.character_scale, d = -35 / this.character_scale; else l = true, c = 35 / this.character_scale, d = 200 / this.character_scale, h = -h;
                    var p, u, m = new s._m(c, n), f = new s._m(d, n), y = new s._m(d, a), v = new s._m(c, a), g = new s._m(0, 0);
                    t.x < c + i ? (g.x = d - i, u = [g, v, m], t.y > 0 ? (g.y = n, p = [g, f, y, v]) : (g.y = a, p = [g, m, f, y])) : t.x > d - i ? (g.x = c + i, u = [g, f, y], t.y > 0 ? (g.y = n, p = [g, y, v, m]) : (g.y = a, p = [g, v, m, f])) : (g.x = t.x, u = [g, f, y], t.y > 0 ? (g.y = a, p = [g, v, m, f]) : (g.y = n, p = [g, y, v, m])), this.bladeShards = [];
                    var S = new s.Oi;
                    S.position = this.copterBody.GetWorldPoint(this.bladeLocalCenter), S.angle = this.copterBody.GetAngle();
                    var _ = new s.Vb;
                    _.density = 3, _.friction = .3, _.restitution = .1, _.filter = this.zeroFilter;
                    for (var w = 0; w < 2; w++) {
                        1 == w && (m.x += h, f.x += h, y.x += h, v.x += h, g.x += h, l = !l);
                        var b = this._session.m_world.CreateBody(S);
                        _.vertexCount = 4, _.vertices = p, b.CreateShape(_), b.SetMassFromShapes();
                        var C = b.GetWorldCenter(), L = this.copterBody.GetLinearVelocityFromWorldPoint(C), B = new s._m(C.x - b.GetPosition().x, C.y - b.GetPosition().y);
                        B.Multiply(50), L.Add(B), b.SetLinearVelocity(L);
                        var A = new O(b, l, this);
                        this.bladeShards.push(A), _.vertexCount = 3, _.vertices = u, (b = this._session.m_world.CreateBody(S)).CreateShape(_), b.SetMassFromShapes(), L = this.copterBody.GetLinearVelocityFromWorldPoint(b.GetWorldCenter()), (B = new s._m(C.x - b.GetPosition().x, C.y - b.GetPosition().y)).Multiply(50), L.Add(B), b.SetLinearVelocity(L), A = new O(b, l, this), this.bladeShards.push(A);
                    }
                    C = this.copterBody.GetWorldPoint(this.bladeLocalCenter), this._session.particleController.createPointBurst("copterShards", C.x * this.m_physScale, C.y * this.m_physScale, 30, 60, 70), this.copterBody.DestroyShape(this.bladeShape), this.copterMC.inner.propeller.visible = false, this.copterMC.inner.brokenPropeller.visible = true, this.heliLoop.stopSound(), this.heliLoop = null, o.ij.instance.playAreaSoundInstance("MetalSmashHeavy4", this.copterBody), this.addVocals("Help", 4);
                }, c.copterLegSmash = function (e, t, i) {
                    void 0 === i && (i = true), this.contactImpulseDict.delete(e), this._session.contactListener.deleteListener(r.$S.RESULT, e), this._session.contactListener.deleteListener(r.$S.ADD, e);
                    var n = this._session.m_world, a = this.copterBody.GetPosition(), h = this.copterBody.GetAngle(), l = (this.copterBody.GetLinearVelocity(), this.copterBody.GetAngularVelocity()), c = new s.Oi;
                    c.position = a, c.angle = h;
                    var d = new s.Vb;
                    if (d.density = 3, d.friction = .3, d.restitution = .3, d.filter = this.zeroFilter, e == this.wheel1Shape) {
                        var p = 5;
                        this.copterFrontMC.inner.leg1.visible = false, this.copterBody.DestroyShape(this.leg1Shape);
                    } else p = 6, this.copterFrontMC.inner.leg2.visible = false, this.copterBody.DestroyShape(this.leg2Shape);
                    var u = n.CreateBody(c), m = this.vertsBrokenCopter[p], f = this.brokenCopterMCs[p];
                    d.vertexCount = m.length, d.vertices = m, u.CreateShape(d), u.SetMassFromShapes(), u.SetAngularVelocity(l), u.SetLinearVelocity(this.copterBody.GetLinearVelocityFromLocalPoint(u.GetLocalCenter())), u.SetUserData(f), f.visible = true, this.paintVector.push(u), this.copterBody.DestroyShape(e), i && o.ij.instance.playAreaSoundInstance("StemSnap", this.copterBody);
                }, c.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null, this.helmetOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, c.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, c.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, c.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, c.checkEject = function () {
                    this.copterHand1 || this.copterHand2 || this.eject();
                }, c.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperArm1Body), this.removeFromCOMArray(this.lowerArm1Body), this.upperArm3Body && this.COMArray.push(this.upperArm3Body), this.copterHand1 && (this._session.m_world.DestroyJoint(this.copterHand1), this.copterHand1 = null, this.checkEject()));
                }, c.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperArm2Body), this.removeFromCOMArray(this.lowerArm2Body), this.upperArm4Body && this.COMArray.push(this.upperArm4Body), this.copterHand2 && (this._session.m_world.DestroyJoint(this.copterHand2), this.copterHand2 = null, this.checkEject()));
                }, c.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerArm1Body), this.copterHand1 && (this._session.m_world.DestroyJoint(this.copterHand1), this.copterHand1 = null, this.checkEject()));
                }, c.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerArm2Body), this.copterHand2 && (this._session.m_world.DestroyJoint(this.copterHand2), this.copterHand2 = null, this.checkEject()));
                }, c.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperLeg1Body), this.removeFromCOMArray(this.lowerLeg1Body), this.upperLeg3Body && this.COMArray.push(this.upperLeg3Body));
                }, c.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperLeg2Body), this.removeFromCOMArray(this.lowerLeg2Body), this.upperLeg4Body && this.COMArray.push(this.upperLeg4Body));
                }, c.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || this.removeFromCOMArray(this.lowerLeg1Body);
                }, c.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || this.removeFromCOMArray(this.lowerLeg2Body);
                }, c.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 10), this.setJoint(this.elbowJoint1, 2, 5), this.setJoint(this.elbowJoint2, 2, 5);
                }, c.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, .4, 10), this.setJoint(this.elbowJoint1, .5, 5), this.setJoint(this.elbowJoint2, .5, 5);
                }, c.lungePoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 0, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 2, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, c.lungePoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 0, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 2, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, h = n, (l = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.targetAng = 0, this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), n;
            }(d), R = function () {
                function e(e, t) {
                    this.currPos = new s._m(e.x, e.y), this.prevPos = new s._m(e.x, e.y), this.mass = t ? 0 : 1, this.invMass = t ? 0 : 1 / this.mass;
                }
                var t, i, r = e.prototype;
                return r.step = function () {
                    if (this.mass > 0) {
                        var t = new s._m(this.currPos.x - this.prevPos.x, this.currPos.y - this.prevPos.y);
                        this.prevPos.Set(this.currPos.x, this.currPos.y), this.currPos.x += t.x, this.currPos.y += t.y + Number(e.gravityIncrement) / 30;
                    }
                }, r.setPosition = function (e) {
                    this.currPos.Set(e.x, e.y), this.prevPos.Set(e.x, e.y);
                }, t = e, (i = [{
                    key: "fixed", set: function (e) {
                        this.mass = e ? 0 : 1, this.invMass = e ? 0 : 1 / this.mass;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
            R.gravityIncrement = .3333333333333333;
            var D = function () {
                function e(e, t) {
                    this.p1 = e, this.p2 = t, this.length = s.Yt.b2Distance(e.currPos, t.currPos);
                }
                return e.prototype.resolve = function () {
                    var e = new s._m(this.p2.currPos.x - this.p1.currPos.x, this.p2.currPos.y - this.p1.currPos.y), t = Math.sqrt(e.x * e.x + e.y * e.y), i = (t - this.length) / t, r = e.Copy();
                    r.Multiply(i);
                    var o = this.p1.invMass + this.p2.invMass, n = r.Copy();
                    n.Multiply(this.p1.invMass / o), this.p1.currPos.Add(n), (n = r.Copy()).Multiply(this.p2.invMass / o), this.p2.currPos.Subtract(n);
                }, e;
            }();
            function I(e, t) {
                return (I = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            function j(e, t) {
                return (j = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var F = function (e) {
                var t, i;
                function r(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o) || this).reAttaching = function () {
                        var e = 0, t = n._session.m_world;
                        if (n.frameHand1 || n.elbowJoint1.broken || n.shoulderJoint1.broken) e += 1; else {
                            var i = n.lowerArm1Body.GetWorldPoint(new s._m(0, n.lowerArm1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint);
                            Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand1 = t.CreateJoint(n.frameHand1JointDef), n.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                        }
                        n.frameHand2 || n.elbowJoint2.broken || n.shoulderJoint2.broken ? e += 1 : (i = n.lowerArm2Body.GetWorldPoint(new s._m(0, n.lowerArm2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand2 = t.CreateJoint(n.frameHand2JointDef), n.lowerArm2MC.hand.gotoAndStop(1), e += 1));
                        var o = n.hipJoint1.GetJointAngle(), a = n.hipJoint2.GetJointAngle(), h = !(!(o < -0.87 || n.hipJoint1.broken) || !(a < -0.87 || n.hipJoint2.broken));
                        if (n.framePelvis) e += 1; else if (i = n.pelvisBody.GetPosition(), r = n.frameBody.GetWorldPoint(n.pelvisAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && h) {
                            n.framePelvis = t.CreateJoint(n.framePelvisJointDef);
                            var l = n.upperLeg1Body.GetShapeList();
                            l.m_isSensor = true, t.Refilter(l), (l = n.upperLeg2Body.GetShapeList()).m_isSensor = true, t.Refilter(l), e += 1, n.girl.actionsVector.push(n.girl.reAttaching);
                        }
                        n.framePelvis && (n.frameFoot1 || n.kneeJoint1.broken || n.hipJoint1.broken ? e += 1 : (i = n.lowerLeg1Body.GetWorldPoint(new s._m(0, n.lowerLeg1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameFoot1 = t.CreateJoint(n.frameFoot1JointDef), e += 1)), n.frameFoot2 || n.kneeJoint2.broken || n.hipJoint2.broken ? e += 1 : (i = n.lowerLeg2Body.GetWorldPoint(new s._m(0, n.lowerLeg2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameFoot2 = t.CreateJoint(n.frameFoot2JointDef), e += 1))), e >= 5 && n.removeAction(n.reAttaching);
                    }, n.girl = new G(t, i, r.girl, o, -2, "Char9", function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(n)), n;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, j(t, i);
                var o, n, h = r.prototype;
                return h.checkKeyStates = function () {
                    e.prototype.checkKeyStates.call(this), this.girl.dead || (this.girl.userVehicle ? this.girl.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? this.girl.leftAndRightActions() : this.girl.leftPressedActions() : this.rightPressed ? this.girl.rightPressedActions() : this.girl.leftAndRightActions(), this.upPressed ? this.downPressed ? this.girl.upAndDownActions() : this.girl.upPressedActions() : this.downPressed ? this.girl.downPressedActions() : this.girl.upAndDownActions(), this.spacePressed ? this.girl.spacePressedActions() : this.girl.spaceNullActions(), this.shiftPressed ? this.girl.shiftPressedActions() : this.girl.shiftNullActions(), this.ctrlPressed ? this.girl.ctrlPressedActions() : this.girl.ctrlNullActions(), this.zPressed ? this.girl.zPressedActions() : this.girl.zNullActions()));
                }, h.checkReplayData = function (t, i) {
                    e.prototype.checkReplayData.call(this, t, i), this.girl.dead || (this.girl.userVehicle ? this.girl.userVehicle.operateReplayData(this._session.iteration, i) : ("1" == i.charAt(0) ? "1" == i.charAt(1) ? this.girl.leftAndRightActions() : this.girl.leftPressedActions() : "1" == i.charAt(1) ? this.girl.rightPressedActions() : this.girl.leftAndRightActions(), "1" == i.charAt(2) ? "1" == i.charAt(3) ? this.girl.upAndDownActions() : this.girl.upPressedActions() : "1" == i.charAt(3) ? this.girl.downPressedActions() : this.girl.upAndDownActions(), "1" == i.charAt(4) ? this.girl.spacePressedActions() : this.girl.spaceNullActions(), "1" == i.charAt(5) ? this.girl.shiftPressedActions() : this.girl.shiftNullActions(), "1" == i.charAt(6) ? this.girl.ctrlPressedActions() : this.girl.ctrlNullActions(), "1" == i.charAt(7) ? this.girl.zPressedActions() : this.girl.zNullActions()));
                }, h.switchCamera = function () {
                    this._session.camera.focus == this.cameraFocus ? this._session.camera.focus = this.girl.cameraFocus : this._session.camera.focus = this.cameraFocus;
                }, h.shiftPressedActions = function () {
                    this.girl.eject();
                }, h.actions = function () {
                    e.prototype.actions.call(this), this.girl.actions();
                }, h.create = function () {
                    this.createFilters(), this.createBodies(), this.createJoints(), this.createMovieClips(), this.setLimits(), this.createDictionaries(), this.girl.create(), this.dispatchEvent(new a.ju(a.ju.COMPLETE));
                }, h.reset = function () {
                    e.prototype.reset.call(this), this.girl.reset();
                }, h.die = function () {
                    e.prototype.die.call(this), this.girl.die();
                }, h.paint = function () {
                    e.prototype.paint.call(this), this.girl.paint();
                }, h.handleContactBuffer = function () {
                    e.prototype.handleContactBuffer.call(this), this.girl.handleContactBuffer();
                }, h.checkJoints = function () {
                    e.prototype.checkJoints.call(this), this.girl.checkJoints();
                }, h.eject = function () {
                    this.ejected && this.girl.releaseGuy(), e.prototype.eject.call(this);
                }, h.frameSmash = function (t, i) {
                    e.prototype.frameSmash.call(this, t, i), this.girl.eject();
                }, h.mourn = function () { }, o = r, (n = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e, this.girl && (this.girl.session = this._session);
                    }
                }, {
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.girl.mourn(), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), r;
            }(function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o, -1, "Char8") || this).wheelMaxSpeed = 30, n.wheelContacts = 0, n.backContacts = 0, n.frontContacts = 0, n.accelStep = .5, n.maxTorque = 30, n.prevSpeed = 0, n.currSpeed = 0, n.impulseMagnitude = .75, n.impulseOffset = 1, n.maxSpinAV = 5, n.boostVal = 0, n.boostMax = 50, n.boostStepUp = 2, n.boostStepDown = .5, n.boostImpulse = 4, n.frameSmashLimit = 200, n.wheelSmashLimit = 200, n.reAttachDistance = .25, n.contactFrameResultHandler = function (e) {
                        var t = e.impulse;
                        t > n.contactImpulseDict.get(n.tankShape) && (n.contactResultBuffer.get(n.tankShape) ? t > n.contactResultBuffer.get(n.tankShape).impulse && n.contactResultBuffer.set(n.tankShape, e) : n.contactResultBuffer.set(n.tankShape, e));
                    }, n.handleContactResults = function () {
                        var t;
                        e.prototype.handleContactResults.call(function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(n)), n.contactResultBuffer.get(n.tankShape) && (t = n.contactResultBuffer.get(n.tankShape), n.frameSmash(t.impulse, t.normal), n.contactResultBuffer.delete(n.tankShape), n.contactAddBuffer.delete(n.tankShape), n.contactAddBuffer.delete(n.forkShape), n.contactAddBuffer.delete(n.engineShape), n.contactAddBuffer.delete(n.rearShape)), n.contactResultBuffer.get(n.frontWheelShape) && (t = n.contactResultBuffer.get(n.frontWheelShape), n.frontWheelSmash(t.impulse, t.normal), n.contactResultBuffer.delete(n.frontWheelShape), n.contactAddBuffer.delete(n.frontWheelShape)), n.contactResultBuffer.get(n.backWheelShape) && (t = n.contactResultBuffer.get(n.backWheelShape), n.backWheelSmash(t.impulse, t.normal), n.contactResultBuffer.delete(n.backWheelShape), n.contactAddBuffer.delete(n.backWheelShape));
                    }, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            e.shape1 == n.frontWheelShape ? n.frontContacts += 1 : n.backContacts += 1, n.wheelContacts = n.frontContacts + n.backContacts;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, "hit");
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (e.shape1 == n.frontWheelShape ? n.frontContacts -= 1 : n.backContacts -= 1, n.wheelContacts = n.frontContacts + n.backContacts);
                    }, n.reAttaching = function () {
                        var e = 0, t = n._session.m_world;
                        if (n.frameHand1 || n.elbowJoint1.broken || n.shoulderJoint1.broken) e += 1; else {
                            var i = n.lowerArm1Body.GetWorldPoint(new s._m(0, n.lowerArm1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint);
                            Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand1 = t.CreateJoint(n.frameHand1JointDef), n.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                        }
                        n.frameHand2 || n.elbowJoint2.broken || n.shoulderJoint2.broken ? e += 1 : (i = n.lowerArm2Body.GetWorldPoint(new s._m(0, n.lowerArm2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand2 = t.CreateJoint(n.frameHand2JointDef), n.lowerArm2MC.hand.gotoAndStop(1), e += 1));
                        var o = n.hipJoint1.GetJointAngle(), a = n.hipJoint2.GetJointAngle(), h = !(!(o < -0.87 || n.hipJoint1.broken) || !(a < -0.87 || n.hipJoint2.broken));
                        if (n.framePelvis) e += 1; else if (i = n.pelvisBody.GetPosition(), r = n.frameBody.GetWorldPoint(n.pelvisAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && h) {
                            n.framePelvis = t.CreateJoint(n.framePelvisJointDef);
                            var l = n.upperLeg1Body.GetShapeList();
                            l.m_isSensor = true, t.Refilter(l), (l = n.upperLeg2Body.GetShapeList()).m_isSensor = true, t.Refilter(l), e += 1;
                        }
                        n.framePelvis && (n.frameFoot1 || n.kneeJoint1.broken || n.hipJoint1.broken ? e += 1 : (i = n.lowerLeg1Body.GetWorldPoint(new s._m(0, n.lowerLeg1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameFoot1 = t.CreateJoint(n.frameFoot1JointDef), e += 1)), n.frameFoot2 || n.kneeJoint2.broken || n.hipJoint2.broken ? e += 1 : (i = n.lowerLeg2Body.GetWorldPoint(new s._m(0, n.lowerLeg2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameFoot2 = t.CreateJoint(n.frameFoot2JointDef), e += 1))), e >= 5 && n.removeAction(n.reAttaching);
                    }, n.impulseMagnitude = n._session.version > 1.2 ? 1 : .75, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, I(t, i);
                var c, d, p = n.prototype;
                return p.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.frameBody.GetAngle(), t = Math.cos(e) * this.impulseMagnitude, i = Math.sin(e) * this.impulseMagnitude, r = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(i, -t), this.frameBody.GetWorldPoint(new s._m(r.x + this.impulseOffset, r.y)));
                    }
                }, p.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.frameBody.GetAngle(), t = Math.cos(e) * this.impulseMagnitude, i = Math.sin(e) * this.impulseMagnitude, r = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(i, -t), this.frameBody.GetWorldPoint(new s._m(r.x - this.impulseOffset, r.y)));
                    }
                }, p.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, p.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(false), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, p.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(false), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, p.upAndDownActions = function () {
                    this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.ejected ? 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0) : (this.accelSound && (this.accelSound.fadeOut(.2), this.accelSound = null), this.steadySound && (this.steadySound.fadeOut(.2), this.steadySound = null));
                }, p.spacePressedActions = function () {
                    if (this.ejected) this.startGrab(); else if (this.boostVal += this.boostStepUp, this.boostVal = Math.min(this.boostMax, this.boostVal), this.boostVal < this.boostMax) {
                        var e = this.frameBody.GetAngle(), t = Math.cos(e) * this.boostImpulse, i = Math.sin(e) * this.boostImpulse;
                        this.frameBody.ApplyImpulse(new s._m(t, i), this.frameBody.GetWorldCenter());
                    }
                }, p.spaceNullActions = function () {
                    this.ejected && this.releaseGrip(), this.boostVal -= this.boostStepDown, this.boostVal = Math.max(0, this.boostVal);
                }, p.ctrlPressedActions = function () {
                    this.ejected || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.backWheelJoint.SetMotorSpeed(0), this.frontWheelJoint.SetMotorSpeed(0));
                }, p.ctrlNullActions = function () { }, p.zPressedActions = function () {
                    this.eject();
                }, p.actions = function () {
                    if (this.boostMeter.scaleY = 1 - this.boostVal / this.boostMax, this.prevSpeed = this.currSpeed, this.currSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelContacts > 0) {
                        var t = Math.abs(this.backWheelBody.GetAngularVelocity());
                        t > 18 ? (this.wheelLoop3 || (this.wheelLoop3 = o.ij.instance.playAreaSoundLoop("BikeLoop3", this.backWheelBody, 0), this.wheelLoop3.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null)) : t > 9 ? (this.wheelLoop2 || (this.wheelLoop2 = o.ij.instance.playAreaSoundLoop("BikeLoop2", this.backWheelBody, 0), this.wheelLoop2.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : t > 1 ? (this.wheelLoop1 || (this.wheelLoop1 = o.ij.instance.playAreaSoundLoop("BikeLoop1", this.backWheelBody, 0), this.wheelLoop1.fadeIn(.2)), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : (this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null));
                    } else this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null);
                    e.prototype.actions.call(this);
                }, p.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                        case 6:
                        case 7:
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, p.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.wheelContacts = 0, this.frontContacts = 0, this.backContacts = 0, this.boostVal = 0, this.frameSmashed = false, this.impulseMagnitude = this._session.version > 1.2 ? 1 : .75;
                }, p.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.frontWheelBody.GetInterpolatedWorldCenter();
                    this.frontWheelMC.x = t.x * this.m_physScale, this.frontWheelMC.y = t.y * this.m_physScale, this.frontWheelMC.inner.rotation = this.frontWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360, this.frontWheelMC.rim.rotation = this.frameBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360, t = this.backWheelBody.GetInterpolatedWorldCenter(), this.backWheelMC.x = t.x * this.m_physScale, this.backWheelMC.y = t.y * this.m_physScale, this.backWheelMC.inner.rotation = this.backWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360;
                }, p.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.tankShape, this.frameSmashLimit), this.contactImpulseDict.set(this.frontWheelShape, this.wheelSmashLimit), this.contactImpulseDict.set(this.backWheelShape, this.wheelSmashLimit), this.contactAddSounds.set(this.backWheelShape, "TireHit1"), this.contactAddSounds.set(this.frontWheelShape, "TireHit2"), this.contactAddSounds.set(this.tankShape, "ChairHit1"), this.contactAddSounds.set(this.forkShape, "ChairHit1"), this.contactAddSounds.set(this.engineShape, "ChairHit2"), this.contactAddSounds.set(this.rearShape, "ChairHit3");
                }, p.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, a = new s.Vb, h = new s.lB;
                    a.density = 3, a.friction = .3, a.restitution = .1, a.filter.categoryBits = 513, h.density = 5, h.friction = 1, h.restitution = .3, h.filter.categoryBits = 513, this.frameBody = this._session.m_world.CreateBody(t), a.vertexCount = 3;
                    for (var l = 0; l < 3; l++) {
                        var c = this.shapeGuide["rearVert" + [l + 1]];
                        a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    }
                    for (this.rearShape = this.frameBody.CreateShape(a), a.vertexCount = 4, l = 0; l < 4; l++) c = this.shapeGuide["middleVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.middleShape = this.frameBody.CreateShape(a), a.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["engineVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.engineShape = this.frameBody.CreateShape(a), a.filter = this.zeroFilter, a.vertexCount = 4, l = 0; l < 4; l++) c = this.shapeGuide["seatVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.seatShape = this.frameBody.CreateShape(a), a.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["tankVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.tankShape = this.frameBody.CreateShape(a), a.vertexCount = 3, l = 0; l < 3; l++) c = this.shapeGuide["forkVert" + [l + 1]], a.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    this.forkShape = this.frameBody.CreateShape(a), this._session.contactListener.registerListener(r.$S.RESULT, this.rearShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.engineShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.seatShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.tankShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.forkShape, this.contactFrameResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.rearShape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.ADD, this.engineShape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.ADD, this.tankShape, this.contactAddHandler), this._session.contactListener.registerListener(r.$S.ADD, this.forkShape, this.contactAddHandler), this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody), h.filter = this.zeroFilter;
                    var d = this.shapeGuide.backWheelShape;
                    i.position.Set(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale), i.angle = d.rotation / n.oneEightyOverPI, h.radius = d.width / 2 / this.character_scale, this.backWheelBody = this._session.m_world.CreateBody(i), this.backWheelShape = this.backWheelBody.CreateShape(h), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.backWheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.backWheelShape, this.wheelContactRemove), d = this.shapeGuide.frontWheelShape, o.position.Set(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale), o.angle = d.rotation / n.oneEightyOverPI, h.radius = d.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(o), this.frontWheelShape = this.frontWheelBody.CreateShape(h), this.frontWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.frontWheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.frontWheelShape, this.wheelContactRemove);
                    var p = this.upperLeg1Body.GetShapeList();
                    p.m_isSensor = true, (p = this.upperLeg2Body.GetShapeList()).m_isSensor = true;
                }, p.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.backWheelMC = this.sourceObject.backWheel, this.backWheelMC.scaleX = this.backWheelMC.scaleY = 1 / this.mc_scale, this.frontWheelMC = this.sourceObject.frontWheel, this.frontWheelMC.scaleX = this.frontWheelMC.scaleY = 1 / this.mc_scale, this.frontWheelMC.gotoAndStop(1), this.backWheelMC.gotoAndStop(1), this.frontWheelMC.inner.broken.visible = false, this.backWheelMC.inner.broken.visible = false, this.frameBody.SetUserData(this.frameMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC);
                    var t = this.frameBody.GetLocalCenter();
                    t = new s._m((this._startX - t.x) * this.character_scale, (this._startY - t.y) * this.character_scale), this.frameMC.inner.x = t.x, this.frameMC.inner.y = t.y, this.brokenForkMC = this.sourceObject.fork, this.brokenForkMC.scaleX = this.brokenForkMC.scaleY = 1 / this.mc_scale, this.brokenForkMC.visible = false, this.brokenTankMC = this.sourceObject.tank, this.brokenTankMC.scaleX = this.brokenTankMC.scaleY = 1 / this.mc_scale, this.brokenTankMC.visible = false, this.brokenEngineMC = this.sourceObject.engine, this.brokenEngineMC.scaleX = this.brokenEngineMC.scaleY = 1 / this.mc_scale, this.brokenEngineMC.visible = false, this.brokenMiddleMC = this.sourceObject.middle, this.brokenMiddleMC.scaleX = this.brokenMiddleMC.scaleY = 1 / this.mc_scale, this.brokenMiddleMC.visible = false, this.brokenRearMC = this.sourceObject.rear, this.brokenRearMC.scaleX = this.brokenRearMC.scaleY = 1 / this.mc_scale, this.brokenRearMC.visible = false, this.brokenSeatMC = this.sourceObject.seat, this.brokenSeatMC.scaleX = this.brokenSeatMC.scaleY = 1 / this.mc_scale, this.brokenSeatMC.visible = false, this._session.containerSprite.addChildAt(this.backWheelMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frontWheelMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.frameMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenRearMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenSeatMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenEngineMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenTankMC, this._session.containerSprite.getChildIndex(this.chestMC)), this._session.containerSprite.addChildAt(this.brokenForkMC, this._session.containerSprite.getChildIndex(this.chestMC)), this.boostHolder = new a.jy, this.boostHolder.graphics.beginFill(13421772), this.boostHolder.graphics.drawRoundRect(-2, -52, 10, 54, 4, 4), this.boostHolder.graphics.endFill(), this.boostHolder.graphics.beginFill(16613761), this.boostHolder.graphics.drawRect(0, 0, 6, -50), this.boostHolder.graphics.endFill(), l.Z.hideHUD || this._session.addChild(this.boostHolder), this.boostHolder.y = 90, this.boostHolder.x = 870, this.boostMeter = new a.jy, this.boostMeter.graphics.beginFill(16776805), this.boostMeter.graphics.drawRect(0, 0, 6, -50), this.boostMeter.graphics.endFill(), this.boostHolder.addChild(this.boostMeter), this.session.particleController.createBMDArray("jetshards", this.sourceObject.metalShards);
                }, p.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frontWheelMC.gotoAndStop(1), this.backWheelMC.gotoAndStop(1), this.frameMC.visible = true, this.frontWheelMC.rim.visible = true, this.frontWheelMC.inner.broken.visible = false, this.backWheelMC.inner.broken.visible = false, this.frontWheelMC.inner.spokes.visible = true, this.backWheelMC.inner.spokes.visible = true, this.brokenForkMC.visible = false, this.brokenTankMC.visible = false, this.brokenEngineMC.visible = false, this.brokenMiddleMC.visible = false, this.brokenRearMC.visible = false, this.brokenSeatMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this._session.addChild(this.boostHolder), this.session.particleController.createBMDArray("jetshards", this.sourceObject.metalShards);
                }, p.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = n.oneEightyOverPI;
                    i = -110 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, i = -110 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, i = -90 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -90 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = -20 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 0 / o - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.tu;
                    a.maxMotorTorque = this.maxTorque;
                    var h = new s._m, l = this.shapeGuide.backWheelShape;
                    h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.backWheelBody, h), this.backWheelJoint = this._session.m_world.CreateJoint(a), l = this.shapeGuide.frontWheelShape, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.frontWheelBody, h), this.frontWheelJoint = this._session.m_world.CreateJoint(a), h.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), a.Initialize(this.frameBody, this.pelvisBody, h), this.framePelvis = this._session.m_world.CreateJoint(a), this.framePelvisJointDef = a.clone(), this.pelvisAnchorPoint = this.frameBody.GetLocalPoint(h), l = this.shapeGuide.handleAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.lowerArm1Body, h), this.frameHand1 = this._session.m_world.CreateJoint(a), this.frameHand1JointDef = a.clone(), this.handleAnchorPoint = this.frameBody.GetLocalPoint(h), a.Initialize(this.frameBody, this.lowerArm2Body, h), this.frameHand2 = this._session.m_world.CreateJoint(a), this.frameHand2JointDef = a.clone(), l = this.shapeGuide.footAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.frameBody, this.lowerLeg1Body, h), this.frameFoot1 = this._session.m_world.CreateJoint(a), this.frameFoot1JointDef = a.clone(), this.footAnchorPoint = this.frameBody.GetLocalPoint(h), a.Initialize(this.frameBody, this.lowerLeg2Body, h), this.frameFoot2 = this._session.m_world.CreateJoint(a), this.frameFoot2JointDef = a.clone();
                }, p.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.ejected = true, this.resetJointLimits();
                        var e = this.session.m_world;
                        this.framePelvis && (e.DestroyJoint(this.framePelvis), this.framePelvis = null), this.frameHand1 && (e.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (e.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.frameFoot1 && (e.DestroyJoint(this.frameFoot1), this.frameFoot1 = null), this.frameFoot2 && (e.DestroyJoint(this.frameFoot2), this.frameFoot2 = null);
                        for (var t = this.frameBody.GetShapeList(); t; t = t.m_next) t.SetFilterData(this.zeroFilter), e.Refilter(t);
                        (t = this.upperLeg1Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.upperLeg2Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.lowerLeg1Body.GetShapeList()).m_isSensor = false, e.Refilter(t), (t = this.lowerLeg2Body.GetShapeList()).m_isSensor = false, e.Refilter(t);
                    }
                }, p.frameSmash = function (e, t) {
                    this.contactImpulseDict.delete(this.tankShape);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.rearShape), i.deleteListener(r.$S.RESULT, this.engineShape), i.deleteListener(r.$S.RESULT, this.seatShape), i.deleteListener(r.$S.RESULT, this.tankShape), i.deleteListener(r.$S.RESULT, this.forkShape), i.deleteListener(r.$S.ADD, this.rearShape), i.deleteListener(r.$S.ADD, this.engineShape), i.deleteListener(r.$S.ADD, this.tankShape), i.deleteListener(r.$S.ADD, this.forkShape), this.eject(), this.frameSmashed = true;
                    var n = this._session.m_world, a = this.frameBody.GetPosition(), h = this.frameBody.GetAngle(), l = this.frameBody.GetLinearVelocity(), c = this.frameBody.GetAngularVelocity(), d = new s.Oi;
                    d.position = a, d.angle = h;
                    var p = new s.Vb;
                    p.density = 3, p.friction = .3, p.restitution = .1, p.filter = this.zeroFilter;
                    var u = n.CreateBody(d);
                    u.SetLinearVelocity(l), u.SetAngularVelocity(c);
                    var m = n.CreateBody(d);
                    m.SetLinearVelocity(l), m.SetAngularVelocity(c);
                    var f = n.CreateBody(d);
                    f.SetLinearVelocity(l), f.SetAngularVelocity(c);
                    var y = n.CreateBody(d);
                    y.SetLinearVelocity(l), y.SetAngularVelocity(c);
                    var v = n.CreateBody(d);
                    v.SetLinearVelocity(l), v.SetAngularVelocity(c);
                    var g = n.CreateBody(d);
                    g.SetLinearVelocity(l), g.SetAngularVelocity(c);
                    var S = this.rearShape.GetVertices();
                    p.vertexCount = 3, p.vertices = S, v.CreateShape(p), v.SetMassFromShapes(), S = this.middleShape.GetVertices(), p.vertexCount = 4, p.vertices = S, y.CreateShape(p), y.SetMassFromShapes(), S = this.engineShape.GetVertices(), p.vertexCount = 5, p.vertices = S, f.CreateShape(p), f.SetMassFromShapes(), S = this.seatShape.GetVertices(), p.vertexCount = 4, p.vertices = S, g.CreateShape(p), g.SetMassFromShapes(), S = this.tankShape.GetVertices(), p.vertexCount = 5, p.vertices = S, m.CreateShape(p), m.SetMassFromShapes(), S = this.forkShape.GetVertices(), p.vertexCount = 3, p.vertices = S, u.CreateShape(p), u.SetMassFromShapes(), this.brokenRearMC.visible = true, v.SetUserData(this.brokenRearMC), this.paintVector.push(v), this.brokenMiddleMC.visible = true, y.SetUserData(this.brokenMiddleMC), this.paintVector.push(y), this.brokenEngineMC.visible = true, f.SetUserData(this.brokenEngineMC), this.paintVector.push(f), this.brokenSeatMC.visible = true, g.SetUserData(this.brokenSeatMC), this.paintVector.push(g), this.brokenTankMC.visible = true, m.SetUserData(this.brokenTankMC), this.paintVector.push(m), this.brokenForkMC.visible = true, u.SetUserData(this.brokenForkMC), this.paintVector.push(u), n.DestroyBody(this.frameBody), this.tankShape = null, this.session.particleController.createPointBurst("jetshards", a.x * this.m_physScale, a.y * this.m_physScale, 5, 50, 50, this._session.containerSprite.getChildIndex(this.frameMC)), this.frameMC.visible = false, this.frontWheelMC.rim.visible = false, o.ij.instance.playAreaSoundInstance("MetalSmashHeavy", m);
                }, p.frontWheelSmash = function (e, t) {
                    this.frontWheelMC.gotoAndStop(2), this.frontWheelMC.inner.spokes.visible = false, this.frontWheelMC.inner.broken.visible = true, this.contactImpulseDict.delete(this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.frontWheelShape);
                    var i = this.frontWheelBody.GetShapeList();
                    this.frontWheelBody.DestroyShape(i);
                    var a = new s.Vb;
                    a.density = 2, a.friction = .3, a.restitution = .1, this.ejected ? a.filter = this.zeroFilter : a.filter.categoryBits = 513;
                    var h = Math.atan2(t.y, t.x) - this.frontWheelBody.GetAngle();
                    this.frontWheelMC.inner.broken.rotation = h * n.oneEightyOverPI, a.SetAsOrientedBox(25 / this.character_scale, 45 / this.character_scale, new s._m(0, 0), h), this.frontWheelBody.CreateShape(a), o.ij.instance.playAreaSoundInstance("BikeTireSmash1", this.frontWheelBody);
                }, p.backWheelSmash = function (e, t) {
                    this.backWheelMC.gotoAndStop(2), this.backWheelMC.inner.spokes.visible = false, this.backWheelMC.inner.broken.visible = true, this.contactImpulseDict.delete(this.backWheelShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.backWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.backWheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.backWheelShape);
                    var i = this.backWheelBody.GetShapeList();
                    this.backWheelBody.DestroyShape(i);
                    var a = new s.Vb;
                    a.density = 2, a.friction = .3, a.restitution = .1, this.ejected ? a.filter = this.zeroFilter : a.filter.categoryBits = 513;
                    var h = Math.atan2(t.y, t.x) - this.backWheelBody.GetAngle();
                    this.backWheelMC.inner.broken.rotation = h * n.oneEightyOverPI, a.SetAsOrientedBox(25 / this.character_scale, 45 / this.character_scale, new s._m(0, 0), h), this.backWheelBody.CreateShape(a), o.ij.instance.playAreaSoundInstance("BikeTireSmash1", this.backWheelBody);
                }, p.checkEject = function () {
                    this.frameHand1 || this.frameHand2 || this.frameFoot1 || this.frameFoot2 || this.eject();
                }, p.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, p.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, p.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, p.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, p.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject();
                }, p.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, p.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, p.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.lowerArm1Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm1Shape), this.ejected || (this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.checkEject());
                }, p.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.lowerArm2Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm2Shape), this.ejected || (this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.checkEject());
                }, p.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null), this.checkEject());
                }, p.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null), this.checkEject());
                }, p.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null), this.checkEject());
                }, p.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null), this.checkEject());
                }, p.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 2), this.setJoint(this.elbowJoint1, 1.04, 15), this.setJoint(this.elbowJoint2, 1.04, 15);
                }, p.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, 1, 1), this.setJoint(this.elbowJoint1, 0, 15), this.setJoint(this.elbowJoint2, 0, 15);
                }, p.grabAction = function (e, t, i) {
                    var o = e.GetShapeList(), n = e.GetWorldPoint(new s._m(0, o.GetVertices()[2].y));
                    if (!this.frameSmashed && !this._dying && !this.userVehicle) {
                        var a = this.frameBody.GetWorldPoint(this.handleAnchorPoint);
                        if (Math.abs(n.x - a.x) < this.reAttachDistance && Math.abs(n.y - a.y) < this.reAttachDistance) return void this.reAttach(e);
                    }
                    var l = new s.tu;
                    if (i.IsStatic() || (l.enableLimit = true), l.maxMotorTorque = 4, l.Initialize(i, e, n), e == this.lowerArm1Body) if (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), t.GetUserData() instanceof h.xJ) {
                        var c = t.GetUserData();
                        if (this.userVehicle && c != this.userVehicle) this.gripJoint1 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm1Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                            case 0:
                                break;
                            case 1:
                                this.currentPose = 10;
                                break;
                            case 2:
                                this.currentPose = 11;
                                break;
                            case 3:
                                this.currentPose = 12;
                        }
                    } else this.gripJoint1 = this._session.m_world.CreateJoint(l);
                    if (e == this.lowerArm2Body) if (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), t.GetUserData() instanceof h.xJ) if (c = t.GetUserData(), this.userVehicle && c != this.userVehicle) this.gripJoint2 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm2Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                        case 0:
                            break;
                        case 1:
                            this.currentPose = 10;
                            break;
                        case 2:
                            this.currentPose = 11;
                            break;
                        case 3:
                            this.currentPose = 12;
                    } else this.gripJoint2 = this._session.m_world.CreateJoint(l);
                }, p.reAttach = function (e) {
                    var t, i, s;
                    this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), this.contactResultBuffer.delete(this.lowerArm1Shape), this.contactResultBuffer.delete(this.lowerArm2Shape), this.ejected = false, this.currentPose = 0, this.releaseGrip();
                    var o = 180 / Math.PI;
                    i = -20 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle() - this.neckJoint.GetJointAngle()), s = 0 / o - t, this.neckJoint.SetLimits(i, s), i = -90 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle() - this.elbowJoint1.GetJointAngle()), s = 0 / o - t, this.elbowJoint1.SetLimits(i, s), i = -90 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle() - this.elbowJoint2.GetJointAngle()), s = 0 / o - t, this.elbowJoint2.SetLimits(i, s);
                    var n = this._session.m_world;
                    e == this.lowerArm1Body ? (this.frameHand1 = n.CreateJoint(this.frameHand1JointDef), this.lowerArm1MC.hand.gotoAndStop(1)) : (this.frameHand2 = n.CreateJoint(this.frameHand2JointDef), this.lowerArm2MC.hand.gotoAndStop(1)), this.actionsVector.push(this.reAttaching);
                }, c = n, (d = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(c.prototype, d), Object.defineProperty(c, "prototype", { writable: false }), n;
            }(d));
            function J(e, t) {
                return (J = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var G = function (e) {
                var t, i;
                function o(t, i, r, o, n, a, h) {
                    var l;
                    return void 0 === n && (n = -2), void 0 === a && (a = "Char4"), void 0 === h && (h = null), (l = e.call(this, t, i, r, o, n, a) || this).maxTorque = 30, l.reAttachDistance = .25, l.leg1Stuck = function (e) {
                        e.shape2 == l.guy.seatShape && (l.leg1Contacts += 1);
                    }, l.leg1Free = function (e) {
                        e.shape2 == l.guy.seatShape && (l.leg1Contacts -= 1, l.ejected && l.checkLegsFree());
                    }, l.leg2Stuck = function (e) {
                        e.shape2 == l.guy.seatShape && (l.leg2Contacts += 1);
                    }, l.leg2Free = function (e) {
                        e.shape2 == l.guy.seatShape && (l.leg2Contacts -= 1, l.ejected && l.checkLegsFree());
                    }, l.legsFree = function () {
                        l.removeAction(l.legsFree);
                        var e = l._session.m_world;
                        l.upperLeg1Shape.m_isSensor = false, l.upperLeg1Shape.m_body && e.Refilter(l.upperLeg1Shape), l.upperLeg2Shape.m_isSensor = false, l.upperLeg2Shape.m_body && e.Refilter(l.upperLeg2Shape), l.lowerLeg1Shape.m_isSensor = false, e.Refilter(l.lowerLeg1Shape), l.lowerLeg2Shape.m_isSensor = false, e.Refilter(l.lowerLeg2Shape), l.lowerArm1Shape.m_isSensor = false, e.Refilter(l.lowerArm1Shape), l.lowerArm2Shape.m_isSensor = false, e.Refilter(l.lowerArm2Shape);
                    }, l.releaseGuy = function () {
                        l.torsoHand1 && (l._session.m_world.DestroyJoint(l.torsoHand1), l.torsoHand1 = null), l.torsoHand2 && (l._session.m_world.DestroyJoint(l.torsoHand2), l.torsoHand2 = null);
                    }, l.reAttaching = function () {
                        if (l.ejected || l.dead) l.removeAction(l.reAttaching); else {
                            var e = 0, t = l._session.m_world;
                            if (l.torsoHand1 || l.elbowJoint1.broken || l.shoulderJoint1.broken) e += 1; else {
                                var i = l.lowerArm1Body.GetWorldPoint(new s._m(0, l.lowerArm1Shape.GetVertices()[2].y)), r = l.guy.chestBody.GetWorldPoint(l.torsoAnchorPoint);
                                Math.abs(i.x - r.x) < l.reAttachDistance && Math.abs(i.y - r.y) < l.reAttachDistance && (l.torsoHand1 = t.CreateJoint(l.torsoHand1JointDef), l.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                            }
                            l.torsoHand2 || l.elbowJoint2.broken || l.shoulderJoint2.broken ? e += 1 : (i = l.lowerArm2Body.GetWorldPoint(new s._m(0, l.lowerArm2Shape.GetVertices()[2].y)), r = l.guy.chestBody.GetWorldPoint(l.torsoAnchorPoint), Math.abs(i.x - r.x) < l.reAttachDistance && Math.abs(i.y - r.y) < l.reAttachDistance && (l.torsoHand2 = t.CreateJoint(l.torsoHand2JointDef), l.lowerArm2MC.hand.gotoAndStop(1), e += 1)), e >= 2 && l.removeAction(l.reAttaching);
                        }
                    }, l.guy = h, l;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, J(t, i);
                var n, a, h = o.prototype;
                return h.leftPressedActions = function () {
                    this.ejected && (this.currentPose = 1);
                }, h.rightPressedActions = function () {
                    this.ejected && (this.currentPose = 2);
                }, h.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, h.upPressedActions = function () {
                    this.ejected && (this.currentPose = 3);
                }, h.downPressedActions = function () {
                    this.ejected && (this.currentPose = 4);
                }, h.upAndDownActions = function () {
                    this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, h.spacePressedActions = function () {
                    this.ejected && this.startGrab();
                }, h.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, h.shiftPressedActions = function () {
                    this.eject();
                }, h.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false;
                }, h.die = function () {
                    e.prototype.die.call(this);
                }, h.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = this.upperLeg1Shape = this.upperLeg1Body.GetShapeList();
                    t.m_isSensor = true, (t = this.upperLeg2Shape = this.upperLeg2Body.GetShapeList()).m_isSensor = true, (t = this.lowerLeg1Body.GetShapeList()).m_isSensor = true, (t = this.lowerLeg2Body.GetShapeList()).m_isSensor = true, (t = this.lowerArm1Body.GetShapeList()).m_isSensor = true, (t = this.lowerArm2Body.GetShapeList()).m_isSensor = true, this.leg1Contacts = 0, this.leg2Contacts = 0, this._session.contactListener.registerListener(r.$S.ADD, this.upperLeg1Shape, this.leg1Stuck), this._session.contactListener.registerListener(r.$S.REMOVE, this.upperLeg1Shape, this.leg1Free), this._session.contactListener.registerListener(r.$S.ADD, this.upperLeg2Shape, this.leg2Stuck), this._session.contactListener.registerListener(r.$S.REMOVE, this.upperLeg2Shape, this.leg2Free);
                }, h.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this._session.containerSprite.addChildAt(this.chestMC, this._session.containerSprite.getChildIndex(this.lowerLeg1MC));
                    var t = this._session.containerSprite.getChildIndex(this.guy.lowerLeg2MC);
                    this._session.containerSprite.addChildAt(this.lowerLeg2MC, t), this._session.containerSprite.addChildAt(this.upperLeg2MC, t), this._session.containerSprite.addChildAt(this.upperLeg4MC, t), this._session.containerSprite.addChildAt(this.lowerArm2MC, t), this._session.containerSprite.addChildAt(this.upperArm2MC, t), this._session.containerSprite.addChildAt(this.upperArm4MC, t);
                }, h.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var n = o.oneEightyOverPI;
                    i = -110 / n - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / n - t, i = -110 / n - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / n - t, i = -90 / n - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / n - t, this.elbowJoint1.SetLimits(i, r), i = -90 / n - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / n - t, this.elbowJoint2.SetLimits(i, r), i = -20 / n - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 0 / n - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.tu;
                    a.maxMotorTorque = this.maxTorque;
                    var h = new s._m;
                    h.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), a.Initialize(this.guy.frameBody, this.pelvisBody, h), this.framePelvis = this._session.m_world.CreateJoint(a);
                    var l = this.shapeGuide.handleAnchor;
                    h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.guy.chestBody, this.lowerArm1Body, h), this.torsoHand1 = this._session.m_world.CreateJoint(a), this.torsoHand1JointDef = a.clone(), this.torsoAnchorPoint = this.guy.chestBody.GetLocalPoint(h), a.Initialize(this.guy.chestBody, this.lowerArm2Body, h), this.torsoHand2 = this._session.m_world.CreateJoint(a), this.torsoHand2JointDef = a.clone(), l = this.shapeGuide.footAnchor, h.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.guy.frameBody, this.lowerLeg1Body, h), this.frameFoot1 = this._session.m_world.CreateJoint(a), a.Initialize(this.guy.frameBody, this.lowerLeg2Body, h), this.frameFoot2 = this._session.m_world.CreateJoint(a);
                }, h.paint = function () {
                    e.prototype.paint.call(this);
                }, h.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        e.DestroyJoint(this.framePelvis), this.framePelvis = null, this.frameFoot1 && (e.DestroyJoint(this.frameFoot1), this.frameFoot1 = null), this.frameFoot2 && (e.DestroyJoint(this.frameFoot2), this.frameFoot2 = null), this.torsoHand1 && (e.DestroyJoint(this.torsoHand1), this.torsoHand1 = null), this.torsoHand2 && (e.DestroyJoint(this.torsoHand2), this.torsoHand2 = null), this.guy.tankShape || (this.leg1Contacts = 0, this.leg2Contacts = 0, this.checkLegsFree());
                    }
                }, h.checkLegsFree = function () {
                    0 == this.leg1Contacts && 0 == this.leg2Contacts && (this._session.contactListener.deleteListener(r.$S.REMOVE, this.upperLeg1Shape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.upperLeg2Shape), this._session.contactListener.deleteListener(r.$S.ADD, this.upperLeg1Shape), this._session.contactListener.deleteListener(r.$S.ADD, this.upperLeg2Shape), this.actionsVector.push(this.legsFree));
                }, h.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, h.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, h.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, h.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.torsoHand1 && (this._session.m_world.DestroyJoint(this.torsoHand1), this.torsoHand1 = null), this.torsoHand2 && (this._session.m_world.DestroyJoint(this.torsoHand2), this.torsoHand2 = null), this.lowerArm1Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm1Shape), this.lowerArm2Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm2Shape);
                }, h.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, h.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.lowerArm1Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm1Shape), this.torsoHand1 && (this._session.m_world.DestroyJoint(this.torsoHand1), this.torsoHand1 = null);
                }, h.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.lowerArm2Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm2Shape), this.torsoHand2 && (this._session.m_world.DestroyJoint(this.torsoHand2), this.torsoHand2 = null);
                }, h.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.lowerArm1Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm1Shape), this.torsoHand1 && (this._session.m_world.DestroyJoint(this.torsoHand1), this.torsoHand1 = null);
                }, h.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.lowerArm2Shape.m_isSensor = false, this._session.m_world.Refilter(this.lowerArm2Shape), this.torsoHand2 && (this._session.m_world.DestroyJoint(this.torsoHand2), this.torsoHand2 = null);
                }, h.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null);
                }, h.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null);
                }, h.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null);
                }, h.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null);
                }, h.mourn = function () {
                    this._dead || this.addVocals("Mourn", 3);
                }, n = o, (a = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.removeAction(this.reAttaching), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null), this.guy.mourn()));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(d);
            function H(e, t) {
                return (H = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var V = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o, -1, "Char4") || this).wheelMaxSpeed = 50, n.wheelContacts = 0, n.backContacts = 0, n.frontContacts = 0, n.accelStep = 2, n.maxTorque = 1e5, n.impulseMagnitude = 1.25, n.impulseOffset = 1, n.maxSpinAV = 5, n.cartSmashLimit = 100, n.mainSmashLimit = 200, n.crackerSmashLimit = 1, n.contactMainResultHandler = function (e) {
                        var t = e.impulse;
                        t > n.contactImpulseDict.get(n.mainShape1) && (n.contactResultBuffer.get(n.mainShape1) ? t > n.contactResultBuffer.get(n.mainShape1).impulse && n.contactResultBuffer.set(n.mainShape1, e) : n.contactResultBuffer.set(n.mainShape1, e));
                    }, n.handleContactResults = function () {
                        var t;
                        e.prototype.handleContactResults.call(function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(n)), n.contactResultBuffer.get(n.cartShape) && (t = n.contactResultBuffer.get(n.cartShape), n.cartSmash(t.impulse), n.contactResultBuffer.delete(n.cartShape), n.contactAddBuffer.delete(n.cartShape), n.contactAddBuffer.delete(n.mainShape3)), n.contactResultBuffer.get(n.mainShape1) && (t = n.contactResultBuffer.get(n.mainShape1), n.mainSmash(t.impulse), n.contactResultBuffer.delete(n.mainShape1)), n.contactResultBuffer.get(n.crackerShape) && (t = n.contactResultBuffer.get(n.crackerShape), n.crackerSmash(t.impulse), n.contactResultBuffer.delete(n.crackerShape)), n.contactResultBuffer.get(n.sodaShape) && (t = n.contactResultBuffer.get(n.sodaShape), n.colaSmash(t.impulse), n.contactResultBuffer.delete(n.sodaShape));
                    }, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            e.shape1 == n.frontWheelShape ? n.frontContacts += 1 : n.backContacts += 1, n.wheelContacts = n.frontContacts + n.backContacts;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, "hit");
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (e.shape1 == n.frontWheelShape ? n.frontContacts -= 1 : n.backContacts -= 1, n.wheelContacts = n.frontContacts + n.backContacts);
                    }, n.jumpTranslation = 20 / n.m_physScale, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, H(t, i);
                var h, l, c = n.prototype;
                return c.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.mainBody.GetAngle(), t = (this.mainBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.mainBody.GetLocalCenter();
                        this.mainBody.ApplyImpulse(new s._m(r, -i), this.mainBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y)));
                    }
                }, c.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.mainBody.GetAngle(), t = (this.mainBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.mainBody.GetLocalCenter();
                        this.mainBody.ApplyImpulse(new s._m(r, -i), this.mainBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, c.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, c.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.motorSound = o.ij.instance.playAreaSoundLoop("ElectricMotor1", this.backWheelBody, 1)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, c.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.motorSound = o.ij.instance.playAreaSoundLoop("ElectricMotor1", this.backWheelBody, 1)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, c.upAndDownActions = function () {
                    this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.motorSound.fadeOut(.25), this.motorSound = null), this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, c.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : this.backShockJoint.IsMotorEnabled() ? this.backShockJoint.GetMotorSpeed() > 0 ? this.backShockJoint.GetJointTranslation() > this.jumpTranslation && (this.backShockJoint.SetMotorSpeed(-1), this.frontShockJoint.SetMotorSpeed(-1)) : this.backShockJoint.GetMotorSpeed() < 0 && this.backShockJoint.GetJointTranslation() < 0 && (this.backShockJoint.EnableMotor(false), this.frontShockJoint.EnableMotor(false), this.backShockJoint.SetLimits(0, 0), this.frontShockJoint.SetLimits(0, 0), this.backShockJoint.SetMotorSpeed(0), this.frontShockJoint.SetMotorSpeed(0)) : (this.backShockJoint.SetMotorSpeed(5), this.frontShockJoint.SetMotorSpeed(5), this.backShockJoint.SetLimits(0, this.jumpTranslation), this.frontShockJoint.SetLimits(0, this.jumpTranslation), this.backShockJoint.EnableMotor(true), this.frontShockJoint.EnableMotor(true), o.ij.instance.playAreaSoundInstance("SegwayJump", this.backWheelBody));
                }, c.spaceNullActions = function () {
                    this.ejected ? this.releaseGrip() : this.backShockJoint.IsMotorEnabled() && (this.backShockJoint.GetMotorSpeed() > 0 ? this.backShockJoint.GetJointTranslation() > this.jumpTranslation && (this.backShockJoint.SetMotorSpeed(-1), this.frontShockJoint.SetMotorSpeed(-1)) : this.backShockJoint.GetMotorSpeed() < 0 && this.backShockJoint.GetJointTranslation() < 0 && (this.backShockJoint.EnableMotor(false), this.frontShockJoint.EnableMotor(false), this.backShockJoint.SetLimits(0, 0), this.frontShockJoint.SetLimits(0, 0), this.backShockJoint.SetMotorSpeed(0), this.frontShockJoint.SetMotorSpeed(0)));
                }, c.shiftPressedActions = function () {
                    this.ejected && (this.currentPose = 6);
                }, c.shiftNullActions = function () {
                    6 == this._currentPose && (this.currentPose = 0);
                }, c.ctrlPressedActions = function () {
                    this.ejected && (this.currentPose = 7);
                }, c.ctrlNullActions = function () {
                    7 == this._currentPose && (this.currentPose = 0);
                }, c.zPressedActions = function () {
                    this.eject();
                }, c.actions = function () {
                    if (this.wheelContacts > 0) {
                        var t = Math.abs(this.backWheelBody.GetAngularVelocity());
                        t > 50 ? (this.wheelLoop3 || (this.wheelLoop3 = o.ij.instance.playAreaSoundLoop("BikeLoop3", this.backWheelBody, 0), this.wheelLoop3.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null)) : t > 25 ? (this.wheelLoop2 || (this.wheelLoop2 = o.ij.instance.playAreaSoundLoop("BikeLoop2", this.backWheelBody, 0), this.wheelLoop2.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : t > 5 ? (this.wheelLoop1 || (this.wheelLoop1 = o.ij.instance.playAreaSoundLoop("BikeLoop1", this.backWheelBody, 0), this.wheelLoop1.fadeIn(.2)), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : (this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null));
                    } else this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null);
                    e.prototype.actions.call(this);
                }, c.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            break;
                        case 6:
                            this.lungePoseLeft();
                            break;
                        case 7:
                            this.lungePoseRight();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, c.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.mainSmashed = false;
                }, c.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.frontWheelBody.GetInterpolatedWorldCenter();
                    if (this.frontWheelMC.x = t.x * this.m_physScale, this.frontWheelMC.y = t.y * this.m_physScale, this.frontWheelMC.inner.rotation = this.frontWheelBody.GetInterpolatedAngle() * (180 / Math.PI) % 360, t = this.backWheelBody.GetInterpolatedWorldCenter(), this.backWheelMC.x = t.x * this.m_physScale, this.backWheelMC.y = t.y * this.m_physScale, this.backWheelMC.inner.rotation = this.backWheelBody.GetInterpolatedAngle() * (180 / Math.PI) % 360, !this.mainSmashed) {
                        t = this.backShockJoint.GetInterpolatedAnchor1();
                        var i = this.backShockBody.GetInterpolatedWorldCenter();
                        this.shockMC.graphics.clear(), this.shockMC.graphics.lineStyle(3, 792077), this.shockMC.graphics.moveTo(t.x * this.m_physScale, t.y * this.m_physScale), this.shockMC.graphics.lineTo(i.x * this.m_physScale, i.y * this.m_physScale), t = this.frontShockJoint.GetInterpolatedAnchor1(), i = this.frontShockBody.GetInterpolatedWorldCenter(), this.shockMC.graphics.moveTo(t.x * this.m_physScale, t.y * this.m_physScale), this.shockMC.graphics.lineTo(i.x * this.m_physScale, i.y * this.m_physScale), this.cartMC.x = this.mainMC.x, this.cartMC.y = this.mainMC.y, this.cartMC.rotation = this.mainMC.rotation;
                    }
                }, c.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.cartShape, this.cartSmashLimit), this.contactImpulseDict.set(this.mainShape1, this.mainSmashLimit), this.contactImpulseDict.set(this.crackerShape, this.crackerSmashLimit), this.contactImpulseDict.set(this.sodaShape, this.crackerSmashLimit), this.contactAddSounds.set(this.backWheelShape, "CarTire1"), this.contactAddSounds.set(this.frontWheelShape, "CarTire1"), this.contactAddSounds.set(this.mainShape3, "BikeHit3"), this.contactAddSounds.set(this.cartShape, "BikeHit1");
                }, c.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Vb, i = new s.lB, o = new s.Oi, n = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.defaultFilter, this.paintVector.splice(this.paintVector.indexOf(this.chestBody), 1), this.paintVector.splice(this.paintVector.indexOf(this.pelvisBody), 1), this._session.m_world.DestroyBody(this.chestBody), this._session.m_world.DestroyBody(this.pelvisBody);
                    var a = this.shapeGuide.chestShape;
                    o.position.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), o.angle = a.rotation / (180 / Math.PI), this.chestBody = this._session.m_world.CreateBody(o), t.vertexCount = 6;
                    for (var h = 0; h < 6; h++) {
                        var l = this.shapeGuide["chestVert" + [h]];
                        t.vertices[h] = new s._m(l.x / this.character_scale, l.y / this.character_scale);
                    }
                    for (this.chestShape = this.chestBody.CreateShape(t), this.chestShape.SetMaterial(2), this.chestShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.chestBody.AllowSleeping(false), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, a = this.shapeGuide.pelvisShape, n.position.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), n.angle = a.rotation / (180 / Math.PI), this.pelvisBody = this._session.m_world.CreateBody(n), t.vertexCount = 5, h = 0; h < 5; h++) l = this.shapeGuide["pelvisVert" + [h]], t.vertices[h] = new s._m(l.x / this.character_scale, l.y / this.character_scale);
                    this.pelvisShape = this.pelvisBody.CreateShape(t), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.pelvisBody.AllowSleeping(false), this.paintVector.push(this.pelvisBody);
                    var c = new s.Oi, d = (new s.Oi, new s.Oi), p = new s.Oi, u = new s.Oi, m = new s.Oi, f = new s.Oi;
                    for (new s.Vb, new s.Vb, new s.Vb, t.density = 4, t.friction = .3, t.restitution = .1, t.filter = new s.fT, t.filter.categoryBits = 513, t.filter.groupIndex = -2, this.mainBody = this._session.m_world.CreateBody(c), this.shaftBody = this._session.m_world.CreateBody(d), t.vertexCount = 4, h = 0; h < 4; h++) l = this.shapeGuide["frontVert" + [h + 1]], t.vertices[h] = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale);
                    this.mainShape1 = this.mainBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.mainShape1, this.contactMainResultHandler), a = this.shapeGuide.baseShape;
                    var y = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), v = a.rotation / (180 / Math.PI);
                    for (t.SetAsOrientedBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale, y, v), this.mainShape2 = this.mainBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.mainShape2, this.contactMainResultHandler), a = this.shapeGuide.cartShape, y = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), v = a.rotation / (180 / Math.PI), t.SetAsOrientedBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale, y, v), this.cartShape = this.mainBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.cartShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.cartShape, this.contactAddHandler), a = this.shapeGuide.handleShape, y = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), v = a.rotation / (180 / Math.PI), t.SetAsOrientedBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale, y, v), this.handleShape = this.shaftBody.CreateShape(t), t.filter = this.zeroFilter.Copy(), t.filter.groupIndex = -2, a = this.shapeGuide.seatShape, y = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), v = a.rotation / (180 / Math.PI), t.SetAsOrientedBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale, y, v), this.mainShape3 = this.mainBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.mainShape3, this.contactMainResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.mainShape3, this.contactAddHandler), t.vertexCount = 4, h = 0; h < 4; h++) l = this.shapeGuide["rearVert" + [h + 1]], t.vertices[h] = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale);
                    this.mainShape4 = this.mainBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.mainShape4, this.contactMainResultHandler), this.mainBody.SetMassFromShapes(), this.paintVector.push(this.mainBody), a = this.shapeGuide.shaftShape, y = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), v = a.rotation / (180 / Math.PI), t.SetAsOrientedBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale, y, v), this.shaftShape = this.shaftBody.CreateShape(t), this.shaftBody.SetMassFromShapes(), this.paintVector.push(this.shaftBody), i.density = 5, i.friction = 1, i.restitution = .3, i.filter.categoryBits = 513, i.filter.groupIndex = -2, a = this.shapeGuide.backWheelShape, p.position.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), p.angle = a.rotation / (180 / Math.PI), i.localPosition.Set(0, 0), i.radius = a.width / 2 / this.character_scale, this.backWheelBody = this._session.m_world.CreateBody(p), this.backWheelShape = this.backWheelBody.CreateShape(i), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.backWheelShape, this.wheelContactRemove), a = this.shapeGuide.frontWheelShape, u.position.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), u.angle = a.rotation / (180 / Math.PI), i.radius = a.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(u), this.frontWheelShape = this.frontWheelBody.CreateShape(i), this.frontWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.frontWheelShape, this.wheelContactRemove);
                    var g = 12 / this.character_scale;
                    for (t.SetAsOrientedBox(g, g, p.position), this.backShockBody = this._session.m_world.CreateBody(m), this.backShockBody.CreateShape(t), this.backShockBody.SetMassFromShapes(), t.SetAsOrientedBox(g, g, u.position), this.frontShockBody = this._session.m_world.CreateBody(f), this.frontShockBody.CreateShape(t), this.frontShockBody.SetMassFromShapes(), t.isSensor = false, t.filter.groupIndex = 0, t.density = .25, this.groceryBodies = [], h = 0; h < 10; h++) {
                        var S = new s.Oi;
                        a = this.shapeGuide["box" + h], S.position.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), S.angle = a.rotation / (180 / Math.PI), t.SetAsBox(5 * a.scaleX / this.character_scale, 5 * a.scaleY / this.character_scale);
                        var _ = this._session.m_world.CreateBody(S);
                        _.CreateShape(t), _.SetMassFromShapes(), this.paintVector.push(_), this.groceryBodies.push(_);
                    }
                    var w = this.groceryBodies[4];
                    this.crackerShape = w.GetShapeList(), this._session.contactListener.registerListener(r.$S.RESULT, this.crackerShape, this.contactResultHandler);
                    var b = this.groceryBodies[3];
                    this.sodaShape = b.GetShapeList(), this._session.contactListener.registerListener(r.$S.RESULT, this.sodaShape, this.contactResultHandler);
                }, c.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this._session.containerSprite.addChildAt(this.pelvisMC, this._session.containerSprite.getChildIndex(this.chestMC));
                    var t = this.sourceObject.cartPieces;
                    this._session.particleController.createBMDArray("cart", t), t = this.sourceObject.crackers, this._session.particleController.createBMDArray("crackers", t), t = this.sourceObject.cola, this._session.particleController.createBMDArray("cola", t), this.shockMC = new a.jy, this.mainMC = this.sourceObject.main, this.mainMC.scaleX = this.mainMC.scaleY = 1 / this.mc_scale, this.backWheelMC = this.sourceObject.backWheel, this.backWheelMC.scaleX = this.backWheelMC.scaleY = 1 / this.mc_scale, this.frontWheelMC = this.sourceObject.frontWheel, this.frontWheelMC.scaleX = this.frontWheelMC.scaleY = 1 / this.mc_scale, this.shaftMC = this.sourceObject.shaft, this.shaftMC.scaleX = this.shaftMC.scaleY = 1 / this.mc_scale, this.mainFrontMC = this.sourceObject.mainFront, this.mainFrontMC.scaleX = this.mainFrontMC.scaleY = 1 / this.mc_scale, this.mainFrontMC.visible = false, this.mainBaseMC = this.sourceObject.mainBase, this.mainBaseMC.scaleX = this.mainBaseMC.scaleY = 1 / this.mc_scale, this.mainBaseMC.visible = false, this.mainSeatMC = this.sourceObject.mainSeat, this.mainSeatMC.scaleX = this.mainSeatMC.scaleY = 1 / this.mc_scale, this.mainSeatMC.visible = false, this.mainRearMC = this.sourceObject.mainRear, this.mainRearMC.scaleX = this.mainRearMC.scaleY = 1 / this.mc_scale, this.mainRearMC.visible = false;
                    var i = this.mainBody.GetLocalCenter();
                    i = new s._m((this._startX - i.x) * this.character_scale, (this._startY - i.y) * this.character_scale);
                    var r = this.shapeGuide.rearVert4, o = new s._m(r.x + i.x, r.y + i.y);
                    this.mainMC.inner.x = o.x, this.mainMC.inner.y = o.y, i = this.shaftBody.GetLocalCenter(), i = new s._m((this._startX - i.x) * this.character_scale, (this._startY - i.y) * this.character_scale), r = this.shapeGuide.shaftShape, o = new s._m(r.x + i.x, r.y + i.y), this.shaftMC.inner.x = o.x, this.shaftMC.inner.y = o.y, this.mainBody.SetUserData(this.mainMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this.shaftBody.SetUserData(this.shaftMC), this._session.containerSprite.addChildAt(this.shockMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.backWheelMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.frontWheelMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.shaftMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mainMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mainBaseMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mainFrontMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mainRearMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mainSeatMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this.groceryMCs = [];
                    for (var n = 0; n < 10; n++) {
                        var h = this.sourceObject["box" + n];
                        h.scaleX = h.scaleY = 1 / this.mc_scale, this.groceryBodies[n].SetUserData(h), this.groceryMCs.push(h), this._session.containerSprite.addChildAt(h, this._session.containerSprite.getChildIndex(this.mainMC));
                    }
                    this.cartMC = new a.jy, this.cartMC.scaleX = this.cartMC.scaleY = 1 / this.mc_scale;
                    var l = this.mainMC.inner.cart;
                    this.cartMC.addChild(l), l.x = l.x + this.mainMC.inner.x, l.y = l.y + this.mainMC.inner.y, this._session.containerSprite.addChildAt(this.cartMC, this._session.containerSprite.getChildIndex(this.lowerArm1MC) + 1);
                }, c.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.mainFrontMC.visible = false, this.mainBaseMC.visible = false, this.mainSeatMC.visible = false, this.mainRearMC.visible = false, this.mainMC.visible = true, this.cartMC.visible = true, this.mainBody.SetUserData(this.mainMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this.shaftBody.SetUserData(this.shaftMC), this.shockMC.graphics.clear();
                    for (var t = 0; t < 10; t++) {
                        var i = this.groceryBodies[t], s = this.groceryMCs[t];
                        i.SetUserData(s), s.visible = true, s.gotoAndStop(1);
                    }
                    var r = this.sourceObject.cartPieces;
                    this._session.particleController.createBMDArray("cart", r), r = this.sourceObject.crackers, this._session.particleController.createBMDArray("crackers", r), r = this.sourceObject.cola, this._session.particleController.createBMDArray("cola", r);
                }, c.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    this.upperLeg1Body.GetAngle(), this.pelvisBody.GetAngle(), this.upperLeg2Body.GetAngle(), this.pelvisBody.GetAngle(), i = -10 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 10 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s.wN;
                    n.maxMotorForce = 1e3, n.enableLimit = true, n.upperTranslation = 0, n.lowerTranslation = 0;
                    var a = new s._m, h = this.shapeGuide.backWheelShape;
                    a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.mainBody, this.backShockBody, a, new s._m(0, 1)), this.backShockJoint = this._session.m_world.CreateJoint(n), h = this.shapeGuide.frontWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.mainBody, this.frontShockBody, a, new s._m(0, 1)), this.frontShockJoint = this._session.m_world.CreateJoint(n);
                    var l = new s.tu;
                    l.maxMotorTorque = this.maxTorque, l.enableLimit = true, l.lowerAngle = 0, l.upperAngle = 0, a = new s._m, h = this.shapeGuide.shaftAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.mainBody, this.shaftBody, a), this.mainShaft = this._session.m_world.CreateJoint(l), this._session.version >= 1.11 && (l.enableLimit = false), a.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), l.Initialize(this.mainBody, this.pelvisBody, a), this.mainPelvis = this._session.m_world.CreateJoint(l), this.mainPelvisJointDef = l.clone(), this.pelvisAnchorPoint = this.mainBody.GetLocalPoint(a), l.enableLimit = false, h = this.shapeGuide.backWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.backShockBody, this.backWheelBody, a), this.backWheelJoint = this._session.m_world.CreateJoint(l), h = this.shapeGuide.frontWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.frontShockBody, this.frontWheelBody, a), this.frontWheelJoint = this._session.m_world.CreateJoint(l), h = this.shapeGuide.handleAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.mainBody, this.lowerArm1Body, a), this.mainHand1 = this._session.m_world.CreateJoint(l), this.mainHand1JointDef = l.clone(), this.handleAnchorPoint = this.mainBody.GetLocalPoint(a), l.Initialize(this.mainBody, this.lowerArm2Body, a), this.mainHand2 = this._session.m_world.CreateJoint(l), this.mainHand2JointDef = l.clone(), a.Set(this.upperLeg1Body.GetPosition().x, this.upperLeg1Body.GetPosition().y), l.Initialize(this.mainBody, this.upperLeg1Body, a), this.mainLeg1 = this._session.m_world.CreateJoint(l), this.mainLeg1JointDef = l.clone(), this.leg1AnchorPoint = this.mainBody.GetLocalPoint(a), a.Set(this.upperLeg2Body.GetPosition().x, this.upperLeg2Body.GetPosition().y), l.Initialize(this.mainBody, this.upperLeg2Body, a), this.mainLeg2 = this._session.m_world.CreateJoint(l), this.mainLeg2JointDef = l.clone(), this.leg2AnchorPoint = this.mainBody.GetLocalPoint(a), h = this.shapeGuide.sausageAnchor1, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.groceryBodies[7], this.groceryBodies[8], a), this._session.m_world.CreateJoint(l), h = this.shapeGuide.sausageAnchor2, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.groceryBodies[8], this.groceryBodies[9], a), this._session.m_world.CreateJoint(l);
                }, c.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        this.mainPelvis && (e.DestroyJoint(this.mainPelvis), this.mainPelvis = null), this.mainHand1 && (e.DestroyJoint(this.mainHand1), this.mainHand1 = null), this.mainHand2 && (e.DestroyJoint(this.mainHand2), this.mainHand2 = null), this.mainLeg1 && (e.DestroyJoint(this.mainLeg1), this.mainLeg1 = null), this.mainLeg2 && (e.DestroyJoint(this.mainLeg2), this.mainLeg2 = null);
                        var t = this.zeroFilter.Copy();
                        t.groupIndex = -2, this.frontWheelBody.GetShapeList().SetFilterData(t), this.backWheelBody.GetShapeList().SetFilterData(t), e.Refilter(this.frontWheelBody.GetShapeList()), e.Refilter(this.backWheelBody.GetShapeList()), this.backShockJoint.EnableMotor(false), this.frontShockJoint.EnableMotor(false), this.backShockJoint.SetLimits(0, 0), this.frontShockJoint.SetLimits(0, 0), this.backShockJoint.SetMotorSpeed(0), this.frontShockJoint.SetMotorSpeed(0);
                        for (var i = this.mainBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(t), e.Refilter(i);
                        for (i = this.shaftBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(this.zeroFilter), e.Refilter(i);
                        this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                    }
                }, c.reAttach = function (e) {
                    throw new Error("this must be called only in subclass");
                }, c.reAttaching = function () {
                    throw new Error("this must be called only in subclass");
                }, c.checkEject = function () {
                    this.mainHand1 || this.mainHand2 || this.mainLeg1 || this.mainLeg2 || this.eject();
                }, c.cartSmash = function (e, t) {
                    void 0 === t && (t = true), this.contactImpulseDict.delete(this.cartShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.cartShape), this._session.contactListener.deleteListener(r.$S.ADD, this.cartShape), this.mainBody.DestroyShape(this.cartShape), this.cartMC.visible = false;
                    var i = this.mainBody.GetLocalCenter(), n = this.mainBody.GetWorldPoint(new s._m(i.x + 35 / this.m_physScale, i.y + -15 / this.m_physScale));
                    this._session.particleController.createPointBurst("cart", n.x * this.m_physScale, n.y * this.m_physScale, 30, 30, 20), t && o.ij.instance.playAreaSoundInstance("MetalSmashLight", this.mainBody);
                }, c.crackerSmash = function (e) {
                    this.contactImpulseDict.delete(this.crackerShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.crackerShape);
                    var t = this.groceryBodies[4];
                    this.groceryMCs[4].visible = false;
                    var i = t.GetWorldCenter();
                    this._session.m_world.DestroyBody(t), this._session.particleController.createPointBurst("crackers", i.x * this.m_physScale, i.y * this.m_physScale, 30, 30, 40);
                }, c.colaSmash = function (e) {
                    this.contactImpulseDict.delete(this.sodaShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.sodaShape);
                    var t = this.groceryBodies[3];
                    this.groceryMCs[3].gotoAndStop(2), t.GetWorldCenter(), this._session.particleController.createFlow("cola", 2.5, 4, t, new s._m(0, -10 / this.m_physScale), 270, 300);
                }, c.mainSmash = function (e) {
                    this.contactImpulseDict.delete(this.mainShape1);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.mainShape1), t.deleteListener(r.$S.RESULT, this.mainShape2), t.deleteListener(r.$S.RESULT, this.mainShape3), t.deleteListener(r.$S.ADD, this.mainShape3), t.deleteListener(r.$S.RESULT, this.mainShape4), this.eject(), this.mainSmashed = true, this.cartShape.m_body && this.cartSmash(100, false);
                    var i = this._session.m_world, n = this.mainBody.GetPosition(), a = this.mainBody.GetAngle(), h = this.mainBody.GetLinearVelocity(), l = this.mainBody.GetAngularVelocity(), c = new s.Oi;
                    c.position = n, c.angle = a;
                    var d = new s.Vb;
                    d.density = 4, d.friction = .3, d.restitution = .1, d.filter = this.zeroFilter;
                    var p = i.CreateBody(c);
                    p.SetLinearVelocity(h), p.SetAngularVelocity(l);
                    var u = i.CreateBody(c);
                    u.SetLinearVelocity(h), u.SetAngularVelocity(l);
                    var m = i.CreateBody(c);
                    m.SetLinearVelocity(h), m.SetAngularVelocity(l);
                    var f = i.CreateBody(c);
                    f.SetLinearVelocity(h), f.SetAngularVelocity(l);
                    var y = this.mainBody.GetShapeList(), v = y.GetVertices();
                    d.vertexCount = 4, d.vertices = v, p.CreateShape(d), p.SetMassFromShapes(), v = (y = y.GetNext()).GetVertices(), d.vertices = v, u.CreateShape(d), u.SetMassFromShapes(), v = (y = y.GetNext()).GetVertices(), d.vertices = v, m.CreateShape(d), m.SetMassFromShapes(), v = (y = y.GetNext()).GetVertices(), d.vertices = v, f.CreateShape(d), f.SetMassFromShapes(), i.DestroyBody(this.mainBody), i.DestroyBody(this.frontShockBody), i.DestroyBody(this.backShockBody), this.mainFrontMC.visible = true, f.SetUserData(this.mainFrontMC), this.paintVector.push(f), this.mainSeatMC.visible = true, u.SetUserData(this.mainSeatMC), this.paintVector.push(u), this.mainRearMC.visible = true, p.SetUserData(this.mainRearMC), this.paintVector.push(p), this.mainBaseMC.visible = true, m.SetUserData(this.mainBaseMC), this.paintVector.push(m), this.mainMC.visible = false, this.shockMC.graphics.clear(), o.ij.instance.playAreaSoundInstance("MetalSmashHeavy", this.mainBody);
                }, c.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, c.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, c.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, c.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, c.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, c.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.mainHand1 && (this._session.m_world.DestroyJoint(this.mainHand1), this.mainHand1 = null), this.checkEject());
                }, c.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.mainHand2 && (this._session.m_world.DestroyJoint(this.mainHand2), this.mainHand2 = null), this.checkEject());
                }, c.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.mainLeg1 && (this._session.m_world.DestroyJoint(this.mainLeg1), this.mainLeg1 = null), this.checkEject());
                }, c.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.mainLeg2 && (this._session.m_world.DestroyJoint(this.mainLeg2), this.mainLeg2 = null), this.checkEject());
                }, c.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 2), this.setJoint(this.elbowJoint1, 1.04, 15), this.setJoint(this.elbowJoint2, 1.04, 15);
                }, c.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, 1, 1), this.setJoint(this.elbowJoint1, 0, 15), this.setJoint(this.elbowJoint2, 0, 15);
                }, c.lungePoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 0, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 2, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, c.lungePoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 0, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 2, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, h = n, (l = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.removeAction(this.reAttaching), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), n;
            }(d);
            function N(e, t) {
                return (N = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var U = function (e) {
                var t, i;
                function o(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o) || this).reAttachDistance = .25, n.ejectImpulse = 4, n.reAttaching = function () {
                        var e = 0, t = n._session.m_world;
                        if (n.mainHand1 || n.elbowJoint1.broken || n.shoulderJoint1.broken) e += 1; else {
                            var i = n.lowerArm1Body.GetWorldPoint(new s._m(0, n.lowerArm1Shape.GetVertices()[2].y)), r = n.mainBody.GetWorldPoint(n.handleAnchorPoint);
                            Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.mainHand1 = t.CreateJoint(n.mainHand1JointDef), n.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                        }
                        n.mainHand2 || n.elbowJoint2.broken || n.shoulderJoint2.broken ? e += 1 : (i = n.lowerArm2Body.GetWorldPoint(new s._m(0, n.lowerArm2Shape.GetVertices()[2].y)), r = n.mainBody.GetWorldPoint(n.handleAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.mainHand2 = t.CreateJoint(n.mainHand2JointDef), n.lowerArm2MC.hand.gotoAndStop(1), e += 1));
                        var o = n.kneeJoint1.GetJointAngle(), a = n.kneeJoint2.GetJointAngle(), h = !(!(o < .5 && o > .25 || n.kneeJoint1.broken) || !(a < .5 && a > .25 || n.kneeJoint2.broken));
                        n.mainPelvis ? e += 1 : (i = n.pelvisBody.GetPosition(), r = n.mainBody.GetWorldPoint(n.pelvisAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && h && (n.mainPelvis = t.CreateJoint(n.mainPelvisJointDef), e += 1)), n.mainPelvis && (n.mainLeg1 ? e += 1 : (i = n.upperLeg1Body.GetPosition(), r = n.mainBody.GetWorldPoint(n.leg1AnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && h && (n.mainLeg1 = t.CreateJoint(n.mainLeg1JointDef), e += 1)), n.mainLeg2 ? e += 1 : (i = n.upperLeg2Body.GetPosition(), r = n.mainBody.GetWorldPoint(n.leg2AnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && h && (n.mainLeg2 = t.CreateJoint(n.mainLeg2JointDef), e += 1))), e >= 5 && n.removeAction(n.reAttaching);
                    }, n;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, N(t, i);
                var n = o.prototype;
                return n.grabAction = function (e, t, i) {
                    var o = e.GetShapeList(), n = e.GetWorldPoint(new s._m(0, o.GetVertices()[2].y));
                    if (!this.mainSmashed && !this._dying && !this.userVehicle) {
                        var a = this.mainBody.GetWorldPoint(this.handleAnchorPoint);
                        if (Math.abs(n.x - a.x) < this.reAttachDistance && Math.abs(n.y - a.y) < this.reAttachDistance) return void this.reAttach(e);
                    }
                    var l = new s.tu;
                    if (i.IsStatic() || (l.enableLimit = true), l.maxMotorTorque = 4, l.Initialize(i, e, n), e == this.lowerArm1Body) if (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), t.GetUserData() instanceof h.xJ) {
                        var c = t.GetUserData();
                        if (this.userVehicle && c != this.userVehicle) this.gripJoint1 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm1Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                            case 0:
                                break;
                            case 1:
                                this.currentPose = 10;
                                break;
                            case 2:
                                this.currentPose = 11;
                                break;
                            case 3:
                                this.currentPose = 12;
                        }
                    } else this.gripJoint1 = this._session.m_world.CreateJoint(l);
                    if (e == this.lowerArm2Body) if (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), t.GetUserData() instanceof h.xJ) if (c = t.GetUserData(), this.userVehicle && c != this.userVehicle) this.gripJoint2 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm2Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                        case 0:
                            break;
                        case 1:
                            this.currentPose = 10;
                            break;
                        case 2:
                            this.currentPose = 11;
                            break;
                        case 3:
                            this.currentPose = 12;
                    } else this.gripJoint2 = this._session.m_world.CreateJoint(l);
                }, n.eject = function () {
                    if (!this.ejected) {
                        e.prototype.eject.call(this);
                        var t = this.mainBody.GetAngle() - Math.PI / 2, i = Math.cos(t) * this.ejectImpulse, r = Math.sin(t) * this.ejectImpulse;
                        this.chestBody.ApplyImpulse(new s._m(i, r), this.chestBody.GetWorldCenter()), this.pelvisBody.ApplyImpulse(new s._m(i, r), this.pelvisBody.GetWorldCenter());
                    }
                }, n.reAttach = function (e) {
                    var t, i, o;
                    this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), this.contactResultBuffer.delete(this.lowerArm1Shape), this.contactResultBuffer.delete(this.lowerArm2Shape), this.ejected = false, this.currentPose = 0, this.releaseGrip();
                    var n = 180 / Math.PI;
                    i = -10 / n - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle() - this.neckJoint.GetJointAngle()), o = 10 / n - t, this.neckJoint.SetLimits(i, o);
                    var a = this._session.m_world;
                    e == this.lowerArm1Body ? (this.mainHand1 = a.CreateJoint(this.mainHand1JointDef), this.lowerArm1MC.hand.gotoAndStop(1)) : (this.mainHand2 = a.CreateJoint(this.mainHand2JointDef), this.lowerArm2MC.hand.gotoAndStop(1));
                    var h = new s.fT;
                    h.categoryBits = 513, h.groupIndex = -2, this.handleShape.SetFilterData(h), a.Refilter(this.handleShape), (h = this.zeroFilter.Copy()).groupIndex = -2, this.shaftShape.SetFilterData(h), a.Refilter(this.shaftShape), this.actionsVector.push(this.reAttaching);
                }, n.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.mainHand1 && (this._session.m_world.DestroyJoint(this.mainHand1), this.mainHand1 = null), this.checkEject());
                }, n.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.mainHand2 && (this._session.m_world.DestroyJoint(this.mainHand2), this.mainHand2 = null), this.checkEject());
                }, n.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.mainLeg1 && (this._session.m_world.DestroyJoint(this.mainLeg1), this.mainLeg1 = null), this.checkEject());
                }, n.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.mainLeg2 && (this._session.m_world.DestroyJoint(this.mainLeg2), this.mainLeg2 = null), this.checkEject());
                }, o;
            }(V);
            function W(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function X(e, t) {
                return (X = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Y = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o, -1, "Santa") || this).ejectImpulse = 0, n.frontContacts = 0, n.backContacts = 0, n.wheelMaxSpeed = 30, n.accelStep = 1.25, n.maxTorque = 1e5, n.gravityDisplacement = -0.3333333333333333, n.helmetSmashLimit = 2, n.sleighSmashLimit = 200, n.impulseLeft = 1.3, n.impulseRight = 1.7, n.impulseOffset = 1, n.maxSpinAV = 3.5, n.pumpCounter = 0, n.boostVal = 0, n.boostMax = 50, n.boostStepUp = .5, n.boostStepDown = .5, n.floatElves = function () {
                        for (var e = n.elf1.antiGravArray, t = e.length, i = 0; i < t; i++) {
                            var s = e[i];
                            s.IsSleeping() || (s.m_linearVelocity.y += n.gravityDisplacement);
                        }
                        for (t = (e = n.elf2.antiGravArray).length, i = 0; i < t; i++) (s = e[i]).IsSleeping() || (s.m_linearVelocity.y += n.gravityDisplacement);
                    }, n.contactSleighResultHandler = function (e) {
                        var t = e.impulse;
                        t > n.contactImpulseDict.get(n.frontShape) && (n.contactResultBuffer.get(n.frontShape) ? t > n.contactResultBuffer.get(n.frontShape).impulse && n.contactResultBuffer.set(n.frontShape, e) : n.contactResultBuffer.set(n.frontShape, e));
                    }, n.contactStemResultHandler = function (e) {
                        var t = e.impulse;
                        t > n.contactImpulseDict.get(n.stem3Shape) && (n.contactResultBuffer.get(n.stem3Shape) ? t > n.contactResultBuffer.get(n.stem3Shape).impulse && n.contactResultBuffer.set(n.stem3Shape, e) : n.contactResultBuffer.set(n.stem3Shape, e));
                    }, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            e.shape1 == n.frontWheelShape ? n.frontContacts += 1 : n.backContacts += 1;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, "hit");
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (e.shape1 == n.frontWheelShape ? n.frontContacts -= 1 : n.backContacts -= 1);
                    }, n.shapeRefScale = 50, n.elf1 = new Z(t, i, r.elf1, o, -2, "Elf1", W(n), 35), n.elf2 = new Z(t, i, r.elf2, o, -4, "Elf1", W(n), 70), n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, X(t, i);
                var h, c, d = n.prototype;
                return d.checkKeyStates = function () {
                    e.prototype.checkKeyStates.call(this), this.checkElfKeys(this.elf1), this.checkElfKeys(this.elf2);
                }, d.checkElfKeys = function (e) {
                    e.dead || (e.userVehicle ? e.userVehicle.operateKeys(this._session.iteration, this.leftPressed, this.rightPressed, this.upPressed, this.downPressed, this.spacePressed, this.shiftPressed, this.ctrlPressed, this.zPressed) : (this.leftPressed ? this.rightPressed ? e.leftAndRightActions() : e.leftPressedActions() : this.rightPressed ? e.rightPressedActions() : e.leftAndRightActions(), this.upPressed ? this.downPressed ? e.upAndDownActions() : e.upPressedActions() : this.downPressed ? e.downPressedActions() : e.upAndDownActions(), this.spacePressed ? e.spacePressedActions() : e.spaceNullActions(), this.shiftPressed ? e.shiftPressedActions() : e.shiftNullActions(), this.ctrlPressed ? e.ctrlPressedActions() : e.ctrlNullActions(), this.zPressed ? e.zPressedActions() : e.zNullActions()));
                }, d.checkReplayData = function (t, i) {
                    e.prototype.checkReplayData.call(this, t, i), this.checkElfReplayData(t, i, this.elf1), this.checkElfReplayData(t, i, this.elf2);
                }, d.checkElfReplayData = function (e, t, i) {
                    i.dead || (i.userVehicle ? i.userVehicle.operateReplayData(this._session.iteration, t) : ("1" == t.charAt(0) ? "1" == t.charAt(1) ? i.leftAndRightActions() : i.leftPressedActions() : "1" == t.charAt(1) ? i.rightPressedActions() : i.leftAndRightActions(), "1" == t.charAt(2) ? "1" == t.charAt(3) ? i.upAndDownActions() : i.upPressedActions() : "1" == t.charAt(3) ? i.downPressedActions() : i.upAndDownActions(), "1" == t.charAt(4) ? i.spacePressedActions() : i.spaceNullActions(), "1" == t.charAt(5) ? i.shiftPressedActions() : i.shiftNullActions(), "1" == t.charAt(6) ? i.ctrlPressedActions() : i.ctrlNullActions(), "1" == t.charAt(7) ? i.zPressedActions() : i.zNullActions()));
                }, d.switchCamera = function () {
                    this._session.camera.focus == this.cameraFocus ? this._session.camera.focus = this.elf1.cameraFocus : this._session.camera.focus == this.elf1.cameraFocus ? this._session.camera.focus = this.elf2.cameraFocus : this._session.camera.focus = this.cameraFocus;
                }, d.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.sleighBody.GetAngle(), t = (this.sleighBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseLeft * t, r = Math.sin(e) * this.impulseLeft * t, o = this.sleighBody.GetLocalCenter();
                        this.sleighBody.ApplyImpulse(new s._m(r, -i), this.sleighBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.sleighBody.ApplyImpulse(new s._m(-r, i), this.sleighBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, d.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.sleighBody.GetAngle(), t = (this.sleighBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseRight * t, r = Math.sin(e) * this.impulseRight * t, o = this.sleighBody.GetLocalCenter();
                        this.sleighBody.ApplyImpulse(new s._m(-r, i), this.sleighBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.sleighBody.ApplyImpulse(new s._m(r, -i), this.sleighBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, d.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, d.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.midWheel1Joint.EnableMotor(true), this.midWheel2Joint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.sleighReigns && (this.sleighReigns.EnableMotor(true), this.pumpCounter = 0)), this.wheelCurrentSpeed = this.midWheel1Joint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.midWheel1Joint.SetMotorSpeed(this.wheelNewSpeed), this.midWheel2Joint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.sleighReigns && (this.sleighReigns.SetMotorSpeed(6 * Math.sin(this.pumpCounter)), this.pumpCounter += .6));
                }, d.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.midWheel1Joint.EnableMotor(true), this.midWheel2Joint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.sleighReigns && (this.sleighReigns.EnableMotor(true), this.pumpCounter = 0)), this.wheelCurrentSpeed = this.midWheel2Joint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.midWheel1Joint.SetMotorSpeed(this.wheelNewSpeed), this.midWheel2Joint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.sleighReigns && (this.sleighReigns.SetMotorSpeed(6 * Math.sin(this.pumpCounter)), this.pumpCounter += .6));
                }, d.upAndDownActions = function () {
                    this.ejected ? 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0) : this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.midWheel1Joint.EnableMotor(false), this.midWheel2Joint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.sleighReigns && this.sleighReigns.EnableMotor(false));
                }, d.spacePressedActions = function () {
                    if (this.ejected) this.startGrab(); else if (this.boostVal += this.boostStepUp, this.boostVal = Math.min(this.boostMax, this.boostVal), this.boostVal < this.boostMax) {
                        for (var e = this.antiGravArray.length, t = 0; t < e; t++) {
                            var i = this.antiGravArray[t];
                            i.IsSleeping() || (i.m_linearVelocity.y += this.gravityDisplacement);
                        }
                        var r = this.elf1.antiGravArray;
                        for (e = r.length, t = 0; t < e; t++) (i = r[t]).IsSleeping() || (i.m_linearVelocity.y += this.gravityDisplacement);
                        for (e = (r = this.elf2.antiGravArray).length, t = 0; t < e; t++) (i = r[t]).IsSleeping() || (i.m_linearVelocity.y += this.gravityDisplacement);
                        if (!this.snowSpray) {
                            var n = new s._m(this._startX - 143 / this.character_scale, this._startY + 178 / this.character_scale), a = new s._m(this._startX + 107 / this.character_scale, this._startY + 178 / this.character_scale);
                            this.snowSpray = this._session.particleController.createSnowSpray("snowflakes", this.sleighBody, n, a, 0, 0, 180, 5, 5e3, this._session.containerSprite), this.sleighBellLoop = o.ij.instance.playAreaSoundLoop("SleighBellLoop", this.sleighBody, 0, 0), this.sleighBellLoop.fadeIn(.5);
                        }
                    } else this.snowSpray && (this.snowSpray.stopSpewing(), this.snowSpray = null, this.sleighBellLoop.fadeOut(.5), this.sleighBellLoop = null);
                }, d.spaceNullActions = function () {
                    this.ejected && this.releaseGrip(), this.boostVal -= this.boostStepDown, this.boostVal = Math.max(0, this.boostVal), this.snowSpray && (this.snowSpray.stopSpewing(), this.snowSpray = null, this.sleighBellLoop.fadeOut(.5), this.sleighBellLoop = null);
                }, d.shiftPressedActions = function () {
                    this.ejected ? this.currentPose = 6 : (this.elf1.legsOk || this.elf1.eject(), this.elf2.legsOk || this.elf2.eject());
                }, d.shiftNullActions = function () {
                    6 == this._currentPose && (this.currentPose = 0);
                }, d.ctrlPressedActions = function () {
                    this.ejected && (this.currentPose = 7);
                }, d.ctrlNullActions = function () {
                    7 == this._currentPose && (this.currentPose = 0);
                }, d.zPressedActions = function () {
                    this.ejected ? (this.elf1.eject(), this.elf2.eject()) : (this.ejectImpulse = 5, this.eject());
                }, d.actions = function () {
                    this.boostMeter.scaleY = 1 - this.boostVal / this.boostMax, this.frontContacts + this.backContacts > 0 && Math.abs(this.backWheelBody.GetAngularVelocity()) > 12 ? this.skiLoop || (this.skiLoop = o.ij.instance.playAreaSoundLoop("SkiLoop", this.sleighBody, 0, 5e3 * Math.random()), this.skiLoop.fadeIn(.2)) : this.skiLoop && (this.skiLoop.fadeOut(.2), this.skiLoop = null), e.prototype.actions.call(this), this.elf1.actions(), this.elf2.actions();
                }, d.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                        case 6:
                        case 7:
                        case 8:
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, d.create = function () {
                    this.createFilters(), this.createBodies(), this.createJoints(), this.createMovieClips(), this.setLimits(), this.createDictionaries(), this.elf1.create(), this.elf2.create(), this._session.containerSprite.addChild(this.sleighMC), this._session.containerSprite.addChild(this.strapsSprite), this.createStraps(), this._session instanceof C.i && this.actionsVector.push(this.floatElves), this.dispatchEvent(new a.ju(a.ju.COMPLETE));
                }, d.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.frontContacts = 0, this.backContacts = 0, this.pumpCounter = 0, this.boostVal = 0, this.elf1.reset(), this.elf2.reset(), this.createStraps();
                }, d.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null, this.snowSpray = null, this.skiLoop = null, this.sleighBellLoop = null, this.antiGravArray = [];
                    for (var t = 0; t < this.bells.length; t++) {
                        var i = this.bells[t];
                        i.parent.removeChild(i);
                    }
                    this.bells = null, this.elf1.die(), this.elf2.die();
                }, d.paint = function () {
                    e.prototype.paint.call(this), this.elf1.paint(), this.elf2.paint(), this.strapsSprite.graphics.clear(), this.strapsSprite.graphics.lineStyle(1, 3355443);
                    var t = this.strapHeadJoints[0], i = t.GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2();
                    this.strapsSprite.graphics.moveTo(i.x * this.m_physScale, i.y * this.m_physScale), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale);
                    for (var r = this.strapHeadJoints.length, o = 1; o < r; o++) i = (t = this.strapHeadJoints[o]).GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2(), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale);
                    for (this.strapsSprite.graphics.lineStyle(1.5, 3355443), i = (t = this.strapChest1Joints[0]).GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2(), this.strapsSprite.graphics.moveTo(i.x * this.m_physScale, i.y * this.m_physScale), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale), r = this.strapChest1Joints.length, o = 1; o < r; o++) i = (t = this.strapChest1Joints[o]).GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2(), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale);
                    for (i = (t = this.strapChest2Joints[0]).GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2(), this.strapsSprite.graphics.moveTo(i.x * this.m_physScale, i.y * this.m_physScale), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale), r = this.strapChest2Joints.length, o = 1; o < r; o++) i = (t = this.strapChest2Joints[o]).GetInterpolatedAnchor1(), s = t.GetInterpolatedAnchor2(), this.strapsSprite.graphics.lineTo(s.x * this.m_physScale, s.y * this.m_physScale);
                }, d.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit), this.contactImpulseDict.set(this.frontShape, this.sleighSmashLimit), this.contactImpulseDict.set(this.skiShape, this.sleighSmashLimit), this.contactImpulseDict.set(this.stem3Shape, this.sleighSmashLimit), this.contactAddSounds.set(this.backWheelShape, "SkiImpact1"), this.contactAddSounds.set(this.frontWheelShape, "SkiImpact2"), this.contactAddSounds.set(this.frontShape, "SleighImpact1"), this.contactAddSounds.set(this.bumperShape, "SleighImpact2"), this.contactAddSounds.set(this.stem1Shape, "SleighImpact2"), this.contactAddSounds.set(this.stem2Shape, "SleighImpact1"), this.contactAddSounds.set(this.stem3Shape, "SleighImpact1"), this.contactAddSounds.set(this.rearShape, "SleighImpact3");
                }, d.createBodies = function () {
                    e.prototype.createBodies.call(this), this.antiGravArray = [];
                    var t = new s.Vb, i = new s.lB, o = new s.Oi, a = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.defaultFilter, this.paintVector.splice(this.paintVector.indexOf(this.chestBody), 1), this.paintVector.splice(this.paintVector.indexOf(this.pelvisBody), 1), this._session.m_world.DestroyBody(this.chestBody), this._session.m_world.DestroyBody(this.pelvisBody);
                    var h = this.shapeGuide.chestShape;
                    o.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), o.angle = h.rotation / (180 / Math.PI), this.chestBody = this._session.m_world.CreateBody(o), t.vertexCount = 6;
                    for (var l = 0; l < 6; l++) {
                        var c = this.shapeGuide["chestVert" + [l]];
                        t.vertices[l] = new s._m(c.x / this.character_scale, c.y / this.character_scale);
                    }
                    for (this.chestShape = this.chestBody.CreateShape(t), this.chestShape.SetMaterial(2), this.chestShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.chestBody.AllowSleeping(false), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, h = this.shapeGuide.pelvisShape, a.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), a.angle = h.rotation / (180 / Math.PI), this.pelvisBody = this._session.m_world.CreateBody(a), t.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["pelvisVert" + [l]], t.vertices[l] = new s._m(c.x / this.character_scale, c.y / this.character_scale);
                    this.pelvisShape = this.pelvisBody.CreateShape(t), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.pelvisBody.AllowSleeping(false), this.paintVector.push(this.pelvisBody);
                    var d = new s.Oi, p = new s.Oi;
                    if (t = new s.Vb, i = new s.lB, t.density = 3, t.friction = .3, t.restitution = .3, i.density = 3, i.friction = 1, i.restitution = .1, this._session.version > 1.51) {
                        t.filter = this.defaultFilter.Copy(), i.filter = this.defaultFilter.Copy();
                        var u = this.defaultFilter.groupIndex;
                    } else t.filter.categoryBits = 520, i.filter.categoryBits = 520, u = 0;
                    for (this.sleighBody = this._session.m_world.CreateBody(d), t.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["rear_" + [l + 1]], t.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.rearShape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.rearShape, this.contactSleighResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.rearShape, this.contactAddHandler), t.vertexCount = 6, l = 0; l < 6; l++) c = this.shapeGuide["base_" + [l + 1]], t.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.skiShape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.skiShape, this.contactResultHandler), t.filter.groupIndex = -1, t.vertexCount = 4, l = 0; l < 4; l++) c = this.shapeGuide["back_" + [l + 1]], t.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.backShape = this.sleighBody.CreateShape(t), t.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["seat_" + [l + 1]], t.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    for (this.seatShape = this.sleighBody.CreateShape(t), t.filter.groupIndex = u, t.vertexCount = 5, l = 0; l < 5; l++) c = this.shapeGuide["front_" + [l + 1]], t.vertices[l] = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    this.frontShape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.frontShape, this.contactSleighResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frontShape, this.contactAddHandler), t.filter.groupIndex = -2, this.vertsBrokenStem = [];
                    var m, f = [];
                    for (t.vertexCount = 4, l = 0; l < 4; l++) c = this.shapeGuide["stem1_" + [l + 1]], m = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), t.vertices[l] = m, f.push(m.Copy());
                    for (this.vertsBrokenStem.push(f), this.stem1Shape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.stem1Shape, this.contactStemResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.stem1Shape, this.contactAddHandler), f = [], l = 0; l < 4; l++) c = this.shapeGuide["stem2_" + [l + 1]], m = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), t.vertices[l] = m, f.push(m.Copy());
                    for (this.vertsBrokenStem.push(f), this.stem2Shape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.stem2Shape, this.contactStemResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.stem2Shape, this.contactAddHandler), f = [], l = 0; l < 4; l++) c = this.shapeGuide["stem3_" + [l + 1]], m = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), t.vertices[l] = m, f.push(m.Copy());
                    for (this.vertsBrokenStem.push(f), this.stem3Shape = this.sleighBody.CreateShape(t), this._session.contactListener.registerListener(r.$S.RESULT, this.stem3Shape, this.contactStemResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.stem3Shape, this.contactAddHandler), t.filter.groupIndex = u, this.newBaseVerts = [], l = 0; l < 5; l++) c = this.shapeGuide["newbase_" + [l + 1]], m = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), this.newBaseVerts.push(m);
                    for (h = this.shapeGuide.handAnchor, d.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), t.vertexCount = 4, t.SetAsBox(.1, .1), t.isSensor = true, this.reignsBody = this._session.m_world.CreateBody(d), this.reignsBody.CreateShape(t), this.reignsBody.SetMassFromShapes(), h = this.shapeGuide.bumper, i.radius = h.width / 2 / this.character_scale, i.localPosition = new s._m(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), this.bumperShape = this.sleighBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.bumperShape, this.contactSleighResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.bumperShape, this.contactAddHandler), this.sleighBody.SetMassFromShapes(), this.paintVector.push(this.sleighBody), t.density = .25, t.isSensor = false, t.filter.groupIndex = 0, this.boxBodies = [], l = 0; l < 8; l++) {
                        var y = new s.Oi;
                        h = this.shapeGuide["box" + (l + 1)], y.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), y.angle = h.rotation / (180 / Math.PI), t.SetAsBox(h.scaleX * this.shapeRefScale / this.character_scale, h.scaleY * this.shapeRefScale / this.character_scale);
                        var v = this._session.m_world.CreateBody(y);
                        v.CreateShape(t), v.SetMassFromShapes(), this.paintVector.push(v), this.boxBodies.push(v), this.antiGravArray.push(v);
                    }
                    for (i.localPosition = new s._m, i.filter.groupIndex = 0, h = this.shapeGuide.backWheel, p.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), p.angle = h.rotation / n.oneEightyOverPI, i.radius = h.width / 2 / this.character_scale, this.wheelRadius = .5 * h.width, this.backWheelBody = this._session.m_world.CreateBody(p), this.backWheelShape = this.backWheelBody.CreateShape(i), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.backWheelShape, this.wheelContactRemove), h = this.shapeGuide.midWheel1, p.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), p.angle = h.rotation / n.oneEightyOverPI, i.radius = h.width / 2 / this.character_scale, this.midWheel1Body = this._session.m_world.CreateBody(p), this.midWheel1Shape = this.midWheel1Body.CreateShape(i), this.midWheel1Body.SetMassFromShapes(), h = this.shapeGuide.midWheel2, i.filter.groupIndex = -1, p.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), p.angle = h.rotation / n.oneEightyOverPI, i.radius = h.width / 2 / this.character_scale, this.midWheel2Body = this._session.m_world.CreateBody(p), this.midWheel2Shape = this.midWheel2Body.CreateShape(i), this.midWheel2Body.SetMassFromShapes(), i.filter.groupIndex = 0, h = this.shapeGuide.frontWheel, p.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), p.angle = h.rotation / n.oneEightyOverPI, i.radius = h.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(p), this.frontWheelShape = this.frontWheelBody.CreateShape(i), this.frontWheelBody.SetMassFromShapes(), this.wheelMultiplier = this.wheelRadius / (.5 * h.width), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.frontWheelShape, this.wheelContactRemove), this.antiGravArray.push(this.head1Body), this.antiGravArray.push(this.chestBody), this.antiGravArray.push(this.pelvisBody), this.antiGravArray.push(this.upperArm1Body), this.antiGravArray.push(this.upperArm2Body), this.antiGravArray.push(this.lowerArm1Body), this.antiGravArray.push(this.lowerArm2Body), this.antiGravArray.push(this.upperLeg1Body), this.antiGravArray.push(this.upperLeg2Body), this.antiGravArray.push(this.lowerLeg1Body), this.antiGravArray.push(this.lowerLeg2Body), this.antiGravArray.push(this.sleighBody), this.antiGravArray.push(this.reignsBody), this.antiGravArray.push(this.backWheelBody), this.antiGravArray.push(this.midWheel1Body), this.antiGravArray.push(this.midWheel2Body), this.antiGravArray.push(this.frontWheelBody), this.vertsBrokenSleigh = [], l = 0; l < 7; l++) {
                        f = [];
                        for (var g = 0; g < 6; g++) (h = this.shapeGuide["broken_" + (l + 1) + "_" + (g + 1)]) && f.push(new s._m(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale));
                        this.vertsBrokenSleigh.push(f);
                    }
                    for (this.vertsBrokenSki = [], l = 0; l < 3; l++) {
                        for (f = [], g = 0; g < 6; g++) (h = this.shapeGuide["ski_" + (l + 1) + "_" + (g + 1)]) && f.push(new s._m(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale));
                        this.vertsBrokenSki.push(f);
                    }
                }, d.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this);
                    var t = this.sourceObject.sleighShards;
                    this._session.particleController.createBMDArray("sleighShards", t);
                    var i = this.sourceObject.snowflakes, r = new a.uq(1, 90, 16777215, 1, 0, 1, 2.5, 2.5, .7, 3);
                    this._session.particleController.createBMDArray("snowflakes", i, [r]), this._session.containerSprite.addChildAt(this.chestMC, this._session.containerSprite.getChildIndex(this.lowerLeg1MC)), this.sleighMC = this.sourceObject.sleigh, this.sleighMC.scaleX = this.sleighMC.scaleY = 1 / this.mc_scale, this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC)), this.chestBody.GetLocalCenter(), this.pelvisBody.GetLocalCenter();
                    var o = this.sleighBody.GetLocalCenter();
                    o = new s._m((this._startX - o.x) * this.character_scale, (this._startY - o.y) * this.character_scale);
                    var n, h = this.shapeGuide.rear_1, c = new s._m(h.x + o.x, h.y + o.y);
                    this.sleighMC.inner.x = c.x, this.sleighMC.inner.y = c.y, this.sleighBody.SetUserData(this.sleighMC), this._session.containerSprite.addChild(this.sleighMC), this.strapsSprite = new a.jy, this._session.containerSprite.addChild(this.strapsSprite), this.brokenSleighMCs = [];
                    for (var d = 1; d < 8; d++) (n = this.sourceObject["sleigh" + d]).scaleX = n.scaleY = 1 / this.mc_scale, n.visible = false, this.brokenSleighMCs.push(n), this._session.containerSprite.addChild(n);
                    for ((n = this.sourceObject.stem).scaleX = n.scaleY = 1 / this.mc_scale, n.visible = false, this.stemMC = n, this._session.containerSprite.addChild(n), this.brokenSkiMCs = [], d = 1; d < 4; d++) (n = this.sourceObject["ski" + d]).scaleX = n.scaleY = 1 / this.mc_scale, n.visible = false, this.brokenSkiMCs.push(n), this._session.containerSprite.addChild(n);
                    for (this.boxMCs = [], d = 0; d < 8; d++) {
                        var p = this.sourceObject["box" + (d + 1)];
                        p.scaleX = p.scaleY = 1 / this.mc_scale, this.boxBodies[d].SetUserData(p), this.boxMCs.push(p), this._session.containerSprite.addChildAt(p, this._session.containerSprite.getChildIndex(this.sleighMC));
                    }
                    this.boostHolder = new a.jy, this.boostHolder.graphics.beginFill(13421772), this.boostHolder.graphics.drawRoundRect(-2, -52, 10, 54, 4, 4), this.boostHolder.graphics.endFill(), this.boostHolder.graphics.beginFill(16613761), this.boostHolder.graphics.drawRect(0, 0, 6, -50), this.boostHolder.graphics.endFill(), l.Z.hideHUD || this._session.addChild(this.boostHolder), this.boostHolder.y = 90, this.boostHolder.x = 870, this.boostMeter = new a.jy, this.boostMeter.graphics.beginFill(16776805), this.boostMeter.graphics.drawRect(0, 0, 6, -50), this.boostMeter.graphics.endFill(), this.boostHolder.addChild(this.boostMeter);
                }, d.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    i = -5 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 5 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s._m, a = new s.wN;
                    l = this.shapeGuide.handAnchor, n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.Initialize(this.sleighBody, this.reignsBody, n, new s._m(0, 1)), a.enableLimit = true, a.maxMotorForce = 1e3, a.upperTranslation = 15 / this.m_physScale, a.lowerTranslation = -100 / this.m_physScale, this.sleighReigns = this._session.m_world.CreateJoint(a);
                    var h = new s.tu;
                    h.maxMotorTorque = this.maxTorque, h.enableLimit = false, h.lowerAngle = 0, h.upperAngle = 0, h.Initialize(this.reignsBody, this.lowerArm1Body, n), this.reignsHand1 = this._session.m_world.CreateJoint(h), h.Initialize(this.reignsBody, this.lowerArm2Body, n), this.reignsHand2 = this._session.m_world.CreateJoint(h), n.Set(this.pelvisBody.GetWorldCenter().x, this.pelvisBody.GetWorldCenter().y), h.Initialize(this.sleighBody, this.pelvisBody, n), h.enableLimit = true, this.sleighPelvis = this._session.m_world.CreateJoint(h), h.enableLimit = false, this.pelvisAnchorPoint = this.sleighBody.GetLocalPoint(n), l = this.shapeGuide.backWheel, n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.Initialize(this.sleighBody, this.backWheelBody, n), this.backWheelJoint = this._session.m_world.CreateJoint(h), l = this.shapeGuide.midWheel1, n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.Initialize(this.sleighBody, this.midWheel1Body, n), this.midWheel1Joint = this._session.m_world.CreateJoint(h), l = this.shapeGuide.midWheel2, n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.Initialize(this.sleighBody, this.midWheel2Body, n), this.midWheel2Joint = this._session.m_world.CreateJoint(h), l = this.shapeGuide.frontWheel, n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.Initialize(this.sleighBody, this.frontWheelBody, n), this.frontWheelJoint = this._session.m_world.CreateJoint(h);
                    var l = this.shapeGuide.footAnchor;
                    n.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.Initialize(this.sleighBody, this.lowerLeg1Body, n), this.sleighFoot1 = this._session.m_world.CreateJoint(h), this.leg1AnchorPoint = this.sleighBody.GetLocalPoint(n), h.Initialize(this.sleighBody, this.lowerLeg2Body, n), this.sleighFoot2 = this._session.m_world.CreateJoint(h), this.leg2AnchorPoint = this.sleighBody.GetLocalPoint(n);
                }, d.createStraps = function () {
                    this.strapHeadJoints = [], this.strapChest1Joints = [], this.strapChest2Joints = [];
                    var e = new s.qO, t = new s.Oi, i = new s.lB, r = 8;
                    i.density = .25, i.friction = 1, i.restitution = .1, i.filter.categoryBits = 0, i.filter.maskBits = 0, i.radius = 3 / this.m_physScale;
                    for (var o, n = this.reignsBody.GetPosition(), h = this.elf1.head1Body.GetWorldPoint(new s._m(-18 / this.character_scale, 4 / this.character_scale)), l = (h.x - n.x) / r, c = (h.y - n.y) / r, d = n.Copy(), p = this.reignsBody, u = 0; u < r; u++) {
                        t.position.Set(n.x + l * (u + 1), n.y + c * (u + 1)), u < r - 1 ? ((o = this._session.m_world.CreateBody(t)).CreateShape(i), o.SetMassFromShapes(), f = o.GetPosition(), this.antiGravArray.push(o)) : (o = this.elf1.head1Body, f = h), e.Initialize(p, o, d, f);
                        var m = this._session.m_world.CreateJoint(e);
                        this.strapHeadJoints.push(m), p = o, d = f;
                    }
                    for (r = 4, n = h, l = ((h = this.elf2.head1Body.GetWorldPoint(new s._m(-18 / this.character_scale, 4 / this.character_scale))).x - n.x) / r, c = (h.y - n.y) / r, d = n.Copy(), u = 0; u < r; u++) t.position.Set(n.x + l * (u + 1), n.y + c * (u + 1)), u < r - 1 ? ((o = this._session.m_world.CreateBody(t)).CreateShape(i), o.SetMassFromShapes(), f = o.GetPosition(), this.antiGravArray.push(o)) : (o = this.elf2.head1Body, f = h), e.Initialize(p, o, d, f), m = this._session.m_world.CreateJoint(e), this.strapHeadJoints.push(m), p = o, d = f;
                    r = 3;
                    var f, y = this.shapeGuide.strap1Anchor;
                    for (n.Set(this._startX + y.x / this.character_scale, this._startY + y.y / this.character_scale), l = ((h = this.elf1.chestBody.GetWorldPoint(new s._m(0, 20 / this.character_scale))).x - n.x) / r, c = (h.y - n.y) / r, d = n.Copy(), p = this.sleighBody, u = 0; u < r; u++) t.position.Set(n.x + l * (u + 1), n.y + c * (u + 1)), u < r - 1 ? ((o = this._session.m_world.CreateBody(t)).CreateShape(i), o.SetMassFromShapes(), f = o.GetPosition(), this.antiGravArray.push(o)) : (o = this.elf1.chestBody, f = h), e.Initialize(p, o, d, f), m = this._session.m_world.CreateJoint(e), this.strapChest1Joints.push(m), p = o, d = f;
                    r = 5, y = this.shapeGuide.strap2Anchor, n.Set(this._startX + y.x / this.character_scale, this._startY + y.y / this.character_scale), l = ((h = this.elf2.chestBody.GetWorldPoint(new s._m(0, 20 / this.character_scale))).x - n.x) / r, c = (h.y - n.y) / r, d = n.Copy(), p = this.sleighBody, this.bells = [];
                    var v = this._session.containerSprite.getChildIndex(this.strapsSprite) + 2;
                    for (u = 0; u < r; u++) {
                        if (t.position.Set(n.x + l * (u + 1), n.y + c * (u + 1)), u < r - 1) {
                            (o = this._session.m_world.CreateBody(t)).CreateShape(i), o.SetMassFromShapes();
                            var g = new a.KG((0, x.qX)("Character8", "christmas_bell"));
                            g.scale.set(.5), this.bells.push(g), this._session.containerSprite.addChildAt(g, v), o.SetUserData(g), this.paintVector.push(o), f = o.GetWorldPoint(new s._m(0, -1 / this.m_physScale)), this.antiGravArray.push(o);
                        } else o = this.elf2.chestBody, f = h;
                        e.Initialize(p, o, d, f), m = this._session.m_world.CreateJoint(e), this.strapChest2Joints.push(m), p = o, d = f;
                    }
                }, d.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this);
                    for (var t = 0; t < this.brokenSleighMCs.length; t++) {
                        var i = this.brokenSleighMCs[t];
                        i.visible = false;
                    }
                    for (t = 0; t < this.brokenSkiMCs.length; t++) (i = this.brokenSkiMCs[t]).visible = false;
                    this.stemMC.visible = false, this.helmetMC.visible = false, this.head1MC.helmet.visible = true, this.sleighMC.visible = true, this.sleighMC.inner.stem.visible = true, this.sleighMC.inner.ski.visible = true, this.strapsSprite.graphics.clear();
                    var r = this.sleighBody.GetLocalCenter();
                    r = new s._m((this._startX - r.x) * this.character_scale, (this._startY - r.y) * this.character_scale);
                    var o = this.shapeGuide.rear_1, n = new s._m(o.x + r.x, o.y + r.y);
                    for (this.sleighMC.inner.x = n.x, this.sleighMC.inner.y = n.y, this.sleighBody.SetUserData(this.sleighMC), t = 0; t < 8; t++) {
                        var h = this.boxMCs[t];
                        this.boxBodies[t].SetUserData(h);
                    }
                    var l = this.sourceObject.sleighShards;
                    this._session.particleController.createBMDArray("sleighShards", l);
                    var c = this.sourceObject.snowflakes, d = new a.uq(1, 90, 16777215, 1, 0, 1, 2.5, 2.5, .7, 3);
                    this._session.particleController.createBMDArray("snowflakes", c, [d]), this._session.addChild(this.boostHolder);
                }, d.handleContactBuffer = function () {
                    e.prototype.handleContactBuffer.call(this), this.elf1.handleContactBuffer(), this.elf2.handleContactBuffer();
                }, d.handleContactResults = function () {
                    var t;
                    this.contactResultBuffer.get(this.helmetShape) && (t = this.contactResultBuffer.get(this.helmetShape), this.helmetSmash(t.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), e.prototype.handleContactResults.call(this), this.contactResultBuffer.get(this.frontShape) && (t = this.contactResultBuffer.get(this.frontShape), this.sleighSmash(t.impulse), this.contactResultBuffer.delete(this.frontShape), this.contactResultBuffer.delete(this.skiShape), this.contactResultBuffer.delete(this.stem3Shape), this.contactAddBuffer.delete(this.rearShape), this.contactAddBuffer.delete(this.frontShape), this.contactAddBuffer.delete(this.bumperShape), this.contactAddBuffer.delete(this.baseShape), this.contactAddBuffer.delete(this.stem3Shape), this.contactAddBuffer.delete(this.stem2Shape), this.contactAddBuffer.delete(this.stem1Shape), this.contactAddBuffer.delete(this.frontWheelShape), this.contactAddBuffer.delete(this.backWheelShape)), this.contactResultBuffer.get(this.skiShape) && (t = this.contactResultBuffer.get(this.skiShape), this.skiSmash(t.impulse), this.contactResultBuffer.delete(this.skiShape), this.contactAddBuffer.delete(this.frontWheelShape), this.contactAddBuffer.delete(this.backWheelShape)), this.contactResultBuffer.get(this.stem3Shape) && (t = this.contactResultBuffer.get(this.stem3Shape), this.stemSmash(t.impulse), this.contactResultBuffer.delete(this.stem3Shape), this.contactAddBuffer.delete(this.stem3Shape), this.contactAddBuffer.delete(this.stem2Shape), this.contactAddBuffer.delete(this.stem1Shape));
                }, d.checkJoints = function () {
                    if (e.prototype.checkJoints.call(this), this.elf1.strappedIn) {
                        var t = this.strapChest1Joints[0], i = Math.abs(t.m_impulse);
                        i > .4 && this.breakStrap(this.elf1);
                    }
                    this.elf2.strappedIn && (t = this.strapChest2Joints[0], (i = Math.abs(t.m_impulse)) > .4 && this.breakStrap(this.elf2)), this.elf1.checkJoints(), this.elf2.checkJoints();
                }, d.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        if (this.sleighFoot1 && (this._session.m_world.DestroyJoint(this.sleighFoot1), this.sleighFoot1 = null), this.sleighFoot2 && (this._session.m_world.DestroyJoint(this.sleighFoot2), this.sleighFoot2 = null), this.sleighPelvis && (this._session.m_world.DestroyJoint(this.sleighPelvis), this.sleighPelvis = null), this.reignsHand1 && (this._session.m_world.DestroyJoint(this.reignsHand1), this.reignsHand1 = null, this.checkReigns()), this.reignsHand2 && (this._session.m_world.DestroyJoint(this.reignsHand2), this.reignsHand2 = null, this.checkReigns()), this._session.version > 1.51) {
                            for (var t = this.sleighBody.GetShapeList(); t; t = t.m_next) -1 == t.m_filter.groupIndex && (t.m_filter.groupIndex = 0, e.Refilter(t));
                            this.midWheel2Shape.m_filter.groupIndex = 0, e.Refilter(this.midWheel2Shape);
                        } else this.seatShape.m_filter.groupIndex = 0, this.backShape.m_filter.groupIndex = 0, e.Refilter(this.seatShape), e.Refilter(this.backShape);
                        this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                        var i = this.sleighBody.GetAngle() - Math.PI / 2, r = Math.cos(i) * this.ejectImpulse, o = Math.sin(i) * this.ejectImpulse;
                        this.chestBody.ApplyImpulse(new s._m(r, o), this.chestBody.GetWorldCenter()), this.pelvisBody.ApplyImpulse(new s._m(r, o), this.pelvisBody.GetWorldCenter()), this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.midWheel1Joint.EnableMotor(false), this.midWheel2Joint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false)), this.snowSpray && (this.snowSpray.stopSpewing(), this.snowSpray = null, this.sleighBellLoop.fadeOut(.5), this.sleighBellLoop = null);
                    }
                }, d.checkEject = function () {
                    this.reignsHand1 || this.reignsHand2 || this.sleighFoot1 || this.sleighFoot2 || this.eject();
                }, d.sleighSmash = function (e) {
                    this.contactImpulseDict.delete(this.frontShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.rearShape), t.deleteListener(r.$S.RESULT, this.frontShape), t.deleteListener(r.$S.RESULT, this.bumperShape), t.deleteListener(r.$S.ADD, this.rearShape), t.deleteListener(r.$S.ADD, this.frontShape), t.deleteListener(r.$S.ADD, this.bumperShape), this.baseShape && (t.deleteListener(r.$S.RESULT, this.baseShape), t.deleteListener(r.$S.ADD, this.baseShape));
                    var i = this.sleighBody.GetLocalCenter();
                    this._session.particleController.createPointBurst("sleighShards", i.x * this.m_physScale, i.y * this.m_physScale, 100, 30, 20), this.eject(), this.snowSpray && (this.snowSpray.stopSpewing(), this.snowSpray = null, this.sleighBellLoop.fadeOut(.5), this.sleighBellLoop = null);
                    var n = this._session.m_world, a = this.sleighBody.GetPosition(), h = this.sleighBody.GetAngle(), l = (this.sleighBody.GetLinearVelocity(), this.sleighBody.GetAngularVelocity());
                    n.DestroyBody(this.sleighBody), this.sleighMC.visible = false;
                    var c = new s.Oi;
                    c.position = a, c.angle = h;
                    var d = new s.Vb;
                    d.density = 3, d.friction = .3, d.restitution = .3, d.filter = this.zeroFilter;
                    for (var p = this.vertsBrokenSleigh.length, u = 0; u < p; u++) {
                        var m = n.CreateBody(c), f = this.vertsBrokenSleigh[u], y = this.brokenSleighMCs[u];
                        d.vertexCount = f.length, d.vertices = f, m.CreateShape(d), m.SetMassFromShapes(), m.SetAngularVelocity(l), m.SetLinearVelocity(this.sleighBody.GetLinearVelocityFromLocalPoint(m.GetLocalCenter())), m.SetUserData(y), y.visible = true, this.paintVector.push(m);
                    }
                    1 == this.sleighMC.inner.ski.visible && this.skiSmash(0), 1 == this.sleighMC.inner.stem.visible && this.stemSmash(0, false), this.elf1.strappedIn && this.breakStrap(this.elf1), this.elf2.strappedIn && this.breakStrap(this.elf2), this.elf1.eject(), this.elf2.eject(), o.ij.instance.playAreaSoundInstance("SleighSmash", this.sleighBody);
                }, d.skiSmash = function (e) {
                    this.contactImpulseDict.delete(this.skiShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.skiShape), t.deleteListener(r.$S.ADD, this.frontWheelShape), t.deleteListener(r.$S.ADD, this.backWheelShape), t.deleteListener(r.$S.REMOVE, this.frontWheelShape), t.deleteListener(r.$S.REMOVE, this.backWheelShape);
                    var i = this._session.m_world, n = this.sleighBody.GetPosition(), a = this.sleighBody.GetAngle(), h = (this.sleighBody.GetLinearVelocity(), this.sleighBody.GetAngularVelocity());
                    i.DestroyBody(this.backWheelBody), i.DestroyBody(this.midWheel1Body), i.DestroyBody(this.midWheel2Body), i.DestroyBody(this.frontWheelBody), this.skiLoop && this.skiLoop.stopSound(), this.frontContacts = 0, this.backContacts = 0;
                    var l = new s.Oi;
                    l.position = n, l.angle = a;
                    var c = new s.Vb;
                    c.density = 3, c.friction = .3, c.restitution = .3, c.filter = this.zeroFilter;
                    for (var d = [], p = this.vertsBrokenSki.length, u = 0; u < p; u++) {
                        var m = i.CreateBody(l), f = this.vertsBrokenSki[u], y = this.brokenSkiMCs[u];
                        c.vertexCount = f.length, c.vertices = f, m.CreateShape(c), m.SetMassFromShapes(), m.SetAngularVelocity(h), m.SetLinearVelocity(this.sleighBody.GetLinearVelocityFromLocalPoint(m.GetLocalCenter())), m.SetUserData(y), y.visible = true, this.paintVector.push(m), d.push(m);
                    }
                    if (this.sleighMC.visible) {
                        this.sleighMC.inner.ski.visible = false, this.sleighBody.DestroyShape(this.skiShape), c.vertexCount = this.newBaseVerts.length, c.vertices = this.newBaseVerts, this.baseShape = this.sleighBody.CreateShape(c), this.contactAddSounds.set(this.baseShape, "SleighImpact1"), this._session.contactListener.registerListener(r.$S.RESULT, this.baseShape, this.contactSleighResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.baseShape, this.contactAddHandler), this.sleighBody.SetMassFromShapes();
                        var v = this.sleighBody.GetLocalCenter();
                        v = new s._m((this._startX - v.x) * this.character_scale, (this._startY - v.y) * this.character_scale);
                        var g = this.shapeGuide.rear_1, S = new s._m(g.x + v.x, g.y + v.y);
                        for (this.sleighMC.inner.x = S.x, this.sleighMC.inner.y = S.y, p = d.length, u = 0; u < p; u++) this.antiGravArray.push(d[u]);
                    }
                    o.ij.instance.playAreaSoundInstance("SkiSmash", this.sleighBody);
                }, d.stemSmash = function (e, t) {
                    void 0 === t && (t = true), this.contactImpulseDict.delete(this.stem3Shape);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.stem1Shape), i.deleteListener(r.$S.RESULT, this.stem2Shape), i.deleteListener(r.$S.RESULT, this.stem3Shape), i.deleteListener(r.$S.ADD, this.stem1Shape), i.deleteListener(r.$S.ADD, this.stem2Shape), i.deleteListener(r.$S.ADD, this.stem3Shape);
                    var n = this._session.m_world, a = this.sleighBody.GetPosition(), h = this.sleighBody.GetAngle(), l = (this.sleighBody.GetLinearVelocity(), this.sleighBody.GetAngularVelocity()), c = new s.Oi;
                    c.position = a, c.angle = h;
                    var d = new s.Vb;
                    d.density = 3, d.friction = .3, d.restitution = .3, d.filter = this.zeroFilter;
                    for (var p = this.vertsBrokenStem.length, u = n.CreateBody(c), m = 0; m < p; m++) {
                        var f = this.vertsBrokenStem[m];
                        d.vertexCount = f.length, d.vertices = f, u.CreateShape(d);
                    }
                    if (u.SetMassFromShapes(), u.SetAngularVelocity(l), u.SetLinearVelocity(this.sleighBody.GetLinearVelocityFromLocalPoint(u.GetLocalCenter())), u.SetUserData(this.stemMC), this.stemMC.visible = true, this.paintVector.push(u), this.sleighMC.visible) {
                        this.sleighMC.inner.stem.visible = false, this.sleighBody.DestroyShape(this.stem1Shape), this.sleighBody.DestroyShape(this.stem2Shape), this.sleighBody.DestroyShape(this.stem3Shape), this.sleighBody.SetMassFromShapes();
                        var y = this.sleighBody.GetLocalCenter();
                        y = new s._m((this._startX - y.x) * this.character_scale, (this._startY - y.y) * this.character_scale);
                        var v = this.shapeGuide.rear_1, g = new s._m(v.x + y.x, v.y + y.y);
                        if (this.sleighMC.inner.x = g.x, this.sleighMC.inner.y = g.y, this.elf1.strappedIn) {
                            var S = this.strapChest1Joints[0], _ = new s.qO;
                            _.body1 = u, _.body2 = S.m_body2, _.localAnchor1 = S.m_localAnchor1, _.localAnchor2 = S.m_localAnchor2, _.length = S.m_length;
                            var w = n.CreateJoint(_);
                            n.DestroyJoint(S), this.strapChest1Joints[0] = w;
                        }
                        this.elf2.strappedIn && (S = this.strapChest2Joints[0], (_ = new s.qO).body1 = u, _.body2 = S.m_body2, _.localAnchor1 = S.m_localAnchor1, _.localAnchor2 = S.m_localAnchor2, _.length = S.m_length, w = n.CreateJoint(_), n.DestroyJoint(S), this.strapChest2Joints[0] = w), this.antiGravArray.push(u);
                    }
                    t && o.ij.instance.playAreaSoundInstance("StemSnap", this.sleighBody);
                }, d.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, d.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, d.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t);
                }, d.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t);
                }, d.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, d.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, d.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || this.reignsHand1 && (this._session.m_world.DestroyJoint(this.reignsHand1), this.reignsHand1 = null, this.checkReigns());
                }, d.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || this.reignsHand2 && (this._session.m_world.DestroyJoint(this.reignsHand2), this.reignsHand2 = null, this.checkReigns());
                }, d.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || this.sleighFoot1 && (this._session.m_world.DestroyJoint(this.sleighFoot1), this.sleighFoot1 = null, this.checkEject());
                }, d.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || this.sleighFoot2 && (this._session.m_world.DestroyJoint(this.sleighFoot2), this.sleighFoot2 = null, this.checkEject());
                }, d.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.reignsHand1 && (this._session.m_world.DestroyJoint(this.reignsHand1), this.reignsHand1 = null, this.checkReigns()), this.upperArm3Body && this.antiGravArray.push(this.upperArm3Body));
                }, d.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.reignsHand2 && (this._session.m_world.DestroyJoint(this.reignsHand2), this.reignsHand2 = null, this.checkReigns()), this.upperArm4Body && this.antiGravArray.push(this.upperArm4Body));
                }, d.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.sleighFoot1 && (this._session.m_world.DestroyJoint(this.sleighFoot1), this.sleighFoot1 = null, this.checkEject()), this.upperLeg3Body && this.antiGravArray.push(this.upperLeg3Body));
                }, d.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.sleighFoot2 && (this._session.m_world.DestroyJoint(this.sleighFoot2), this.sleighFoot2 = null, this.checkEject()), this.upperLeg4Body && this.antiGravArray.push(this.upperLeg4Body));
                }, d.footSmash1 = function (t) {
                    e.prototype.footSmash1.call(this, t), this.antiGravArray.push(this.foot1Body);
                }, d.footSmash2 = function (t) {
                    e.prototype.footSmash2.call(this, t), this.antiGravArray.push(this.foot1Body);
                }, d.checkReigns = function () {
                    if (null == this.reignsHand1 && null == this.reignsHand2) {
                        this._session.m_world.DestroyJoint(this.sleighReigns), this.sleighReigns = null;
                        var e = new s.Oi, t = new s.lB;
                        t.density = .25, t.friction = 1, t.restitution = .1, t.filter.categoryBits = 0, t.filter.maskBits = 0, t.radius = .048;
                        var i = this.strapHeadJoints[0], r = i.GetAnchor1();
                        e.position.SetV(r);
                        var o = this._session.m_world.CreateBody(e);
                        o.CreateShape(t), o.SetMassFromShapes(), o.SetLinearVelocity(this.reignsBody.GetLinearVelocity()), this.antiGravArray.push(o);
                        var n = new s.qO;
                        n.Initialize(o, i.m_body2, r, i.m_body2.GetPosition()), n.length = i.m_length;
                        var a = this._session.m_world.CreateJoint(n);
                        this._session.m_world.DestroyJoint(i), this.strapHeadJoints[0] = a, this._session.m_world.DestroyBody(this.reignsBody), this.reignsBody = null, this.checkEject();
                    }
                }, d.breakStrap = function (e) {
                    e.strappedIn = false;
                    var t = new s.Oi, i = new s.lB;
                    if (i.density = .25, i.friction = 1, i.restitution = .1, i.filter.categoryBits = 0, i.filter.maskBits = 0, i.radius = .048, e == this.elf1) var r = this.strapChest1Joints, n = new s._m, a = "StrapSnap1"; else r = this.strapChest2Joints, n = new s._m(0, -0.016), a = "StrapSnap2";
                    var h = r[0], l = h.GetAnchor1();
                    t.position.SetV(l);
                    var c = this._session.m_world.CreateBody(t);
                    c.CreateShape(i), c.SetMassFromShapes(), c.SetLinearVelocity(this.sleighBody.GetLinearVelocityFromWorldPoint(l)), this.antiGravArray.push(c);
                    var d = new s.qO;
                    d.Initialize(c, h.m_body2, l, h.m_body2.GetWorldPoint(n)), d.length = h.m_length;
                    var p = this._session.m_world.CreateJoint(d);
                    this._session.m_world.DestroyJoint(h), r[0] = p, o.ij.instance.playAreaSoundInstance(a, c);
                }, d.elfHeadRemove = function (e, t) {
                    if (e.headAttached) {
                        e.headAttached = false;
                        var i = new s.Oi, r = new s.lB;
                        r.density = .25, r.friction = 1, r.restitution = .1, r.filter.categoryBits = 0, r.filter.maskBits = 0, r.radius = .048, i.position = e.head1Body.GetWorldPoint(new s._m(-0.288, .064));
                        var o = this._session.m_world.CreateBody(i);
                        o.CreateShape(r), o.SetMassFromShapes(), o.SetLinearVelocity(e.head1Body.GetLinearVelocity()), this.antiGravArray.push(o);
                        var n = new s.qO;
                        if (e == this.elf1) {
                            var a = 7, h = this.strapHeadJoints[a];
                            n.Initialize(h.m_body1, o, h.m_body1.GetPosition(), i.position), n.length = h.m_length;
                            var l = this._session.m_world.CreateJoint(n);
                            this.strapHeadJoints[a] = l, a += 1;
                            var c = this.strapHeadJoints[a];
                            n.Initialize(o, c.m_body2, i.position, c.m_body2.GetPosition()), n.length = h.m_length, l = this._session.m_world.CreateJoint(n), this.strapHeadJoints[a] = l, t || (this._session.m_world.DestroyJoint(h), this._session.m_world.DestroyJoint(c));
                        } else a = this.strapHeadJoints.length - 1, h = this.strapHeadJoints[a], n.Initialize(h.m_body1, o, h.m_body1.GetPosition(), i.position), n.length = h.m_length, l = this._session.m_world.CreateJoint(n), this.strapHeadJoints[a] = l, t || this._session.m_world.DestroyJoint(h);
                    }
                }, d.elfChestRemove = function (e, t) {
                    if (e.chestAttached) {
                        e.chestAttached = false;
                        var i = new s.Oi, r = new s.lB;
                        r.density = .25, r.friction = 1, r.restitution = .1, r.filter.categoryBits = 0, r.filter.maskBits = 0, r.radius = .048, i.position = e.chestBody.GetWorldPoint(new s._m(0, .16));
                        var o = this._session.m_world.CreateBody(i);
                        o.CreateShape(r), o.SetMassFromShapes(), o.SetLinearVelocity(e.chestBody.GetLinearVelocity()), this.antiGravArray.push(o);
                        var n = new s.qO;
                        if (e == this.elf1) {
                            var a = this.strapChest1Joints.length - 1, h = this.strapChest1Joints[a];
                            n.Initialize(h.m_body1, o, h.m_body1.GetWorldPoint(new s._m(0, -0.016)), i.position), n.length = h.m_length;
                            var l = this._session.m_world.CreateJoint(n);
                            this.strapChest1Joints[a] = l;
                        } else a = this.strapChest2Joints.length - 1, h = this.strapChest2Joints[a], n.Initialize(h.m_body1, o, h.m_body1.GetWorldPoint(new s._m(0, -0.016)), i.position), n.length = h.m_length, l = this._session.m_world.CreateJoint(n), this.strapChest2Joints[a] = l;
                        this.headSmashed || this._session.m_world.DestroyJoint(h);
                    }
                }, d.mourn = function (e) {
                    this._dead || (e == this.elf1 && this.addVocals("Mourn2", 3), e == this.elf2 && this.addVocals("Mourn1", 3));
                }, d.explodeShape = function (e, t) {
                    switch (e) {
                        case this.helmetShape:
                            t > .85 && this.helmetSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / n.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var r = this.pelvisBody.GetMass() / n.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * r, .7)) && this.pelvisSmash(0);
                    }
                }, h = n, (c = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e, this.elf1 && (this.elf1.session = this._session), this.elf2 && (this.elf2.session = this._session);
                    }
                }, {
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null)));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, c), Object.defineProperty(h, "prototype", { writable: false }), n;
            }(d);
            function z(e, t) {
                return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Z = function (e) {
                var t, i;
                function n(t, i, s, r, o, n, a, h) {
                    var l;
                    return void 0 === o && (o = -2), void 0 === n && (n = "Elf1"), void 0 === a && (a = null), void 0 === h && (h = 50), (l = e.call(this, t, i, s, r, o, n) || this).gravityDisplacement = -0.3333333333333333, l.wheelContacts = 0, l.legsOk = true, l.headAttached = true, l.chestAttached = true, l.strappedIn = true, l.minCos = .9396, l.wheelContactAdd = function (e) {
                        e.shape2.m_isSensor || (l.wheelContacts += 1);
                    }, l.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (l.wheelContacts -= 1);
                    }, l.shapeRefScale = 50, l.santa = a, l.verticalOffset = h, l;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, z(t, i);
                var a, h, l = n.prototype;
                return l.leftPressedActions = function () {
                    this.ejected && (this.currentPose = 1);
                }, l.rightPressedActions = function () {
                    this.ejected && (this.currentPose = 2);
                }, l.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, l.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : this.legsOk && (this.stemWheelJoint.IsMotorEnabled() || this.stemWheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.stemWheelJoint.GetJointSpeed(), this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.stemWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.currentPose = 5);
                }, l.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : this.legsOk && (this.stemWheelJoint.IsMotorEnabled() || this.stemWheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.stemWheelJoint.GetJointSpeed(), this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.stemWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.currentPose = 6);
                }, l.upAndDownActions = function () {
                    this.ejected ? 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0) : this.legsOk && (this.stemWheelJoint.IsMotorEnabled() && this.stemWheelJoint.EnableMotor(false), this.currentPose = 0);
                }, l.spacePressedActions = function () {
                    this.ejected && this.startGrab();
                }, l.spaceNullActions = function () {
                    this.ejected && this.releaseGrip();
                }, l.zPressedActions = function () {
                    this.santa.dead && this.eject();
                }, l.actions = function () {
                    if (e.prototype.actions.call(this), this.wheelContacts > 0 && Math.abs(this.wheelBody.m_angularVelocity) > 5) {
                        var t = this.wheelBody.GetAngle(), i = Math.cos(t);
                        if (this.sign) i < -this.minCos && (this.sign = false, this.wheelFoot1Joint && (s = 2 * Math.ceil(5 * Math.random()) - 1, o.ij.instance.playAreaSoundInstance("Step" + s, this.wheelBody))); else if (i > this.minCos && (this.sign = true, this.wheelFoot2Joint)) {
                            var s = 2 * Math.ceil(5 * Math.random());
                            o.ij.instance.playAreaSoundInstance("Step" + s, this.wheelBody);
                        }
                    }
                }, l.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            this.runForwardPose();
                            break;
                        case 6:
                            this.runBackwardPose();
                            break;
                        case 7:
                            this.armsDownPose();
                            break;
                        case 8:
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, l.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.legsOk = true, this.sign = true, this.wheelContacts = 0, this.headAttached = true, this.chestAttached = true, this.strappedIn = true;
                }, l.die = function () {
                    e.prototype.die.call(this);
                }, l.paint = function () {
                    e.prototype.paint.call(this);
                    var t = Math.abs(this.wheelBody.GetAngularVelocity()) / 5;
                    if (t = Math.max(t, 0), t = 1 - (t = Math.min(t, 1)), this.wheelFoot1Joint) {
                        var i = this.lowerLeg1Body.GetInterpolatedWorldCenter(), r = this.stemBody.GetInterpolatedWorldPoint(new s._m(.115, .5702)), o = new s._m(i.x - r.x, i.y - r.y), a = this.lowerLeg1Body.GetInterpolatedAngle(), h = this.stemBody.GetInterpolatedAngle() + .305, l = a - h;
                        r = new s._m(i.x - o.x * t, i.y - o.y * t), this.lowerLeg1MC.x = r.x * this.m_physScale, this.lowerLeg1MC.y = r.y * this.m_physScale, this.lowerLeg1MC.rotation = (a - l * t) * n.oneEightyOverPI % 360, i = this.upperLeg1Body.GetInterpolatedWorldCenter(), r = this.stemBody.GetInterpolatedWorldPoint(new s._m(.1553, .1994)), o = new s._m(i.x - r.x, i.y - r.y), l = (a = this.upperLeg1Body.GetInterpolatedAngle()) - (h = this.stemBody.GetInterpolatedAngle() - .1952), r = new s._m(i.x - o.x * t, i.y - o.y * t), this.upperLeg1MC.x = r.x * this.m_physScale, this.upperLeg1MC.y = r.y * this.m_physScale, this.upperLeg1MC.rotation = (a - l * t) * n.oneEightyOverPI % 360;
                    }
                    this.wheelFoot2Joint && (i = this.lowerLeg2Body.GetInterpolatedWorldCenter(), r = this.stemBody.GetInterpolatedWorldPoint(new s._m(.115, .5702)), o = new s._m(i.x - r.x, i.y - r.y), l = (a = this.lowerLeg2Body.GetInterpolatedAngle()) - (h = this.stemBody.GetInterpolatedAngle() + .305), r = new s._m(i.x - o.x * t, i.y - o.y * t), this.lowerLeg2MC.x = r.x * this.m_physScale, this.lowerLeg2MC.y = r.y * this.m_physScale, this.lowerLeg2MC.rotation = (a - l * t) * n.oneEightyOverPI % 360, i = this.upperLeg2Body.GetInterpolatedWorldCenter(), r = this.stemBody.GetInterpolatedWorldPoint(new s._m(.1553, .1994)), o = new s._m(i.x - r.x, i.y - r.y), l = (a = this.upperLeg2Body.GetInterpolatedAngle()) - (h = this.stemBody.GetInterpolatedAngle() - .1952), r = new s._m(i.x - o.x * t, i.y - o.y * t), this.upperLeg2MC.x = r.x * this.m_physScale, this.upperLeg2MC.y = r.y * this.m_physScale, this.upperLeg2MC.rotation = (a - l * t) * n.oneEightyOverPI % 360);
                }, l.createBodies = function () {
                    e.prototype.createBodies.call(this), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerLeg1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerLeg2Shape);
                    var t = new s.Vb, i = new s.lB, o = new s.Oi, a = new s.Oi;
                    t = new s.Vb, i = new s.lB, t.density = 4, t.friction = .3, t.restitution = .3, t.filter.categoryBits = 0, t.filter.maskBits = 0, i.density = 6, i.friction = 1, i.restitution = .1, i.filter.categoryBits = 62464, i.filter.maskBits = 520, i.filter.groupIndex = this.groupID;
                    var h = this.shapeGuide.stem;
                    o.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), o.angle = h.rotation / n.oneEightyOverPI, t.SetAsBox(h.scaleX * this.shapeRefScale / this.character_scale, h.scaleY * this.shapeRefScale / this.character_scale), this.stemBody = this._session.m_world.CreateBody(o), this.stemBody.CreateShape(t), this.stemBody.SetMassFromShapes(), h = this.shapeGuide.wheel, a.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), a.angle = h.rotation / n.oneEightyOverPI, i.radius = h.width / 2 / this.character_scale, this.wheelBody = this._session.m_world.CreateBody(a), this.wheelShape = this.wheelBody.CreateShape(i), this.wheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.wheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.wheelShape, this.wheelContactRemove), this.wheelMultiplier = this.santa.wheelRadius / (.5 * h.width), this.wheelMaxSpeed = this.santa.wheelMaxSpeed * this.wheelMultiplier, this.accelStep = this.santa.accelStep * this.wheelMultiplier, this.antiGravArray = [], this.antiGravArray.push(this.head1Body), this.antiGravArray.push(this.chestBody), this.antiGravArray.push(this.pelvisBody), this.antiGravArray.push(this.upperArm1Body), this.antiGravArray.push(this.upperArm2Body), this.antiGravArray.push(this.lowerArm1Body), this.antiGravArray.push(this.lowerArm2Body), this.antiGravArray.push(this.upperLeg1Body), this.antiGravArray.push(this.upperLeg2Body), this.antiGravArray.push(this.lowerLeg1Body), this.antiGravArray.push(this.lowerLeg2Body), this.antiGravArray.push(this.stemBody), this.antiGravArray.push(this.wheelBody);
                }, l.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this._session.containerSprite.addChildAt(this.chestMC, this._session.containerSprite.getChildIndex(this.lowerLeg1MC));
                }, l.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = n.oneEightyOverPI;
                    i = -90 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -90 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = -170 / o - (t = this.shoulderJoint1.m_body2.GetAngle() - this.shoulderJoint1.m_body1.GetAngle()), r = 0 / o - t, this.shoulderJoint1.SetLimits(i, r), i = -170 / o - (t = this.shoulderJoint2.m_body2.GetAngle() - this.shoulderJoint2.m_body1.GetAngle()), r = 0 / o - t, this.shoulderJoint2.SetLimits(i, r), i = -10 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 0 / o - t, this.neckJoint.SetLimits(i, r);
                    var a = new s.wN, h = new s.tu, l = new s._m;
                    l.Set(this.stemBody.GetPosition().x, this.stemBody.GetPosition().y), a.Initialize(this.santa.sleighBody, this.stemBody, l, new s._m(0, 1)), a.enableLimit = true, a.upperTranslation = this.verticalOffset / this.m_physScale, a.lowerTranslation = -this.verticalOffset / this.m_physScale, this.sleighStemJoint = this._session.m_world.CreateJoint(a), h.maxMotorTorque = this.santa.maxTorque, l.Set(this.wheelBody.GetPosition().x, this.wheelBody.GetPosition().y), h.Initialize(this.stemBody, this.wheelBody, l), this.stemWheelJoint = this._session.m_world.CreateJoint(h), h.maxMotorTorque = 0;
                    var c = this.shapeGuide.foot1Anchor;
                    l.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.Initialize(this.wheelBody, this.lowerLeg1Body, l), this.wheelFoot1Joint = this._session.m_world.CreateJoint(h), c = this.shapeGuide.foot2Anchor, l.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.Initialize(this.wheelBody, this.lowerLeg2Body, l), this.wheelFoot2Joint = this._session.m_world.CreateJoint(h), l.Set(this.chestBody.GetPosition().x, this.chestBody.GetPosition().y), h.Initialize(this.stemBody, this.chestBody, l), h.enableLimit = true, h.lowerAngle = 0, h.upperAngle = 20 / o, this.stemChestJoint = this._session.m_world.CreateJoint(h);
                }, l.eject = function () {
                    this.ejected || (this.ejected = true, this._session.version > 1.51 && this.resetJointLimits(), this.disableRunning(), this.santa.elfHeadRemove(this, false), this.santa.elfChestRemove(this, false));
                }, l.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t);
                    for (var i = this.paintVector.length, s = i - 5; s < i; s++) this.antiGravArray.push(this.paintVector[s]);
                    this.ejected || this.santa.elfHeadRemove(this, true);
                }, l.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t);
                    for (var i = this.paintVector.length, s = i - 5; s < i; s++) this.antiGravArray.push(this.paintVector[s]);
                    this.ejected || this.santa.elfChestRemove(this, true);
                }, l.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t);
                    for (var i = this.paintVector.length, s = i - 3; s < i; s++) this.antiGravArray.push(this.paintVector[s]);
                }, l.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.disableRunning();
                }, l.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || this.wheelFoot1Joint && (this._session.m_world.DestroyJoint(this.wheelFoot1Joint), this.wheelFoot1Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg1Shape, this.contactResultHandler), this.checkLegsOk());
                }, l.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || this.wheelFoot2Joint && (this._session.m_world.DestroyJoint(this.wheelFoot2Joint), this.wheelFoot2Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg2Shape, this.contactResultHandler), this.checkLegsOk());
                }, l.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.upperArm3Body && this.antiGravArray.push(this.upperArm3Body);
                }, l.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.upperArm4Body && this.antiGravArray.push(this.upperArm4Body);
                }, l.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.upperLeg3Body && this.antiGravArray.push(this.upperLeg3Body), this.ejected || this.wheelFoot1Joint && (this._session.m_world.DestroyJoint(this.wheelFoot1Joint), this.wheelFoot1Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg1Shape, this.contactResultHandler), this.checkLegsOk());
                }, l.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.upperLeg4Body && this.antiGravArray.push(this.upperLeg4Body), this.ejected || this.wheelFoot2Joint && (this._session.m_world.DestroyJoint(this.wheelFoot2Joint), this.wheelFoot2Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg2Shape, this.contactResultHandler), this.checkLegsOk());
                }, l.footSmash1 = function (t) {
                    e.prototype.footSmash1.call(this, t), this.antiGravArray.push(this.foot1Body);
                }, l.footSmash2 = function (t) {
                    e.prototype.footSmash2.call(this, t), this.antiGravArray.push(this.foot2Body);
                }, l.disableRunning = function () {
                    this.wheelFoot1Joint && (this._session.m_world.DestroyJoint(this.wheelFoot1Joint), this.wheelFoot1Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg1Shape, this.contactResultHandler)), this.wheelFoot2Joint && (this._session.m_world.DestroyJoint(this.wheelFoot2Joint), this.wheelFoot2Joint = null, this._session.contactListener.registerListener(r.$S.RESULT, this.lowerLeg2Shape, this.contactResultHandler)), this.checkLegsOk();
                }, l.checkLegsOk = function () {
                    null == this.wheelFoot1Joint && null == this.wheelFoot2Joint && (this.wheelContacts = 0, this._session.contactListener.deleteListener(r.$S.ADD, this.wheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.wheelShape), this._session.m_world.DestroyBody(this.wheelBody), this.stemWheelJoint = null, this._session.m_world.DestroyBody(this.stemBody), this.sleighStemJoint = null, this.stemChestJoint = null, this.legsOk = false), this.currentPose = 0;
                }, l.runForwardPose = function () {
                    var e;
                    this.wheelFoot1Joint && (e = (this.kneeJoint1.GetJointAngle() - this.kneeJoint1.m_lowerAngle) / (150 / n.oneEightyOverPI), this.setJoint(this.elbowJoint2, Number(e), 15), e = (this.hipJoint1.GetJointAngle() - this.hipJoint1.m_lowerAngle) / (160 / n.oneEightyOverPI), this.setJoint(this.shoulderJoint2, 3 * e, 15)), this.wheelFoot2Joint && (e = (this.kneeJoint2.GetJointAngle() - this.kneeJoint2.m_lowerAngle) / (150 / n.oneEightyOverPI), this.setJoint(this.elbowJoint1, Number(e), 15), e = (this.hipJoint2.GetJointAngle() - this.hipJoint2.m_lowerAngle) / (160 / n.oneEightyOverPI), this.setJoint(this.shoulderJoint1, 3 * e, 15));
                }, l.runBackwardPose = function () {
                    var e;
                    this.wheelFoot1Joint && (e = (this.kneeJoint1.GetJointAngle() - this.kneeJoint1.m_lowerAngle) / (150 / n.oneEightyOverPI), this.setJoint(this.elbowJoint2, 2.6 * e, 15), e = (this.hipJoint1.GetJointAngle() - this.hipJoint1.m_lowerAngle) / (160 / n.oneEightyOverPI), this.setJoint(this.shoulderJoint2, 4.18 * e, 15)), this.wheelFoot2Joint && (e = (this.kneeJoint2.GetJointAngle() - this.kneeJoint2.m_lowerAngle) / (150 / n.oneEightyOverPI), this.setJoint(this.elbowJoint1, 2.6 * e, 15), e = (this.hipJoint2.GetJointAngle() - this.hipJoint2.m_lowerAngle) / (160 / n.oneEightyOverPI), this.setJoint(this.shoulderJoint1, 4.18 * e, 15));
                }, l.armsDownPose = function () {
                    this.setJoint(this.elbowJoint1, 2.4, 5, 2), this.setJoint(this.elbowJoint2, 2.4, 5, 2), this.setJoint(this.shoulderJoint1, 3, 10, 2), this.setJoint(this.shoulderJoint2, 3, 10, 2);
                }, a = n, (h = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead != e && (this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null), this.santa.mourn(this), this.disableRunning()));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function $(e, t) {
                return ($ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var K = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o, -1, "Char2") || this).wheelMaxSpeed = 40, n.accelStep = 1, n.maxTorque = 20, n.wheelContacts = 0, n.impulseMagnitude = 3, n.impulseOffset = 1, n.maxSpinAV = 5, n.helmetSmashLimit = 2, n.frameSmashLimit = 20, n.charge = 0, n.chargeMax = 15, n.chargeMin = 5, n.handleContactResults = function () {
                        var t;
                        n.contactResultBuffer.get(n.helmetShape) && (t = n.contactResultBuffer.get(n.helmetShape), n.helmetSmash(t.impulse), n.contactResultBuffer.delete(n.head1Shape), n.contactAddBuffer.delete(n.head1Shape)), e.prototype.handleContactResults.call(function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(n)), n.contactResultBuffer.get(n.frameShape) && (t = n.contactResultBuffer.get(n.frameShape), n.frameSmash(t.impulse), n.contactResultBuffer.delete(n.frameShape));
                    }, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            n.wheelContacts += 1;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, o);
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (n.wheelContacts -= 1);
                    }, n.jumpTranslation = 30 / n.m_physScale, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, $(t, i);
                var h, l, c = n.prototype;
                return c.leftPressedActions = function () {
                    this.ejected ? this.currentPose = 1 : this.leanBackward();
                }, c.rightPressedActions = function () {
                    this.ejected ? this.currentPose = 2 : this.leanForward();
                }, c.leftAndRightActions = function () {
                    this.ejected ? 1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0) : this.noLean();
                }, c.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.wheelJoint.IsMotorEnabled() || this.wheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.wheelJoint.GetJointSpeed(), this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.wheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, c.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.wheelJoint.IsMotorEnabled() || this.wheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.wheelJoint.GetJointSpeed(), this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.wheelJoint.SetMotorSpeed(this.wheelNewSpeed));
                }, c.upAndDownActions = function () {
                    this.wheelJoint.IsMotorEnabled() && this.wheelJoint.EnableMotor(false), 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0);
                }, c.spacePressedActions = function () {
                    if (this.ejected) this.startGrab(); else if (this.shockJoint.IsMotorEnabled()) {
                        var e = this.shockJoint.GetMotorSpeed();
                        e > 0 ? this.shockJoint.GetJointTranslation() > this.jumpTranslation && this.shockJoint.SetMotorSpeed(-1) : e < 0 && this.shockJoint.GetJointTranslation() < 0 && (this.shockJoint.EnableMotor(false), this.shockJoint.SetLimits(0, 0), this.shockJoint.SetMotorSpeed(0));
                    } else this.shockJoint.SetMotorSpeed(7), this.shockJoint.SetLimits(0, this.jumpTranslation), this.shockJoint.EnableMotor(true), o.ij.instance.playAreaSoundInstance("SegwayJump", this.wheelBody);
                }, c.spaceNullActions = function () {
                    this.ejected ? this.releaseGrip() : this.shockJoint.IsMotorEnabled() && (this.shockJoint.GetMotorSpeed() > 0 ? this.shockJoint.GetJointTranslation() > this.jumpTranslation && this.shockJoint.SetMotorSpeed(-1) : this.shockJoint.GetMotorSpeed() < 0 && this.shockJoint.GetJointTranslation() < 0 && (this.shockJoint.EnableMotor(false), this.shockJoint.SetLimits(0, 0), this.shockJoint.SetMotorSpeed(0)));
                }, c.shiftPressedActions = function () {
                    this.ejected ? this.currentPose = 7 : this.currentPose = 5;
                }, c.shiftNullActions = function () {
                    5 != this._currentPose && 7 != this._currentPose || (this.currentPose = 0);
                }, c.ctrlPressedActions = function () {
                    this.ejected ? this.currentPose = 8 : this.currentPose = 6;
                }, c.ctrlNullActions = function () {
                    6 != this._currentPose && 8 != this._currentPose || (this.currentPose = 0);
                }, c.zPressedActions = function () {
                    this.eject();
                }, c.actions = function () {
                    if (this.wheelContacts > 0) {
                        var t = Math.abs(this.wheelBody.GetAngularVelocity());
                        t > 18 ? (this.wheelLoop3 || (this.wheelLoop3 = o.ij.instance.playAreaSoundLoop("BikeLoop3", this.wheelBody, 0), this.wheelLoop3.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null)) : t > 9 ? (this.wheelLoop2 || (this.wheelLoop2 = o.ij.instance.playAreaSoundLoop("BikeLoop2", this.wheelBody, 0), this.wheelLoop2.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : t > 1 ? (this.wheelLoop1 || (this.wheelLoop1 = o.ij.instance.playAreaSoundLoop("BikeLoop1", this.wheelBody, 0), this.wheelLoop1.fadeIn(.2)), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : (this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null));
                    } else this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null);
                    e.prototype.actions.call(this);
                }, c.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            this.straightLegPose();
                            break;
                        case 6:
                            this.squatPose();
                            break;
                        case 7:
                            this.fistPoseLeft();
                            break;
                        case 8:
                            this.fistPoseRight();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, c.reset = function () {
                    e.prototype.reset.call(this), this.helmetOn = true, this.frameSmashed = false, this.ejected = false;
                }, c.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null;
                }, c.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.wheelBody.GetInterpolatedWorldCenter();
                    this.wheelMC.x = t.x * this.m_physScale, this.wheelMC.y = t.y * this.m_physScale, this.wheelMC.inner.rotation = this.wheelBody.GetInterpolatedAngle() * (180 / Math.PI) % 360, t = this.standBody.GetInterpolatedWorldCenter();
                    var i = this.shockBody.GetInterpolatedWorldCenter();
                    this.shockMC.graphics.clear(), this.shockMC.graphics.lineStyle(3, 13752544), this.shockMC.graphics.moveTo(t.x * this.m_physScale, t.y * this.m_physScale), this.shockMC.graphics.lineTo(i.x * this.m_physScale, i.y * this.m_physScale);
                }, c.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, n = new s.Vb, a = new s.lB;
                    n.density = 5, n.friction = .3, n.restitution = .1, n.filter.categoryBits = 514, a.density = 5, a.friction = 1, a.restitution = .3, a.filter.groupIndex = this.groupID, a.filter.categoryBits = 260, a.filter.maskBits = 268;
                    var h = this.shapeGuide.frameShape, l = new s._m(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), c = h.rotation / (180 / Math.PI);
                    n.SetAsOrientedBox(5 * h.scaleX / this.character_scale, 5 * h.scaleY / this.character_scale, l, c), this.frameBody = this._session.m_world.CreateBody(t), this.frameShape = this.frameBody.CreateShape(n), h = this.shapeGuide.handleShape, l = new s._m(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), c = h.rotation / (180 / Math.PI), n.SetAsOrientedBox(5 * h.scaleX / this.character_scale, 5 * h.scaleY / this.character_scale, l, c), this.frameBody.CreateShape(n), this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape, this.contactResultHandler), h = this.shapeGuide.standShape, o.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.SetAsBox(5 * h.scaleX / this.character_scale, 5 * h.scaleY / this.character_scale), n.isSensor = true, o.fixedRotation = true, this.standBody = this._session.m_world.CreateBody(o), this.standShape = this.standBody.CreateShape(n), this.standBody.SetMassFromShapes(), this.paintVector.push(this.standBody), this._session.contactListener.registerListener(r.$S.ADD, this.standShape, this.contactAddHandler), this.shockBody = this._session.m_world.CreateBody(o), this.shockBody.CreateShape(n), this.shockBody.SetMassFromShapes(), h = this.shapeGuide.wheelShape, i.position.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), i.angle = h.rotation / (180 / Math.PI), a.radius = h.width / 2 / this.character_scale, this.wheelBody = this._session.m_world.CreateBody(i), this.wheelShape = this.wheelBody.CreateShape(a), this.wheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.RESULT, this.wheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.wheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.wheelShape, this.wheelContactRemove);
                }, c.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.shockMC = new a.jy, this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.wheelMC = this.sourceObject.wheel, this.wheelMC.scaleX = this.wheelMC.scaleY = 1 / this.mc_scale, this.wheelCoverMC = this.sourceObject.wheelCover, this.wheelCoverMC.scaleX = this.wheelCoverMC.scaleY = 1 / this.mc_scale, this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this.standBody.SetUserData(this.wheelCoverMC);
                    var t = this.frameBody.GetLocalCenter();
                    t = new s._m((this._startX - t.x) * this.character_scale, (this._startY - t.y) * this.character_scale);
                    var i = this.shapeGuide.frameShape, r = new s._m(i.x + t.x, i.y + t.y);
                    this.frameMC.inner.x = r.x, this.frameMC.inner.y = r.y, this.frameBody.SetUserData(this.frameMC);
                    var o = this._session.containerSprite.getChildIndex(this.upperArm1MC);
                    this._session.containerSprite.addChildAt(this.wheelMC, o), this._session.containerSprite.addChildAt(this.shockMC, o), this._session.containerSprite.addChildAt(this.wheelCoverMC, o), this._session.containerSprite.addChildAt(this.frameMC, o), this._session.containerSprite.addChildAt(this.chestMC, o), this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, c.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frameBody.SetUserData(this.frameMC), this.standBody.SetUserData(this.wheelCoverMC), this.shockMC.graphics.clear(), this.helmetMC.visible = false, this.head1MC.helmet.visible = true;
                }, c.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit), this.contactImpulseDict.set(this.frameShape, this.frameSmashLimit), this.contactAddSounds.set(this.wheelShape, "TireHit1"), this.contactAddSounds.set(this.standShape, "Thud2");
                }, c.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    i = -50 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint1.SetLimits(i, r), i = -50 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint2.SetLimits(i, r), i = -60 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -60 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = 0 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 20 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s.wN;
                    n.maxMotorForce = 1e3, n.enableLimit = true, n.upperTranslation = 0, n.lowerTranslation = 0;
                    var a = new s._m, h = this.shapeGuide.wheelShape;
                    a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.standBody, this.shockBody, a, new s._m(0, 1)), this.shockJoint = this._session.m_world.CreateJoint(n);
                    var l = new s.tu;
                    l.maxMotorTorque = this.maxTorque, h = this.shapeGuide.wheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.shockBody, this.wheelBody, a), this.wheelJoint = this._session.m_world.CreateJoint(l), h = this.shapeGuide.frameAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.enableLimit = true, l.lowerAngle = -15 / o, l.upperAngle = 15 / o, l.Initialize(this.standBody, this.frameBody, a), this.standFrame = this._session.m_world.CreateJoint(l), l.lowerAngle = -100 / o, l.upperAngle = 10 / o, h = this.shapeGuide.handleAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.frameBody, this.lowerArm1Body, a), this.frameHand1 = this._session.m_world.CreateJoint(l), this.frameHand1JointDef = l.clone(), this.handleAnchorPoint = this.frameBody.GetLocalPoint(a), l.Initialize(this.frameBody, this.lowerArm2Body, a), this.frameHand2 = this._session.m_world.CreateJoint(l), this.frameHand2JointDef = l.clone(), l.lowerAngle = -10 / o, l.upperAngle = 10 / o, h = this.shapeGuide.footAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.frameBody, this.lowerLeg1Body, a), this.standFoot1 = this._session.m_world.CreateJoint(l), this.standFoot1JointDef = l.clone(), this.footAnchorPoint = this.frameBody.GetLocalPoint(a), l.Initialize(this.frameBody, this.lowerLeg2Body, a), this.standFoot2 = this._session.m_world.CreateJoint(l), this.standFoot2JointDef = l.clone();
                }, c.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        this.frameHand1 && (e.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (e.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.standFoot1 && (e.DestroyJoint(this.standFoot1), this.standFoot1 = null), this.standFoot2 && (e.DestroyJoint(this.standFoot2), this.standFoot2 = null), this.shockJoint.EnableMotor(false), this.shockJoint.SetLimits(0, 0), this.shockJoint.SetMotorSpeed(0);
                        var t = new s.fT;
                        t.categoryBits = 260, t.groupIndex = -2;
                        for (var i = this.frameBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(t), e.Refilter(i);
                        this.wheelBody.GetShapeList().SetFilterData(t), e.Refilter(this.wheelBody.GetShapeList()), this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                    }
                }, c.reAttach = function (e) {
                    throw new Error("this must be called only in subclass");
                }, c.reAttaching = function () {
                    throw new Error("this must be called only in subclass");
                }, c.frameSmash = function (e) {
                    this.contactImpulseDict.delete(this.frameShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frameShape), this._session.contactListener.deleteListener(r.$S.ADD, this.standShape);
                    var t = this._session.m_world;
                    t.DestroyJoint(this.standFrame), this.standFrame = null, this.frameSmashed = true, this.eject();
                    for (var i = this.frameBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(this.zeroFilter), t.Refilter(i);
                    this.wheelBody.GetShapeList().SetFilterData(this.zeroFilter), t.Refilter(this.wheelBody.GetShapeList());
                }, c.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null, this.helmetOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, c.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, c.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, c.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, c.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, c.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, c.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null, this.frameHand2 || this.eject());
                }, c.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null, this.frameHand1 || this.eject());
                }, c.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || this.standFoot1 && (this._session.m_world.DestroyJoint(this.standFoot1), this.standFoot1 = null);
                }, c.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.standFoot2 && (this._session.m_world.DestroyJoint(this.standFoot2), this.standFoot2 = null);
                }, c.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 2), this.setJoint(this.elbowJoint1, 1.04, 15), this.setJoint(this.elbowJoint2, 1.04, 15);
                }, c.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, 1, 1), this.setJoint(this.elbowJoint1, 0, 15), this.setJoint(this.elbowJoint2, 0, 15);
                }, c.squatPose = function () {
                    this.setJoint(this.kneeJoint1, 1.5, 10), this.setJoint(this.kneeJoint2, 1.5, 10);
                }, c.straightLegPose = function () {
                    this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10);
                }, c.leanForward = function () {
                    this.setJoint(this.standFrame, .52, 20);
                }, c.leanBackward = function () {
                    this.setJoint(this.standFrame, 0, 20);
                }, c.noLean = function () {
                    this.setJoint(this.standFrame, .26, 20);
                }, c.fistPoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 1.5, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 1.7, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, c.fistPoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 1.5, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 1.7, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, c.explodeShape = function (e, t) {
                    switch (e) {
                        case this.helmetShape:
                            t > .85 && this.helmetSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / n.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var r = this.pelvisBody.GetMass() / n.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * r, .7)) && this.pelvisSmash(0);
                    }
                }, h = n, (l = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.removeAction(this.reAttaching), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.wheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), n;
            }(d);
            function q(e, t) {
                return (q = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Q = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o) || this).reAttachDistance = .25, n.ejectImpulse = 4, n.reAttaching = function () {
                        var e = 0, t = n._session.m_world;
                        if (n.frameHand1 || n.elbowJoint1.broken || n.shoulderJoint1.broken) e += 1; else {
                            var i = n.lowerArm1Body.GetWorldPoint(new s._m(0, n.lowerArm1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint);
                            Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand1 = t.CreateJoint(n.frameHand1JointDef), n.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                        }
                        n.frameHand2 || n.elbowJoint2.broken || n.shoulderJoint2.broken ? e += 1 : (i = n.lowerArm2Body.GetWorldPoint(new s._m(0, n.lowerArm2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand2 = t.CreateJoint(n.frameHand2JointDef), n.lowerArm2MC.hand.gotoAndStop(1), e += 1)), n.standFoot1 || n.kneeJoint1.broken || n.hipJoint1.broken ? e += 1 : (i = n.lowerLeg1Body.GetWorldPoint(new s._m(0, n.lowerLeg1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < .2 && Math.abs(i.y - r.y) < .2 && (n.standFoot1 = t.CreateJoint(n.standFoot1JointDef), e += 1)), n.standFoot2 || n.kneeJoint2.broken || n.hipJoint2.broken ? e += 1 : (i = n.lowerLeg2Body.GetWorldPoint(new s._m(0, n.lowerLeg2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < .2 && Math.abs(i.y - r.y) < .2 && (n.standFoot2 = t.CreateJoint(n.standFoot2JointDef), e += 1)), e >= 4 && n.removeAction(n.reAttaching);
                    }, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, q(t, i);
                var a = n.prototype;
                return a.grabAction = function (e, t, i) {
                    var o = e.GetShapeList(), n = e.GetWorldPoint(new s._m(0, o.GetVertices()[2].y));
                    if (!this.frameSmashed && !this._dying && !this.userVehicle) {
                        var a = this.frameBody.GetWorldPoint(this.handleAnchorPoint);
                        if (Math.abs(n.x - a.x) < this.reAttachDistance && Math.abs(n.y - a.y) < this.reAttachDistance) return void this.reAttach(e);
                    }
                    var l = new s.tu;
                    if (i.IsStatic() || (l.enableLimit = true), l.maxMotorTorque = 4, l.Initialize(i, e, n), e == this.lowerArm1Body) if (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), t.GetUserData() instanceof h.xJ) {
                        var c = t.GetUserData();
                        if (this.userVehicle && c != this.userVehicle) this.gripJoint1 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm1Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                            case 0:
                                break;
                            case 1:
                                this.currentPose = 10;
                                break;
                            case 2:
                                this.currentPose = 11;
                                break;
                            case 3:
                                this.currentPose = 12;
                        }
                    } else this.gripJoint1 = this._session.m_world.CreateJoint(l);
                    if (e == this.lowerArm2Body) if (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), t.GetUserData() instanceof h.xJ) if (c = t.GetUserData(), this.userVehicle && c != this.userVehicle) this.gripJoint2 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm2Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                        case 0:
                            break;
                        case 1:
                            this.currentPose = 10;
                            break;
                        case 2:
                            this.currentPose = 11;
                            break;
                        case 3:
                            this.currentPose = 12;
                    } else this.gripJoint2 = this._session.m_world.CreateJoint(l);
                }, a.reAttach = function (e) {
                    var t, i, o;
                    this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), this.contactResultBuffer.delete(this.lowerArm1Shape), this.contactResultBuffer.delete(this.lowerArm2Shape), this.ejected = false, this.currentPose = 0, this.releaseGrip();
                    var n = 180 / Math.PI;
                    i = -50 / n - (t = this.hipJoint1.m_body2.GetAngle() - this.hipJoint1.m_body1.GetAngle() - this.hipJoint1.GetJointAngle()), o = 10 / n - t, this.hipJoint1.SetLimits(i, o), i = -50 / n - (t = this.hipJoint2.m_body2.GetAngle() - this.hipJoint2.m_body1.GetAngle() - this.hipJoint2.GetJointAngle()), o = 10 / n - t, this.hipJoint2.SetLimits(i, o), i = -60 / n - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle() - this.elbowJoint1.GetJointAngle()), o = 0 / n - t, this.elbowJoint1.SetLimits(i, o), i = -60 / n - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle() - this.elbowJoint2.GetJointAngle()), o = 0 / n - t, this.elbowJoint2.SetLimits(i, o), i = 0 / n - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle() - this.neckJoint.GetJointAngle()), o = 20 / n - t, this.neckJoint.SetLimits(i, o);
                    var a = this._session.m_world, h = new s.fT;
                    h.categoryBits = 514;
                    for (var l = this.frameBody.GetShapeList(); l; l = l.m_next) l.SetFilterData(h), a.Refilter(l);
                    (h = new s.fT).categoryBits = 260, h.maskBits = 268, (l = this.wheelBody.GetShapeList()).SetFilterData(h), a.Refilter(l), e == this.lowerArm1Body ? (this.frameHand1 = a.CreateJoint(this.frameHand1JointDef), this.lowerArm1MC.hand.gotoAndStop(1)) : (this.frameHand2 = a.CreateJoint(this.frameHand2JointDef), this.lowerArm2MC.hand.gotoAndStop(1)), this.actionsVector.push(this.reAttaching);
                }, a.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null, this.checkEject());
                }, a.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null, this.checkEject());
                }, a.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || this.standFoot1 && (this._session.m_world.DestroyJoint(this.standFoot1), this.standFoot1 = null);
                }, a.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || this.standFoot2 && (this._session.m_world.DestroyJoint(this.standFoot2), this.standFoot2 = null);
                }, a.elbowBreak1 = function (e) {
                    switch (this.elbowJoint1.broken = true, this._session.m_world.DestroyJoint(this.elbowJoint1), this.lowerArm1Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerArm1Body.GetShapeList()), this.lowerArm1MC.gotoAndStop(2), this.upperArm1MC.currentFrame) {
                        case 3:
                            this.upperArm1MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperArm1MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperArm1MC.gotoAndStop(5);
                    }
                    this.lowerArm1MC.gotoAndStop(2);
                    var t = this.shapeGuide.lowerArm1Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerArm1Body, 50, new s._m(0, t.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.elbowLigamentLimit && (this.elbowLigament1 = new E(this.upperArm1Body, this.lowerArm1Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.elbowLigament1));
                    var i = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + i, this.lowerArm1Body), this.addVocals("Elbow1", 1), this.vehicleArm1Joint && (this._session.m_world.DestroyJoint(this.vehicleArm1Joint), this.vehicleArm1Joint = null, null == this.vehicleArm2Joint && this.userVehicleEject()), this.ejected || this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null, this.checkEject());
                }, a.elbowBreak2 = function (e) {
                    switch (this.elbowJoint2.broken = true, this._session.m_world.DestroyJoint(this.elbowJoint2), this.lowerArm2Body.GetShapeList().SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.lowerArm2Body.GetShapeList()), this.lowerArm2MC.gotoAndStop(2), this.upperArm2MC.currentFrame) {
                        case 3:
                            this.upperArm2MC.gotoAndStop(6);
                            break;
                        case 4:
                            this.upperArm2MC.gotoAndStop(7);
                            break;
                        default:
                            this.upperArm2MC.gotoAndStop(5);
                    }
                    this.lowerArm2MC.gotoAndStop(2);
                    var t = this.shapeGuide.lowerArm2Shape;
                    this._session.particleController.createBloodBurst(5, 15, this.lowerArm2Body, 50, new s._m(0, t.scaleY * -this.shapeRefScale / this.character_scale), this._session.containerSprite), e < this.elbowLigamentLimit && (this.elbowLigament2 = new E(this.upperArm2Body, this.lowerArm2Body, this.ligamentLength, this.character_scale, this), this.composites.push(this.elbowLigament2));
                    var i = Math.ceil(4 * Math.random());
                    o.ij.instance.playAreaSoundInstance("BoneBreak" + i, this.lowerArm2Body), this.addVocals("Elbow2", 1), this.vehicleArm2Joint && (this._session.m_world.DestroyJoint(this.vehicleArm2Joint), this.vehicleArm2Joint = null, null == this.vehicleArm1Joint && this.userVehicleEject()), this.ejected || this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null, this.checkEject());
                }, a.checkEject = function () {
                    this.frameHand1 || this.frameHand2 || this.eject();
                }, n;
            }(K);
            function ee(e, t) {
                return (ee = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var te = function (e) {
                var t, i;
                function n(t, i, r, n) {
                    var c;
                    return (c = e.call(this, t, i, r, n, -1, "Char11") || this).wheelMaxSpeed = 15, c.accelStep = 3, c.maxTorque = 1e5, c.impulseLeft = 2.4, c.impulseRight = 2.8, c.impulseOffset = 1, c.maxSpinAV = 3.5, c.mowerSmashLimit = 1e5, c.frontRearSmashLimit = 150, c.reAttachDistance = .25, c.ejectImpulse = 5, c.grindingMass = 0, c.soundDelay = 10, c.soundDelayCount = 0, c.contactMowerResultHandler = function (e) {
                        var t = e.impulse;
                        t > c.contactImpulseDict.get(c.frontShape) && (c.contactResultBuffer.get(c.frontShape) ? t > c.contactResultBuffer.get(c.frontShape).impulse && c.contactResultBuffer.set(c.frontShape, e) : c.contactResultBuffer.set(c.frontShape, e));
                    }, c.contactFrontResultHandler = function (e) {
                        var t = e.impulse;
                        t > c.contactImpulseDict.get(c.brokenFrontShape) && (c.contactResultBuffer.get(c.brokenFrontShape) ? t > c.contactResultBuffer.get(c.brokenFrontShape).impulse && c.contactResultBuffer.set(c.brokenFrontShape, e) : c.contactResultBuffer.set(c.brokenFrontShape, e));
                    }, c.contactRearResultHandler = function (e) {
                        var t = e.impulse;
                        t > c.contactImpulseDict.get(c.brokenRearShape) && (c.contactResultBuffer.get(c.brokenRearShape) ? t > c.contactResultBuffer.get(c.brokenRearShape).impulse && c.contactResultBuffer.set(c.brokenRearShape, e) : c.contactResultBuffer.set(c.brokenRearShape, e));
                    }, c.contactBladeResultHandler = function (e) {
                        var t = e.otherShape;
                        if (0 != t.m_density) {
                            var i = c.bladeShapeArray.indexOf(t);
                            if (i > -1) {
                                var s = c.bladeContactArray[i];
                                e.impulse > s.impulse && (c.bladeContactArray[i] = e);
                            } else c.bladeShapeArray.push(t), c.bladeContactArray.push(e);
                        }
                    }, c.handleBladeContacts = function () {
                        for (var e = 0; e < c.bladeContactArray.length; e++) {
                            var t = c.bladeContactArray[e], i = t.otherShape, r = i.GetBody(), n = t.position, p = r.GetMass(), u = c.mowerBody.GetLocalPoint(n);
                            u.Subtract(c.bladeCenter);
                            var m = -u.x / c.bladeX;
                            if (7 & i.m_material && Math.abs(m) < .5) {
                                c.grindingMass += p;
                                var f = c.session.m_world, y = new s.fT;
                                y.categoryBits = 1, y.maskBits = 9, y.groupIndex = -3, i.SetFilterData(y), f.Refilter(i), i.SetMaterial(0), (i.m_userData instanceof h.bx || i.m_userData instanceof d || i.m_userData instanceof h.w6) && i.m_userData.grindShape(i);
                                var v = r;
                                if (c.contactCount.set(v, 0), p > .1) {
                                    var g = v.GetUserData(), S = new a.jy;
                                    c.targetMaskHolder.addChild(S);
                                    var _ = c.clearanceShape.m_vertices[0].Copy();
                                    _.Subtract(c.mowerBody.GetLocalCenter()), S.graphics.beginFill(0, 16711680), S.graphics.drawRect(-100, _.y * c.m_physScale, 200, 100), S.graphics.endFill(), g.mask = S;
                                }
                                var w, b = Math.min(1, p / .4), C = 1.12 * b * .5, L = c.mowerBody.GetLocalPoint(n).x, B = Math.max(c.bladeLeftX, L - C), A = Math.min(c.bladeRightX, L + C), E = (c.bladeShape.GetVertices(), c.bladeShape.GetVertices()[2].y), M = new s._m(B, E), k = new s._m(A, E), x = c.session.containerSprite.getChildIndex(c.bladeCoverMC);
                                if (i.GetUserData() instanceof h.w6) {
                                    w = i.GetUserData().particleType;
                                    var O = c.session.particleController.createSpray(w, c.mowerBody, M, k, 0, 5, 180, Math.round(20 * b), 5e3, c.session.containerSprite, x);
                                } else {
                                    var T = 0, P = 5, R = 20;
                                    l.Z.bloodSetting > 1 && (T = 3, P = 10, R = 20), O = c.session.particleController.createBloodSpray(c.mowerBody, M, k, T, P, 180, Math.round(R * b), 5e3, c.session.containerSprite, x);
                                }
                                var D = new s.Oi;
                                D.position.Set(n.x, n.y), D.angle = c.mowerBody.GetAngle();
                                var I = f.CreateBody(D), j = new s.Vb;
                                j.density = 5, j.restitution = .1, j.friction = .1, j.SetAsBox(10 / c.m_physScale, 10 / c.m_physScale), j.isSensor = true, I.CreateShape(j), I.SetMassFromShapes(), I.SetUserData(O);
                                var F = new s.wN;
                                F.enableLimit = true, F.upperTranslation = 0, F.lowerTranslation = -10, F.maxMotorForce = 1e5, F.enableMotor = true, F.motorSpeed = -0.5;
                                var J = c.mowerBody.GetAngle();
                                F.Initialize(c.mowerBody, I, n, new s._m(-Math.sin(J), Math.cos(J))), f.CreateJoint(F);
                                var G = new s.tu;
                                G.enableMotor = true, G.motorSpeed = 0, G.maxMotorTorque = 5, G.Initialize(I, v, n);
                                var H = f.CreateJoint(G);
                                c.addedJointsArray.push(H), c.grindLoop || (c.grindLoop = o.ij.instance.playAreaSoundLoop("GrindLoop2", c.mowerBody, 0, 1e4 * Math.random()), c.grindLoop.fadeIn(.2));
                            } else {
                                var V = 1.2217 * m - 1.5708, N = (V += c.mowerBody.GetAngle()) - Math.PI;
                                if (p > 0) {
                                    var U = p / (p + c.mowerMass), W = 1 - U, X = 3 * Math.cos(V) * U, Y = 3 * Math.sin(V) * U;
                                    if (c.mowerBody.ApplyImpulse(new s._m(X, Y), n), X = 3 * Math.cos(N) * W, Y = 3 * Math.sin(N) * W, r.ApplyImpulse(new s._m(X, Y), n), !c.mowerImpactSound && 0 == c.targetBodies.length) {
                                        var z = "MowerImpact" + Math.ceil(3 * Math.random());
                                        c.mowerImpactSound = o.ij.instance.playAreaSoundInstance(z, r);
                                        var Z = c.mowerBody.GetLocalPoint(n).x, $ = c.bladeShape.GetVertices()[2].y, K = c.mowerBody.GetWorldPoint(new s._m(Z, $));
                                        c.session.particleController.createSparkBurstPoint(K, new s._m(5 * X, 5 * Y), 5, 50, 20);
                                    }
                                } else X = 3 * Math.cos(V), Y = 3 * Math.sin(V), c.mowerBody.ApplyImpulse(new s._m(X, Y), n), c.mowerImpactSound || 0 != c.targetBodies.length || (z = "MowerImpact" + Math.ceil(3 * Math.random()), c.mowerImpactSound = o.ij.instance.playAreaSoundInstance(z, c.mowerBody, .4), Z = c.mowerBody.GetLocalPoint(n).x, $ = c.bladeShape.GetVertices()[2].y, K = c.mowerBody.GetWorldPoint(new s._m(Z, $)), c.session.particleController.createSparkBurstPoint(K, new s._m(5 * -X, 5 * -Y), 5, 50, 20));
                            }
                        }
                        c.bladeContactArray = [], c.bladeShapeArray = [];
                    }, c.clearanceContactAdd = function (e) {
                        var t = e.shape2.m_body;
                        if (null == c.contactCount.get(t)) throw new Error("contact count not defined");
                        var i = c.contactCount.get(t);
                        c.contactCount.set(t, i + 1);
                    }, c.clearanceContactRemove = function (e) {
                        var t = e.shape2.m_body, i = c.contactCount.get(t);
                        c.contactCount.set(t, i - 1);
                    }, c.verticalTranslation = 20 / c.m_physScale, c.bladeContactArray = [], c.bladeShapeArray = [], c.targetBodies = [], c.risingBodies = [], c.addedJointsArray = [], c.contactCount = new Map, n.version > 1.4 && (c.mowerSmashLimit = 200), c;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, ee(t, i);
                var c, p, u = n.prototype;
                return u.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.mowerBody.GetAngle(), t = (this.mowerBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseLeft * t, r = Math.sin(e) * this.impulseLeft * t, o = this.mowerBody.GetLocalCenter();
                        this.mowerBody.ApplyImpulse(new s._m(r, -i), this.mowerBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.mowerBody.ApplyImpulse(new s._m(-r, i), this.mowerBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y))), this.currentPose = 7;
                    }
                }, u.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.mowerBody.GetAngle(), t = (this.mowerBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseRight * t, r = Math.sin(e) * this.impulseRight * t, o = this.mowerBody.GetLocalCenter();
                        this.mowerBody.ApplyImpulse(new s._m(-r, i), this.mowerBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this.mowerBody.ApplyImpulse(new s._m(r, -i), this.mowerBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y))), this.currentPose = 8;
                    }
                }, u.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, u.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.mowerLoop.fadeTo(1, .25)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(1.76 * this.wheelNewSpeed));
                }, u.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.backWheelJoint.IsMotorEnabled() || (this.backWheelJoint.EnableMotor(true), this.frontWheelJoint.EnableMotor(true), this.mowerLoop.fadeTo(1, .25)), this.wheelCurrentSpeed = this.backWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.backWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.frontWheelJoint.SetMotorSpeed(1.76 * this.wheelNewSpeed));
                }, u.upAndDownActions = function () {
                    this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.mowerLoop && this.mowerLoop.fadeTo(.5, .25)), this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, u.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : this.backShockJoint.IsMotorEnabled() ? this.backShockJoint.GetMotorSpeed() > 0 ? this.backShockJoint.GetJointTranslation() > this.verticalTranslation && (this.frontShockJoint.EnableMotor(false), this.backShockJoint.EnableMotor(false), this.frontShockJoint.SetLimits(this.verticalTranslation - .01, this.verticalTranslation), this.backShockJoint.SetLimits(this.verticalTranslation - .01, this.verticalTranslation), this.frontShockJoint.SetMotorSpeed(0), this.backShockJoint.SetMotorSpeed(0)) : this.backShockJoint.GetMotorSpeed() < 0 && this.backShockJoint.GetJointTranslation() < 0 && (this.frontShockJoint.EnableMotor(false), this.backShockJoint.EnableMotor(false), this.frontShockJoint.SetLimits(0, 0), this.backShockJoint.SetLimits(0, 0), this.frontShockJoint.SetMotorSpeed(0), this.backShockJoint.SetMotorSpeed(0)) : this.backShockJoint.GetUpperLimit() != this.verticalTranslation && (this.frontShockJoint.SetMotorSpeed(2.5), this.backShockJoint.SetMotorSpeed(2.5), this.frontShockJoint.SetLimits(0, this.verticalTranslation), this.backShockJoint.SetLimits(0, this.verticalTranslation), this.frontShockJoint.EnableMotor(true), this.backShockJoint.EnableMotor(true), o.ij.instance.playAreaSoundInstance("SegwayJump", this.backWheelBody));
                }, u.spaceNullActions = function () {
                    this.ejected ? this.releaseGrip() : this.backShockJoint.IsMotorEnabled() ? this.backShockJoint.GetMotorSpeed() > 0 ? this.frontShockJoint.GetJointTranslation() > this.verticalTranslation && (this.frontShockJoint.SetMotorSpeed(-1), this.backShockJoint.SetMotorSpeed(-1)) : this.backShockJoint.GetMotorSpeed() < 0 && this.backShockJoint.GetJointTranslation() < 0 && (this.frontShockJoint.EnableMotor(false), this.backShockJoint.EnableMotor(false), this.frontShockJoint.SetLimits(0, 0), this.backShockJoint.SetLimits(0, 0), this.frontShockJoint.SetMotorSpeed(0), this.backShockJoint.SetMotorSpeed(0)) : 0 != this.backShockJoint.GetUpperLimit() && (this.frontShockJoint.SetMotorSpeed(-1), this.backShockJoint.SetMotorSpeed(-1), this.frontShockJoint.SetLimits(0, this.verticalTranslation), this.backShockJoint.SetLimits(0, this.verticalTranslation), this.frontShockJoint.EnableMotor(true), this.backShockJoint.EnableMotor(true));
                }, u.shiftPressedActions = function () {
                    this.ejected && (this.currentPose = 6);
                }, u.shiftNullActions = function () {
                    6 == this._currentPose && (this.currentPose = 0);
                }, u.ctrlPressedActions = function () {
                    this.ejected && (this.currentPose = 7);
                }, u.ctrlNullActions = function () {
                    7 == this._currentPose && (this.currentPose = 0);
                }, u.zPressedActions = function () {
                    this.eject();
                }, u.actions = function () {
                    e.prototype.actions.call(this);
                    for (var t = this.targetBodies.length - 1; t > -1; t--) {
                        var i = this.targetBodies[t];
                        if (0 == this.contactCount.get(i)) {
                            var s = i.GetMass();
                            this.grindingMass -= s;
                            var r = i.GetShapeList();
                            (r.m_userData instanceof h.bx || r.m_userData instanceof d) && r.m_userData.removeBody(i);
                            var o = this.risingBodies[t];
                            o.GetUserData().stopSpewing(), this.session.m_world.DestroyBody(i), this.session.m_world.DestroyBody(o);
                            var n = i.m_userData;
                            if (null != n.mask) {
                                var a = n.mask;
                                n.mask = null, this.targetMaskHolder.removeChild(a);
                            }
                            n.visible = false, n.ignoreWhenCulling = true, this.targetBodies.splice(t, 1), this.risingBodies.splice(t, 1), 0 == this.targetBodies.length && this.grindLoop && (this.grindLoop.fadeOut(.3), this.grindLoop = null);
                        }
                    }
                    for (t = 0; t < this.addedJointsArray.length; t++) {
                        var l = this.addedJointsArray[t];
                        o = l.GetBody1(), this.risingBodies.push(o), i = l.GetBody2(), this.targetBodies.push(i);
                    }
                    this.addedJointsArray = [], this.mowerImpactSound && (this.soundDelayCount += 1, this.soundDelayCount >= this.soundDelay && (this.mowerImpactSound = null, this.soundDelayCount = 0, this.soundDelay = Math.round(20 * Math.random()) + 5));
                }, u.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            break;
                        case 6:
                            this.lungePoseLeft();
                            break;
                        case 7:
                            this.leanBackPose();
                            break;
                        case 8:
                            this.leanForwardPose();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, u.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.mowerSmashed = false, this.bladeContactArray = [], this.bladeShapeArray = [], this.addedJointsArray = [], this.targetBodies = [], this.risingBodies = [], this.contactCount = new Map, this.grindingMass = 0, this.soundDelayCount = 0, this.soundDelay = 10, this.session.version > 1.4 && (this.mowerSmashLimit = 200);
                }, u.die = function () {
                    e.prototype.die.call(this);
                    for (var t = 0; t < this.targetBodies.length; t++) {
                        var i = this.targetBodies[t].m_userData;
                        if (null != i.mask) {
                            var s = i.mask;
                            i.mask = null, this.targetMaskHolder.removeChild(s);
                        }
                        i.visible = false;
                    }
                    for (t = this.targetMaskHolder.numChildren - 1; t > -1; t--) {
                        var r = this.targetMaskHolder.getChildAt(t);
                        this.targetMaskHolder.removeChild(r);
                    }
                    this.mowerLoop && (this.mowerLoop.stopSound(), this.mowerLoop = null);
                }, u.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.frontWheelBody.GetInterpolatedWorldCenter();
                    if (this.frontWheelMC.x = t.x * this.m_physScale, this.frontWheelMC.y = t.y * this.m_physScale, this.frontWheelMC.inner.rotation = this.frontWheelBody.GetInterpolatedAngle() * (180 / Math.PI) % 360, t = this.backWheelBody.GetInterpolatedWorldCenter(), this.backWheelMC.x = t.x * this.m_physScale, this.backWheelMC.y = t.y * this.m_physScale, this.backWheelMC.inner.rotation = this.backWheelBody.GetInterpolatedAngle() * (180 / Math.PI) % 360, this.targetMaskHolder.x = this.bladeCoverMC.x = this.mowerMC.x, this.targetMaskHolder.y = this.bladeCoverMC.y = this.mowerMC.y, this.targetMaskHolder.rotation = this.bladeCoverMC.rotation = this.mowerMC.rotation, !this.mowerSmashed) {
                        t = this.frontShockJoint.GetInterpolatedAnchor1();
                        var i = this.frontShockBody.GetInterpolatedWorldCenter();
                        this.shockMC.graphics.clear(), this.shockMC.graphics.lineStyle(3, 1513239), this.shockMC.graphics.moveTo(t.x * this.m_physScale, t.y * this.m_physScale), this.shockMC.graphics.lineTo(i.x * this.m_physScale, i.y * this.m_physScale), t = this.backShockJoint.GetInterpolatedAnchor1(), i = this.backShockBody.GetInterpolatedWorldCenter(), this.shockMC.graphics.moveTo(t.x * this.m_physScale, t.y * this.m_physScale), this.shockMC.graphics.lineTo(i.x * this.m_physScale, i.y * this.m_physScale);
                    }
                }, u.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.frontShape, this.mowerSmashLimit), this.contactAddSounds.set(this.backWheelShape, "CarTire1"), this.contactAddSounds.set(this.frontWheelShape, "CarTire1"), this.contactAddSounds.set(this.frontShape, "ChairHit3"), this.contactAddSounds.set(this.topShape, "ChairHit2"), this.contactAddSounds.set(this.seatShape1, "BikeHit3");
                }, u.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t, i = new s.Vb, n = new s.lB;
                    (t = this.upperLeg1Body.GetShapeList()).m_isSensor = true, this._session.m_world.Refilter(t), (t = this.upperLeg2Body.GetShapeList()).m_isSensor = true, this._session.m_world.Refilter(t), (t = this.lowerLeg1Body.GetShapeList()).m_isSensor = true, this._session.m_world.Refilter(t), (t = this.lowerLeg2Body.GetShapeList()).m_isSensor = true, this._session.m_world.Refilter(t);
                    var a = new s.Oi, h = new s.Oi;
                    i.density = 1, i.friction = .3, i.restitution = .1, i.filter = this.defaultFilter, this.paintVector.splice(this.paintVector.indexOf(this.chestBody), 1), this.paintVector.splice(this.paintVector.indexOf(this.pelvisBody), 1), this._session.m_world.DestroyBody(this.chestBody), this._session.m_world.DestroyBody(this.pelvisBody);
                    var l = this.shapeGuide.chestShape;
                    a.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), a.angle = l.rotation / (180 / Math.PI), this.chestBody = this._session.m_world.CreateBody(a), i.vertexCount = 6;
                    for (var c = 0; c < 6; c++) {
                        var d = this.shapeGuide["chestVert" + [c]];
                        i.vertices[c] = new s._m(d.x / this.character_scale, d.y / this.character_scale);
                    }
                    for (this.chestShape = this.chestBody.CreateShape(i), this.chestShape.SetMaterial(2), this.chestShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.chestBody.AllowSleeping(false), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, l = this.shapeGuide.pelvisShape, h.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), h.angle = l.rotation / (180 / Math.PI), this.pelvisBody = this._session.m_world.CreateBody(h), i.vertexCount = 5, c = 0; c < 5; c++) d = this.shapeGuide["pelvisVert" + [c]], i.vertices[c] = new s._m(d.x / this.character_scale, d.y / this.character_scale);
                    this.pelvisShape = this.pelvisBody.CreateShape(i), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.pelvisBody.AllowSleeping(false), this.paintVector.push(this.pelvisBody);
                    var p = new s.Oi, u = new s.Oi, m = new s.Oi, f = new s.Oi, y = new s.Oi;
                    for (new s.Vb, new s.Vb, new s.Vb, i.density = 4, i.friction = .3, i.restitution = .1, i.filter = this.zeroFilter.Copy(), i.filter.groupIndex = -2, this.mowerBody = this._session.m_world.CreateBody(p), i.vertexCount = 4, c = 0; c < 4; c++) d = this.shapeGuide["handleVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    this.handleShape = this.mowerBody.CreateShape(i), l = this.shapeGuide.shaftShape;
                    var v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI);
                    for (i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.shaftShape = this.mowerBody.CreateShape(i), i.vertexCount = 6, c = 0; c < 6; c++) d = this.shapeGuide["frontVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    for (this.frontShape = this.mowerBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.frontShape, this.contactMowerResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frontShape, this.contactAddHandler), l = this.shapeGuide.baseShape, v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI), i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.baseShape = this.mowerBody.CreateShape(i), l = this.shapeGuide.bladeShape, v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI), i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.bladeX = 5 * l.scaleX / this.character_scale, this.bladeY = 5 * l.scaleY / this.character_scale, this.bladeCenter = v, this.bladeShape = this.mowerBody.CreateShape(i), this.bladeLeftX = this.bladeShape.GetVertices()[0].x, this.bladeRightX = this.bladeShape.GetVertices()[1].x, this._session.contactListener.registerListener(r.$S.RESULT, this.bladeShape, this.contactBladeResultHandler), i.vertexCount = 5, c = 0; c < 5; c++) d = this.shapeGuide["rearVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    for (this.rearShape = this.mowerBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.rearShape, this.contactMowerResultHandler), c = 0; c < 5; c++) d = this.shapeGuide["topVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    for (this.topShape = this.mowerBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.topShape, this.contactMowerResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.topShape, this.contactAddHandler), i.vertexCount = 4, c = 0; c < 4; c++) d = this.shapeGuide["backVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    for (this.seatShape1 = this.mowerBody.CreateShape(i), this._session.contactListener.registerListener(r.$S.RESULT, this.seatShape1, this.contactMowerResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.seatShape1, this.contactAddHandler), c = 0; c < 4; c++) d = this.shapeGuide["seatVert" + [c + 1]], i.vertices[c] = new s._m(this._startX + d.x / this.character_scale, this._startY + d.y / this.character_scale);
                    this.seatShape2 = this.mowerBody.CreateShape(i), this.mowerBody.DestroyShape(this.seatShape2);
                    var S = new s.fT;
                    S.maskBits = 1, S.categoryBits = 1, i.filter = S, i.friction = .01, i.density = .01, l = this.shapeGuide.alignShape1, v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI), i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.mowerBody.CreateShape(i), l = this.shapeGuide.alignShape2, v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI), i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.mowerBody.CreateShape(i), i.isSensor = true, l = this.shapeGuide.clearanceShape, v = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), g = l.rotation / (180 / Math.PI), i.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, v, g), this.clearanceShape = this.mowerBody.CreateShape(i), this.session.contactListener.registerListener(r.$S.ADD, this.clearanceShape, this.clearanceContactAdd), this.session.contactListener.registerListener(r.$S.REMOVE, this.clearanceShape, this.clearanceContactRemove), this.mowerBody.SetMassFromShapes(), this.mowerMass = this.mowerBody.GetMass(), this.paintVector.push(this.mowerBody), n.density = 5, n.friction = 1, n.restitution = .3, n.filter = this.zeroFilter.Copy(), n.filter.groupIndex = -2, l = this.shapeGuide.backWheelShape, u.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), u.angle = l.rotation / (180 / Math.PI), n.localPosition.Set(0, 0), n.radius = l.width / 2 / this.character_scale, this.backWheelBody = this._session.m_world.CreateBody(u), this.backWheelShape = this.backWheelBody.CreateShape(n), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.contactAddHandler), l = this.shapeGuide.frontWheelShape, m.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), m.angle = l.rotation / (180 / Math.PI), n.radius = l.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(m), this.frontWheelShape = this.frontWheelBody.CreateShape(n), this.frontWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.contactAddHandler), i.density = 4, i.friction = .3, i.restitution = .1, i.filter = this.zeroFilter.Copy(), i.filter.groupIndex = -2, i.isSensor = false;
                    var _ = 12 / this.character_scale;
                    i.SetAsOrientedBox(_, _, m.position), this.frontShockBody = this._session.m_world.CreateBody(f), this.frontShockBody.CreateShape(i), this.frontShockBody.SetMassFromShapes(), i.SetAsOrientedBox(_, _, u.position), this.backShockBody = this._session.m_world.CreateBody(y), this.backShockBody.CreateShape(i), this.backShockBody.SetMassFromShapes(), this.mowerLoop = o.ij.instance.playAreaSoundLoop("MowerLoop", this.mowerBody, 0), this.mowerLoop.fadeTo(.5, 1);
                }, u.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this._session.containerSprite.addChildAt(this.pelvisMC, this._session.containerSprite.getChildIndex(this.chestMC));
                    var t = this.sourceObject.mowerShards;
                    this._session.particleController.createBMDArray("mowershards", t), this.shockMC = new a.jy, this.mowerMC = this.sourceObject.mower, this.mowerMC.scaleX = this.mowerMC.scaleY = 1 / this.mc_scale, this.bladeCoverMC = this.sourceObject.bladecover, this.bladeCoverMC.scaleX = this.bladeCoverMC.scaleY = 1 / this.mc_scale, this.backWheelMC = this.sourceObject.backWheel, this.backWheelMC.scaleX = this.backWheelMC.scaleY = 1 / this.mc_scale, this.frontWheelMC = this.sourceObject.frontWheel, this.frontWheelMC.scaleX = this.frontWheelMC.scaleY = 1 / this.mc_scale, this.frontMC = this.sourceObject.mowerFront, this.frontMC.scaleX = this.frontMC.scaleY = 1 / this.mc_scale, this.frontMC.visible = false, this.rearMC = this.sourceObject.mowerRear, this.rearMC.scaleX = this.rearMC.scaleY = 1 / this.mc_scale, this.rearMC.visible = false, this.front1MC = this.sourceObject.front1, this.front1MC.scaleX = this.front1MC.scaleY = 1 / this.mc_scale, this.front1MC.visible = false, this.front2MC = this.sourceObject.front2, this.front2MC.scaleX = this.front2MC.scaleY = 1 / this.mc_scale, this.front2MC.visible = false, this.front3MC = this.sourceObject.front3, this.front3MC.scaleX = this.front3MC.scaleY = 1 / this.mc_scale, this.front3MC.visible = false, this.front4MC = this.sourceObject.front4, this.front4MC.scaleX = this.front4MC.scaleY = 1 / this.mc_scale, this.front4MC.visible = false, this.front5MC = this.sourceObject.front5, this.front5MC.scaleX = this.front5MC.scaleY = 1 / this.mc_scale, this.front5MC.visible = false, this.rear1MC = this.sourceObject.rear1, this.rear1MC.scaleX = this.rear1MC.scaleY = 1 / this.mc_scale, this.rear1MC.visible = false, this.rear2MC = this.sourceObject.rear2, this.rear2MC.scaleX = this.rear2MC.scaleY = 1 / this.mc_scale, this.rear2MC.visible = false, this.rear3MC = this.sourceObject.rear3, this.rear3MC.scaleX = this.rear3MC.scaleY = 1 / this.mc_scale, this.rear3MC.visible = false, this.rear4MC = this.sourceObject.rear4, this.rear4MC.scaleX = this.rear4MC.scaleY = 1 / this.mc_scale, this.rear4MC.visible = false;
                    var i = this.mowerBody.GetLocalCenter();
                    i = new s._m((this._startX - i.x) * this.character_scale, (this._startY - i.y) * this.character_scale);
                    var r = this.shapeGuide.rearVert5, o = new s._m(r.x + i.x, r.y + i.y);
                    this.mowerMC.inner.x = this.bladeCoverMC.inner.x = o.x, this.mowerMC.inner.y = this.bladeCoverMC.inner.y = o.y, this.mowerBody.SetUserData(this.mowerMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this._session.containerSprite.addChildAt(this.shockMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.mowerMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.frontMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.rearMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.backWheelMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.frontWheelMC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.bladeCoverMC, this._session.containerSprite.getChildIndex(this.lowerArm1MC)), this.targetMaskHolder = new a.jy, this._session.containerSprite.addChild(this.targetMaskHolder), this._session.containerSprite.addChildAt(this.front1MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.front2MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.front4MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.front3MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.front5MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.rear1MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.rear2MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.rear3MC, this._session.containerSprite.getChildIndex(this.pelvisMC)), this._session.containerSprite.addChildAt(this.rear4MC, this._session.containerSprite.getChildIndex(this.pelvisMC));
                }, u.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.mowerMC.visible = true, this.shockMC.visible = true, this.bladeCoverMC.visible = true, this.frontMC.visible = false, this.front1MC.visible = false, this.front2MC.visible = false, this.front3MC.visible = false, this.front4MC.visible = false, this.front5MC.visible = false, this.rearMC.visible = false, this.rear1MC.visible = false, this.rear2MC.visible = false, this.rear3MC.visible = false, this.rear4MC.visible = false, this.mowerBody.SetUserData(this.mowerMC), this.backWheelBody.SetUserData(this.backWheelMC), this.frontWheelBody.SetUserData(this.frontWheelMC), this.shockMC.graphics.clear();
                    var t = this.sourceObject.mowerShards;
                    this._session.particleController.createBMDArray("mowershards", t);
                }, u.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    i = -10 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 10 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s.wN;
                    n.maxMotorForce = 1e3, n.enableLimit = true, n.upperTranslation = 0, n.lowerTranslation = 0;
                    var a = new s._m, h = this.shapeGuide.frontWheelShape;
                    a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.mowerBody, this.frontShockBody, a, new s._m(0, 1)), this.frontShockJoint = this._session.m_world.CreateJoint(n), h = this.shapeGuide.backWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), n.Initialize(this.mowerBody, this.backShockBody, a, new s._m(0, 1)), this.backShockJoint = this._session.m_world.CreateJoint(n);
                    var l = new s.tu;
                    l.maxMotorTorque = this.maxTorque, l.enableLimit = false, l.lowerAngle = 0, l.upperAngle = 0, (a = new s._m).Set(this.pelvisBody.GetWorldCenter().x, this.pelvisBody.GetWorldCenter().y), l.Initialize(this.mowerBody, this.pelvisBody, a), this.mowerPelvis = this._session.m_world.CreateJoint(l), this.mowerPelvisJointDef = l.clone(), this.pelvisAnchorPoint = this.mowerBody.GetLocalPoint(a), h = this.shapeGuide.backWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.backShockBody, this.backWheelBody, a), this.backWheelJoint = this._session.m_world.CreateJoint(l), h = this.shapeGuide.frontWheelShape, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.frontShockBody, this.frontWheelBody, a), this.frontWheelJoint = this._session.m_world.CreateJoint(l), h = this.shapeGuide.handleAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.mowerBody, this.lowerArm1Body, a), this.mowerHand1 = this._session.m_world.CreateJoint(l), this.mowerHand1JointDef = l.clone(), this.handleAnchorPoint = this.mowerBody.GetLocalPoint(a), l.Initialize(this.mowerBody, this.lowerArm2Body, a), this.mowerHand2 = this._session.m_world.CreateJoint(l), this.mowerHand2JointDef = l.clone(), h = this.shapeGuide.footAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), l.Initialize(this.mowerBody, this.lowerLeg1Body, a), this.mowerFoot1 = this._session.m_world.CreateJoint(l), this.mowerFoot1JointDef = l.clone(), this.leg1AnchorPoint = this.mowerBody.GetLocalPoint(a), l.Initialize(this.mowerBody, this.lowerLeg2Body, a), this.mowerFoot2 = this._session.m_world.CreateJoint(l), this.mowerFoot2JointDef = l.clone(), this.leg2AnchorPoint = this.mowerBody.GetLocalPoint(a);
                }, u.handleContactResults = function () {
                    var t;
                    e.prototype.handleContactResults.call(this), this.contactResultBuffer.get(this.frontShape) && (t = this.contactResultBuffer.get(this.frontShape), this.mowerSmash(t.impulse), this.contactResultBuffer.delete(this.frontShape), this.contactAddBuffer.delete(this.frontShape), this.contactAddBuffer.delete(this.topShape), this.contactAddBuffer.delete(this.seatShape1)), this.contactResultBuffer.get(this.brokenFrontShape) && (t = this.contactResultBuffer.get(this.brokenFrontShape), this.frontSmash(t.impulse), this.contactResultBuffer.delete(this.brokenFrontShape), this.contactAddBuffer.delete(this.brokenFrontShape)), this.contactResultBuffer.get(this.brokenRearShape) && (t = this.contactResultBuffer.get(this.brokenRearShape), this.rearSmash(t.impulse), this.contactResultBuffer.delete(this.brokenRearShape), this.contactAddBuffer.delete(this.brokenRearShape), this.contactAddBuffer.delete(this.baseShape), this.contactAddBuffer.delete(this.bladeShape), this.contactAddBuffer.delete(this.topShape), this.contactAddBuffer.delete(this.seatShape1)), this.handleBladeContacts();
                }, u.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        this.mowerPelvis && (e.DestroyJoint(this.mowerPelvis), this.mowerPelvis = null), this.mowerHand1 && (e.DestroyJoint(this.mowerHand1), this.mowerHand1 = null), this.mowerHand2 && (e.DestroyJoint(this.mowerHand2), this.mowerHand2 = null), this.mowerFoot1 && (e.DestroyJoint(this.mowerFoot1), this.mowerFoot1 = null), this.mowerFoot2 && (e.DestroyJoint(this.mowerFoot2), this.mowerFoot2 = null);
                        var t = this.upperLeg1Body.GetShapeList();
                        t.m_isSensor = false, e.Refilter(t), (t = this.upperLeg2Body.GetShapeList()).m_isSensor = false, e.Refilter(t), this.lowerLeg1Shape.m_isSensor = false, e.Refilter(this.lowerLeg1Shape), this.lowerLeg2Shape.m_isSensor = false, e.Refilter(this.lowerLeg2Shape), this.frontShockJoint.EnableMotor(false), this.frontShockJoint.SetLimits(0, 0), this.frontShockJoint.SetMotorSpeed(0), this.backShockJoint.EnableMotor(false), this.backShockJoint.SetLimits(0, 0), this.backShockJoint.SetMotorSpeed(0), this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                        var i = this.mowerBody.GetAngle() - Math.PI / 2, r = Math.cos(i) * this.ejectImpulse, o = Math.sin(i) * this.ejectImpulse;
                        this.chestBody.ApplyImpulse(new s._m(r, o), this.chestBody.GetWorldCenter()), this.pelvisBody.ApplyImpulse(new s._m(r, o), this.pelvisBody.GetWorldCenter());
                    }
                }, u.checkEject = function () {
                    this.mowerHand1 || this.mowerHand2 || this.mowerFoot1 || this.mowerFoot2 || this.eject();
                }, u.mowerSmash = function (e) {
                    this.contactImpulseDict.delete(this.frontShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.frontShape), t.deleteListener(r.$S.RESULT, this.topShape), t.deleteListener(r.$S.RESULT, this.rearShape), t.deleteListener(r.$S.RESULT, this.seatShape1), t.deleteListener(r.$S.RESULT, this.bladeShape), t.deleteListener(r.$S.ADD, this.frontShape), t.deleteListener(r.$S.ADD, this.topShape), t.deleteListener(r.$S.ADD, this.seatShape1);
                    var i = this._session.m_world;
                    this.bladeShapeArray = [], this.bladeContactArray = [];
                    for (var n = this.targetBodies.length, a = 0; a < n; a++) {
                        var l = this.targetBodies[a], c = l.GetShapeList();
                        (c.m_userData instanceof h.bx || c.m_userData instanceof d) && c.m_userData.removeBody(l);
                        var p = this.risingBodies[a];
                        p.GetUserData().stopSpewing(), i.DestroyBody(l), i.DestroyBody(p);
                        var u = l.m_userData;
                        if (null != u.mask) {
                            var m = u.mask;
                            u.mask = null, this.targetMaskHolder.removeChild(m);
                        }
                        u.visible = false, u.ignoreWhenCulling = true;
                    }
                    this.grindLoop && (this.grindLoop.stopSound(), this.grindLoop = null), this.mowerLoop.stopSound(), this.mowerLoop = null, this.addedJointsArray = [], this.targetBodies = [], this.risingBodies = [], this.eject(), this.mowerSmashed = true;
                    var f = this.mowerBody.GetPosition(), y = this.mowerBody.GetAngle(), v = (this.mowerBody.GetLinearVelocity(), this.mowerBody.GetAngularVelocity()), g = new s.Oi;
                    g.position = f, g.angle = y;
                    var S = new s.Vb;
                    S.density = 4, S.friction = .3, S.restitution = .1, S.filter = this.zeroFilter, this.frontBody = i.CreateBody(g), this.frontBody.SetAngularVelocity(v), this.rearBody = i.CreateBody(g), this.rearBody.SetAngularVelocity(v), S.vertexCount = 4, S.vertices = this.handleShape.GetVertices(), this.handleShape = this.frontBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.handleShape, this.contactFrontResultHandler), S.vertices = this.shaftShape.GetVertices(), this.frontBody.CreateShape(S), S.vertexCount = 6, S.vertices = this.frontShape.GetVertices(), this.brokenFrontShape = this.frontBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.brokenFrontShape, this.contactFrontResultHandler), t.registerListener(r.$S.ADD, this.brokenFrontShape, this.contactAddHandler), this.frontBody.SetMassFromShapes(), this.frontBody.SetLinearVelocity(this.mowerBody.GetLinearVelocityFromLocalPoint(this.frontBody.GetLocalCenter())), this.contactImpulseDict.set(this.brokenFrontShape, this.frontRearSmashLimit), this.contactAddSounds.set(this.brokenFrontShape, "ChairHit3"), S.vertexCount = 4, S.vertices = this.baseShape.GetVertices(), this.baseShape = this.rearBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.baseShape, this.contactRearResultHandler), t.registerListener(r.$S.ADD, this.baseShape, this.contactAddHandler), S.vertices = this.bladeShape.GetVertices(), this.bladeShape = this.rearBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.bladeShape, this.contactRearResultHandler), t.registerListener(r.$S.ADD, this.bladeShape, this.contactAddHandler), S.vertexCount = 5, S.vertices = this.rearShape.GetVertices(), this.brokenRearShape = this.rearBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.brokenRearShape, this.contactRearResultHandler), t.registerListener(r.$S.ADD, this.brokenRearShape, this.contactAddHandler), S.vertices = this.topShape.GetVertices(), this.topShape = this.rearBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.topShape, this.contactRearResultHandler), t.registerListener(r.$S.ADD, this.topShape, this.contactAddHandler), S.vertexCount = 4, S.vertices = this.seatShape1.GetVertices(), this.seatShape1 = this.rearBody.CreateShape(S), t.registerListener(r.$S.RESULT, this.seatShape1, this.contactRearResultHandler), t.registerListener(r.$S.ADD, this.seatShape1, this.contactAddHandler), S.vertices = this.seatShape2.GetVertices(), this.seatShape2 = this.rearBody.CreateShape(S), this.rearBody.SetMassFromShapes(), this.rearBody.SetLinearVelocity(this.mowerBody.GetLinearVelocityFromLocalPoint(this.rearBody.GetLocalCenter())), this.contactImpulseDict.set(this.brokenRearShape, this.frontRearSmashLimit), this.contactAddSounds.set(this.bladeShape, "BikeHit1"), this.contactAddSounds.set(this.baseShape, "ChairHit2"), this.contactAddSounds.set(this.topShape, "ChairHit2"), this.contactAddSounds.set(this.brokenRearShape, "ChairHit3"), this.contactAddSounds.set(this.seatShape1, "BikeHit3");
                    var _ = this.mowerBody.GetWorldCenter();
                    this._session.particleController.createPointBurst("mowershards", _.x * this.m_physScale, _.y * this.m_physScale, 30, 30, 70), i.DestroyBody(this.mowerBody), i.DestroyBody(this.frontShockBody), i.DestroyBody(this.backShockBody), this.mowerMC.visible = this.bladeCoverMC.visible = false, this.frontMC.visible = true, this.frontBody.SetUserData(this.frontMC), this.paintVector.push(this.frontBody), this.rearMC.visible = true, this.rearBody.SetUserData(this.rearMC), this.paintVector.push(this.rearBody);
                    var w = new s.tu;
                    w.maxMotorTorque = this.maxTorque, w.enableLimit = false, w.lowerAngle = 0, w.upperAngle = 0, w.body1 = this.frontBody, w.body2 = this.frontWheelBody, w.localAnchor1 = this.frontShockJoint.m_localAnchor1, w.localAnchor2 = this.frontWheelJoint.m_localAnchor2, i.DestroyJoint(this.frontWheelJoint), this.frontWheelJoint = i.CreateJoint(w), w.body1 = this.rearBody, w.body2 = this.backWheelBody, w.localAnchor1 = this.backShockJoint.m_localAnchor1, w.localAnchor2 = this.backWheelJoint.m_localAnchor2, i.DestroyJoint(this.backWheelJoint), this.backWheelJoint = i.CreateJoint(w), this.shockMC.visible = false, o.ij.instance.playAreaSoundInstance("MetalSmashHeavy3", this.mowerBody);
                }, u.frontSmash = function (e) {
                    this.contactImpulseDict.delete(this.brokenFrontShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.brokenFrontShape), t.deleteListener(r.$S.RESULT, this.handleShape), t.deleteListener(r.$S.ADD, this.brokenFrontShape);
                    var i = this._session.m_world, n = this.frontBody.GetPosition(), a = this.frontBody.GetAngle(), h = (this.frontBody.GetLinearVelocity(), this.frontBody.GetAngularVelocity()), l = new s.Oi;
                    l.position = n, l.angle = a;
                    var c = new s.Vb;
                    c.density = 4, c.friction = .3, c.restitution = .1, c.filter = this.zeroFilter;
                    var d = i.CreateBody(l);
                    d.SetAngularVelocity(h);
                    var p = i.CreateBody(l);
                    p.SetAngularVelocity(h);
                    var u = i.CreateBody(l);
                    u.SetAngularVelocity(h);
                    var m = i.CreateBody(l);
                    m.SetAngularVelocity(h);
                    var f = i.CreateBody(l);
                    f.SetAngularVelocity(h), c.vertexCount = 4, c.vertices = this.handleShape.GetVertices(), d.CreateShape(c);
                    for (var y = 0; y < 4; y++) {
                        var v = this.shapeGuide["f1vert" + [y + 1]];
                        c.vertices[y] = new s._m(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale);
                    }
                    for (d.CreateShape(c), d.SetMassFromShapes(), d.SetLinearVelocity(this.frontBody.GetLinearVelocityFromLocalPoint(d.GetLocalCenter())), d.SetUserData(this.front1MC), this.front1MC.visible = true, this.paintVector.push(d), y = 0; y < 4; y++) v = this.shapeGuide["f2vert" + [y + 1]], c.vertices[y] = new s._m(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale);
                    for (p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frontBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetUserData(this.front2MC), this.front2MC.visible = true, this.paintVector.push(p), y = 0; y < 4; y++) v = this.shapeGuide["f3vert" + [y + 1]], c.vertices[y] = new s._m(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale);
                    for (u.CreateShape(c), u.SetMassFromShapes(), u.SetLinearVelocity(this.frontBody.GetLinearVelocityFromLocalPoint(u.GetLocalCenter())), u.SetUserData(this.front3MC), this.front3MC.visible = true, this.paintVector.push(u), y = 0; y < 4; y++) v = this.shapeGuide["f4vert" + [y + 1]], c.vertices[y] = new s._m(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale);
                    for (m.CreateShape(c), m.SetMassFromShapes(), m.SetLinearVelocity(this.frontBody.GetLinearVelocityFromLocalPoint(m.GetLocalCenter())), m.SetUserData(this.front4MC), this.front4MC.visible = true, this.paintVector.push(m), y = 0; y < 4; y++) v = this.shapeGuide["f5vert" + [y + 1]], c.vertices[y] = new s._m(this._startX + v.x / this.character_scale, this._startY + v.y / this.character_scale);
                    f.CreateShape(c), f.SetMassFromShapes(), f.SetLinearVelocity(this.frontBody.GetLinearVelocityFromLocalPoint(f.GetLocalCenter())), f.SetUserData(this.front5MC), this.front5MC.visible = true, this.paintVector.push(f), this._session.particleController.createBurst("mowershards", 30, 30, this.frontBody, 50), i.DestroyBody(this.frontBody), this.frontMC.visible = false, i.DestroyJoint(this.frontWheelJoint), o.ij.instance.playAreaSoundInstance("MetalSmashHeavy2", this.frontBody);
                }, u.rearSmash = function (e) {
                    this.contactImpulseDict.delete(this.brokenRearShape);
                    var t = this._session.contactListener;
                    t.deleteListener(r.$S.RESULT, this.baseShape), t.deleteListener(r.$S.RESULT, this.bladeShape), t.deleteListener(r.$S.RESULT, this.brokenRearShape), t.deleteListener(r.$S.RESULT, this.topShape), t.deleteListener(r.$S.RESULT, this.seatShape1), t.deleteListener(r.$S.ADD, this.baseShape), t.deleteListener(r.$S.ADD, this.bladeShape), t.deleteListener(r.$S.ADD, this.brokenRearShape), t.deleteListener(r.$S.ADD, this.topShape), t.deleteListener(r.$S.ADD, this.seatShape1);
                    var i = this._session.m_world, n = this.rearBody.GetPosition(), a = this.rearBody.GetAngle(), h = (this.rearBody.GetLinearVelocity(), this.rearBody.GetAngularVelocity()), l = new s.Oi;
                    l.position = n, l.angle = a;
                    var c = new s.Vb;
                    c.density = 4, c.friction = .3, c.restitution = .1, c.filter = this.zeroFilter;
                    var d = i.CreateBody(l);
                    d.SetAngularVelocity(h);
                    var p = i.CreateBody(l);
                    p.SetAngularVelocity(h);
                    var u = i.CreateBody(l);
                    u.SetAngularVelocity(h);
                    var m = i.CreateBody(l);
                    m.SetAngularVelocity(h), i.CreateBody(l).SetAngularVelocity(h), c.vertexCount = this.baseShape.m_vertexCount, c.vertices = this.baseShape.GetVertices(), d.CreateShape(c), d.SetMassFromShapes(), d.SetLinearVelocity(this.rearBody.GetLinearVelocityFromLocalPoint(d.GetLocalCenter())), d.SetUserData(this.rear3MC), this.rear3MC.visible = true, this.paintVector.push(d);
                    for (var f = 0; f < 4; f++) {
                        var y = this.shapeGuide["r1vert" + [f]];
                        c.vertices[f] = new s._m(this._startX + y.x / this.character_scale, this._startY + y.y / this.character_scale);
                    }
                    p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.rearBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetUserData(this.rear4MC), this.rear4MC.visible = true, this.paintVector.push(p), c.vertexCount = this.brokenRearShape.m_vertexCount, c.vertices = this.brokenRearShape.GetVertices(), u.CreateShape(c), c.vertexCount = this.topShape.m_vertexCount, c.vertices = this.topShape.GetVertices(), u.CreateShape(c), u.SetMassFromShapes(), u.SetLinearVelocity(this.rearBody.GetLinearVelocityFromLocalPoint(u.GetLocalCenter())), u.SetUserData(this.rear2MC), this.rear2MC.visible = true, this.paintVector.push(u), c.vertexCount = this.seatShape1.m_vertexCount, c.vertices = this.seatShape1.GetVertices(), m.CreateShape(c), c.vertexCount = this.seatShape2.m_vertexCount, c.vertices = this.seatShape2.GetVertices(), m.CreateShape(c), m.SetMassFromShapes(), m.SetLinearVelocity(this.rearBody.GetLinearVelocityFromLocalPoint(m.GetLocalCenter())), m.SetUserData(this.rear1MC), this.rear1MC.visible = true, this.paintVector.push(m), this._session.particleController.createBurst("mowershards", 30, 30, this.rearBody, 50), i.DestroyBody(this.rearBody), this.rearMC.visible = false, i.DestroyJoint(this.backWheelJoint), o.ij.instance.playAreaSoundInstance("MetalSmashHeavy", this.rearBody);
                }, u.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, u.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, u.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, u.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, u.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, u.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.mowerHand1 && (this._session.m_world.DestroyJoint(this.mowerHand1), this.mowerHand1 = null), this.checkEject());
                }, u.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.mowerHand2 && (this._session.m_world.DestroyJoint(this.mowerHand2), this.mowerHand2 = null), this.checkEject());
                }, u.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.mowerHand1 && (this._session.m_world.DestroyJoint(this.mowerHand1), this.mowerHand1 = null), this.checkEject());
                }, u.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.mowerHand2 && (this._session.m_world.DestroyJoint(this.mowerHand2), this.mowerHand2 = null), this.checkEject());
                }, u.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.mowerFoot1 && (this._session.m_world.DestroyJoint(this.mowerFoot1), this.mowerFoot1 = null), this.checkEject());
                }, u.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.mowerFoot2 && (this._session.m_world.DestroyJoint(this.mowerFoot2), this.mowerFoot2 = null), this.checkEject());
                }, u.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.mowerFoot1 && (this._session.m_world.DestroyJoint(this.mowerFoot1), this.mowerFoot1 = null), this.checkEject());
                }, u.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.mowerFoot2 && (this._session.m_world.DestroyJoint(this.mowerFoot2), this.mowerFoot2 = null), this.checkEject());
                }, u.leanBackPose = function () {
                    this.setJoint(this.neckJoint, 0, 2), this.setJoint(this.elbowJoint1, 2.5, 15), this.setJoint(this.elbowJoint2, 2.5, 15);
                }, u.leanForwardPose = function () {
                    this.setJoint(this.neckJoint, 1, 1), this.setJoint(this.elbowJoint1, 0, 15), this.setJoint(this.elbowJoint2, 0, 15);
                }, u.lungePoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 0, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 2, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, u.lungePoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 0, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 2, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, c = n, (p = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(c.prototype, p), Object.defineProperty(c, "prototype", { writable: false }), n;
            }(d);
            function ie(e, t) {
                return (ie = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var se = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t += 20, i -= 40, r, o, -1, "Char2") || this).wheelMaxSpeed = 1e3, n.accelStep = 1, n.prisAccelStep = .5, n.maxTorque = 40, n.wheelContacts = 0, n.impulseMagnitude = 3, n.impulseLeft = .7, n.impulseRight = .7, n.impulseOffset = 1, n.maxSpinAV = 5, n.hatSmashLimit = .75, n.frameSmashLimit = 150, n.wheelSparkLimit = 8, n.connecting = false, n.destroyFrontDongle = false, n.destroyBackDongle = false, n.railDistanceMin = 37, n.clickVolume = .6, n.oneDongleCounter = 0, n.oneDongleMax = 35, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            n.wheelContacts += 1;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, o), t == n.frontWheelShape ? n.frontWheelContactPoint = e : n.backWheelContactPoint = e;
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (n.wheelContacts -= 1, 4 & e.shape2.GetMaterial() && (e.shape1 == n.frontWheelShape && e.shape2.GetBody() == n.frontRailBody && (n.destroyFrontDongle = true), e.shape1 == n.backWheelShape && e.shape2.GetBody() == n.backRailBody && (n.destroyBackDongle = true)));
                    }, n.wheelContactResult = function (e) {
                        var t = e.shape, i = e.impulse;
                        i > n.contactImpulseDict.get(t) && (n.contactResultBuffer.get(t) ? i > n.contactResultBuffer.get(t).impulse && n.contactResultBuffer.set(t, e) : n.contactResultBuffer.set(t, e)), n.connecting && 4 & e.otherShape.GetMaterial() && (e.shape != n.frontWheelShape || n.newFrontWheelRailBody || n.frontRailBody == e.otherShape.GetBody() || (n.newFrontWheelRailBody = e.otherShape.GetBody()), e.shape != n.backWheelShape || n.newBackWheelRailBody || n.backRailBody == e.otherShape.GetBody() || (n.newBackWheelRailBody = e.otherShape.GetBody()));
                    }, n.railJointY = -23 / n.m_physScale, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, ie(t, i);
                var a, h, l = n.prototype;
                return l.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * (this.impulseLeft + 0) * t, r = Math.sin(e) * (this.impulseLeft + 0) * t, o = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(r, -i), this.frameBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y)));
                    }
                }, l.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * (this.impulseRight + 0) * t, r = Math.sin(e) * (this.impulseRight + 0) * t, o = this.frameBody.GetLocalCenter();
                        this.frameBody.ApplyImpulse(new s._m(r, -i), this.frameBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, l.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, l.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.accelerateMotorSpeed(this.frontDongleBody, this.frontWheelJoint, this.frontDongleRailJoint), this.accelerateMotorSpeed(this.backDongleBody, this.backWheelJoint, this.backDongleRailJoint));
                }, l.accelerateMotorSpeed = function (e, t, i) {
                    e ? (t.IsMotorEnabled() && t.EnableMotor(false), i.EnableMotor(true), this.acceleratePrisJoint(i)) : (t.IsMotorEnabled() || t.EnableMotor(true), this.accelerateRevoluteJoint(t));
                }, l.acceleratePrisJoint = function (e) {
                    var t = e.GetJointSpeed(), i = t < this.wheelMaxSpeed ? t + this.prisAccelStep : t;
                    e.SetMotorSpeed(i);
                }, l.accelerateRevoluteJoint = function (e) {
                    var t = e.GetJointSpeed(), i = t < this.wheelMaxSpeed ? t + this.accelStep : t;
                    e.SetMotorSpeed(i);
                }, l.decelerateRevoluteJoint = function (e) {
                    var t, i = e.GetJointSpeed();
                    t = i > 0 ? 0 : i > -this.wheelMaxSpeed ? i - this.accelStep : i, e.SetMotorSpeed(t);
                }, l.deceleratePrisJoint = function (e) {
                    var t, i = e.GetJointSpeed();
                    t = i > 0 ? 0 : i > -this.wheelMaxSpeed ? i - this.prisAccelStep : i, e.SetMotorSpeed(t);
                }, l.decelerateMotorSpeed = function (e, t, i) {
                    e ? (t.IsMotorEnabled() || t.EnableMotor(false), i.EnableMotor(true), this.deceleratePrisJoint(i)) : (t.IsMotorEnabled() || t.EnableMotor(true), this.decelerateRevoluteJoint(t));
                }, l.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.decelerateMotorSpeed(this.frontDongleBody, this.frontWheelJoint, this.frontDongleRailJoint), this.decelerateMotorSpeed(this.backDongleBody, this.backWheelJoint, this.backDongleRailJoint));
                }, l.upAndDownActions = function () {
                    this.frontDongleBody && this.frontDongleRailJoint.EnableMotor(false), this.backDongleBody && this.backDongleRailJoint.EnableMotor(false), this.backWheelJoint.IsMotorEnabled() && (this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false)), this.ejected && (3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0));
                }, l.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : this.connecting = true;
                }, l.spaceNullActions = function () {
                    this.ejected && this.releaseGrip(), this.connecting = false, this.frontDongleBody && this.removeFrontDongle(), this.backDongleBody && this.removeBackDongle();
                }, l.shiftPressedActions = function () {
                    this.ejected ? this.currentPose = 5 : this.currentPose = 8;
                }, l.shiftNullActions = function () {
                    5 != this._currentPose && 8 != this._currentPose || (this.currentPose = 0);
                }, l.ctrlPressedActions = function () {
                    this.ejected ? this.currentPose = 6 : this.currentPose = 7;
                }, l.ctrlNullActions = function () {
                    6 != this._currentPose && 7 != this._currentPose || (this.currentPose = 0);
                }, l.zPressedActions = function () {
                    this.eject();
                }, l.wheelIsCloseToRail = function (e, t) {
                    if (Math.abs(t.GetLocalPoint(e.GetPosition()).y * this.m_physScale) > this.railDistanceMin) return false;
                    var i = t.GetShapeList(), s = e.GetShapeList(), r = Math.abs(i.GetVertices()[0].x) + s.m_radius;
                    return !(Math.abs(t.GetLocalPoint(e.GetPosition()).x) > r);
                }, l.dongleRevJointIsCloseToOrigin = function (e) {
                    var t = e.GetAnchor1(), i = e.GetAnchor2(), s = i.x - t.x, r = i.y - t.y;
                    return !(s * s + r * r > .1);
                }, l.removeFrontDongle = function () {
                    this._session.m_world.DestroyBody(this.frontDongleBody), this.frontDongleBody = null, this.frontRailBody = null, this.frontDongleRailJoint = null, this.oneDongleCounter = 0;
                }, l.removeBackDongle = function () {
                    this._session.m_world.DestroyBody(this.backDongleBody), this.backDongleBody = null, this.backRailBody = null, this.backDongleRailJoint = null, this.oneDongleCounter = 0;
                }, l.checkRemoveRailJoints = function () {
                    if (this.frontDongleBody || this.backDongleBody) {
                        if (!this.connecting) {
                            var e = false;
                            return this.frontDongleBody && (this.removeFrontDongle(), e = true), this.backDongleBody && (this.removeBackDongle(), e = true), void (e && o.ij.instance.playAreaSoundInstance("DoubleClickReverse", this.frameBody, this.clickVolume));
                        }
                        this.frontDongleBody && (this.wheelIsCloseToRail(this.frontWheelBody, this.frontRailBody) && this.dongleRevJointIsCloseToOrigin(this.frontDongleRevJoint) || this.removeFrontDongle()), this.backDongleBody && (this.wheelIsCloseToRail(this.backWheelBody, this.backRailBody) && this.dongleRevJointIsCloseToOrigin(this.backDongleRevJoint) || this.removeBackDongle());
                    }
                }, l.checkAddRailJoints = function () {
                    var e;
                    if (this.newFrontWheelRailBody) {
                        var t = false;
                        this.frontDongleBody ? this._session.m_world.DestroyJoint(this.frontDongleRailJoint) : (this.frontDongleBody = this.createDongle(this.frontWheelBody, this.frontWheelPos, this.newFrontWheelRailBody), this.frontDongleRevJoint = this.createDongleRevJoint(this.frontDongleBody, this.frontWheelPos), e = this.frontDongleBody, t = true), this.frontDongleRailJoint = this.createPrisJoint(this.frontDongleBody, this.newFrontWheelRailBody, this.frontWheelBody, this.frontWheelPos), this.previousFrontRailBody = this.frontRailBody, this.frontRailBody = this.newFrontWheelRailBody, t && this.addSparkForAttachedWheel(this.frontWheelBody, this.frontRailBody), this.newFrontWheelRailBody = null;
                    }
                    if (this.newBackWheelRailBody) {
                        var i = false;
                        this.backDongleBody ? this._session.m_world.DestroyJoint(this.backDongleRailJoint) : (this.backDongleBody = this.createDongle(this.backWheelBody, this.backWheelPos, this.newBackWheelRailBody), this.backDongleRevJoint = this.createDongleRevJoint(this.backDongleBody, this.backWheelPos), e = this.backDongleBody, i = true), this.backDongleRailJoint = this.createPrisJoint(this.backDongleBody, this.newBackWheelRailBody, this.backWheelBody, this.backWheelPos), this.previousBackRailBody = this.backRailBody, this.backRailBody = this.newBackWheelRailBody, i && this.addSparkForAttachedWheel(this.backWheelBody, this.backRailBody), this.newBackWheelRailBody = null;
                    }
                    e && o.ij.instance.playAreaSoundInstance("DoubleClick", e, this.clickVolume);
                }, l.actions = function () {
                    if (this.checkRemoveRailJoints(), this.ejected || this.checkAddRailJoints(), this.frontDongleBody && (this.frontDongleBody.m_linearVelocity.y += n.GRAVITY_DISPLACEMENT), this.backDongleBody && (this.backDongleBody.m_linearVelocity.y += n.GRAVITY_DISPLACEMENT), this.frontDongleBody && !this.backDongleBody && ++this.oneDongleCounter == this.oneDongleMax && this.removeFrontDongle(), this.backDongleBody && !this.frontDongleBody && ++this.oneDongleCounter == this.oneDongleMax && this.removeBackDongle(), this.wheelContacts > 0) {
                        var t = Math.abs(this.backWheelBody.GetAngularVelocity());
                        t > 50 ? (this.wheelLoop3 || (this.wheelLoop3 = o.ij.instance.playAreaSoundLoop("ExplorerRoll3", this.backWheelBody, 0), this.wheelLoop3.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null)) : t > 25 ? (this.wheelLoop2 || (this.wheelLoop2 = o.ij.instance.playAreaSoundLoop("ExplorerRoll2", this.backWheelBody, 0), this.wheelLoop2.fadeIn(.2)), this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : t > 5 ? (this.wheelLoop1 || (this.wheelLoop1 = o.ij.instance.playAreaSoundLoop("ExplorerRoll1", this.backWheelBody, 0), this.wheelLoop1.fadeIn(.2)), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null)) : (this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null));
                    } else this.wheelLoop1 && (this.wheelLoop1.fadeOut(.2), this.wheelLoop1 = null), this.wheelLoop2 && (this.wheelLoop2.fadeOut(.2), this.wheelLoop2 = null), this.wheelLoop3 && (this.wheelLoop3.fadeOut(.2), this.wheelLoop3 = null);
                    e.prototype.actions.call(this);
                }, l.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                        case 6:
                            break;
                        case 7:
                            this.leanBackPose();
                            break;
                        case 8:
                            this.leanForwardPose();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, l.reset = function () {
                    e.prototype.reset.call(this), this.hatOn = true, this.frameSmashed = false, this.ejected = false, this.connecting = false, this.frontDongleBody = null, this.backDongleBody = null, this.newFrontWheelRailBody = null, this.newBackWheelRailBody = null, this.previousFrontRailBody = null, this.previousBackRailBody = null, this.oneDongleCounter = 0, this.destroyFrontDongle = false, this.destroyBackDongle = false, this.wheelContacts = 0;
                }, l.die = function () {
                    e.prototype.die.call(this), this.hatBody = null;
                }, l.paint = function () {
                    e.prototype.paint.call(this);
                    var t = this.frontWheelBody.GetInterpolatedWorldCenter();
                    this.frontWheelMC.x = t.x * this.m_physScale, this.frontWheelMC.y = t.y * this.m_physScale, this.frontWheelMC.inner.rotation = this.frontWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360, t = this.backWheelBody.GetInterpolatedWorldCenter(), this.backWheelMC.x = t.x * this.m_physScale, this.backWheelMC.y = t.y * this.m_physScale, this.backWheelMC.inner.rotation = this.backWheelBody.GetInterpolatedAngle() * n.oneEightyOverPI % 360;
                }, l.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Oi, o = new s.Oi, a = new s.Vb, h = new s.lB;
                    a.density = 1.5, a.friction = .3, a.restitution = .1, a.filter.categoryBits = 514, h.density = 12, h.friction = 1, h.restitution = .3, h.filter.groupIndex = this.groupID, h.filter.categoryBits = 260, h.filter.maskBits = 268, this.frameBody = this._session.m_world.CreateBody(t);
                    var l = this.shapeGuide.frameBottomShape, c = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), d = l.rotation / n.oneEightyOverPI;
                    a.SetAsOrientedBox(5 * l.scaleX / this.character_scale, 5 * l.scaleY / this.character_scale, c, d), this.frameBottomShape = this.frameBody.CreateShape(a), a.vertexCount = 4;
                    for (var p = 0; p < 2; p++) {
                        for (var u = 0; u < a.vertexCount; u++) {
                            var m = this.shapeGuide["sidePoint" + p + "_" + u];
                            a.vertices[u] = new s._m(this._startX + m.x / this.character_scale, this._startY + m.y / this.character_scale);
                        }
                        0 == p && (this.frameLeftShape = this.frameBody.CreateShape(a)), 1 == p && (this.frameRightShape = this.frameBody.CreateShape(a));
                    }
                    this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody), this._session.contactListener.registerListener(r.$S.RESULT, this.frameBottomShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.frameLeftShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.RESULT, this.frameRightShape, this.contactResultHandler), l = this.shapeGuide.frontWheelShape, this.frontWheelPos = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), i.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), i.angle = l.rotation / n.oneEightyOverPI, h.radius = l.width / 2 / this.character_scale, this.frontWheelBody = this._session.m_world.CreateBody(i), this.frontWheelShape = this.frontWheelBody.CreateShape(h), this.frontWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.frontWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.frontWheelShape, this.wheelContactRemove), this._session.contactListener.registerListener(r.$S.RESULT, this.frontWheelShape, this.wheelContactResult), l = this.shapeGuide.backWheelShape, this.backWheelPos = new s._m(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), o.position.Set(this._startX + l.x / this.character_scale, this._startY + l.y / this.character_scale), o.angle = l.rotation / n.oneEightyOverPI, h.radius = l.width / 2 / this.character_scale, this.backWheelBody = this._session.m_world.CreateBody(o), this.backWheelShape = this.backWheelBody.CreateShape(h), this.backWheelBody.SetMassFromShapes(), this._session.contactListener.registerListener(r.$S.ADD, this.backWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.backWheelShape, this.wheelContactRemove), this._session.contactListener.registerListener(r.$S.RESULT, this.backWheelShape, this.wheelContactResult);
                }, l.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this);
                    var t = this.sourceObject.cartShards;
                    this._session.particleController.createBMDArray("cartshards", t), this.lowerLeg1MC.visible = false, this.lowerLeg2MC.visible = false, this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.frontWheelMC = this.sourceObject.frontWheel, this.frontWheelMC.scaleX = this.frontWheelMC.scaleY = 1 / this.mc_scale, this.backWheelMC = this.sourceObject.backWheel, this.backWheelMC.scaleX = this.backWheelMC.scaleY = 1 / this.mc_scale, this.hatMC = this.sourceObject.hat, this.hatMC.scaleX = this.hatMC.scaleY = 1 / this.mc_scale, this.hatMC.visible = false, this.cartSmashedMC = this.sourceObject.cartSmashed, this.cartSmashedMC.scaleX = this.cartSmashedMC.scaleY = 1 / this.mc_scale, this.cartSmashedMC.visible = false, this.frameLeftSmashedMC = this.sourceObject.frameLeftSmashed, this.frameLeftSmashedMC.scaleX = this.frameLeftSmashedMC.scaleY = 1 / this.mc_scale, this.frameLeftSmashedMC.visible = false, this.frameRightSmashedMC = this.sourceObject.frameRightSmashed, this.frameRightSmashedMC.scaleX = this.frameRightSmashedMC.scaleY = 1 / this.mc_scale, this.frameRightSmashedMC.visible = false, this.frameBottomSmashedMC = this.sourceObject.frameBottomSmashed, this.frameBottomSmashedMC.scaleX = this.frameBottomSmashedMC.scaleY = 1 / this.mc_scale, this.frameBottomSmashedMC.visible = false, this.engineSmashedMC = this.sourceObject.engineSmashed, this.engineSmashedMC.scaleX = this.engineSmashedMC.scaleY = 1 / this.mc_scale, this.engineSmashedMC.visible = false, this.frameBody.SetUserData(this.frameMC);
                    var i = this._session.containerSprite.getChildIndex(this.lowerArm1MC) + 2;
                    this._session.containerSprite.addChildAt(this.cartSmashedMC, i), this._session.containerSprite.addChildAt(this.frontWheelMC, i), this._session.containerSprite.addChildAt(this.backWheelMC, i), this._session.containerSprite.addChildAt(this.frameMC, i), this._session.containerSprite.addChildAt(this.frameLeftSmashedMC, i), this._session.containerSprite.addChildAt(this.frameRightSmashedMC, i), this._session.containerSprite.addChildAt(this.frameBottomSmashedMC, i), this._session.containerSprite.addChildAt(this.engineSmashedMC, i), this._session.containerSprite.addChildAt(this.hatMC, this._session.containerSprite.getChildIndex(this.chestMC));
                }, l.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frameBody.SetUserData(this.frameMC), this.hatMC.visible = false, this.head1MC.helmet.visible = true, this.frameMC.visible = true, this.frameLeftSmashedMC.visible = false, this.frameRightSmashedMC.visible = false, this.frameBottomSmashedMC.visible = false, this.cartSmashedMC.visible = false, this.lowerLeg1MC.visible = false, this.lowerLeg2MC.visible = false, this.engineSmashedMC.visible = false;
                    var t = this.sourceObject.cartShards;
                    this._session.particleController.createBMDArray("cartshards", t);
                }, l.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.hatShape = this.head1Shape, this.contactImpulseDict.set(this.hatShape, this.hatSmashLimit), this.contactImpulseDict.set(this.frontWheelShape, this.wheelSparkLimit), this.contactImpulseDict.set(this.backWheelShape, this.wheelSparkLimit), this.contactImpulseDict.set(this.frameLeftShape, this.frameSmashLimit), this.contactImpulseDict.set(this.frameRightShape, this.frameSmashLimit), this.contactImpulseDict.set(this.frameBottomShape, this.frameSmashLimit), this.contactAddSounds.set(this.backWheelShape, "CarTire1"), this.contactAddSounds.set(this.frontWheelShape, "CarTire1");
                }, l.handleContactResults = function () {
                    var t;
                    this.contactResultBuffer.get(this.hatShape) && (t = this.contactResultBuffer.get(this.hatShape), this.hatSmash(t.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), this.contactResultBuffer.get(this.frontWheelShape) && this.contactResultBuffer.delete(this.frontWheelShape), this.contactResultBuffer.get(this.backWheelShape) && this.contactResultBuffer.delete(this.backWheelShape), this.contactResultBuffer.get(this.frameBottomShape) && this.frameSmash(this.contactResultBuffer.get(this.frameBottomShape)), this.contactResultBuffer.get(this.frameLeftShape) && this.frameSmash(this.contactResultBuffer.get(this.frameLeftShape)), this.contactResultBuffer.get(this.frameRightShape) && this.frameSmash(this.contactResultBuffer.get(this.frameRightShape)), e.prototype.handleContactResults.call(this);
                }, l.addSparkForAttachedWheel = function (e, t) {
                    var i = t.GetAngle(), r = e.GetShapeList(), o = new s._m(Math.sin(e.GetAngle() - i) * r.m_radius, Math.cos(e.GetAngle() - i) * r.m_radius), n = e.GetWorldPoint(o);
                    this._session.particleController.createSparkBurstPoint(n, new s._m(.5, .5), .25, 25, 20);
                }, l.addWheelSpark = function (e) {
                    var t = this.contactResultBuffer.get(e), i = t.position, r = Math.min((t.impulse - this.wheelSparkLimit) / 20, 1);
                    this._session.particleController.createSparkBurstPoint(i, new s._m(3 * r, 3 * r), 1, 50, 20);
                }, l.createDongleRevJoint = function (e, t) {
                    var i = new s.tu;
                    return i.collideConnected = false, i.Initialize(e, this.frameBody, e.GetPosition()), i.localAnchor1 = new s._m(0, 0), i.localAnchor2 = t, i.maxMotorTorque = 300, this._session.m_world.CreateJoint(i);
                }, l.createDongle = function (e, t, i) {
                    var r = new s.Oi;
                    r.position = this.frameBody.GetWorldPoint(t), r.fixedRotation = true, r.angle = i.GetAngle();
                    var o = new s.Vb;
                    o.SetAsBox(.25, .25), o.density = 375, o.isSensor = true;
                    var n = this._session.m_world.CreateBody(r);
                    return n.CreateShape(o), n.SetMassFromShapes(), n;
                }, l.getPrisJointSpeed = function (e, t, i) {
                    var r = t.GetAngle(), o = new s._m(Math.cos(r), Math.sin(r)), n = e.GetLinearVelocity(), a = s.Yt.b2Dot(n, o);
                    return o.Multiply(a), i.SetLinearVelocity(o), a;
                }, l.createPrisJoint = function (e, t, i, r) {
                    var o = t.GetAngle() + Math.PI / 2, n = new s.wN;
                    n.motorSpeed = this.getPrisJointSpeed(i, t, e), n.enableMotor = true, n.maxMotorForce = 1e3;
                    var a = this.frameBody.GetWorldPoint(r), h = t.GetLocalPoint(a);
                    return h.y = this.railJointY, e.GetWorldCenter(), n.Initialize(e, t, t.GetWorldPoint(h), new s._m(-Math.sin(o), Math.cos(o))), n.enableMotor = false, n.localAnchor1 = new s._m(0, 0), n.localAnchor2 = h, this._session.m_world.CreateJoint(n);
                }, l.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this);
                    var o = 180 / Math.PI;
                    i = -50 / o - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint1.SetLimits(i, r), i = -50 / o - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = 10 / o - t, this.hipJoint2.SetLimits(i, r), i = -60 / o - (t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle()), r = 0 / o - t, this.elbowJoint1.SetLimits(i, r), i = -60 / o - (t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle()), r = 0 / o - t, this.elbowJoint2.SetLimits(i, r), i = 0 / o - (t = this.head1Body.GetAngle() - this.chestBody.GetAngle()), r = 20 / o - t, this.neckJoint.SetLimits(i, r);
                    var n = new s.wN;
                    n.maxMotorForce = 1e3, n.enableLimit = true, n.upperTranslation = 0, n.lowerTranslation = 0, n.collideConnected = false;
                    var a, h = new s._m;
                    n.upperTranslation = 0, n.lowerTranslation = -1.5, n.maxMotorForce = 600, n.enableMotor = true, n.motorSpeed = .75;
                    var l = new s.tu;
                    l.maxMotorTorque = this.maxTorque, a = this.shapeGuide.frontWheelShape, h.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l.Initialize(this.frameBody, this.frontWheelBody, h), this.frontWheelJoint = this._session.m_world.CreateJoint(l), a = this.shapeGuide.backWheelShape, h.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l.Initialize(this.frameBody, this.backWheelBody, h), this.backWheelJoint = this._session.m_world.CreateJoint(l), a = this.shapeGuide.footAnchor, h.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l.enableLimit = true, l.lowerAngle = -15 / o, l.upperAngle = 15 / o, l.Initialize(this.lowerLeg1Body, this.frameBody, h), this.cartFoot1Joint = this._session.m_world.CreateJoint(l), l.Initialize(this.lowerLeg2Body, this.frameBody, h), this.cartFoot2Joint = this._session.m_world.CreateJoint(l), a = this.shapeGuide.handAnchor, h.Set(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l.enableLimit = false, l.lowerAngle = -15 / o, l.upperAngle = 15 / o, l.Initialize(this.lowerArm1Body, this.frameBody, h), this.frameHand1Joint = this._session.m_world.CreateJoint(l), l.Initialize(this.lowerArm2Body, this.frameBody, h), this.frameHand2Joint = this._session.m_world.CreateJoint(l);
                }, l.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.ejected = true, this.resetJointLimits();
                        var e = this._session.m_world;
                        this.frameHand1Joint && (e.DestroyJoint(this.frameHand1Joint), this.frameHand1Joint = null), this.frameHand2Joint && (e.DestroyJoint(this.frameHand2Joint), this.frameHand2Joint = null), this.cartFoot1Joint && (e.DestroyJoint(this.cartFoot1Joint), this.cartFoot1Joint = null), this.cartFoot2Joint && (e.DestroyJoint(this.cartFoot2Joint), this.cartFoot2Joint = null);
                        var t = this.zeroFilter.Copy();
                        t.groupIndex = -2, e.Refilter(this.frontWheelBody.GetShapeList()), e.Refilter(this.backWheelBody.GetShapeList());
                        for (var i = this.frameBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(t), e.Refilter(i);
                        this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2), this.lowerLeg1MC.visible || (this.lowerLeg1MC.visible = true), this.lowerLeg2MC.visible || (this.lowerLeg2MC.visible = true);
                    }
                }, l.reAttach = function (e) {
                    throw new Error("this must be called only in subclass");
                }, l.reAttaching = function () {
                    throw new Error("this must be called only in subclass");
                }, l.frameSmash = function (e) {
                    var t;
                    this.eject(), this.contactResultBuffer.delete(this.frameBottomShape), this.contactResultBuffer.delete(this.frameLeftShape), this.contactResultBuffer.delete(this.frameRightShape), this.frontWheelShape.SetFilterData(this.zeroFilter), this.backWheelShape.SetFilterData(this.zeroFilter), this._session.contactListener.deleteListener(r.$S.RESULT, this.frameBottomShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frameLeftShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frameRightShape), this._session.contactListener.deleteListener(r.$S.ADD, this.frontWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.backWheelShape), this.frontDongleBody && this.removeFrontDongle(), this.backDongleBody && this.removeBackDongle();
                    var i = this.frameBody.GetPosition(), a = this.frameBody.GetAngle(), h = this.frameBody.GetAngularVelocity(), l = new s.Oi;
                    l.position = i, l.angle = a;
                    var c = new s.Vb;
                    c.density = 1.5, c.friction = .3, c.restitution = .1, c.filter.categoryBits = 514;
                    var d = [], p = this._session.m_world.CreateBody(l);
                    d.push(p);
                    var u = this.shapeGuide.cartBottomShape;
                    t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale);
                    var m = u.rotation / n.oneEightyOverPI;
                    c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), m = (u = this.shapeGuide.cartLeftShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), m = (u = this.shapeGuide.cartRightShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetAngularVelocity(h), o.ij.instance.playAreaSoundInstance("MetalSmashHeavy", p), p = this._session.m_world.CreateBody(l), d.push(p), m = (u = this.shapeGuide.frameLeftShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetAngularVelocity(h), p = this._session.m_world.CreateBody(l), d.push(p), m = (u = this.shapeGuide.frameRightShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetAngularVelocity(h), p = this._session.m_world.CreateBody(l), d.push(p), m = (u = this.shapeGuide.frame2BottomShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetAngularVelocity(h), p = this._session.m_world.CreateBody(l), d.push(p), m = (u = this.shapeGuide.engineShape).rotation / n.oneEightyOverPI, t = new s._m(this._startX + u.x / this.character_scale, this._startY + u.y / this.character_scale), c.SetAsOrientedBox(5 * u.scaleX / this.character_scale, 5 * u.scaleY / this.character_scale, t, m), p.CreateShape(c), p.SetMassFromShapes(), p.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(p.GetLocalCenter())), p.SetAngularVelocity(h), this._session.particleController.createBurst("cartshards", 30, 30, p, 50);
                    for (var f = [this.cartSmashedMC, this.frameLeftSmashedMC, this.frameRightSmashedMC, this.frameBottomSmashedMC, this.engineSmashedMC], y = 0; y < f.length; y++) {
                        var v = d[y], g = f[y];
                        g.visible = true, v.SetUserData(g), this.paintVector.push(v);
                    }
                    this._session.m_world.DestroyBody(this.frameBody), this.frameMC.visible = false;
                }, l.hatSmash = function (e) {
                    this.contactImpulseDict.delete(this.hatShape), this.head1Shape = this.hatShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.hatShape = null, this.hatOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.hatMC, this.hatMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.hatBody = this._session.m_world.CreateBody(i), this.hatBody.CreateShape(t), this.hatBody.SetMassFromShapes(), this.hatBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.hatBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.hatBody);
                }, l.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, l.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, l.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, l.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, l.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, l.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || this.frameHand1Joint && (this._session.m_world.DestroyJoint(this.frameHand1Joint), this.frameHand1Joint = null, this.checkEject());
                }, l.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || this.frameHand2Joint && (this._session.m_world.DestroyJoint(this.frameHand2Joint), this.frameHand2Joint = null, this.checkEject());
                }, l.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.cartFoot1Joint && (this._session.m_world.DestroyJoint(this.cartFoot1Joint), this.cartFoot1Joint = null), this.lowerLeg1MC.visible || (this.lowerLeg1MC.visible = true), this.checkEject());
                }, l.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.cartFoot2Joint && (this._session.m_world.DestroyJoint(this.cartFoot2Joint), this.cartFoot2Joint = null), this.lowerLeg2MC.visible || (this.lowerLeg2MC.visible = true), this.checkEject());
                }, l.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || this.frameHand1Joint && (this._session.m_world.DestroyJoint(this.frameHand1Joint), this.frameHand1Joint = null, this.checkEject());
                }, l.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || this.frameHand2Joint && (this._session.m_world.DestroyJoint(this.frameHand2Joint), this.frameHand2Joint = null, this.checkEject());
                }, l.checkEject = function () {
                    this.frameHand1Joint || this.frameHand2Joint || this.cartFoot1Joint || this.cartFoot2Joint || this.eject();
                }, l.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.cartFoot1Joint && (this._session.m_world.DestroyJoint(this.cartFoot1Joint), this.cartFoot1Joint = null), this.lowerLeg1MC.visible || (this.lowerLeg1MC.visible = true), this.checkEject());
                }, l.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.cartFoot2Joint && (this._session.m_world.DestroyJoint(this.cartFoot2Joint), this.cartFoot2Joint = null), this.lowerLeg2MC.visible || (this.lowerLeg2MC.visible = true), this.checkEject();
                }, l.leanBackPose = function () {
                    this.setJoint(this.kneeJoint1, 45, 10), this.setJoint(this.kneeJoint2, 45, 10), this.setJoint(this.hipJoint1, -45 / n.oneEightyOverPI, 10), this.setJoint(this.hipJoint2, -45 / n.oneEightyOverPI, 10);
                }, l.leanForwardPose = function () {
                    this.setJoint(this.kneeJoint1, 0 / n.oneEightyOverPI, 10), this.setJoint(this.kneeJoint2, 0 / n.oneEightyOverPI, 10), this.setJoint(this.hipJoint1, 0 / n.oneEightyOverPI, 10), this.setJoint(this.hipJoint2, 0 / n.oneEightyOverPI, 10), this.setJoint(this.elbowJoint1, -15 / n.oneEightyOverPI, 10), this.setJoint(this.elbowJoint2, -15 / n.oneEightyOverPI, 10);
                }, l.squatPose = function () {
                    this.setJoint(this.elbowJoint1, -90 / n.oneEightyOverPI, 10), this.setJoint(this.elbowJoint2, -90 / n.oneEightyOverPI, 10), this.setJoint(this.kneeJoint1, 1.5, 10), this.setJoint(this.kneeJoint2, 1.5, 10);
                }, l.straightLegPose = function () {
                    this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10);
                }, l.fistPoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 1.5, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 1.7, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, l.fistPoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 1.5, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 1.7, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, l.explodeShape = function (e, t) {
                    switch (e) {
                        case this.hatShape:
                            t > .85 && this.hatSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / n.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var r = this.pelvisBody.GetMass() / n.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * r, .7)) && this.pelvisSmash(0);
                    }
                }, a = n, (h = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.removeAction(this.reAttaching), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.backWheelJoint.EnableMotor(false), this.frontWheelJoint.EnableMotor(false), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function re(e, t) {
                return (re = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            se.GRAVITY_DISPLACEMENT = -0.3333333333333333, se.piOverOneEighty = Math.PI / 180;
            var oe = function (e) {
                var t, i;
                function o(t, i, s, r, n, a) {
                    var h;
                    return void 0 === n && (n = -1), void 0 === a && (a = "Char1"), (h = e.call(this, t, i, s, r, n, o.tags[l.Z.characterIndex - 1]) || this).polyChestedChars = [4, 6, 8, 11], h.helmetedChars = [2, 3, 8, 9, 10, 11], h.newScaleChars = [8, 9, 10, 11], h.helmeted = false, h.helmetSmashLimit = 2, h.helmetedChars.indexOf(l.Z.characterIndex) > -1 && (h.helmeted = true), h.newScaleChars.indexOf(l.Z.characterIndex) > -1 && (h.shapeRefScale = 50), h;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, re(t, i);
                var n = o.prototype;
                return n.leftPressedActions = function () {
                    this.currentPose = 1;
                }, n.rightPressedActions = function () {
                    this.currentPose = 2;
                }, n.leftAndRightActions = function () {
                    1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0);
                }, n.upPressedActions = function () {
                    this.currentPose = 3;
                }, n.downPressedActions = function () {
                    this.currentPose = 4;
                }, n.upAndDownActions = function () {
                    3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0);
                }, n.spacePressedActions = function () {
                    this.startGrab();
                }, n.spaceNullActions = function () {
                    this.releaseGrip();
                }, n.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmeted && (this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit));
                }, n.createBodies = function () {
                    if (e.prototype.createBodies.call(this), -1 != this.polyChestedChars.indexOf(l.Z.characterIndex)) {
                        var t = new s.Vb, i = (new s.lB, new s.Oi), o = new s.Oi;
                        t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.defaultFilter, this.paintVector.splice(this.paintVector.indexOf(this.chestBody), 1), this.paintVector.splice(this.paintVector.indexOf(this.pelvisBody), 1), this._session.m_world.DestroyBody(this.chestBody), this._session.m_world.DestroyBody(this.pelvisBody);
                        var n = this.shapeGuide.chestShape;
                        i.position.Set(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale), i.angle = n.rotation / (180 / Math.PI), this.chestBody = this._session.m_world.CreateBody(i), t.vertexCount = 6;
                        for (var a = 0; a < 6; a++) {
                            var h = this.shapeGuide["chestVert" + [a]];
                            t.vertices[a] = new s._m(h.x / this.character_scale, h.y / this.character_scale);
                        }
                        for (this.chestShape = this.chestBody.CreateShape(t), this.chestShape.SetMaterial(2), this.chestShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.chestShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chestShape, this.contactAddHandler), this.chestBody.SetMassFromShapes(), this.chestBody.AllowSleeping(false), this.paintVector.push(this.chestBody), this.cameraFocus = this.chestBody, n = this.shapeGuide.pelvisShape, o.position.Set(this._startX + n.x / this.character_scale, this._startY + n.y / this.character_scale), o.angle = n.rotation / (180 / Math.PI), this.pelvisBody = this._session.m_world.CreateBody(o), t.vertexCount = 5, a = 0; a < 5; a++) h = this.shapeGuide["pelvisVert" + [a]], t.vertices[a] = new s._m(h.x / this.character_scale, h.y / this.character_scale);
                        this.pelvisShape = this.pelvisBody.CreateShape(t), this.pelvisShape.SetMaterial(2), this.pelvisShape.SetUserData(this), this._session.contactListener.registerListener(r.$S.RESULT, this.pelvisShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.pelvisShape, this.contactAddHandler), this.pelvisBody.SetMassFromShapes(), this.pelvisBody.AllowSleeping(false), this.paintVector.push(this.pelvisBody);
                    }
                }, n.handleContactResults = function () {
                    var t;
                    this.contactResultBuffer.get(this.helmetShape) && (t = this.contactResultBuffer.get(this.helmetShape), this.helmetSmash(t.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), e.prototype.handleContactResults.call(this);
                }, n.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.helmeted && (this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC)));
                    var t, i = this._session.containerSprite;
                    8 == l.Z.characterIndex ? (t = i.getChildIndex(this.chestMC), i.setChildIndex(this.lowerLeg1MC, --t), i.setChildIndex(this.upperLeg1MC, --t), i.setChildIndex(this.pelvisMC, --t)) : 4 == l.Z.characterIndex || 6 == l.Z.characterIndex || 11 == l.Z.characterIndex ? (t = i.getChildIndex(this.pelvisMC), i.setChildIndex(this.chestMC, ++t), t = i.getChildIndex(this.lowerLeg1MC), i.setChildIndex(this.upperArm1MC, ++t), i.setChildIndex(this.lowerArm1MC, ++t)) : 7 == l.Z.characterIndex && (t = i.getChildIndex(this.upperLeg1MC), i.setChildIndex(this.chestMC, ++t), t = i.getChildIndex(this.lowerLeg1MC), i.setChildIndex(this.upperArm1MC, ++t), i.setChildIndex(this.lowerArm1MC, ++t));
                }, n.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, n.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.helmeted && (this.helmetMC.visible = false, this.head1MC.helmet.visible = true);
                }, n.explodeShape = function (t, i) {
                    t != this.helmetShape ? e.prototype.explodeShape.call(this, t, i) : i > .85 && this.helmetSmash(0);
                }, o;
            }(d);
            function ne(e, t) {
                return (ne = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            oe.tags = ["Char1", "Char2", "Char3", "Char4", "Char8", "Char11", "Char2", "Santa", "Char12", "Char4", "Heli"];
            var ae = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o, -1, "Char12") || this).impulseMagnitude = .5, n.impulseOffset = 1, n.maxSpinAV = 5, n.reAttachDistance = .25, n.bounceSpeed = 6, n.bounceTranslation = -30, n.jumpTranslation = -40, n.verticalVelocityThreshold = .25, n.retractSpeed = -0.5, n.nubContacts = 0, n.jumpFrames = 0, n.jumpFramesMax = 5, n.uprightAngle = .5 * -Math.PI, n.forwardAngle = .45 * -Math.PI, n.reverseAngle = .6 * -Math.PI, n.targetAngle = n.uprightAngle, n.helmetSmashLimit = 2, n.frameSmashLimit = 40, n.nubContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(0 != r && r < i.m_mass || (n.airLean = false, n.nubContacts += 1, n.contactAddBuffer.get(t)))) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                o = Math.abs(o);
                            }
                        }
                    }, n.nubContactRemove = function (e) {
                        if (!e.shape2.m_isSensor) {
                            var t = e.shape1.m_body, i = e.shape2.m_body.m_mass;
                            0 != i && i < t.m_mass || (n.nubContacts -= 1);
                        }
                    }, n.reAttaching = function () {
                        var e = 0, t = n._session.m_world;
                        if (n.frameHand1 || n.elbowJoint1.broken || n.shoulderJoint1.broken) e += 1; else {
                            var i = n.lowerArm1Body.GetWorldPoint(new s._m(0, n.lowerArm1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint);
                            Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand1 = t.CreateJoint(n.frameHand1JointDef), n.lowerArm1MC.hand.gotoAndStop(1), e += 1);
                        }
                        n.frameHand2 || n.elbowJoint2.broken || n.shoulderJoint2.broken ? e += 1 : (i = n.lowerArm2Body.GetWorldPoint(new s._m(0, n.lowerArm2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.handleAnchorPoint), Math.abs(i.x - r.x) < n.reAttachDistance && Math.abs(i.y - r.y) < n.reAttachDistance && (n.frameHand2 = t.CreateJoint(n.frameHand2JointDef), n.lowerArm2MC.hand.gotoAndStop(1), e += 1)), n.frameFoot1 || n.kneeJoint1.broken || n.hipJoint1.broken ? e += 1 : (i = n.lowerLeg1Body.GetWorldPoint(new s._m(0, n.lowerLeg1Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < .2 && Math.abs(i.y - r.y) < .2 && (n.frameFoot1 = t.CreateJoint(n.frameFoot1JointDef), e += 1)), n.frameFoot2 || n.kneeJoint2.broken || n.hipJoint2.broken ? e += 1 : (i = n.lowerLeg2Body.GetWorldPoint(new s._m(0, n.lowerLeg2Shape.GetVertices()[2].y)), r = n.frameBody.GetWorldPoint(n.footAnchorPoint), Math.abs(i.x - r.x) < .2 && Math.abs(i.y - r.y) < .2 && (n.frameFoot2 = t.CreateJoint(n.frameFoot2JointDef), e += 1)), e >= 4 && (n.removeAction(n.reAttaching), n.currentPose = 9);
                    }, n.relaxPogo = function () {
                        var e = n.pogoJoint.GetJointTranslation(), t = -70 * e;
                        e < 0 ? n.pogoJoint.SetMotorSpeed(t) : (n.pogoJoint.SetMotorSpeed(0), n.pogoJoint.m_lowerTranslation = 0, n.jumpFrames = n.jumpFramesMax, n.removeAction(n.relaxPogo));
                    }, n.shapeRefScale = 50, n.currentPose = 9, n.COMArray = [], n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, ne(t, i);
                var a, l, c = n.prototype;
                return c.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        0 == this.nubContacts && (this.airLean = true);
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.frameBody.GetLocalCenter(), n = this.frameBody.GetWorldPoint(new s._m(o.x, o.y - this.impulseOffset)), a = this.frameBody.GetWorldPoint(new s._m(o.x, o.y + this.impulseOffset));
                        this.frameBody.ApplyImpulse(new s._m(-i, -r), n), this.frameBody.ApplyImpulse(new s._m(i, r), a);
                    }
                }, c.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        0 == this.nubContacts && (this.airLean = true);
                        var e = this.frameBody.GetAngle(), t = (this.frameBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.frameBody.GetLocalCenter(), n = this.frameBody.GetWorldPoint(new s._m(o.x, o.y - this.impulseOffset)), a = this.frameBody.GetWorldPoint(new s._m(o.x, o.y + this.impulseOffset));
                        this.frameBody.ApplyImpulse(new s._m(i, r), n), this.frameBody.ApplyImpulse(new s._m(-i, -r), a);
                    }
                }, c.leftAndRightActions = function () {
                    if (this.ejected) 1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0); else {
                        if (this.updateCOMValues(), this.airLean) return;
                        if (this.velocityCOM.y > 0) {
                            var e = this.velocityCOM.y / this.verticalVelocityThreshold;
                            e = Math.min(1, e);
                            var t = this.targetAngle * (1 - e) + (this.velocityAngle - Math.PI) * e;
                        } else e = -this.velocityCOM.y / this.verticalVelocityThreshold, e = Math.min(1, e), t = this.targetAngle * (1 - e) + this.velocityAngle * e;
                        this.frameBody.GetAngularVelocity();
                        var i = t - this.pivotAngle;
                        i > Math.PI && (i -= 2 * Math.PI), i < -Math.PI && (i += 2 * Math.PI);
                        var s = 30 * i;
                        s < 2 * -this.maxSpinAV && (s = 2 * -this.maxSpinAV), s > 2 * this.maxSpinAV && (s = 2 * this.maxSpinAV), this.frameBody.SetAngularVelocity(s);
                    }
                }, c.upPressedActions = function () {
                    if (this.ejected) this.currentPose = 3; else if (this.targetAngle = this.forwardAngle, this.airLean = false, !this.charging) {
                        var e = this.pogoJoint.GetJointTranslation(), t = this.pogoJoint.GetMotorSpeed();
                        if (this.nubContacts > 0 && 0 == this.jumpFrames) if (0 == this.pogoJoint.m_lowerTranslation) this.pogoJoint.m_lowerTranslation = this.bounceTranslation / this.character_scale, this.pogoJoint.SetMotorSpeed(this.retractSpeed); else if (t == this.retractSpeed && e <= this.bounceTranslation / this.character_scale && this.pivotAngle > this.targetAngle && this.pivotAngle < this.targetAngle + .15 * Math.PI) {
                            this.pogoJoint.SetMotorSpeed(this.bounceSpeed), this.jumpFrames = this.jumpFramesMax;
                            var i = Math.min(1, Math.max(-e * this.m_physScale / 40, 0));
                            o.ij.instance.playAreaSoundInstance("PogoRelease", this.frameBody, i);
                        }
                        t > 0 && e >= 0 && (this.pogoJoint.m_lowerTranslation = 0, this.pogoJoint.SetMotorSpeed(0));
                    }
                }, c.downPressedActions = function () {
                    if (this.ejected) this.currentPose = 4; else if (this.targetAngle = this.reverseAngle, this.airLean = false, !this.charging) {
                        var e = this.pogoJoint.GetJointTranslation(), t = this.pogoJoint.GetMotorSpeed();
                        if (this.nubContacts > 0 && 0 == this.jumpFrames) if (0 == this.pogoJoint.m_lowerTranslation) this.pogoJoint.m_lowerTranslation = this.bounceTranslation / this.character_scale, this.pogoJoint.SetMotorSpeed(this.retractSpeed); else if (t == this.retractSpeed && e <= this.bounceTranslation / this.character_scale && this.pivotAngle < this.targetAngle && this.pivotAngle > this.targetAngle - .15 * Math.PI) {
                            this.pogoJoint.SetMotorSpeed(this.bounceSpeed), this.jumpFrames = this.jumpFramesMax;
                            var i = Math.min(1, Math.max(-e * this.m_physScale / 40, 0));
                            o.ij.instance.playAreaSoundInstance("PogoRelease2", this.frameBody, i);
                        }
                        t > 0 && e >= 0 && (this.pogoJoint.m_lowerTranslation = 0, this.pogoJoint.SetMotorSpeed(0));
                    }
                }, c.upAndDownActions = function () {
                    if (this.ejected) 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0); else if (this.targetAngle = this.uprightAngle, !this.charging) {
                        var e = this.pogoJoint.GetJointTranslation();
                        0 != this.pogoJoint.m_lowerTranslation && (e < 0 ? this.pogoJoint.SetMotorSpeed(.5) : (this.pogoJoint.SetMotorSpeed(0), this.pogoJoint.m_lowerTranslation = 0));
                    }
                }, c.spacePressedActions = function () {
                    this.ejected ? this.startGrab() : (this.charging = true, this.pogoJoint.m_lowerTranslation != this.jumpTranslation / this.character_scale && (this.pogoJoint.m_lowerTranslation = this.jumpTranslation / this.character_scale), this.pogoJoint.GetJointTranslation() > this.pogoJoint.m_lowerTranslation ? this.pogoJoint.SetMotorSpeed(this.retractSpeed) : this.pogoJoint.SetMotorSpeed(0));
                }, c.spaceNullActions = function () {
                    if (this.ejected) this.releaseGrip(); else if (this.charging) {
                        var e = this.pogoJoint.GetJointTranslation(), t = -70 * e;
                        if (e < 0) {
                            if (t > this.pogoJoint.GetMotorSpeed()) {
                                var i = Math.min(1, Math.max(-e * this.m_physScale / 20, 0));
                                o.ij.instance.playAreaSoundInstance("PogoRelease", this.frameBody, i);
                            }
                            this.pogoJoint.SetMotorSpeed(t);
                        } else this.pogoJoint.SetMotorSpeed(0), this.pogoJoint.m_lowerTranslation = 0, this.charging = false, this.jumpFrames = this.jumpFramesMax;
                    }
                }, c.shiftPressedActions = function () {
                    this.ejected ? this.currentPose = 7 : this.currentPose = 5;
                }, c.shiftNullActions = function () {
                    this.ejected ? 7 == this._currentPose && (this.currentPose = 0) : 5 == this._currentPose && (this.currentPose = 9);
                }, c.ctrlPressedActions = function () {
                    this.ejected ? this.currentPose = 8 : this.currentPose = 6;
                }, c.ctrlNullActions = function () {
                    this.ejected ? 8 == this._currentPose && (this.currentPose = 0) : 6 == this._currentPose && (this.currentPose = 9);
                }, c.zPressedActions = function () {
                    this.eject();
                }, c.actions = function () {
                    e.prototype.actions.call(this), this.jumpFrames > 0 && (this.jumpFrames -= 1);
                }, c.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            this.straightLegPose();
                            break;
                        case 6:
                            this.squatPose();
                            break;
                        case 7:
                            this.fistPoseLeft();
                            break;
                        case 8:
                            this.fistPoseRight();
                            break;
                        case 9:
                            this.pogoPose();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, c.setLimits = function () {
                    e.prototype.setLimits.call(this), this.tempElbowBreakLimit = this.elbowBreakLimit, this.tempElbowLigamentLimit = this.elbowLigamentLimit, this.tempKneeBreakLimit = this.kneeBreakLimit, this.tempKneeLigamentLimit = this.kneeLigamentLimit, this.elbowBreakLimit = 90, this.elbowLigamentLimit = 110, this.kneeBreakLimit = 120, this.kneeLigamentLimit = 140;
                }, c.reset = function () {
                    e.prototype.reset.call(this), this.helmetOn = true, this.frameSmashed = false, this.ejected = false, this.nubContacts = 0, this.charging = false, this.jumpFrames = 0, this.airLean = false, this.targetAngle = this.uprightAngle, this.elbowBreakLimit = 90, this.elbowLigamentLimit = 110, this.kneeBreakLimit = 120, this.kneeLigamentLimit = 140, this.currentPose = 9;
                }, c.die = function () {
                    e.prototype.die.call(this), this.helmetBody = null;
                }, c.paint = function () {
                    if (e.prototype.paint.call(this), !this.frameSmashed) {
                        var t = this.frameMC.getChildByName("spring"), i = this.pogoJoint.GetJointTranslation() * this.m_physScale / -20;
                        i = Math.max(Math.min(1, i), 0), t.scaleY = .55 * (1 - i) + .45;
                    }
                }, c.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = new s.Oi, i = new s.Vb, o = new s.lB;
                    i.density = 5, i.friction = 1, i.restitution = .1, i.filter = this.defaultFilter, o.density = 5, o.friction = 1, o.restitution = .3, o.filter.categoryBits = 260, o.filter.maskBits = 270;
                    var a = this.shapeGuide.frameShape, h = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l = a.rotation / n.oneEightyOverPI;
                    t.position.Set(h.x, h.y), t.angle = l, this.frameBody = this._session.m_world.CreateBody(t), i.SetAsBox(a.scaleX * this.shapeRefScale / this.character_scale, a.scaleY * this.shapeRefScale / this.character_scale), this.frameShape = this.frameBody.CreateShape(i), this.frameBody.SetMassFromShapes(), this.paintVector.push(this.frameBody), this._session.contactListener.registerListener(r.$S.RESULT, this.frameShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.frameShape, this.contactAddHandler), o.radius = 10 / this.character_scale, o.localPosition.Set(0, -a.scaleY * this.shapeRefScale / this.character_scale), a = this.shapeGuide.rodShape, h = new s._m(this._startX + a.x / this.character_scale, this._startY + a.y / this.character_scale), l = a.rotation / n.oneEightyOverPI, t.position.Set(h.x, h.y), t.angle = l, i.SetAsBox(a.scaleX * this.shapeRefScale / this.character_scale, a.scaleY * this.shapeRefScale / this.character_scale), this.rodBody = this._session.m_world.CreateBody(t), this.rodShape = this.rodBody.CreateShape(i), this.rodBody.SetMassFromShapes(), this.paintVector.push(this.rodBody), o.radius = 7 / this.character_scale, o.filter = this.defaultFilter, o.localPosition.Set(0, a.scaleY * this.shapeRefScale / this.character_scale), this.nubShape = this.rodBody.CreateShape(o), this._session.contactListener.registerListener(r.$S.ADD, this.nubShape, this.nubContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.nubShape, this.nubContactRemove), this.COMArray = [this.frameBody, this.rodBody, this.head1Body, this.chestBody, this.pelvisBody, this.upperArm1Body, this.lowerArm1Body, this.upperArm2Body, this.lowerArm2Body, this.upperLeg1Body, this.lowerLeg1Body, this.upperLeg2Body, this.lowerLeg2Body], this.prevCOM = this.getCenterOfMass();
                }, c.createJoints = function () {
                    var t, i, r;
                    e.prototype.createJoints.call(this), t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle(), i = -100 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.hipJoint1.SetLimits(i, r), t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle(), i = -100 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.hipJoint2.SetLimits(i, r), t = this.upperArm1Body.GetAngle() - this.chestBody.GetAngle(), i = -120 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.shoulderJoint1.SetLimits(i, r), t = this.upperArm2Body.GetAngle() - this.chestBody.GetAngle(), i = -120 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.shoulderJoint2.SetLimits(i, r), t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle(), i = -60 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.elbowJoint1.SetLimits(i, r), t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle(), i = -60 / n.oneEightyOverPI - t, r = 0 / n.oneEightyOverPI - t, this.elbowJoint2.SetLimits(i, r), t = this.head1Body.GetAngle() - this.chestBody.GetAngle(), i = 0 / n.oneEightyOverPI - t, r = 5 / n.oneEightyOverPI - t, this.neckJoint.SetLimits(i, r);
                    var o = new s.wN;
                    o.maxMotorForce = 1e4, o.enableLimit = true, o.lowerTranslation = 0, o.upperTranslation = 0 / this.character_scale, o.enableMotor = true, o.motorSpeed = 0;
                    var a = new s._m, h = this.shapeGuide.frameShape, l = this.frameBody.GetAngle();
                    a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), o.Initialize(this.frameBody, this.rodBody, a, new s._m(-Math.sin(l), Math.cos(l))), this.pogoJoint = this._session.m_world.CreateJoint(o);
                    var c = new s.tu;
                    c.enableLimit = true, c.lowerAngle = -100 / n.oneEightyOverPI, c.upperAngle = 10 / n.oneEightyOverPI, h = this.shapeGuide.handleAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), c.Initialize(this.frameBody, this.lowerArm1Body, a), this.frameHand1 = this._session.m_world.CreateJoint(c), this.frameHand1JointDef = c.clone(), this.handleAnchorPoint = this.frameBody.GetLocalPoint(a), c.Initialize(this.frameBody, this.lowerArm2Body, a), this.frameHand2 = this._session.m_world.CreateJoint(c), this.frameHand2JointDef = c.clone(), c.lowerAngle = -10 / n.oneEightyOverPI, c.upperAngle = 10 / n.oneEightyOverPI, h = this.shapeGuide.footAnchor, a.Set(this._startX + h.x / this.character_scale, this._startY + h.y / this.character_scale), c.Initialize(this.frameBody, this.lowerLeg1Body, a), this.frameFoot1 = this._session.m_world.CreateJoint(c), this.frameFoot1JointDef = c.clone(), this.footAnchorPoint = this.frameBody.GetLocalPoint(a), c.Initialize(this.frameBody, this.lowerLeg2Body, a), this.frameFoot2 = this._session.m_world.CreateJoint(c), this.frameFoot2JointDef = c.clone();
                }, c.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.frameMC = this.sourceObject.frame, this.frameMC.scaleX = this.frameMC.scaleY = 1 / this.mc_scale, this.brokenFrame1MC = this.sourceObject.brokenframe1, this.brokenFrame1MC.scaleX = this.brokenFrame1MC.scaleY = 1 / this.mc_scale, this.brokenFrame2MC = this.sourceObject.brokenframe2, this.brokenFrame2MC.scaleX = this.brokenFrame2MC.scaleY = 1 / this.mc_scale, this.rodMC = this.sourceObject.rod, this.rodMC.scaleX = this.rodMC.scaleY = 1 / this.mc_scale, this.springMC = this.sourceObject.spring, this.springMC.scaleX = this.springMC.scaleY = 1 / this.mc_scale, this.helmetMC = this.sourceObject.helmet, this.helmetMC.scaleX = this.helmetMC.scaleY = 1 / this.mc_scale, this.helmetMC.visible = false, this.frameBody.SetUserData(this.frameMC), this.rodBody.SetUserData(this.rodMC);
                    var t = this._session.containerSprite.getChildIndex(this.upperLeg1MC);
                    this._session.containerSprite.addChildAt(this.frameMC, t), this._session.containerSprite.addChildAt(this.brokenFrame1MC, t), this._session.containerSprite.addChildAt(this.brokenFrame2MC, t), this._session.containerSprite.addChildAt(this.springMC, t), this._session.containerSprite.addChildAt(this.rodMC, t), this._session.containerSprite.addChildAt(this.helmetMC, this._session.containerSprite.getChildIndex(this.chestMC)), this.rodMC.gotoAndStop(1), this.brokenFrame1MC.visible = false, this.brokenFrame2MC.visible = false, this.springMC.visible = false;
                }, c.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.frameBody.SetUserData(this.frameMC), this.rodBody.SetUserData(this.rodMC), this.frameMC.visible = true, this.brokenFrame1MC.visible = false, this.brokenFrame2MC.visible = false, this.springMC.visible = false, this.rodMC.gotoAndStop(1), this.helmetMC.visible = false, this.head1MC.helmet.visible = true;
                }, c.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.helmetShape = this.head1Shape, this.contactImpulseDict.set(this.helmetShape, this.helmetSmashLimit), this.contactImpulseDict.set(this.frameShape, this.frameSmashLimit), this.contactAddSounds.set(this.frameShape, "Thud1");
                }, c.handleContactResults = function () {
                    var t;
                    this.contactResultBuffer.get(this.helmetShape) && (t = this.contactResultBuffer.get(this.helmetShape), this.helmetSmash(t.impulse), this.contactResultBuffer.delete(this.head1Shape), this.contactAddBuffer.delete(this.head1Shape)), e.prototype.handleContactResults.call(this), this.contactResultBuffer.get(this.frameShape) && (t = this.contactResultBuffer.get(this.frameShape), this.frameSmash(t.impulse), this.contactResultBuffer.delete(this.frameShape), this.contactAddBuffer.delete(this.frameShape));
                }, c.eject = function () {
                    if (!this.ejected) {
                        this.removeAction(this.reAttaching), this.actionsVector.push(this.relaxPogo), this.ejected = true, this.pogoJoint.SetMotorSpeed(0), this.resetJointLimits();
                        var e = this._session.m_world;
                        this.frameHand1 && (e.DestroyJoint(this.frameHand1), this.frameHand1 = null), this.frameHand2 && (e.DestroyJoint(this.frameHand2), this.frameHand2 = null), this.frameFoot1 && (e.DestroyJoint(this.frameFoot1), this.frameFoot1 = null), this.frameFoot2 && (e.DestroyJoint(this.frameFoot2), this.frameFoot2 = null), this.frameShape.SetFilterData(this.zeroFilter), this.rodShape.SetFilterData(this.zeroFilter), this._session.m_world.Refilter(this.frameShape), this._session.m_world.Refilter(this.rodShape), this.elbowBreakLimit = this.tempElbowBreakLimit, this.elbowLigamentLimit = this.tempElbowLigamentLimit, this.kneeBreakLimit = this.tempKneeBreakLimit, this.kneeLigamentLimit = this.tempKneeLigamentLimit, this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                    }
                }, c.frameSmash = function (e) {
                    this.contactImpulseDict.delete(this.frameShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.frameShape), this._session.contactListener.deleteListener(r.$S.ADD, this.frameShape);
                    var t = this._session.m_world;
                    t.DestroyJoint(this.pogoJoint), this.frameSmashed = true, this.eject();
                    var i = this.frameBody.GetAngularVelocity(), n = new s.Oi;
                    n.position = this.frameBody.GetPosition(), n.angle = this.frameBody.GetAngle();
                    var a = new s.Vb;
                    a.density = 5, a.friction = 1, a.restitution = .1, a.filter = this.zeroFilter;
                    var h = 31.25 / this.character_scale, l = t.CreateBody(n);
                    a.SetAsOrientedBox(10 / this.character_scale, h, new s._m(0, -h), 0), l.CreateShape(a), l.SetMassFromShapes(), l.SetAngularVelocity(i), l.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(new s._m(0, -h))), l.SetUserData(this.brokenFrame1MC), this.paintVector.push(l), l = t.CreateBody(n), a.SetAsOrientedBox(10 / this.character_scale, h, new s._m(0, h), 0), l.CreateShape(a), l.SetMassFromShapes(), l.SetAngularVelocity(i), l.SetLinearVelocity(this.frameBody.GetLinearVelocityFromLocalPoint(new s._m(0, h))), l.SetUserData(this.brokenFrame2MC), this.paintVector.push(l), l = t.CreateBody(n), a.SetAsOrientedBox(4 / this.character_scale, h, new s._m(0, 0), 0), a.density = .5, l.CreateShape(a), l.SetMassFromShapes(), l.SetAngularVelocity(i), l.SetLinearVelocity(this.frameBody.GetLinearVelocity()), l.SetUserData(this.springMC), this.paintVector.push(l), this.frameMC.visible = false, this.brokenFrame1MC.visible = true, this.brokenFrame2MC.visible = true, this.springMC.visible = true, this.rodMC.gotoAndStop(2), t.DestroyBody(this.frameBody), o.ij.instance.playAreaSoundInstance("PogoFrameSmash", l);
                }, c.helmetSmash = function (e) {
                    this.contactImpulseDict.delete(this.helmetShape), this.head1Shape = this.helmetShape, this.contactImpulseDict.set(this.head1Shape, this.headSmashLimit), this.helmetShape = null, this.helmetOn = false;
                    var t = new s.Vb, i = new s.Oi;
                    t.density = 1, t.friction = .3, t.restitution = .1, t.filter = this.zeroFilter;
                    var r = this.head1Body.GetPosition();
                    i.position = r, i.angle = this.head1Body.GetAngle(), i.userData = this.helmetMC, this.helmetMC.visible = true, this.head1MC.helmet.visible = false, t.vertexCount = 4;
                    for (var o = 0; o < 4; o++) {
                        var n = this.shapeGuide["helmetVert" + [o + 1]];
                        t.vertices[o] = new s._m(n.x / this.character_scale, n.y / this.character_scale);
                    }
                    this.helmetBody = this._session.m_world.CreateBody(i), this.helmetBody.CreateShape(t), this.helmetBody.SetMassFromShapes(), this.helmetBody.SetLinearVelocity(this.head1Body.GetLinearVelocity()), this.helmetBody.SetAngularVelocity(this.head1Body.GetAngularVelocity()), this.paintVector.push(this.helmetBody);
                }, c.headSmash1 = function (t) {
                    e.prototype.headSmash1.call(this, t), this.eject();
                }, c.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, c.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, c.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, c.neckBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.neckBreak.call(this, t, i, s), this.eject();
                }, c.shoulderBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak1.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperArm1Body), this.removeFromCOMArray(this.lowerArm1Body), this.upperArm3Body && this.COMArray.push(this.upperArm3Body), this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null, this.checkEject()));
                }, c.shoulderBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.shoulderBreak2.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperArm2Body), this.removeFromCOMArray(this.lowerArm2Body), this.upperArm4Body && this.COMArray.push(this.upperArm4Body), this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null, this.checkEject()));
                }, c.elbowBreak1 = function (t) {
                    e.prototype.elbowBreak1.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerArm1Body), this.frameHand1 && (this._session.m_world.DestroyJoint(this.frameHand1), this.frameHand1 = null, this.checkEject()));
                }, c.elbowBreak2 = function (t) {
                    e.prototype.elbowBreak2.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerArm2Body), this.frameHand2 && (this._session.m_world.DestroyJoint(this.frameHand2), this.frameHand2 = null, this.checkEject()));
                }, c.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperLeg1Body), this.removeFromCOMArray(this.lowerLeg1Body), this.upperLeg3Body && this.COMArray.push(this.upperLeg3Body), this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null, this.checkLegsBroken()));
                }, c.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.ejected || (this.removeFromCOMArray(this.upperLeg2Body), this.removeFromCOMArray(this.lowerLeg2Body), this.upperLeg4Body && this.COMArray.push(this.upperLeg4Body), this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null, this.checkLegsBroken()));
                }, c.kneeBreak1 = function (t) {
                    e.prototype.kneeBreak1.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerLeg1Body), this.frameFoot1 && (this._session.m_world.DestroyJoint(this.frameFoot1), this.frameFoot1 = null, this.checkLegsBroken()));
                }, c.kneeBreak2 = function (t) {
                    e.prototype.kneeBreak2.call(this, t), this.ejected || (this.removeFromCOMArray(this.lowerLeg2Body), this.frameFoot2 && (this._session.m_world.DestroyJoint(this.frameFoot2), this.frameFoot2 = null, this.checkLegsBroken()));
                }, c.pogoPose = function () {
                    this.setJoint(this.kneeJoint1, 1.2, 10), this.setJoint(this.kneeJoint2, 1.2, 10);
                }, c.squatPose = function () {
                    this.setJoint(this.kneeJoint1, 2.5, 10), this.setJoint(this.kneeJoint2, 2.5, 10);
                }, c.straightLegPose = function () {
                    this.setJoint(this.kneeJoint1, .25, 10), this.setJoint(this.kneeJoint2, .25, 10);
                }, c.fistPoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 1.5, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 1.7, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 1.5, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, c.fistPoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 1.5, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 1.7, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 1.5, 15);
                }, c.explodeShape = function (e, t) {
                    switch (e) {
                        case this.helmetShape:
                            t > .85 && this.helmetSmash(0);
                            break;
                        case this.head1Shape:
                            t > .85 && this.headSmash1(0);
                            break;
                        case this.chestShape:
                            var i = this.chestBody.GetMass() / n.DEF_CHEST_MASS, s = Math.max(1 - .15 * i, .7);
                            t > s && this.chestSmash(0);
                            break;
                        case this.pelvisShape:
                            var r = this.pelvisBody.GetMass() / n.DEF_PELVIS_MASS;
                            t > (s = Math.max(1 - .15 * r, .7)) && this.pelvisSmash(0);
                    }
                }, c.getCenterOfMass = function () {
                    for (var e = new s._m, t = 0, i = this.COMArray.length, r = 0; r < i; r++) {
                        var o = this.COMArray[r], n = o.GetWorldCenter(), a = o.GetMass();
                        e.x += n.x * a, e.y += n.y * a, t += a;
                    }
                    return e.Multiply(1 / t), e;
                }, c.removeFromCOMArray = function (e) {
                    var t = this.COMArray.indexOf(e);
                    t > -1 && this.COMArray.splice(t, 1);
                }, c.updateCOMValues = function () {
                    this.currCOM = this.getCenterOfMass(), this.velocityCOM = new s._m(this.currCOM.x - this.prevCOM.x, this.currCOM.y - this.prevCOM.y), this.prevCOM = this.currCOM, this.velocityAngle = Math.atan2(this.velocityCOM.y, this.velocityCOM.x);
                    var e = this.rodBody.GetWorldPoint(new s._m(0, 62.5 / this.character_scale));
                    this.pivotDirection = new s._m(this.currCOM.x - e.x, this.currCOM.y - e.y), this.pivotAngle = Math.atan2(this.pivotDirection.y, this.pivotDirection.x);
                }, c.checkEject = function () {
                    this.frameHand1 || this.frameHand2 || this.eject();
                }, c.checkLegsBroken = function () {
                    if ((this.hipJoint1.broken || this.kneeJoint1.broken) && (this.hipJoint2.broken || this.kneeJoint2.broken)) {
                        var e = this.defaultFilter.Copy();
                        e.groupIndex = 0, this.frameShape.SetFilterData(e), this.nubShape.SetFilterData(e), this._session.m_world.Refilter(this.frameShape), this._session.m_world.Refilter(this.nubShape);
                    }
                }, c.grabAction = function (e, t, i) {
                    var o = e.GetShapeList(), n = e.GetWorldPoint(new s._m(0, o.GetVertices()[2].y));
                    if (!this.frameSmashed && !this._dying && !this.userVehicle) {
                        var a = this.frameBody.GetWorldPoint(this.handleAnchorPoint);
                        if (Math.abs(n.x - a.x) < this.reAttachDistance && Math.abs(n.y - a.y) < this.reAttachDistance) return void this.reAttach(e);
                    }
                    var l = new s.tu;
                    if (i.IsStatic() || (l.enableLimit = true), l.maxMotorTorque = 4, l.Initialize(i, e, n), e == this.lowerArm1Body) if (this.lowerArm1MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), t.GetUserData() instanceof h.xJ) {
                        var c = t.GetUserData();
                        if (this.userVehicle && c != this.userVehicle) this.gripJoint1 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm1Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                            case 0:
                                break;
                            case 1:
                                this.currentPose = 10;
                                break;
                            case 2:
                                this.currentPose = 11;
                                break;
                            case 3:
                                this.currentPose = 12;
                        }
                    } else this.gripJoint1 = this._session.m_world.CreateJoint(l);
                    if (e == this.lowerArm2Body) if (this.lowerArm2MC.hand.gotoAndStop(1), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), t.GetUserData() instanceof h.xJ) if (c = t.GetUserData(), this.userVehicle && c != this.userVehicle) this.gripJoint2 = this._session.m_world.CreateJoint(l); else switch (this.userVehicle = t.GetUserData(), this.userVehicle.addCharacter(this), this.vehicleArm2Joint = this._session.m_world.CreateJoint(l), this.currentPose = 0, this.userVehicle.characterPose) {
                        case 0:
                            break;
                        case 1:
                            this.currentPose = 10;
                            break;
                        case 2:
                            this.currentPose = 11;
                            break;
                        case 3:
                            this.currentPose = 12;
                    } else this.gripJoint2 = this._session.m_world.CreateJoint(l);
                }, c.reAttach = function (e) {
                    var t, i, s;
                    this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm1Shape), this._session.contactListener.deleteListener(r.$S.RESULT, this.lowerArm2Shape), this.contactResultBuffer.delete(this.lowerArm1Shape), this.contactResultBuffer.delete(this.lowerArm2Shape), this.removeAction(this.relaxPogo), this.ejected = false, this.currentPose = 0, this.releaseGrip(), this.elbowBreakLimit = 90, this.elbowLigamentLimit = 110, this.kneeBreakLimit = 120, this.kneeLigamentLimit = 140, t = this.hipJoint1.m_body2.GetAngle() - this.hipJoint1.m_body1.GetAngle() - this.hipJoint1.GetJointAngle(), i = -100 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.hipJoint1.SetLimits(i, s), t = this.hipJoint2.m_body2.GetAngle() - this.hipJoint2.m_body1.GetAngle() - this.hipJoint2.GetJointAngle(), i = -100 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.hipJoint2.SetLimits(i, s), t = this.shoulderJoint1.m_body2.GetAngle() - this.shoulderJoint1.m_body1.GetAngle() - this.shoulderJoint1.GetJointAngle(), i = -120 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.shoulderJoint1.SetLimits(i, s), t = this.shoulderJoint2.m_body2.GetAngle() - this.shoulderJoint2.m_body1.GetAngle() - this.shoulderJoint2.GetJointAngle(), i = -120 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.shoulderJoint2.SetLimits(i, s), t = this.lowerArm1Body.GetAngle() - this.upperArm1Body.GetAngle() - this.elbowJoint1.GetJointAngle(), i = -60 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.elbowJoint1.SetLimits(i, s), t = this.lowerArm2Body.GetAngle() - this.upperArm2Body.GetAngle() - this.elbowJoint2.GetJointAngle(), i = -60 / n.oneEightyOverPI - t, s = 0 / n.oneEightyOverPI - t, this.elbowJoint2.SetLimits(i, s), t = this.head1Body.GetAngle() - this.chestBody.GetAngle() - this.neckJoint.GetJointAngle(), i = 0 / n.oneEightyOverPI - t, s = 5 / n.oneEightyOverPI - t, this.neckJoint.SetLimits(i, s);
                    var o = this._session.m_world;
                    this.frameShape.SetFilterData(this.defaultFilter), this.rodShape.SetFilterData(this.defaultFilter), o.Refilter(this.frameShape), o.Refilter(this.rodShape), this.checkLegsBroken(), e == this.lowerArm1Body ? (this.frameHand1 = o.CreateJoint(this.frameHand1JointDef), this.lowerArm1MC.hand.gotoAndStop(1)) : (this.frameHand2 = o.CreateJoint(this.frameHand2JointDef), this.lowerArm2MC.hand.gotoAndStop(1)), this.actionsVector.push(this.reAttaching);
                }, a = n, (l = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.removeAction(this.reAttaching), this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, l), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(d);
            function he(e, t) {
                return (he = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var le = function (e) {
                var t, i;
                function n(t, i, r, o) {
                    var n;
                    return (n = e.call(this, t, i, r, o) || this).wheelMaxSpeed = 20, n.wheelContacts = 0, n.accelStep = .2, n.maxTorque = 20, n.impulseMagnitude = .5, n.impulseOffset = 1, n.maxSpinAV = 5, n.jetImpulse = 2, n.jetAngle = 0, n.chairSmashLimit = 200, n.wheelSmashLimit = 200, n.jetSmashLimit = 30, n.fueltankSmashLimit = 30, n.contactChairResultHandler = function (e) {
                        var t = e.impulse;
                        t > n.contactImpulseDict.get(n.chairShape1) && (n.contactResultBuffer.get(n.chairShape1) ? t > n.contactResultBuffer.get(n.chairShape1).impulse && n.contactResultBuffer.set(n.chairShape1, e) : n.contactResultBuffer.set(n.chairShape1, e));
                    }, n.handleContactResults = function () {
                        var t;
                        e.prototype.handleContactResults.call(function (e) {
                            if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                            return e;
                        }(n)), n.contactResultBuffer.get(n.chairShape1) && (t = n.contactResultBuffer.get(n.chairShape1), n.chairSmash(t.impulse, t.normal), n.contactResultBuffer.delete(n.chairShape1), n.contactAddBuffer.delete(n.chairShape1), n.contactAddBuffer.delete(n.chairShape2), n.contactAddBuffer.delete(n.chairShape3)), n.contactResultBuffer.get(n.bigWheelShape) && (t = n.contactResultBuffer.get(n.bigWheelShape), n.wheelSmash(t.impulse, t.normal), n.contactResultBuffer.delete(n.bigWheelShape), n.contactAddBuffer.delete(n.bigWheelShape)), n.contactResultBuffer.get(n.jetShape) && (t = n.contactResultBuffer.get(n.jetShape), n.jetSmash(t.impulse), n.contactResultBuffer.delete(n.jetShape), n.contactAddBuffer.delete(n.jetShape)), n.contactResultBuffer.get(n.fueltankShape) && (t = n.contactResultBuffer.get(n.fueltankShape), n.fueltankSmash(t.impulse), n.contactResultBuffer.delete(n.fueltankShape), n.contactAddBuffer.delete(n.fueltankShape));
                    }, n.wheelContactAdd = function (e) {
                        if (!e.shape2.m_isSensor) {
                            n.wheelContacts += 1;
                            var t = e.shape1, i = t.m_body, r = e.shape2.m_body.m_mass;
                            if (!(n.contactAddBuffer.get(t) || 0 != r && r < i.m_mass)) {
                                var o = s.Yt.b2Dot(e.velocity, e.normal);
                                (o = Math.abs(o)) > 4 && n.contactAddBuffer.set(t, o);
                            }
                        }
                    }, n.wheelContactRemove = function (e) {
                        e.shape2.m_isSensor || (n.wheelContacts -= 1);
                    }, n;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, he(t, i);
                var h, l, c = n.prototype;
                return c.leftPressedActions = function () {
                    if (this.ejected) this.currentPose = 1; else {
                        var e = this.chairBody.GetAngle(), t = (this.chairBody.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.chairBody.GetLocalCenter();
                        this.chairBody.ApplyImpulse(new s._m(r, -i), this.chairBody.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y)));
                    }
                }, c.rightPressedActions = function () {
                    if (this.ejected) this.currentPose = 2; else {
                        var e = this.chairBody.GetAngle(), t = (this.chairBody.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.impulseMagnitude * t, r = Math.sin(e) * this.impulseMagnitude * t, o = this.chairBody.GetLocalCenter();
                        this.chairBody.ApplyImpulse(new s._m(r, -i), this.chairBody.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, c.leftAndRightActions = function () {
                    this.ejected && (1 != this._currentPose && 2 != this._currentPose || (this.currentPose = 0));
                }, c.upPressedActions = function () {
                    this.ejected ? this.currentPose = 3 : (this.bigWheelJoint.IsMotorEnabled() || this.bigWheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.bigWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed < 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed < this.wheelMaxSpeed ? this.wheelCurrentSpeed + this.accelStep : this.wheelCurrentSpeed, this.bigWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.currentPose = 5);
                }, c.downPressedActions = function () {
                    this.ejected ? this.currentPose = 4 : (this.bigWheelJoint.IsMotorEnabled() || this.bigWheelJoint.EnableMotor(true), this.wheelCurrentSpeed = this.bigWheelJoint.GetJointSpeed(), this.wheelCurrentSpeed > 0 ? this.wheelNewSpeed = 0 : this.wheelNewSpeed = this.wheelCurrentSpeed > -this.wheelMaxSpeed ? this.wheelCurrentSpeed - this.accelStep : this.wheelCurrentSpeed, this.bigWheelJoint.SetMotorSpeed(this.wheelNewSpeed), this.currentPose = 5);
                }, c.upAndDownActions = function () {
                    this.bigWheelJoint.IsMotorEnabled() && this.bigWheelJoint.EnableMotor(false), this.ejected ? 3 != this._currentPose && 4 != this._currentPose || (this.currentPose = 0) : 5 == this._currentPose && (this.currentPose = 0);
                }, c.spacePressedActions = function () {
                    if (this.ejected) this.startGrab(); else {
                        if (this.chairSmashed) return;
                        this.firing || (this.firing = true, this.jetMC.inner.turbine.play(), this.jetMC.flames.visible = true, this.jetSound || (this.jetSound = o.ij.instance.playAreaSoundLoop("JetBlast", this.bigWheelBody, 0)), this.jetSound.fadeIn(.2));
                    }
                }, c.spaceNullActions = function () {
                    this.ejected ? this.releaseGrip() : this.firing && (this.firing = false, this.jetMC.inner.turbine.stop(), this.jetMC.flames.visible = false, this.jetSound.fadeOut(.2), this.jetSound = null);
                }, c.shiftPressedActions = function () {
                    this.ejected ? this.currentPose = 6 : this.jetAngle += .1;
                }, c.shiftNullActions = function () {
                    6 == this._currentPose && (this.currentPose = 0);
                }, c.ctrlPressedActions = function () {
                    this.ejected ? this.currentPose = 7 : this.jetAngle -= .1;
                }, c.ctrlNullActions = function () {
                    7 == this._currentPose && (this.currentPose = 0);
                }, c.zPressedActions = function () {
                    this.eject();
                }, c.actions = function () {
                    if (this.firing) {
                        var t = this.chairBody.GetAngle() + this.jetAngle, i = Math.cos(t) * this.jetImpulse, r = Math.sin(t) * this.jetImpulse;
                        this.bigWheelBody.ApplyImpulse(new s._m(i, r), this.chairBody.GetWorldCenter());
                    }
                    this.wheelContacts > 0 && Math.abs(this.bigWheelBody.GetAngularVelocity()) > 1 ? this.wheelSound || (this.wheelSound = o.ij.instance.playAreaSoundLoop("BikeLoop1", this.bigWheelBody, 0), this.wheelSound.fadeIn(.2)) : this.wheelSound && (this.wheelSound.fadeOut(.2), this.wheelSound = null), e.prototype.actions.call(this);
                }, c.checkPose = function () {
                    switch (this._currentPose) {
                        case 1:
                            this.archPose();
                            break;
                        case 2:
                            this.pushupPose();
                            break;
                        case 3:
                            this.supermanPose();
                            break;
                        case 4:
                            this.tuckPose();
                            break;
                        case 5:
                            this.seatPose();
                            break;
                        case 6:
                            this.wheelPoseLeft();
                            break;
                        case 7:
                            this.wheelPoseRight();
                            break;
                        case 10:
                            this.armsForwardPose();
                            break;
                        case 11:
                            this.armsOverheadPose();
                            break;
                        case 12:
                            this.holdPositionPose();
                    }
                }, c.reset = function () {
                    e.prototype.reset.call(this), this.ejected = false, this.firing = false, this.chairSmashed = false, this.jetAngle = 0, this.jetMC.inner.rotation = 0, this.jetMC.inner.turbine.stop(), this.jetMC.flames.visible = false, this.jetSound = null, this.wheelContacts = 0;
                }, c.paint = function () {
                    if (e.prototype.paint.call(this), !this.chairSmashed) {
                        var t = this.bigWheelBody.GetInterpolatedWorldCenter();
                        this.jetMC.x = t.x * this.m_physScale, this.jetMC.y = t.y * this.m_physScale, this.jetMC.rotation = (this.chairBody.GetInterpolatedAngle() + this.jetAngle) * n.oneEightyOverPI % 360;
                    }
                }, c.createDictionaries = function () {
                    e.prototype.createDictionaries.call(this), this.contactImpulseDict.set(this.chairShape1, this.chairSmashLimit), this.contactImpulseDict.set(this.bigWheelShape, this.wheelSmashLimit), this.contactAddSounds.set(this.chairShape1, "ChairHit1"), this.contactAddSounds.set(this.chairShape2, "ChairHit2"), this.contactAddSounds.set(this.chairShape3, "ChairHit3"), this.contactAddSounds.set(this.bigWheelShape, "TireHit1");
                }, c.createBodies = function () {
                    e.prototype.createBodies.call(this);
                    var t = this.session.m_world, i = new s.Oi, o = new s.Oi, a = new s.Oi, h = new s.Vb, l = new s.lB;
                    h.density = 2, h.friction = .3, h.restitution = .1, h.filter.categoryBits = 1025, l.density = 5, l.friction = 1, l.restitution = .1, l.filter.categoryBits = 1025;
                    var c = this.shapeGuide.chair1Shape, d = new s._m(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale);
                    h.SetAsOrientedBox(c.width / 2 / this.character_scale, c.height / 2 / this.character_scale, d), this.chairBody = t.CreateBody(i), this.chairShape1 = this.chairBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.chairShape1, this.contactChairResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chairShape1, this.contactAddHandler), c = this.shapeGuide.chair2Shape, d.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.SetAsOrientedBox(c.width / 2 / this.character_scale, c.height / 2 / this.character_scale, d), this.chairShape2 = this.chairBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.chairShape2, this.contactChairResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chairShape2, this.contactAddHandler), c = this.shapeGuide.chair3Shape, d.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.SetAsOrientedBox(c.width / 2 / this.character_scale, c.height / 2 / this.character_scale, d), this.chairShape3 = this.chairBody.CreateShape(h), this._session.contactListener.registerListener(r.$S.RESULT, this.chairShape3, this.contactChairResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.chairShape3, this.contactAddHandler), this.chairBody.SetMassFromShapes(), this.paintVector.push(this.chairBody), c = this.shapeGuide.bigWheelShape, o.position.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), o.angle = c.rotation / n.oneEightyOverPI, l.radius = c.width / 2 / this.character_scale, this.bigWheelBody = t.CreateBody(o), this.bigWheelShape = this.bigWheelBody.CreateShape(l), this._session.contactListener.registerListener(r.$S.RESULT, this.bigWheelShape, this.contactResultHandler), this._session.contactListener.registerListener(r.$S.ADD, this.bigWheelShape, this.wheelContactAdd), this._session.contactListener.registerListener(r.$S.REMOVE, this.bigWheelShape, this.wheelContactRemove), this.bigWheelBody.SetMassFromShapes(), this.paintVector.push(this.bigWheelBody), c = this.shapeGuide.smallWheelShape, a.position.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), a.angle = c.rotation / n.oneEightyOverPI, l.radius = c.width / 2 / this.character_scale, this.smallWheelBody = t.CreateBody(a), this.smallWheelBody.CreateShape(l), this.smallWheelBody.SetMassFromShapes(), this.paintVector.push(this.smallWheelBody);
                    var p = new s.fT;
                    p.categoryBits = 516, p.groupIndex = this.groupID, p.maskBits = 520, this.lowerArm1Shape.SetFilterData(p), t.Refilter(this.lowerArm1Shape), this.lowerArm2Shape.SetFilterData(p), t.Refilter(this.lowerArm2Shape);
                }, c.createMovieClips = function () {
                    e.prototype.createMovieClips.call(this), this.chairMC = this.sourceObject.chair, this.chairMC.scaleX = this.chairMC.scaleY = 1 / this.mc_scale, this.bigWheelMC = this.sourceObject.bigWheel, this.bigWheelMC.scaleX = this.bigWheelMC.scaleY = 1 / this.mc_scale, this.smallWheelMC = this.sourceObject.smallWheel, this.smallWheelMC.scaleX = this.smallWheelMC.scaleY = 1 / this.mc_scale, this.jetMC = this.sourceObject.jet, this.jetMC.scaleX = this.jetMC.scaleY = 1 / this.mc_scale, this.handleMC = this.sourceObject.handle, this.handleMC.scaleX = this.handleMC.scaleY = 1 / this.mc_scale, this.fueltankMC = this.sourceObject.fueltank, this.fueltankMC.scaleX = this.fueltankMC.scaleY = 1 / this.mc_scale, this.chairBody.SetUserData(this.chairMC), this.bigWheelBody.SetUserData(this.bigWheelMC), this.smallWheelBody.SetUserData(this.smallWheelMC);
                    var t = this.session.containerSprite;
                    t.addChildAt(this.fueltankMC, t.getChildIndex(this.upperArm1MC)), t.addChildAt(this.chairMC, t.getChildIndex(this.upperArm1MC)), t.addChildAt(this.bigWheelMC, t.getChildIndex(this.upperArm1MC)), t.addChildAt(this.smallWheelMC, t.getChildIndex(this.upperArm1MC)), t.addChildAt(this.handleMC, t.getChildIndex(this.upperArm1MC)), t.addChildAt(this.jetMC, t.getChildIndex(this.upperArm1MC)), this.jetMC.inner.turbine.stop(), this.jetMC.flames.visible = false, this.bigWheelMC.stop(), this.bigWheelMC.inner.visible = false, this.handleMC.visible = false, this.fueltankMC.visible = false, this.chairMC.stop(), this.session.particleController.createBMDArray("jetshards", this.sourceObject.metalShards);
                }, c.resetMovieClips = function () {
                    e.prototype.resetMovieClips.call(this), this.chairBody.SetUserData(this.chairMC), this.bigWheelBody.SetUserData(this.bigWheelMC), this.smallWheelBody.SetUserData(this.smallWheelMC), this.bigWheelMC.gotoAndStop(1), this.bigWheelMC.inner.visible = false, this.chairMC.gotoAndStop(1), this.jetMC.visible = true, this.handleMC.visible = false, this.fueltankMC.visible = false, this.session.particleController.createBMDArray("jetshards", this.sourceObject.metalShards);
                }, c.createJoints = function () {
                    e.prototype.createJoints.call(this);
                    var t, i, r, o = this.session.m_world, a = n.oneEightyOverPI;
                    i = -110 / a - (t = this.upperLeg1Body.GetAngle() - this.pelvisBody.GetAngle()), r = -90 / a - t, this.hipJoint1.SetLimits(i, r), i = -110 / a - (t = this.upperLeg2Body.GetAngle() - this.pelvisBody.GetAngle()), r = -90 / a - t, this.hipJoint2.SetLimits(i, r);
                    var h = new s.tu;
                    h.maxMotorTorque = this.maxTorque;
                    var l = new s._m, c = this.shapeGuide.bigWheelShape;
                    l.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.Initialize(this.chairBody, this.bigWheelBody, l), this.bigWheelJoint = o.CreateJoint(h), c = this.shapeGuide.smallWheelShape, l.Set(this._startX + c.x / this.character_scale, this._startY + c.y / this.character_scale), h.Initialize(this.chairBody, this.smallWheelBody, l), this.smallWheelJoint = o.CreateJoint(h), (new s.qO).Initialize(this.chairBody, this.pelvisBody, this.pelvisBody.GetPosition(), this.pelvisBody.GetPosition()), l.Set(this.chestBody.GetPosition().x, this.chestBody.GetPosition().y), h.Initialize(this.chairBody, this.chestBody, l), this.chairChest = o.CreateJoint(h), l.Set(this.pelvisBody.GetPosition().x, this.pelvisBody.GetPosition().y), h.Initialize(this.chairBody, this.pelvisBody, l), this.chairPelvis = o.CreateJoint(h), l.Set(this.upperLeg1Body.GetPosition().x, this.upperLeg1Body.GetPosition().y), h.Initialize(this.chairBody, this.upperLeg1Body, l), this.chairLeg1 = o.CreateJoint(h), l.Set(this.upperLeg2Body.GetPosition().x, this.upperLeg2Body.GetPosition().y), h.Initialize(this.chairBody, this.upperLeg2Body, l), this.chairLeg2 = o.CreateJoint(h);
                }, c.eject = function () {
                    if (!this.ejected) {
                        this.ejected = true;
                        var e = this.session.m_world;
                        this.resetJointLimits(), e.DestroyJoint(this.chairPelvis), this.chairPelvis = null, e.DestroyJoint(this.chairChest), this.chairChest = null, this.chairLeg1 && (e.DestroyJoint(this.chairLeg1), this.chairLeg1 = null), this.chairLeg2 && (e.DestroyJoint(this.chairLeg2), this.chairLeg2 = null);
                        var t = e;
                        this.smallWheelBody.GetShapeList().SetFilterData(this.zeroFilter), this.bigWheelBody.GetShapeList().SetFilterData(this.zeroFilter), t.Refilter(this.smallWheelBody.GetShapeList()), t.Refilter(this.bigWheelBody.GetShapeList());
                        for (var i = this.chairBody.GetShapeList(); i; i = i.m_next) i.SetFilterData(this.zeroFilter), t.Refilter(i);
                        520 == (i = this.lowerArm1Body.GetShapeList()).GetFilterData().maskBits && (i.SetFilterData(this.defaultFilter), t.Refilter(i)), 520 == (i = this.lowerArm2Body.GetShapeList()).GetFilterData().maskBits && (i.SetFilterData(this.defaultFilter), t.Refilter(i)), this.lowerArm1MC.hand.gotoAndStop(2), this.lowerArm2MC.hand.gotoAndStop(2);
                    }
                }, c.chairSmash = function (e, t) {
                    this.contactImpulseDict.delete(this.chairShape1);
                    var i = this._session.contactListener;
                    i.deleteListener(r.$S.RESULT, this.chairShape1), i.deleteListener(r.$S.RESULT, this.chairShape2), i.deleteListener(r.$S.RESULT, this.chairShape3), i.deleteListener(r.$S.ADD, this.chairShape1), i.deleteListener(r.$S.ADD, this.chairShape2), i.deleteListener(r.$S.ADD, this.chairShape3), this.chairSmashed = true;
                    var a = this.session.m_world;
                    this.chairMC.gotoAndStop(2), a.DestroyJoint(this.bigWheelJoint), a.DestroyJoint(this.smallWheelJoint);
                    for (var h = this.chairBody.GetShapeList(); h; h = this.chairBody.GetShapeList()) this.chairBody.DestroyShape(h);
                    var l = new s.Vb;
                    l.density = 2, l.friction = .3, l.restitution = .1, l.filter = this.zeroFilter;
                    var c = this.chairBody.GetLocalCenter();
                    l.SetAsOrientedBox(40 / this.character_scale, 45 / this.character_scale, new s._m(c.x + 8 / this.character_scale, c.y + 2 / this.character_scale), 0);
                    var d = this.chairBody.CreateShape(l);
                    this.contactAddSounds.set(d, "ChairHit3"), this._session.contactListener.registerListener(r.$S.ADD, d, this.contactAddHandler);
                    var p = new s.Oi, u = a.CreateBody(p), m = this.chairBody.GetAngle();
                    l.SetAsOrientedBox(5 / this.character_scale, 35 / this.character_scale, this.chairBody.GetWorldPoint(new s._m(c.x - 30 / this.character_scale, c.y - 55 / this.character_scale)), m), u.CreateShape(l), u.SetMassFromShapes(), u.SetUserData(this.handleMC), this.handleMC.visible = true, this.handleMC.inner.rotation = m * n.oneEightyOverPI, this.paintVector.push(u);
                    var f = this.chairBody.GetLinearVelocity(), y = this.chairBody.GetAngularVelocity();
                    u.SetAngularVelocity(y), u.SetLinearVelocity(f), p.position = this.chairBody.GetWorldPoint(new s._m(c.x + 8 / this.character_scale, c.y + 14 / this.character_scale)), p.angle = m, this.fueltankBody = a.CreateBody(p), l.SetAsBox(30 / this.character_scale, 9 / this.character_scale), this.fueltankShape = this.fueltankBody.CreateShape(l), i.registerListener(r.$S.RESULT, this.fueltankShape, this.contactResultHandler), i.registerListener(r.$S.ADD, this.fueltankShape, this.contactAddHandler), this.contactAddSounds.set(this.fueltankShape, "ChairHit1"), this.fueltankBody.SetMassFromShapes(), this.fueltankBody.SetUserData(this.fueltankMC), this.fueltankMC.visible = true, this.paintVector.push(this.fueltankBody), this.fueltankBody.SetAngularVelocity(y), this.fueltankBody.SetLinearVelocity(f), this.contactImpulseDict.set(this.fueltankShape, this.fueltankSmashLimit), p = new s.Oi, this.jetBody = a.CreateBody(p), m = this.chairBody.GetAngle() + this.jetAngle, l.SetAsOrientedBox(21 / this.character_scale, 16.5 / this.character_scale, this.bigWheelBody.GetWorldCenter(), m), this.jetShape = this.jetBody.CreateShape(l), i.registerListener(r.$S.RESULT, this.jetShape, this.contactResultHandler), i.registerListener(r.$S.ADD, this.jetShape, this.contactAddHandler), this.contactAddSounds.set(this.jetShape, "ChairHit2"), this.jetBody.SetMassFromShapes(), this.jetBody.SetUserData(this.jetMC), this.jetMC.inner.rotation = m * n.oneEightyOverPI, this.paintVector.push(this.jetBody), this.jetBody.SetAngularVelocity(y), this.jetBody.SetLinearVelocity(f), this.contactImpulseDict.set(this.jetShape, this.jetSmashLimit), o.ij.instance.playAreaSoundInstance("MetalSmashMedium", this.chairBody), this.firing && (this.firing = false, this.jetMC.inner.turbine.stop(), this.jetMC.flames.visible = false, this.jetSound.fadeOut(.2), this.jetSound = null), this.eject();
                }, c.wheelSmash = function (e, t) {
                    this.bigWheelMC.gotoAndStop(2), this.bigWheelMC.inner.visible = true, this.contactImpulseDict.delete(this.bigWheelShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.bigWheelShape), this._session.contactListener.deleteListener(r.$S.ADD, this.bigWheelShape), this._session.contactListener.deleteListener(r.$S.REMOVE, this.bigWheelShape);
                    var i = this.bigWheelBody.GetShapeList();
                    this.bigWheelBody.DestroyShape(i);
                    var o = new s.Vb;
                    o.density = 2, o.friction = .3, o.restitution = .1, this.ejected ? o.filter = this.zeroFilter : o.filter.categoryBits = 1025;
                    var a = Math.atan2(t.y, t.x) - this.bigWheelBody.GetAngle();
                    this.bigWheelMC.inner.rotation = a * n.oneEightyOverPI, o.SetAsOrientedBox(15 / this.character_scale, 50 / this.character_scale, new s._m(0, 0), a), this.bigWheelBody.CreateShape(o), this.wheelCurrentSpeed = 0;
                }, c.fueltankSmash = function (e) {
                    this.contactImpulseDict.delete(this.fueltankShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.fueltankShape), this._session.contactListener.deleteListener(r.$S.ADD, this.fueltankShape);
                    var t = new a.KG;
                    t.setPixiMovieClip((0, x.qX)("Game", "explosion")), t.x = this.fueltankMC.x, t.y = this.fueltankMC.y, t.scaleX = t.scaleY = .5, t.loop = false, t.play();
                    var i = this.session.containerSprite;
                    i.addChildAt(t, i.getChildIndex(this.lowerArm1MC));
                    var n = [], h = new s.Cc, l = this.fueltankBody.GetWorldCenter();
                    h.lowerBound.Set(l.x - 2, l.y - 2), h.upperBound.Set(l.x + 2, l.y + 2);
                    for (var c = this.session.m_world, d = (c.Query(h, n, 30), 0); d < n.length; d++) {
                        var p = n[d].GetBody();
                        if (!p.IsStatic()) {
                            var u = p.GetWorldCenter(), m = new s._m(u.x - l.x, u.y - l.y), f = m.Length(), y = 1 - (f = Math.min(2, f)) / 2, v = Math.atan2(m.y, m.x), g = Math.cos(v) * y * 10, S = Math.sin(v) * y * 10;
                            p.ApplyImpulse(new s._m(g, S), u);
                        }
                    }
                    this.fueltankMC.visible = false, this.session.particleController.createPointBurst("jetshards", l.x * this.m_physScale, l.y * this.m_physScale, 5, 50, 50, i.getChildIndex(this.fueltankMC)), c.DestroyBody(this.fueltankBody), o.ij.instance.playAreaSoundInstance("MineExplosion", this.fueltankBody);
                }, c.jetSmash = function (e) {
                    this.contactImpulseDict.delete(this.jetShape), this._session.contactListener.deleteListener(r.$S.RESULT, this.jetShape), this._session.contactListener.deleteListener(r.$S.ADD, this.jetShape);
                    var t = this.jetBody.GetWorldCenter();
                    this.jetMC.visible = false, this.session.particleController.createPointBurst("jetshards", t.x * this.m_physScale, t.y * this.m_physScale, 5, 50, 50, this.session.containerSprite.getChildIndex(this.jetMC)), this.session.m_world.DestroyBody(this.jetBody), o.ij.instance.playAreaSoundInstance("MetalSmashLight", this.jetBody);
                }, c.chestSmash = function (t) {
                    e.prototype.chestSmash.call(this, t), this.eject();
                }, c.pelvisSmash = function (t) {
                    e.prototype.pelvisSmash.call(this, t), this.eject();
                }, c.torsoBreak = function (t, i, s) {
                    void 0 === i && (i = true), void 0 === s && (s = true), e.prototype.torsoBreak.call(this, t, i, s), this.eject();
                }, c.hipBreak1 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak1.call(this, t, i), this.chairLeg1 && (this.session.m_world.DestroyJoint(this.chairLeg1), this.chairLeg1 = null);
                }, c.hipBreak2 = function (t, i) {
                    void 0 === i && (i = true), e.prototype.hipBreak2.call(this, t, i), this.chairLeg2 && (this.session.m_world.DestroyJoint(this.chairLeg2), this.chairLeg2 = null);
                }, c.seatPose = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, .5, 5), this.setJoint(this.hipJoint2, .5, 5), this.setJoint(this.kneeJoint1, 1, 10), this.setJoint(this.kneeJoint2, 1, 10), this.setJoint(this.shoulderJoint1, 3, 20), this.setJoint(this.shoulderJoint2, 3, 20), this.setJoint(this.elbowJoint1, 1.4, 15), this.setJoint(this.elbowJoint2, 1.4, 15);
                }, c.wheelPoseLeft = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 3.5, 2), this.setJoint(this.hipJoint2, 1.5, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, -0.5, 20), this.setJoint(this.shoulderJoint2, 1, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, c.wheelPoseRight = function () {
                    this.setJoint(this.neckJoint, .5, 2), this.setJoint(this.hipJoint1, 1.5, 2), this.setJoint(this.hipJoint2, 3.5, 2), this.setJoint(this.kneeJoint1, 0, 10), this.setJoint(this.kneeJoint2, 0, 10), this.setJoint(this.shoulderJoint1, 1, 20), this.setJoint(this.shoulderJoint2, -0.5, 20), this.setJoint(this.elbowJoint1, 3, 15), this.setJoint(this.elbowJoint2, 3, 15);
                }, h = n, (l = [{
                    key: "dead", get: function () {
                        return this._dead;
                    }, set: function (e) {
                        this._dead = e, this._dead && (this.userVehicleEject(), this.currentPose = 0, this.releaseGrip(), this.voiceSound && (this.voiceSound.stopSound(), this.voiceSound = null), this.bigWheelJoint.EnableMotor(false));
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), n;
            }(d);
        }, 375: (e, t, i) => {
            "use strict";
            i.d(t, { I: () => d }), i(11);
            var s = i(228), r = i(211), o = i(553), n = i(554), a = i(169), h = i(555), l = i(15), c = i(59), d = function () {
                function e(e, t) {
                    this.name = e, this.type = t;
                }
                return e.buildInput = function (t) {
                    switch (t) {
                        case "x":
                            var i = new r.oi("x", "x", 7, true);
                            return i.restrict = "0-9.", i.decimals = 2, i;
                        case "y":
                            var d = new r.oi("y", "y", 7, true);
                            return d.restrict = "0-9.", d.decimals = 2, d;
                        case "shapeWidth":
                            var p = new r.oi("width", "shapeWidth", 7, true);
                            return p.restrict = "0-9.", p.decimals = 0, p;
                        case "shapeHeight":
                            var u = new r.oi("height", "shapeHeight", 7, true);
                            return u.restrict = "0-9.", u.decimals = 0, u;
                        case "angle":
                            var m = new r.oi("rotation", "angle", 5, true);
                            return m.restrict = "0-9\\-", m.decimals = 0, m;
                        case "interactive":
                            var f = new r.Jg("interactive", "interactive");
                            return f.helpCaption = "Setting interactive to false will treat the shape like flat artwork.  The shape will only move if part of a group, and will not take away from the total available shapecount allowed in your level.  Useful when just adding visual detail to already interactive larger shapes or groups.", f;
                        case "immovable":
                            var y = new r.Jg("fixed", "immovable", false, true, true);
                            y.helpCaption = "A fixed object will never move and will support any weight.", y.oppositeDependent = true;
                            var v = new r.Jg("sleeping", "sleeping", false, false);
                            v.helpCaption = "A sleeping object will remain frozen in place until it is touched by any other moving object.";
                            var g = new r.oi("density", "density", 4, true);
                            return g.restrict = "0-9.", g.allowNaN = true, y.addChildInput(v), y.addChildInput(g), y;
                        case "color":
                            return new r.TC("color", "color", true, true);
                        case "outlineColor":
                            return new r.TC("outline color", "outlineColor", true, true);
                        case "opacity":
                            var S = new r.a("opacity", "opacity", 3, true, 0, 100, 100);
                            return S.restrict = "0-9", S.helpCaption = "Transparent shapes are more cpu intensive than opaque shapes, so use transparency sparingly.  Best performance is at 100 or 0.", S;
                        case "collision":
                            var _ = new r.a("collision", "collision", 1, true, 1, 7, 6);
                            return _.restrict = "0-9", _.helpCaption = "This value determines what the shape will collide with.<br><br>1: collides with everything.<br><br>2: collides with mostly everything but characters.<br><br>3: collides with nothing. (mostly for use with joints. If you'd like to just use shapes as art, uncheck interactive instead)<br><br>4: collides with everything except other shapes with collision set to this value. (useful for something like a pair of attached legs that you don't want colliding with each other)<br><br>5: Collides only with fixed shapes.<br><br>6: Collides only with fixed shapes and other shapes with collision set to this value.<br><br>7: Collides only with characters.", _;
                        case "immovable2":
                            var w = new r.Jg("fixed", "immovable2", false, true, true);
                            return w.oppositeDependent = true, w.helpCaption = "A fixed object doesn't move and will support any weight.", w;
                        case "immovable3":
                            return (w = new r.Jg("fixed", "immovable", false, true, true)).oppositeDependent = true, w.helpCaption = "A fixed object doesn't move and will support any weight.", w;
                        case "limit":
                            var b = new r.Jg("limit rotation", "limit", false), C = new r.a("upper angle", "upperAngle", 3, true, 0, 180, 180);
                            C.restrict = "0-9";
                            var L = new r.a("lower angle", "lowerAngle", 4, true, -180, 0, 180);
                            return L.restrict = "0-9\\-", b.addChildInput(C), b.addChildInput(L), b;
                        case "motor":
                            var B = new r.Jg("enable motor", "motor", false), A = new r.oi("motor torque", "torque", 5, true);
                            A.restrict = "0-9", A.decimals = 0, A.helpCaption = "Controls the amount of force used to rotate the joint.  Very dense objects may need a lot of torque to rotate effectively with a motor.";
                            var E = new r.a("motor speed ", "speed", 5, true, -20, 20, 40);
                            return E.helpCaption = "Controls how quickly the motor rotates the joint.  If this is a large amount and the joint is unresponsive, you may have to play around with the torque. Change the speed to negative to change the direction of movement.", E.restrict = "0-9\\-.", B.addChildInput(A), B.addChildInput(E), B;
                        case "axisAngle":
                            var M = new r.a("axis angle", "axisAngle", 4, true, -180, 180, 360);
                            return M.helpCaption = "This is the angle (in degrees) of the axis of movement between the bodies of this joint. Relative to each other, the two bodies will be constrained to this axis.", M;
                        case "limitPris":
                            return b = new r.Jg("limit range", "limit", false), (C = new r.a("upper limit", "upperLimit", 4, true, 0, 3e3, 300)).restrict = "0-9", (L = new r.a("lower limit", "lowerLimit", 5, true, -3000, 0, 300)).restrict = "0-9\\-", b.addChildInput(C), b.addChildInput(L), b;
                        case "motorPris":
                            B = new r.Jg("enable motor", "motor", false);
                            var k = new r.oi("motor force", "force", 5, true);
                            k.restrict = "0-9", k.decimals = 0, k.helpCaption = "Controls the amount of force used to power the joint.  Very dense objects may need a lot of force to move effectively with a motor.";
                            var x = new r.a("motor speed ", "speed", 5, true, -50, 50, 100);
                            return x.helpCaption = "Controls how quickly the motor moves objects along the axis of the joint.  If this is a large amount and the joint is unresponsive, you may have to play around with the force. Change the speed to negative to change the direction of movement.", x.restrict = "0-9\\-.", B.addChildInput(k), B.addChildInput(x), B;
                        case "collideSelf":
                            var O = new r.Jg("collide connected", "collideSelf", false);
                            return O.helpCaption = "Select this if you'd like the two objects connected by this joint to collide with each other. Do not use this if you'd like the objects to overlap.", O;
                        case "ropeLength":
                            var T = new r.a("rope length", "ropeLength", 4, true, 200, 1e3, 80);
                            return T.restrict = "0-9", T;
                        case "ballSpeed":
                            var P = new r.a("ball speed", "ballSpeed", 1, true, 0, 7, 7);
                            return P.restrict = "0-9", P;
                        case "springDelay":
                            var R = new r.a("delay", "springDelay", 3, true, 0, 2, 4);
                            return R.restrict = "0-9", R.decimals = 1, R;
                        case "numSpikes":
                            var D = new r.a("spikes", "numSpikes", 3, true, 20, 150, 130);
                            return D.restrict = "0-9", D;
                        case "numPanels":
                            var I = new r.a("panels", "numPanels", 1, true, 1, 6, 5);
                            return I.restrict = "0-9", I;
                        case "characterIndex":
                            var j = new r.a("default character", "characterIndex", 2, true, 1, l.Z.totalCharacters, l.Z.totalCharacters - 1);
                            return j.restrict = "0-9", j;
                        case "forceChar":
                            var F = new r.Jg("force character", "forceChar", false);
                            return F.helpCaption = "If enabled, the user must play this level with the current character.", F;
                        case "numFloors":
                            var J = new r.a("floors", "numFloors", 2, true, 3, 50, 47);
                            return J.restrict = "0-9", J;
                        case "floorWidth":
                            var G = new r.a("floor width", "floorWidth", 2, true, 1, 10, 9);
                            return G.restrict = "0-9", G;
                        case "sleeping":
                            var H = new r.Jg("sleeping", "sleeping", false);
                            return H.helpCaption = "A sleeping object will remain frozen in place until it is touched by any other moving object.", H;
                        case "useAnchor":
                            return new r.Jg("anchor", "useAnchor");
                        case "foreground":
                            var V = new r.Jg("foreground", "foreground", false);
                            return V.helpCaption = "When checked, this item will overlap in front of the player character during gameplay", V;
                        case "font":
                            return new r.a("font", "font", 1, true, 1, 5, 4);
                        case "fontSize":
                            return new r.a("font size", "fontSize", 3, true, 10, 100, 90);
                        case "align":
                            return new r.a("alignment", "align", 1, true, 1, 3, 2);
                        case "charIndex":
                            return new r.a("character type", "charIndex", 2, true, 1, s.XL.NUM_CHARACTERS, s.XL.NUM_CHARACTERS - 1);
                        case "neckAngle":
                            var N = new r.a("neck angle", "neckAngle", 4, true, -20, 20, 40);
                            return N.helpCaption = e.poseString, N.decimals = 0, N;
                        case "shoulder1Angle":
                            var U = new r.a("arm 1 angle", "shoulder1Angle", 4, true, -180, 60, 240);
                            return U.helpCaption = e.poseString, U.decimals = 0, U;
                        case "shoulder2Angle":
                            var W = new r.a("arm 2 angle", "shoulder2Angle", 4, true, -180, 60, 240);
                            return W.helpCaption = e.poseString, W.decimals = 0, W;
                        case "elbow1Angle":
                            var X = new r.a("elbow 1 angle", "elbow1Angle", 4, true, -160, 0, 160);
                            return X.helpCaption = e.poseString, X.decimals = 0, X;
                        case "elbow2Angle":
                            var Y = new r.a("elbow 2 angle", "elbow2Angle", 4, true, -160, 0, 160);
                            return Y.helpCaption = e.poseString, Y.decimals = 0, Y;
                        case "hip1Angle":
                            var z = new r.a("leg 1 angle", "hip1Angle", 4, true, -150, 10, 160);
                            return z.helpCaption = e.poseString, z.decimals = 0, z;
                        case "hip2Angle":
                            var Z = new r.a("leg 2 angle", "hip2Angle", 4, true, -150, 10, 160);
                            return Z.helpCaption = e.poseString, Z.decimals = 0, Z;
                        case "knee1Angle":
                            var $ = new r.a("knee 1 angle", "knee1Angle", 4, true, 0, 150, 150);
                            return $.helpCaption = e.poseString, $.decimals = 0, $;
                        case "knee2Angle":
                            var K = new r.a("knee 2 angle", "knee2Angle", 4, true, 0, 150, 150);
                            return K.helpCaption = e.poseString, K.decimals = 0, K;
                        case "reverse":
                            return new r.Jg("reverse", "reverse");
                        case "holdPose":
                            return new r.Jg("hold pose", "holdPose");
                        case "shatterStrength":
                            var q = new r.a("strength", "shatterStrength", 2, true, 1, 10, 9);
                            return q.helpCaption = "Determines how much force is required to shatter the initial glass pane.", q;
                        case "stabbing":
                            var Q = new r.Jg("stabbing", "stabbing");
                            return Q.helpCaption = "Determines if broken glass can stab the character.", Q;
                        case "bottleType":
                            return new r.a("bottle type", "bottleType", 1, true, 1, 4, 3);
                        case "signPostType":
                            return new r.a("sign type", "signPostType", 2, true, 1, s.Q$.TOTAL_SIGN_TYPES, s.Q$.TOTAL_SIGN_TYPES - 1);
                        case "signPost":
                            return new r.Jg("show sign post", "signPost");
                        case "containsTrash":
                            return new r.Jg("contains trash", "containsTrash");
                        case "seekSpeed":
                            var ee = new r.a("speed", "seekSpeed", 2, true, 1, 10, 9);
                            return ee.restrict = "0-9", ee;
                        case "explosionDelay":
                            var te = new r.a("delay", "explosionDelay", 1, true, 0, 5, 5);
                            return te.restrict = "0-9", te;
                        case "power":
                            var ie = new r.a("power", "power", 2, true, o.M.MIN_POWER, o.M.MAX_POWER, o.M.MAX_POWER - 1);
                            return ie.restrict = "0-9", ie;
                        case "fireTime":
                            var se = new r.a("firing time", "fireTime", 2, true, o.M.MIN_FIRE_TIME, o.M.MAX_FIRE_TIME, o.M.MAX_FIRE_TIME - o.M.MIN_FIRE_TIME);
                            return se.restrict = "0-9", se.helpCaption = "The amount of time (in seconds) until the jet shuts off. With a setting of 0, the jet will not shut off.", se;
                        case "accelTime":
                            var re = new r.a("acceleration time", "accelTime", 1, true, o.M.MIN_ACCEL_TIME, o.M.MAX_ACCEL_TIME, o.M.MAX_ACCEL_TIME - o.M.MIN_ACCEL_TIME);
                            return re.restrict = "0-9", re.helpCaption = "The amount of time (in seconds) until the jet reaches full power", re;
                        case "fixedRotation":
                            var oe = new r.Jg("fixed angle", "fixedRotation", false, true);
                            return oe.helpCaption = "Checking this will prevent the object from rotating", oe;
                        case "rateOfFire":
                            var ne = new r.a("rate of fire", "rateOfFire", 2, true, 1, 10, 9);
                            return ne.restrict = "0-9", ne;
                        case "dontShootPlayer":
                            var ae = new r.Jg("don't shoot player", "dontShootPlayer", false, true);
                            return ae.helpCaption = "Uncheck this if you only want the gun to target non-player characters", ae;
                        case "linkCount":
                            return new r.a("link count", "linkCount", 3, true, 2, 40, 19);
                        case "linkScale":
                            return new r.a("link scale", "linkScale", 2, true, 1, 10, 9);
                        case "linkAngle":
                            return new r.a("chain curve", "linkAngle", 3, true, -10, 10, 40);
                        case "tokenType":
                            return new r.a("token type", "tokenType", 1, true, 1, 6, 5);
                        case "foodItemType":
                            return new r.a("food type", "foodItemType", 1, true, 1, 3, 2);
                        case "startRotation":
                            var he = new r.a("start rotation", "startRotation", 3, true, -90, 90, 180);
                            return he.helpCaption = "The angle the muzzle rests at until objects fall into it.", he.restrict = "0-9\\-", he;
                        case "firingRotation":
                            var le = new r.a("firing rotation", "firingRotation", 3, true, -90, 90, 180);
                            return le.helpCaption = "The angle the muzzle moves to and fires.", le.restrict = "0-9\\-", le;
                        case "muzzleScale":
                            return new r.a("muzzle scale", "muzzleScale", 2, true, 1, 10, 9);
                        case "cannonPower":
                            return new r.a("power", "cannonPower", 2, true, 1, 10, 9);
                        case "cannonDelay":
                            var ce = new r.a("delay", "cannonDelay", 2, true, 1, 10, 9);
                            return ce.helpCaption = "The amount of time in seconds before the cannon moves to the firing position.", ce;
                        case "cannonType":
                            return new r.a("type", "cannonType", 1, true, 1, 2, 1);
                        case "bladeWeaponType":
                            return new r.a("type", "bladeWeaponType", 2, true, 1, 12, 11);
                        case "spaceAction":
                            var de = new r.a("spacebar action", "spaceAction", 1, true, 0, h.s.NUM_ACTIONS, h.s.NUM_ACTIONS);
                            return de.helpCaption = "This value determines what happens when spacebar is pressed.<br><br>0: Nothing!<br><br>1: All attached joints will brake (motors set to 0).<br><br>2: Any jets attached to the vehicle with joints will fire.<br><br>3: Any arrowguns attached to the vehicle with joints will shoot", de;
                        case "shiftAction":
                            var pe = new r.a("shift action", "shiftAction", 1, true, 0, h.s.NUM_ACTIONS, h.s.NUM_ACTIONS);
                            return pe.helpCaption = "This value determines what happens when SHIFT is pressed.<br><br>0: Nothing!<br><br>1: All attached joints will brake (motors set to 0).<br><br>2: Any jets attached to the vehicle with joints will fire.<br><br>3: Any arrowguns attached to the vehicle with joints will shoot", pe;
                        case "ctrlAction":
                            var ue = new r.a("ctrl action", "ctrlAction", 1, true, 0, h.s.NUM_ACTIONS, h.s.NUM_ACTIONS);
                            return ue.helpCaption = "This value determines what happens when CTRL is pressed.<br><br>0: Nothing!<br><br>1: All attached joints will brake (motors set to 0).<br><br>2: Any jets attached to the vehicle with joints will fire.<br><br>3: Any arrowguns attached to the vehicle with joints will shoot", ue;
                        case "acceleration":
                            var me = new r.a("acceleration", "acceleration", 2, true, 1, 10, 9);
                            return me.helpCaption = "Determines how quickly attached joints reach their set motor speed when pressing up or down. Low torque can prevent a motor from reaching its top speed.", me;
                        case "leaningStrength":
                            var fe = new r.a("leaning strength", "leaningStrength", 1, true, 0, 10, 10);
                            return fe.helpCaption = "Determines how much force is used when leaning using left and right. Set to zero to disable leaning.", fe;
                        case "vehicleControlled":
                            var ye = new r.Jg("vehicle controlled", "vehicleControlled", true, true);
                            return ye.helpCaption = "Uncheck this is you don't want this joint to be controlled by the vehicle. It will function like a normal joint.", ye;
                        case "characterPose":
                            var ve = new r.a("grabbing pose", "characterPose", 1, true, 0, h.s.NUM_POSES, h.s.NUM_POSES);
                            return ve.helpCaption = "This value determines what pose the character will take after grabbing a vehicle handle.<br><br>0: limp limbs<br><br>1: arms forward<br><br>2: arms overhead<br><br>3: the character will hold whatever pose he had when grabbing", ve;
                        case "lockJoints":
                            var ge = new r.Jg("lock joints", "lockJoints", false);
                            return ge.helpCaption = "Check this if you'd like all attached joints with motors to slow their speed to 0 when not accelerating or decelerating (by default, joints will hang loose). Joints will slow at the acceleration rate you've specified.", ge;
                        case "innerCutout":
                            return new r.a("inner cutout", "innerCutout", 3, true, 0, 100, 100);
                        case "destroyJointsUponDeath":
                            var Se = new r.Jg("release on death", "destroyJointsUponDeath", false, true);
                            return Se.helpCaption = "Check this if you'd like all attached joints and associated trigger actions to be detroyed when the character dies. This is especially good for characters with walk cycles.", Se;
                        case "paddleAngle":
                            return new r.a("max angle", "paddleAngle", 2, true, 15, 90, 75);
                        case "paddleSpeed":
                            return new r.a("speed", "paddleSpeed", 2, true, 1, 10, 9);
                        case "hideVehicle":
                            var _e = new r.Jg("hide vehicle", "hideVehicle", true);
                            return _e.helpCaption = "Check this if you don't want to include the character's vehicle in your level. This is good for getting the character into a custom vehicle, rope levels, etc.", _e;
                        case "triggeredBy":
                            var we = new r.a("triggered by", "triggeredBy", 1, true, 1, 6, 5);
                            return we.restrict = "0-9", we.helpCaption = "Set this to determine what will activate the trigger upon contact. In addition to these options, triggers can now also be triggered by other triggers.<br><br>1. Triggered by only the main character.<br><br>2. Triggered by any character, including NCPs.<br><br>3. Triggered by any non-fixed shape.<br><br>4. Triggered by only the targets attached to this trigger.<br><br>5. Triggered only by other triggers<br><br>6. Triggered by left-clicking the trigger shape with your mouse", we;
                        case "triggerDelay":
                            var be = new r.a("delay", "triggerDelay", 4, true, 0, 30, 60);
                            return be.restrict = "0-9.", be;
                        case "soundEffect":
                            return new n.L("sound effect", "soundEffect", c.DF.instance.sfxArray, true, true);
                        case "panning":
                            return new r.a("panning", "panning", 4, true, -1, 1, 20);
                        case "volume":
                            return new r.a("volume", "volume", 3, true, 0, 1, 10);
                        case "triggerType":
                            return new n.L("action", "triggerType", a.$.typeArray, false, true);
                        case "wheelType":
                            return new r.a("wheel type", "wheelType", 2, true, 1, 10, 9);
                        case "repeatType":
                            var Ce = new r.a("repeat type", "repeatType", 1, true, 1, 4, 3);
                            return Ce.restrict = "0-9", Ce.helpCaption = "This determines the repeating behavior of the trigger.<br><br>1. Trigger action only occurs once, then trigger is deleted.<br><br>2. Trigger action occurs upon contact with the trigger. It will occur again with new contact after the trigger area is clear of the original triggering body.<br><br>3. Trigger action will occur on a repeated interval until the triggering body leaves the trigger area.<br><br>4. Trigger action will occur on a repeated interval once activated until disabled by other triggers.", Ce;
                        case "repeatInterval":
                            var Le = new r.a("repeat interval", "repeatInterval", 4, true, 0, 30, 60);
                            return Le.restrict = "0-9.", Le.helpCaption = "This is the number of seconds between trigger activations when repeat type is set to 3 or 4.", Le;
                        case "soundLocation":
                            var Be = new r.a("sound location", "soundLocation", 1, true, 1, 2, 1);
                            return Be.restrict = "0-9", Be.helpCaption = "This determines the apparent location of the sound.<br><br>1. Global. The sound effect will sound the same no matter when or where it is activated. Volume and panning are determined by the user.<br><br>2. Location specific. The sound effect will play as if it is coming from the location of its trigger. Sounds will diminish and pan left and right depending on the player's location relative to the trigger. Volume will determine the max volume of the sound.", Be;
                        case "startDisabled":
                            var Ae = new r.Jg("start disabled", "startDisabled", false, true);
                            return Ae.helpCaption = "If checked, this trigger will not function until enabled by another trigger.", Ae;
                        case "fixedAngleTurret":
                            var Ee = new r.Jg("fixed turret", "fixedAngleTurret", false, true);
                            return Ee.helpCaption = "If checked, the turret of the gun will only aim at the specified turret angle.", Ee;
                        case "turretAngle":
                            var Me = new r.a("turret angle", "turretAngle", 4, true, -110, 110, 220);
                            return Me.restrict = "0-9\\-", Me;
                        case "triggerFiring":
                            var ke = new r.Jg("trigger firing", "triggerFiring", false, true);
                            return ke.helpCaption = "If checked, the turret of the gun will only fire when signaled by a trigger.", ke;
                        case "startDeactivated":
                            var xe = new r.Jg("start deactivated", "startDeactivated", false, true);
                            return xe.helpCaption = "If checked, the object will be deactivated until activated by a trigger.", xe;
                        case "boostPower":
                            var Oe = new r.a("boost power", "boostPower", 3, true, s.zE.MIN_POWER, s.zE.MAX_POWER, s.zE.MAX_POWER - s.zE.MIN_POWER);
                            return Oe.restrict = "0-9", Oe;
                    }
                    return null;
                }, e.buildKeyedInput = function (e, t, i, s) {
                    var o = t, a = o.parent.getChildIndex(o) + 1;
                    switch (e) {
                        case "triggerActionsShape":
                            var h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsShape", s.triggerActionList, false, true, true);
                            return h.multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsSpecial":
                            return (h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsSpecial", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsGroup":
                            return (h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsGroup", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsPinJoint":
                            return (h = new n.L("trigger " + a + " action" + (i + 1), "triggerActionsPinJoint", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsPrisJoint":
                            return (h = new n.L("trigger " + a + " action" + (i + 1), "triggerActionsPrisJoint", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsGlass":
                            return (h = new n.L("trigger " + a + " action" + (i + 1), "triggerActionsGlass", s.triggerActionList, false, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsText":
                            return (h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsText", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsNPC":
                            return (h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsNPC", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsHarpoon":
                            return (h = new n.L("trigger " + a + " action " + (i + 1), "triggerActionsHarpoon", s.triggerActionList, false, true, true)).multipleKey = t, h.multipleIndex = i, h.defaultValue = s.triggerActionList[0], h;
                        case "triggerActionsTrigger":
                            return (h = new n.L("trigger " + a + " action", "triggerActionsTrigger", s.triggerActionList, false, true)).multipleKey = t, h.defaultValue = s.triggerActionList[0], h;
                        case "newOpacities":
                            var l = new r.a("new opacity " + a, "newOpacities", 3, true, 0, 100, 100);
                            return l.restrict = "0-9", l.multipleKey = t, l.multipleIndex = i, l.defaultValue = 100, l;
                        case "opacityTimes":
                            var c = new r.a("duration " + a, "opacityTimes", 3, true, 0, 5, 50);
                            return c.restrict = "0-9.", c.multipleKey = t, c.multipleIndex = i, c.defaultValue = 1, c;
                        case "impulseX":
                            var d = new r.a("impulse x " + a, "impulseX", 4, true, -50, 50, 100);
                            return d.restrict = "0-9\\-", d.multipleKey = t, d.multipleIndex = i, d.defaultValue = 10, d;
                        case "impulseY":
                            var p = new r.a("impulse y " + a, "impulseY", 4, true, -50, 50, 100);
                            return p.restrict = "0-9\\-", p.multipleKey = t, p.multipleIndex = i, p.defaultValue = -10, p;
                        case "spin":
                            var u = new r.a("spin " + a, "spin", 3, true, -20, 20, 40);
                            return u.restrict = "0-9\\-", u.multipleKey = t, u.multipleIndex = i, u.defaultValue = 0, u;
                        case "slideTimes":
                            var m = new r.a("duration " + a, "slideTimes", 3, true, 0, 10, 100);
                            return m.restrict = "0-9.", m.multipleKey = t, m.multipleIndex = i, m.defaultValue = 1, m;
                        case "newX":
                            var f = new r.oi("new x " + a, "newX", 7, true);
                            return f.restrict = "0-9.", f.multipleKey = t, f.multipleIndex = i, f.defaultValue = s.x, f;
                        case "newY":
                            var y = new r.oi("new y " + a, "newY", 7, true);
                            return y.restrict = "0-9.", y.multipleKey = t, y.multipleIndex = i, y.defaultValue = s.y, y;
                        case "newMotorSpeeds":
                            var v = new r.a("new speed " + a, "newMotorSpeeds", 5, true, -20, 20, 40);
                            return v.restrict = "0-9\\-.", v.multipleKey = t, v.multipleIndex = i, v.defaultValue = 0, v;
                        case "motorSpeedTimes":
                            var g = new r.a("duration " + a, "motorSpeedTimes", 3, true, 0, 5, 50);
                            return g.restrict = "0-9.", g.multipleKey = t, g.multipleIndex = i, g.defaultValue = 1, g.helpCaption = "the time (in seconds) it takes for the motor to reach the new speed", g;
                        case "newMotorSpeedsPris":
                            return (v = new r.a("new speed " + a, "newMotorSpeedsPris", 5, true, -50, 50, 100)).restrict = "0-9\\-.", v.multipleKey = t, v.multipleIndex = i, v.defaultValue = 0, v;
                        case "newUpperLimits":
                            var S = new r.a("new upper limit " + a, "newUpperLimits", 4, true, 0, 3e3, 300);
                            return S.restrict = "0-9", S.multipleKey = t, S.multipleIndex = i, S.defaultValue = 100, S;
                        case "newLowerLimits":
                            var _ = new r.a("new lower limit " + a, "newLowerLimits", 5, true, -3000, 0, 300);
                            return _.restrict = "0-9\\-", _.multipleKey = t, _.multipleIndex = i, _.defaultValue = -100, _;
                        case "newUpperAngles":
                            return (S = new r.a("new upper angle " + a, "newUpperAngles", 3, true, 0, 180, 180)).restrict = "0-9", S.multipleKey = t, S.multipleIndex = i, S.defaultValue = 90, S;
                        case "newLowerAngles":
                            return (_ = new r.a("new lower angle " + a, "newLowerAngles", 4, true, -180, 0, 180)).restrict = "0-9\\-", _.multipleKey = t, _.multipleIndex = i, _.defaultValue = -90, _;
                        case "newCollisions":
                            var w = new r.a("new collision " + a, "newCollisions", 1, true, 1, 7, 6);
                            return w.restrict = "0-9", w.multipleKey = t, w.multipleIndex = i, w.defaultValue = 1, w.helpCaption = "This value determines what the shape will collide with.<br><br>1: collides with everything.<br><br>2: collides with mostly everything but characters.<br><br>3: collides with nothing. (mostly for use with joints. If you'd like to just use shapes as art, uncheck interactive instead)<br><br>4: collides with everything except other shapes with collision set to this value. (useful for something like a pair of attached legs that you don't want colliding with each other)<br><br>5: Collides only with fixed shapes.<br><br>6: Collides only with fixed shapes and other shapes with collision set to this value.<br><br>7: Collides only with characters.", w;
                    }
                    return null;
                }, e.getDefaultValue = function (e) {
                    switch (e) {
                        case "newOpacities":
                            return 100;
                        case "opacityTimes":
                        case "slideTimes":
                        case "motorSpeedTimes":
                        case "newCollisions":
                            return 1;
                        case "impulseX":
                            return 10;
                        case "impulseY":
                            return -10;
                        case "spin":
                        case "newX":
                        case "newY":
                        case "newMotorSpeeds":
                            return 0;
                    }
                    return 0;
                }, e;
            }();
            d.poseString = "you can now double-click on the non-player characters to manually adjust the pose";
        }, 129: (e, t, i) => {
            "use strict";
            i.d(t, { X: () => d, n: () => p }), i(11), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(40), o = i(22);
            function n(e, t) {
                for (var i, s = 0; s < t.length; s++) {
                    var r = t[s];
                    r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                        if ("object" != typeof e || null === e) return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 !== i) {
                            var s = i.call(e, "string");
                            if ("object" != typeof s) return s;
                            throw new TypeError("@@toPrimitive must return a primitive value.");
                        }
                        return String(e);
                    }(r.key)) ? i : String(i), r);
                }
            }
            function a(e, t, i) {
                return t && n(e.prototype, t), i && n(e, i), Object.defineProperty(e, "prototype", { writable: false }), e;
            }
            function h(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function l(e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e, c(e, t);
            }
            function c(e, t) {
                return (c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var d = function (e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).artStatusHandlerBind = t.artStatusHandler.bind(h(t)), t.shapeStatusHandlerBind = t.shapeStatusHandler.bind(h(t)), t.isGroupCanvas = false, t.init(), t;
                }
                l(t, e);
                var i = t.prototype;
                return i.init = function () {
                    t._canvasWidth = 2e4, t._canvasHeight = 1e4, t._backDropIndex = 0, this._shapeCount = 0, this._artCount = 0, this._mainCanvas = this, this.graphics.beginFill(16777215), this.graphics.drawRect(0, 0, t._canvasWidth, t._canvasHeight), this.graphics.endFill(), this.shapes = new s.jy, this.shapes.name = "shapes", this.joints = new s.jy, this.joints.name = "joints", this.triggers = new s.jy, this.triggers.name = "triggers", this.special = new s.jy, this.special.name = "special", this.groups = new s.jy, this.groups.name = "groups", this.char = new s.jy, this.char.name = "char", this.addChild(this.shapes), this.addChild(this.special), this.addChild(this.groups), this.addChild(this.joints), this.addChild(this.triggers), this.addChild(this.char), this.startPlaceHolder = new o.yY, this.char.addChild(this.startPlaceHolder), this.startPlaceHolder.scaleX = this.startPlaceHolder.scaleY = .5, this.startPlaceHolder.x = 300, this.startPlaceHolder.y = 100 + t._canvasHeight / 2, this.addEventListener(r.$6.ART, this.artStatusHandlerBind, false, 0, true), this.addEventListener(r.$6.SHAPE, this.shapeStatusHandlerBind, false, 0, true), this.shapes.pixiSprite.removeChild(this.shapes.graphics.pixiGraphics), this.special.pixiSprite.removeChild(this.special.graphics.pixiGraphics), this.groups.pixiSprite.removeChild(this.groups.graphics.pixiGraphics), this.joints.pixiSprite.removeChild(this.joints.graphics.pixiGraphics), this.triggers.pixiSprite.removeChild(this.triggers.graphics.pixiGraphics), this.char.pixiSprite.removeChild(this.char.graphics.pixiGraphics);
                }, i.createTextField = function (e) {
                    this.textField = new s.nv, e && e.addChild(this.textField);
                    var t = new s.SQ("HelveticaNeueLT Std", 11, 0, null, null, null, null, null, s.O3.RIGHT);
                    this.textField.defaultTextFormat = t, this.textField.multiline = true, this.textField.height = 20, this.textField.width = 0, this.textField.x = 890, this.textField.y = 465, this.textField.mouseEnabled = false, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.autoSize = s.ie.RIGHT, this.textField.wordWrap = false, this.textField.blendMode = s.bt.INVERT, this.setTextField();
                }, i.addRefSprite = function (e) {
                    if (!(e instanceof o.Jh)) throw new Error("attempted to add non-refsprite to canvas");
                    if (e instanceof o.D_) this.shapes.addChild(e); else if (e instanceof o.ph) this.special.addChild(e); else if (e instanceof o.nS) this.joints.addChild(e); else if (e instanceof o.$F) this.triggers.addChild(e); else {
                        if (!(e instanceof o.cS)) throw new Error("what the fuck instanceof this");
                        this.groups.addChild(e);
                    }
                    return this.shapeCount = this._mainCanvas.shapeCount + e.shapesUsed, this.tooManyShapes = this._mainCanvas.shapeCount > t.maxShapes, this.artCount = this._artCount + e.artUsed, this.tooMuchArt = this._artCount > t.maxArt, e;
                }, i.addRefSpriteAt = function (e, i) {
                    if (!(e instanceof o.Jh)) throw new Error("attempted to add non-refsprite to canvas");
                    if (e instanceof o.D_) this.shapes.addChildAt(e, i); else if (e instanceof o.ph) this.special.addChildAt(e, i); else if (e instanceof o.nS) this.joints.addChildAt(e, i); else if (e instanceof o.$F) this.triggers.addChildAt(e, i); else {
                        if (!(e instanceof o.cS)) throw new Error("what the fuck instanceof this");
                        this.groups.addChildAt(e, i);
                    }
                    return this.shapeCount = this._mainCanvas.shapeCount + e.shapesUsed, this.tooManyShapes = this._mainCanvas.shapeCount > t.maxShapes, this.artCount = this._artCount + e.artUsed, this.tooMuchArt = this._artCount > t.maxArt, e;
                }, i.removeRefSprite = function (e) {
                    if (!(e instanceof o.Jh)) throw new Error("attempted to remove non-refsprite from canvas");
                    var i = e;
                    if (i instanceof o.D_) this.shapes.removeChild(i); else if (i instanceof o.ph) this.special.removeChild(i); else if (i instanceof o.nS) this.joints.removeChild(i); else if (i instanceof o.$F) this.triggers.removeChild(i); else {
                        if (!(i instanceof o.cS)) throw new Error("what the fuck instanceof this");
                        this.groups.removeChild(i);
                    }
                    return this.shapeCount = this._mainCanvas.shapeCount - e.shapesUsed, this.tooManyShapes = this._mainCanvas.shapeCount > t.maxShapes, this.artCount = this._artCount - e.artUsed, this.tooMuchArt = this._artCount > t.maxArt, e;
                }, i.setTextField = function () {
                    this.textField.htmlText = "shapes left: " + (t.maxShapes - this.shapeCount) + "<br>art left: " + (t.maxArt - this.artCount);
                }, i.shapeStatusHandler = function (e) {
                    var i = e.target;
                    i.parent != this.shapes && i.parent != this.special || (this.shapeCount = this._mainCanvas.shapeCount + e.value, this.tooManyShapes = this._mainCanvas.shapeCount > t.maxShapes);
                }, i.artStatusHandler = function (e) {
                    var i = e.target;
                    i.parent != this.shapes && i.parent != this.special || (this.artCount = this._artCount + e.value, this.tooMuchArt = this._artCount > t.maxArt);
                }, i.relabelTriggers = function () {
                    for (var e = 0; e < this.triggers.numChildren; e++) this.triggers.getChildAt(e).setNumLabel(e + 1);
                }, i.redrawTriggers = function () {
                    for (var e = 0; e < this.triggers.numChildren; e++) this.triggers.getChildAt(e).drawShape();
                }, i.redrawJoints = function () {
                    for (var e = 0; e < this.joints.numChildren; e++) this.joints.getChildAt(e).drawArms();
                }, a(t, [{
                    key: "shapeCount", get: function () {
                        return this._shapeCount;
                    }, set: function (e) {
                        this._shapeCount = e, this.setTextField();
                    }
                }, {
                    key: "artCount", get: function () {
                        return this._artCount;
                    }, set: function (e) {
                        this._artCount = e, this.setTextField();
                    }
                }, {
                    key: "tooManyShapes", get: function () {
                        return this._tooManyShapes;
                    }, set: function (e) {
                        e != this._tooManyShapes && (this._tooManyShapes = e, this.dispatchEvent(new s.ju(t.SHAPE_LIMIT_STATUS)));
                    }
                }, {
                    key: "tooMuchArt", get: function () {
                        return this._tooMuchArt;
                    }, set: function (e) {
                        e != this._tooMuchArt && (this._tooMuchArt = e, this.dispatchEvent(new s.ju(t.ART_LIMIT_STATUS)));
                    }
                }], [{
                    key: "backDropIndex", get: function () {
                        return t._backDropIndex;
                    }, set: function (e) {
                        t._backDropIndex = e;
                    }
                }, {
                    key: "backgroundColor", get: function () {
                        return t._backgroundColor;
                    }, set: function (e) {
                        t._backgroundColor = e;
                    }
                }, {
                    key: "canvasWidth", get: function () {
                        return t._canvasWidth;
                    }
                }, {
                    key: "canvasHeight", get: function () {
                        return t._canvasHeight;
                    }
                }]), t;
            }(s.jy);
            d.SHAPE_LIMIT_STATUS = "shapelimitstatus", d.ART_LIMIT_STATUS = "artlimitstatus", d._canvasWidth = 2e4, d._canvasHeight = 1e4, d._backDropIndex = 0, d._backgroundColor = 16777215, d.maxShapes = 900, d.maxArt = 1e4;
            var p = function (e) {
                function t(t, i, s) {
                    var r;
                    return (r = e.call(this) || this)._mainCanvas = i, r._refGroup = t, r._groupIndex = s, r.doubleClickEnabled = true, r.isGroupCanvas = true, r.groupCanvasInit(), r.createTextField(), r;
                }
                l(t, e);
                var i = t.prototype;
                return i.init = function () { }, i.groupCanvasInit = function () {
                    t._canvasWidth = 2e4, t._canvasHeight = 1e4, this.graphics.beginFill(10066329, .35), this.graphics.drawRect(0, 0, t._canvasWidth, t._canvasHeight), this.graphics.endFill(), this.graphics.lineStyle(0, 16777215, 1, true), this.graphics.moveTo(this._refGroup.x - 5, this.refGroup.y), this.graphics.lineTo(this._refGroup.x + 5, this.refGroup.y), this.graphics.moveTo(this._refGroup.x, this.refGroup.y - 5), this.graphics.lineTo(this._refGroup.x, this.refGroup.y + 5), this.shapes = new s.jy, this.shapes.name = "shapes", this.special = new s.jy, this.special.name = "special", this.addChild(this.shapes), this.addChild(this.special), this.addEventListener(r.$6.ART, this.artStatusHandler, false, 0, true), this.addEventListener(r.$6.SHAPE, this.shapeStatusHandler, false, 0, true);
                }, a(t, [{
                    key: "shapeCount", get: function () {
                        return this._mainCanvas.shapeCount;
                    }, set: function (e) {
                        this._mainCanvas.shapeCount = e;
                    }
                }, {
                    key: "refGroup", get: function () {
                        return this._refGroup;
                    }
                }, {
                    key: "groupIndex", get: function () {
                        return this._groupIndex;
                    }
                }]), t;
            }(d);
        }, 221: (e, t, i) => {
            "use strict";
            i.d(t, { M: () => _ }), i(63), i(288), i(26), i(54), i(0), i(34), i(13), i(20), i(18), i(544), i(546), i(11), i(31), i(4), i(5), i(1), i(2), i(3), i(68), i(60), i(75), i(76), i(77), i(78), i(79), i(41);
            var s = i(33), o = i(129), n = i(6), a = i(22), h = i(40), l = i(74), c = i(15), d = i(103), p = i(89), u = i(24);
            function m() {
                var e = r;
                m = function () {
                    return t;
                };
                var t = {}, i = Object.prototype, s = i.hasOwnProperty, o = Object.defineProperty || function (e, t, i) {
                    e[t] = i.value;
                }, n = "function" == typeof Symbol ? Symbol : {}, a = n.iterator || "@@iterator", h = n.asyncIterator || "@@asyncIterator", l = n.toStringTag || "@@toStringTag";
                function c(e, t, i) {
                    return Object.defineProperty(e, t, { value: i, enumerable: true, configurable: true, writable: true }), e[t];
                }
                try {
                    c({}, "");
                } catch (e) {
                    c = function (e, t, i) {
                        return e[t] = i;
                    };
                }
                function d(t, i, s, r) {
                    var n, a, h, l, c = i && i.prototype instanceof f ? i : f, d = Object.create(c.prototype), m = new E(r || []);
                    return o(d, "_invoke", {
                        value: (n = t, a = s, h = m, e, e, l = "suspendedStart", function (e, t) {
                            if ("executing" === l) throw new Error("Generator is already running");
                            if ("completed" === l) {
                                if ("throw" === e) throw t;
                                return { value: void 0, done: true };
                            }
                            for (h.method = e, h.arg = t; ;) {
                                var i = h.delegate;
                                if (i) {
                                    var s = L(i, h);
                                    if (s) {
                                        if (s === u) continue;
                                        return s;
                                    }
                                }
                                if ("next" === h.method) h.sent = h._sent = h.arg; else if ("throw" === h.method) {
                                    if ("suspendedStart" === l) throw l = "completed", h.arg;
                                    h.dispatchException(h.arg);
                                } else "return" === h.method && h.abrupt("return", h.arg);
                                l = "executing";
                                var r = p(n, a, h);
                                if ("normal" === r.type) {
                                    if (l = h.done ? "completed" : "suspendedYield", r.arg === u) continue;
                                    return { value: r.arg, done: h.done };
                                }
                                "throw" === r.type && (l = "completed", h.method = "throw", h.arg = r.arg);
                            }
                        })
                    }), d;
                }
                function p(e, t, i) {
                    try {
                        return { type: "normal", arg: e.call(t, i) };
                    } catch (e) {
                        return { type: "throw", arg: e };
                    }
                }
                t.wrap = d;
                var u = {};
                function f() { }
                function y() { }
                function v() { }
                var g = {};
                c(g, a, function () {
                    return this;
                });
                var S = Object.getPrototypeOf, _ = S && S(S(M([])));
                _ && _ !== i && s.call(_, a) && (g = _);
                var w = v.prototype = f.prototype = Object.create(g);
                function b(e) {
                    ["next", "throw", "return"].forEach(function (t) {
                        c(e, t, function (e) {
                            return this._invoke(t, e);
                        });
                    });
                }
                function C(e, t) {
                    var i;
                    function r(i, o, n, a) {
                        var h = p(e[i], e, o);
                        if ("throw" !== h.type) {
                            var l = h.arg, c = l.value;
                            return c && "object" == typeof c && s.call(c, "__await") ? t.resolve(c.__await).then(function (e) {
                                r("next", e, n, a);
                            }, function (e) {
                                r("throw", e, n, a);
                            }) : t.resolve(c).then(function (e) {
                                l.value = e, n(l);
                            }, function (e) {
                                return r("throw", e, n, a);
                            });
                        }
                        a(h.arg);
                    }
                    o(this, "_invoke", {
                        value: function (e, s) {
                            function o() {
                                return new t(function (t, i) {
                                    r(e, s, t, i);
                                });
                            }
                            return i = i ? i.then(o, o) : o();
                        }
                    });
                }
                function L(e, t) {
                    var i = t.method, s = e.iterator[i];
                    if (void 0 === s) return t.delegate = null, "throw" === i && e.iterator.return && (t.method = "return", t.arg = void 0, L(e, t), "throw" === t.method) || "return" !== i && (t.method = "throw", t.arg = new TypeError("The iterator does not provide a '" + i + "' method")), u;
                    var r = p(s, e.iterator, t.arg);
                    if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, u;
                    var o = r.arg;
                    return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, u) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, u);
                }
                function B(e) {
                    var t = { tryLoc: e[0] };
                    1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
                }
                function A(e) {
                    var t = e.completion || {};
                    t.type = "normal", delete t.arg, e.completion = t;
                }
                function E(e) {
                    this.tryEntries = [{ tryLoc: "root" }], e.forEach(B, this), this.reset(true);
                }
                function M(e) {
                    if (e) {
                        var t = e[a];
                        if (t) return t.call(e);
                        if ("function" == typeof e.next) return e;
                        if (!isNaN(e.length)) {
                            var i = -1, r = function t() {
                                for (; ++i < e.length;) if (s.call(e, i)) return t.value = e[i], t.done = false, t;
                                return t.value = void 0, t.done = true, t;
                            };
                            return r.next = r;
                        }
                    }
                    return { next: k };
                }
                function k() {
                    return { value: void 0, done: true };
                }
                return y.prototype = v, o(w, "constructor", { value: v, configurable: true }), o(v, "constructor", { value: y, configurable: true }), y.displayName = c(v, l, "GeneratorFunction"), t.isGeneratorFunction = function (e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === y || "GeneratorFunction" === (t.displayName || t.name));
                }, t.mark = function (e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, v) : (e.__proto__ = v, c(e, l, "GeneratorFunction")), e.prototype = Object.create(w), e;
                }, t.awrap = function (e) {
                    return { __await: e };
                }, b(C.prototype), c(C.prototype, h, function () {
                    return this;
                }), t.AsyncIterator = C, t.async = function (e, i, s, r, o) {
                    void 0 === o && (o = Promise);
                    var n = new C(d(e, i, s, r), o);
                    return t.isGeneratorFunction(i) ? n : n.next().then(function (e) {
                        return e.done ? e.value : n.next();
                    });
                }, b(w), c(w, l, "Generator"), c(w, a, function () {
                    return this;
                }), c(w, "toString", function () {
                    return "[object Generator]";
                }), t.keys = function (e) {
                    var t = Object(e), i = [];
                    for (var s in t) i.push(s);
                    return i.reverse(), function e() {
                        for (; i.length;) {
                            var s = i.pop();
                            if (s in t) return e.value = s, e.done = false, e;
                        }
                        return e.done = true, e;
                    };
                }, t.values = M, E.prototype = {
                    constructor: E, reset: function (e) {
                        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(A), !e) for (var t in this) "t" === t.charAt(0) && s.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                    }, stop: function () {
                        this.done = true;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type) throw e.arg;
                        return this.rval;
                    }, dispatchException: function (e) {
                        if (this.done) throw e;
                        var t = this;
                        function i(i, s) {
                            return n.type = "throw", n.arg = e, t.next = i, s && (t.method = "next", t.arg = void 0), !!s;
                        }
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r], n = o.completion;
                            if ("root" === o.tryLoc) return i("end");
                            if (o.tryLoc <= this.prev) {
                                var a = s.call(o, "catchLoc"), h = s.call(o, "finallyLoc");
                                if (a && h) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                } else if (a) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                } else {
                                    if (!h) throw new Error("try statement without catch or finally");
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                }
                            }
                        }
                    }, abrupt: function (e, t) {
                        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                            var r = this.tryEntries[i];
                            if (r.tryLoc <= this.prev && s.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
                                var o = r;
                                break;
                            }
                        }
                        o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
                        var n = o ? o.completion : {};
                        return n.type = e, n.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, u) : this.complete(n);
                    }, complete: function (e, t) {
                        if ("throw" === e.type) throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), u;
                    }, finish: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), A(i), u;
                        }
                    }, catch: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.tryLoc === e) {
                                var s = i.completion;
                                if ("throw" === s.type) {
                                    var r = s.arg;
                                    A(i);
                                }
                                return r;
                            }
                        }
                        throw new Error("illegal catch attempt");
                    }, delegateYield: function (e, t, i) {
                        return this.delegate = { iterator: M(e), resultName: t, nextLoc: i }, "next" === this.method && (this.arg = void 0), u;
                    }
                }, t;
            }
            function f(e, t, i, s, r, o, n) {
                try {
                    var a = e[o](n), h = a.value;
                } catch (e) {
                    return void i(e);
                }
                a.done ? t(h) : Promise.resolve(h).then(s, r);
            }
            function y(e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e, v(e, t);
            }
            function v(e, t) {
                return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            i(155), i(30), i(42);
            var g = function (e) {
                function t() {
                    var t;
                    return (t = e.call(this, s.Sprite.from("hand-cursor.png")) || this).scaleX = .33, t.scaleY = .33, t._pixiSprite.anchor.set(.5), t;
                }
                return y(t, e), t;
            }(n.jy), S = function (e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).graphics.pixiGraphics.beginFill(16711680, 1), t.graphics.pixiGraphics.drawCircle(0, 0, 20), t.graphics.pixiGraphics.endFill(), t.graphics.pixiGraphics.beginHole(), t.graphics.pixiGraphics.drawCircle(0, 0, 17), t.graphics.pixiGraphics.endHole(), t.graphics.pixiGraphics.beginFill(16711680, 1), t.graphics.pixiGraphics.drawCircle(0, 0, 14), t.graphics.pixiGraphics.endFill(), t.alpha = .75, t;
                }
                return y(t, e), t;
            }(n.jy), _ = function (e) {
                function t(i, s, r) {
                    var l;
                    return void 0 === i && (i = null), void 0 === s && (s = false), void 0 === r && (r = false), (l = e.call(this) || this).debug = false, l.testingMode = false, l.maxZoom = 2, l.minZoom = -5, l.maxBorderX = 100, l.maxBorderY = 50, l.intitialLevel = 0, l.autoSaveInterval = 2e4, l.abusiveStrings = ["***", "****", "*****", "ratev", "ratefive", "ratefour", "ratethree", "ratetwo", "rateone", "rate5", "rate4", "rate3", "rate2", "rate1", "ratehigh", "rateif", "ratefor", "5star", "4star", "3star", "2star", "1star", "fivestar", "fourstar", "threestar", "twostar", "onestar", "goodrating", "goodvote", "votehigh", "vote5", "vote4", "vote3", "vote2", "vote1", "votefive", "votefour", "votethree", "votetwo", "voteone", "highrating"], l.abusivePromptText = "There appears to be text in your level that abuses the rating system. Stop doing that. Misguided people apparently follow your instructions, and it's ruining Happy Wheels. I've been letting it slide, but including it in your level will now get it permanently deleted once noticed.", l.loadXMLMessages = ["Building level...", "Creating level...", "Constructing level...", "Loading..."], l.cullingEnabled = false, l.logCull = false, l.loginPromptAccepted = function (e) {
                        l.loginPrompt.removeEventListener(a.sP.BUTTON_PRESSED, l.loginPromptAccepted), l.loginPrompt = null, l.resumeThatShit(), l.autoSaveTimer = new n.B7(l.autoSaveInterval, 0), l.autoSaveTimer.addEventListener(n.pH.TIMER, l.timerHandler), l.autoSaveTimer.start();
                    }, l.toolSelected = function (e) {
                        switch (l.toolBar.currentSelection) {
                            case a.uL.ARROW:
                                l.currentTool = l.arrowTool;
                                break;
                            case a.uL.SHAPE:
                                l.currentTool = l.shapeTool;
                                break;
                            case a.uL.POLYGON:
                                l.currentTool = l.polygonTool;
                                break;
                            case a.uL.JOINT:
                                l.currentTool = l.jointTool;
                                break;
                            case a.uL.SPECIAL:
                                l.currentTool = l.specialTool;
                                break;
                            case a.uL.TEXT:
                                l.currentTool = l.textTool;
                                break;
                            case a.uL.TRIGGER:
                                l.currentTool = l.triggerTool;
                                break;
                            case a.uL.ART:
                                l.currentTool = l.artTool;
                                break;
                            default:
                                throw new Error("uhh what");
                        }
                    }, l.actionHandler = function (e) {
                        e.action && (e.action.resetTested && (l.topMenu.levelTested = false), l.actionRecorder.pushAction(e.action), l.currentTool == l.arrowTool && l.arrowTool.resetActionVars(e.type), l.autoSaveTimer && (l.autoSaveTimer.running || l.arrowTool.currentCanvas instanceof o.n || l.arrowTool.vertEditOpen() || (c.Z.sharedObject.data.editorLevelData = l.saverLoader.createXML().toXMLString(), l.autoSaveTimer.start())));
                    }, l.undoHandler = function (e) {
                        l.currentTool == l.arrowTool && (l.arrowTool.killTriggerSelector(), l.arrowTool.closePoser(), l.arrowTool.resetActionVars(a.VX.GENERIC), l.arrowTool.setInputs(), l.canvas.relabelTriggers()), l.cullObjects(true);
                    }, l.redoHandler = function (e) {
                        l.currentTool == l.arrowTool && (l.arrowTool.killTriggerSelector(), l.arrowTool.closePoser(), l.arrowTool.resetActionVars(a.VX.GENERIC), l.arrowTool.setInputs(), l.canvas.relabelTriggers()), l.cullObjects(true);
                    }, l.textPlaced = function (e) {
                        var t = e.action.refSprite;
                        l.toolBar.pressButton(a.uL.ARROW), l.arrowTool.editSelectText(t);
                    }, l.triggerPlaced = function (e) {
                        var t = e.action.refSprite;
                        1 == t.typeIndex && (l.toolBar.pressButton(a.uL.ARROW), l.arrowTool.beginTriggerSelector(t));
                    }, l.mouseDownHandler = function (e) {
                        if (l.handNav) return l.currMouseX = l.mouseX, l.currMouseY = l.mouseY, void l.stage.addEventListener(n.TF.MOUSE_MOVE, l.stageDrag);
                    }, l.mouseUpHandler = function (e) {
                        l.handNav && l.stage.removeEventListener(n.TF.MOUSE_MOVE, l.stageDrag), l.cullObjects();
                    }, l.mouseWheelHandler = function (e) {
                        if (e.shiftKey && !c.Z.currentlyColorDropperOpen) {
                            var t = e.delta < 0 ? -1 : 1;
                            l.zoom(.25 * t, l.canvasHolder.mouseX, l.canvasHolder.mouseY);
                        }
                    }, l.keyDownHandler = function (e) {
                        if (!(e.target instanceof n.nv || c.Z.currentlyColorDropperOpen)) {
                            switch (e.keyCode) {
                                case 49:
                                    l.toolBar.pressButton(a.uL.ARROW);
                                    break;
                                case 50:
                                    l.toolBar.pressButton(a.uL.SHAPE);
                                    break;
                                case 51:
                                    l.toolBar.pressButton(a.uL.POLYGON);
                                    break;
                                case 52:
                                    l.toolBar.pressButton(a.uL.ART);
                                    break;
                                case 53:
                                    l.toolBar.pressButton(a.uL.JOINT);
                                    break;
                                case 54:
                                    l.toolBar.pressButton(a.uL.SPECIAL);
                                    break;
                                case 55:
                                    l.toolBar.pressButton(a.uL.TEXT);
                                    break;
                                case 56:
                                    l.toolBar.pressButton(a.uL.TRIGGER);
                                    break;
                                case 32:
                                    l.startHandNav();
                                    break;
                                case 84:
                                    l.testLevel();
                                    break;
                                case 73:
                                    for (var t in l.actionRecorder.dictionary);
                                    break;
                                case 189:
                                case 173:
                                    l.zoom(-1, l.canvasHolder.mouseX, l.canvasHolder.mouseY);
                                    break;
                                case 61:
                                case 171:
                                case 187:
                                    l.zoom(1, l.canvasHolder.mouseX, l.canvasHolder.mouseY);
                                    break;
                                case 90:
                                    e.ctrlKey && l.actionRecorder.undo();
                                    break;
                                case 89:
                                    e.ctrlKey && l.actionRecorder.redo();
                            }
                            e.stopPropagation();
                        }
                    }, l.keyUpHandler = function (e) {
                        e.target instanceof n.nv || 32 !== e.keyCode || l.endHandNav();
                    }, l.followCursor = function (e) {
                        l.handCursor.x = l.mouseX, l.handCursor.y = l.mouseY;
                    }, l.stageDrag = function (e) {
                        var t = l.mouseX - l.currMouseX, i = l.mouseY - l.currMouseY;
                        l.canvasHolder.x += t, l.canvasHolder.y += i, l.currMouseX = l.mouseX, l.currMouseY = l.mouseY, l.canvasHolder.x + o.X.canvasWidth * l.canvasHolder.scaleX < 900 - l.maxBorderX && (l.canvasHolder.x = 900 - l.maxBorderX - o.X.canvasWidth * l.canvasHolder.scaleX), l.canvasHolder.y + o.X.canvasHeight * l.canvasHolder.scaleY < 500 - l.maxBorderY && (l.canvasHolder.y = 500 - l.maxBorderY - o.X.canvasHeight * l.canvasHolder.scaleY), l.canvasHolder.x > l.maxBorderX && (l.canvasHolder.x = l.maxBorderX), l.canvasHolder.y > l.maxBorderY && (l.canvasHolder.y = l.maxBorderY), l.horizontalScroller.updateScrollTab(), l.verticalScroller.updateScrollTab(), l.cullObjects();
                    }, l.putShitOnHold = function (e) {
                        void 0 === e && (e = null), l.paused || (l.paused = true, l._currentTool && l._currentTool.deactivate(), l.removeListeners(), l.resetResolution());
                    }, l.resumeThatShit = function (e) {
                        void 0 === e && (e = null), l.paused && (l.paused = false, l.addListeners(), l._currentTool && l._currentTool.activate(), l.topMenu.visible = true, l.cullObjects(true), l.updateZoomResolution());
                    }, l.testLevel = function (e) {
                        if (void 0 === e && (e = null), !l.canvas.tooManyShapes && !l.canvas.tooMuchArt && null == l.abusiveTextPrompt) {
                            var t = false, i = l.saverLoader.createXML();
                            if (i.specials) for (var s = i.specials[0].sp, r = 0; r < s.length; r++) {
                                var o = s[r];
                                if (16 == o["@t"]) {
                                    var n = o.child("p7")[0].cdata;
                                    void 0 !== n && l.checkForAbusiveText(n) && (t = true);
                                }
                            }
                            if (t) {
                                l.abusiveTextPrompt = new a.sP(l.abusivePromptText, "ok"), l.abusiveTextPrompt.addEventListener(a.sP.BUTTON_PRESSED, l.abusiveTextPromptAccepted);
                                var h = l.abusiveTextPrompt.window;
                                return l.addChild(h), void h.center();
                            }
                            l.toolBar.pressButton(a.uL.ARROW), l.canvasHolder.numChildren > 1 ? c.Z.debugText.text = "exit group before testing level" : (c.Z.currentlyInEditor = false, l.putShitOnHold(), c.Z.levelIndex = 2, c.Z.characterIndex = l.canvas.startPlaceHolder.characterIndex, c.Z.hideVehicle = l.canvas.startPlaceHolder.hideVehicle, c.Z.stageSprite = l.stage, c.Z.debugText.text = "press 'T' again to end the test run", l.topMenu.visible = false, l.flags = null, l.flagHolder && (l.canvas.removeChild(l.flagHolder), l.flagHolder = null), a.xx.instance.hide(), l.characterData = (0, p.pI)(c.Z.characterIndex), setTimeout(function () {
                                l.characterLoaded();
                            }, 1));
                        }
                    }, l.abusiveTextPromptAccepted = function (e) {
                        l.abusiveTextPrompt.removeEventListener(a.sP.BUTTON_PRESSED, l.loginPromptAccepted), l.abusiveTextPrompt = null;
                    }, l.keyDownSessionHandler = function (e) {
                        switch (e.keyCode) {
                            case 84:
                                l.endLevelTest();
                                break;
                            case 70:
                                l.flagCharacterPosition();
                        }
                    }, l.shapeLimitStatus = function (e) {
                        l.canvas.tooManyShapes ? c.Z.debugText.text = "You've reached the shape limit.  Delete some objects." : c.Z.debugText.text = "";
                    }, l.artLimitStatus = function (e) {
                        l.canvas.tooMuchArt ? c.Z.debugText.text = "You've reached the art limit.  Delete some art objects." : c.Z.debugText.text = "";
                    }, l.exitToMainMenu = function (e) {
                        l.resetResolution(), p.fX.trackEvent(p.fX.EDITOR, p.fX.GOTO_MAIN_MENU), c.Z.debugText.text = "", l.dispatchEvent(new h.z4(h.z4.MAIN_MENU));
                    }, l.clearStage = function (e) {
                        void 0 === e && (e = null);
                        for (var i = l.canvas.shapes.numChildren; i > 0; i--) l.canvas.shapes.getChildAt(i - 1).deleteSelf(l.canvas);
                        for (var s = l.canvas.special.numChildren; s > 0; s--) l.canvas.special.getChildAt(s - 1).deleteSelf(l.canvas);
                        for (var r = l.canvas.groups.numChildren; r > 0; r--) l.canvas.groups.getChildAt(r - 1).deleteSelf(l.canvas);
                        for (var n = l.canvas.joints.numChildren; n > 0; n--) l.canvas.joints.getChildAt(n - 1).deleteSelf(l.canvas);
                        for (var a = l.canvas.triggers.numChildren; a > 0; a--) l.canvas.triggers.getChildAt(a - 1).deleteSelf(l.canvas);
                        l.canvas.startPlaceHolder.x = 300, l.canvas.startPlaceHolder.y = 100 + o.X.canvasHeight / 2, t.currentZoom = 0, l.canvasHolder.scaleX = l.canvasHolder.scaleY = 1, l.canvasHolder.x = 0, l.canvasHolder.y = -o.X.canvasHeight / 2, l.horizontalScroller.updateScrollTab(), l.verticalScroller.updateScrollTab(), l.actionRecorder.clearActions(), delete c.Z.sharedObject.data.editorLevelData;
                    }, l.updateCopiedVerts = function (e) {
                        void 0 === e && (e = null), l.arrowTool.updateCopiedVerts();
                    }, l.timerHandler = function (e) {
                        l.autoSaveTimer.stop();
                    }, l.cull = function (e, t, i) {
                        void 0 === i && (i = false), e._pixiSprite.renderable = l.overlapsEditorView(e, t, i);
                    }, l.debug = s, l.testingMode = r, c.Z.useDebug && c.Z.debugOptions.cullEditor && (l.cullingEnabled = true), c.Z.useDebug && c.Z.debugOptions.logCulled && (l.logCull = true), i ? (l.intitialLevel = 1, l.startLevelId = i.id, l.startAuthorId = i.author_id) : c.Z.sharedObject && null != c.Z.sharedObject.data.editorLevelData && (l.intitialLevel = 2), l.parent && l.init(), l;
                }
                y(t, e);
                var i, r, v, _, w = t.prototype;
                return w.init = (v = m().mark(function e() {
                    var i, s, r = this;
                    return m().wrap(function (e) {
                        for (var h, l, d; ;) switch (e.prev = e.next) {
                            case 0:
                                if (t.currentZoom = 0, this.bg = new n.jy, this.bg.graphics.beginFill(3770313), this.bg.graphics.drawRect(0, 0, 2e3, 2e3), this.addChild(this.bg), (this.canvas = new o.X, this.canvasHolder = new n.jy, this.canvasHolder.addChild(this.canvas), this.addChild(this.canvasHolder), this.canvas.createTextField(this), this.canvasHolder.y = -o.X.canvasHeight / 2, this.canvas.addEventListener(o.X.SHAPE_LIMIT_STATUS, this.shapeLimitStatus), this.canvas.addEventListener(o.X.ART_LIMIT_STATUS, this.artLimitStatus)), this.actionRecorder = new a.Gs, this.horizontalScroller = new a.CO(this, this.canvasHolder, this.maxBorderX), this.addChild(this.horizontalScroller), this.horizontalScroller.x = 200, this.horizontalScroller.y = 490, this.verticalScroller = new a.h_(this, this.canvasHolder, this.maxBorderY), this.addChild(this.verticalScroller), this.verticalScroller.x = 890, this.verticalScroller.y = 115, this.arrowTool = new a.eD(this, this.canvas), this.shapeTool = new a.eJ(this, this.canvas), this.polygonTool = new a.Cm(this, this.canvas), this.jointTool = new a.JK(this, this.canvas), this.specialTool = new a.KV(this, this.canvas), this.textTool = new a.ym(this, this.canvas), this.triggerTool = new a.lu(this, this.canvas), this.artTool = new a.Iy(this, this.canvas), this.helpWindow = new a.Sb, this.helpWindow.window.x = 900 - (this.helpWindow.window.width + 20), this.helpWindow.window.y = 10, this.addChild(this.helpWindow.window), this.helpWindow.populate("<u><b>HELLO</b></u><br><br>This is the level editor, where you can accomplish all of your lifelong goals.  Build levels and save them to your profile.  Make them public for everyone else to play and rate.  The best levels will be showcased in the featured level menu.<br><br>Start by selecting a tool to the left.  Press '<b>t</b>' at any time to test your level.  Press again to resume editing."), this.toolBar = new a.uL, this.toolBar.x = 10, this.toolBar.y = 30, this.addChild(this.toolBar), this.topMenu = new a.Ff, this.addChild(this.topMenu), this.topMenu.init(), this.topMenu.addEventListener(a.Ff.MENU_BUSY, this.putShitOnHold), this.topMenu.addEventListener(a.Ff.MENU_IDLE, this.resumeThatShit), this.topMenu.addEventListener(a.Ff.TEST_LEVEL, this.testLevel), this.topMenu.addEventListener(a.Ff.CLEAR_STAGE, this.clearStage), this.topMenu.addEventListener(a.Ff.GO_MAIN_MENU, this.exitToMainMenu), this.topMenu.addEventListener(a.Ff.CHANGE_ARM_DRAW_STATE, function () {
                                    /*
                                        #checkpoint
                                        another hidden location check removed
                                        this time using atob
                                    */
                                    return r.redrawTriggersAndJoints();
                                }), this.addListeners(), this.toolBar.init(), this.currentTool = this.arrowTool, this.saverLoader = new a.bz(this.canvas), this.saverLoader.addEventListener(a.bz.CLEAR_STAGE, this.clearStage), this.saverLoader.addEventListener(a.bz.UPDATE_COPIED_VERTS, this.updateCopiedVerts), this.testingMode && this.initTestingMode(), 1 == this.intitialLevel ? (this.clearStage(), this.topMenu.importLevel(this.startLevelId, this.startAuthorId)) : 2 == this.intitialLevel && this.saverLoader.importLevelData(new n.hH(c.Z.sharedObject.data.editorLevelData)), !(c.Z.user_id <= 0)) {
                                    e.next = 59;
                                    break;
                                }
                                return this.putShitOnHold(), this.loginPrompt = new a.sP("You are not currently logged in.  Login or register for free above to save and share your creations with others who might possibly care.", "ok"), i = this.loginPrompt.window, this.addChild(i), i.center(), this.loginPrompt.addEventListener(a.sP.BUTTON_PRESSED, this.loginPromptAccepted), e.abrupt("return");
                            case 59:
                                if (!c.Z.disableUpload) {
                                    e.next = 67;
                                    break;
                                }
                                return this.putShitOnHold(), this.loginPrompt = new a.sP(c.Z.disableMessage, "OH FINE"), s = this.loginPrompt.window, this.addChild(s), s.center(), this.loginPrompt.addEventListener(a.sP.BUTTON_PRESSED, this.loginPromptAccepted), e.abrupt("return");
                            case 67:
                                this.autoSaveTimer = new n.B7(this.autoSaveInterval, 0), this.autoSaveTimer.addEventListener(n.pH.TIMER, this.timerHandler), this.autoSaveTimer.start(), this.cullObjects(true);
                            case 71:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                }), _ = function () {
                    var e = this, t = arguments;
                    return new Promise(function (i, s) {
                        var r = v.apply(e, t);
                        function o(e) {
                            f(r, i, s, o, n, "next", e);
                        }
                        function n(e) {
                            f(r, i, s, o, n, "throw", e);
                        }
                        o(void 0);
                    });
                }, function () {
                    return _.apply(this, arguments);
                }), w.redrawTriggersAndJoints = function () {
                    this.canvas && (this.canvas.redrawTriggers(), this.canvas.redrawJoints());
                }, w.addListeners = function () {
                    this.actionRecorder.addEventListener(a.Gs.UNDO, this.undoHandler), this.actionRecorder.addEventListener(a.Gs.REDO, this.redoHandler), this.toolBar.addEventListener(a.uL.TOOL_SELECTED, this.toolSelected), this.addEventListener(n.TF.MOUSE_DOWN, this.mouseDownHandler), this.addEventListener(n.TF.MOUSE_UP, this.mouseUpHandler), this.canvasHolder.addEventListener(n.TF.MOUSE_WHEEL, this.mouseWheelHandler), this.bg.addEventListener(n.TF.MOUSE_WHEEL, this.mouseWheelHandler), this.stage.addEventListener(n._d.KEY_DOWN, this.keyDownHandler), this.stage.addEventListener(n._d.KEY_UP, this.keyUpHandler), this.shapeTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.polygonTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.artTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.jointTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.specialTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.textTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.textTool.addEventListener(a.VX.GENERIC, this.textPlaced), this.triggerTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.triggerTool.addEventListener(a.VX.GENERIC, this.triggerPlaced), this.arrowTool.addEventListener(a.VX.GENERIC, this.actionHandler), this.arrowTool.addEventListener(a.VX.SCALE, this.actionHandler), this.arrowTool.addEventListener(a.VX.TRANSLATE, this.actionHandler), this.arrowTool.addEventListener(a.VX.ROTATE, this.actionHandler), this.arrowTool.addEventListener(a.VX.DEPTH, this.actionHandler);
                }, w.removeListeners = function () {
                    this.actionRecorder.removeEventListener(a.Gs.UNDO, this.undoHandler), this.actionRecorder.removeEventListener(a.Gs.REDO, this.redoHandler), this.toolBar.removeEventListener(a.uL.TOOL_SELECTED, this.toolSelected), this.removeEventListener(n.TF.MOUSE_DOWN, this.mouseDownHandler), this.removeEventListener(n.TF.MOUSE_UP, this.mouseUpHandler), this.canvasHolder.removeEventListener(n.TF.MOUSE_WHEEL, this.mouseWheelHandler), this.bg.removeEventListener(n.TF.MOUSE_WHEEL, this.mouseWheelHandler), this.stage.removeEventListener(n._d.KEY_DOWN, this.keyDownHandler), this.stage.removeEventListener(n._d.KEY_UP, this.keyUpHandler), this.shapeTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.polygonTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.artTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.jointTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.specialTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.textTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.textTool.removeEventListener(a.VX.GENERIC, this.textPlaced), this.triggerTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.triggerTool.removeEventListener(a.VX.GENERIC, this.triggerPlaced), this.arrowTool.removeEventListener(a.VX.GENERIC, this.actionHandler), this.arrowTool.removeEventListener(a.VX.SCALE, this.actionHandler), this.arrowTool.removeEventListener(a.VX.TRANSLATE, this.actionHandler), this.arrowTool.removeEventListener(a.VX.ROTATE, this.actionHandler), this.arrowTool.removeEventListener(a.VX.DEPTH, this.actionHandler);
                }, w.startHandNav = function () {
                    this.handNav || (this.handNav = true, this.currentTool == this.arrowTool ? this.arrowTool.deactivateKeepSelection() : this.currentTool == this.polygonTool ? this.polygonTool.deactivateContinueDrawing() : this.currentTool == this.artTool ? this.artTool.deactivateContinueDrawing() : this.currentTool && this.currentTool.deactivate(), this.handCursor = new g, this.handCursor.x = this.mouseX, this.handCursor.y = this.mouseY, this.handCursor.mouseEnabled = this.handCursor.mouseChildren = false, this.addChild(this.handCursor), n.TK.hide(), this.stage.removeEventListener(n._d.KEY_DOWN, this.keyDownHandler), this.stage.addEventListener(n.TF.MOUSE_MOVE, this.followCursor));
                }, w.endHandNav = function () {
                    this.handNav && (this.handNav = false, this.removeChild(this.handCursor), this.handCursor = null, this.currentTool == this.polygonTool ? this.polygonTool.activateContinueDrawing() : this.currentTool == this.artTool ? this.artTool.activateContinueDrawing() : this.currentTool && this.currentTool.activate(), n.TK.show(), this.stage.removeEventListener(n.TF.MOUSE_MOVE, this.stageDrag), this.stage.removeEventListener(n.TF.MOUSE_MOVE, this.followCursor), this.stage.addEventListener(n._d.KEY_DOWN, this.keyDownHandler));
                }, w.zoom = function (e, i, s) {
                    t.currentZoom += e, t.currentZoom < this.minZoom && (t.currentZoom = this.minZoom), t.currentZoom > this.maxZoom && (t.currentZoom = this.maxZoom), this.canvasHolder.scaleX = this.canvasHolder.scaleY = Math.pow(2, t.currentZoom);
                    var r = this.canvasHolder.x + i * this.canvasHolder.scaleX, n = this.canvasHolder.y + s * this.canvasHolder.scaleY;
                    this.canvasHolder.x += 450 - r, this.canvasHolder.y += 250 - n, this.canvasHolder.x + o.X.canvasWidth * this.canvasHolder.scaleX < 900 - this.maxBorderX && (this.canvasHolder.x = 900 - this.maxBorderX - o.X.canvasWidth * this.canvasHolder.scaleX), this.canvasHolder.y + o.X.canvasHeight * this.canvasHolder.scaleY < 500 - this.maxBorderY && (this.canvasHolder.y = 500 - this.maxBorderY - o.X.canvasHeight * this.canvasHolder.scaleY), this.canvasHolder.x > this.maxBorderX && (this.canvasHolder.x = this.maxBorderX), this.canvasHolder.y > this.maxBorderY && (this.canvasHolder.y = this.maxBorderY);
                    for (var a = [this.arrowTool, this.artTool, this.polygonTool], h = 0; h < a.length; h++) a[h].initialised && a[h].resizeElements();
                    this.horizontalScroller.updateScrollTab(), this.verticalScroller.updateScrollTab(), this.updateZoomResolution(), this.cullObjects();
                }, w.updateZoomResolution = function () {
                    var e = window.HW_SETTINGS.resolutionZoomIncreaseRatio;
                    if (e) {
                        var i = s.settings.RESOLUTION + t.currentZoom * e;
                        this.setResolution(i);
                    }
                }, w.resetResolution = function () {
                    this.setResolution(s.settings.RESOLUTION);
                }, w.setResolution = function (e) {
                    var t = Math.max(e || s.settings.RESOLUTION, s.settings.RESOLUTION);
                    this.stage.renderer.resolution = t, this.stage.renderer.plugins.interaction.resolution = t, this.stage.renderer.resize(900, 500);
                }, w.characterLoaded = function () {
                    this.dispatchEvent(new n.ju(n.ju.COMPLETE));
                    var e = this.saverLoader.createXML(), t = new l.Gu(-1, -1);
                    t.levelXML = e;
                    var i = t.buildLevelSourceObject();
                    c.Z.currentSession = this.session = new l.z_(c.Z.CURRENT_VERSION, this.characterData, i, c.Z.CURRENT_VERSION, c.Z.editorDebugDraw), this.addChild(this.session), this.session.create(), this.topMenu.levelTested = true, this.removeChild(this.canvasHolder), this.stage.addEventListener(n._d.KEY_DOWN, this.keyDownSessionHandler), this.cullObjects(true);
                }, w.checkForAbusiveText = function (e) {
                    for (var t = false, i = (e = e.toLowerCase()).replace(/ /g, ""), s = 0; s < this.abusiveStrings.length; s++) i.indexOf(this.abusiveStrings[s]) > -1 && (t = true);
                    return t;
                }, w.flagCharacterPosition = function () {
                    if (this.flags || (this.flags = []), !(this.flags.length > 99)) {
                        var e = this.session.character.cameraFocus.GetPosition();
                        this.flags.push(new u._m(e.x, e.y)), d.i.instance.playSoundItem("Ping");
                    }
                }, w.addFlags = function () {
                    this.flagHolder = new n.jy, this.canvas.addChild(this.flagHolder);
                    for (var e = 0; e < this.flags.length; e++) {
                        var t = this.flags[e], i = new S;
                        i.buttonMode = false, i.mouseEnabled = false, i.x = t.x * this.session.m_physScale, i.y = t.y * this.session.m_physScale, this.flagHolder.addChild(i);
                    }
                }, w.endLevelTest = function () {
                    c.Z.currentlyInEditor = true, this.stage.removeEventListener(n._d.KEY_DOWN, this.keyDownSessionHandler), this.session.die(true), this.removeChild(this.session), this.addChildAt(this.canvasHolder, 0), this.addChildAt(this.bg, 0), this.stage.focus = this.stage, this.flags && this.addFlags(), this.session = null, c.Z.currentSession = null, c.Z.debugText.text = "", this.resumeThatShit();
                }, w.die = function () {
                    this.resetResolution(), this.removeListeners(), this.canvas.removeEventListener(o.X.SHAPE_LIMIT_STATUS, this.shapeLimitStatus), this.canvas.removeEventListener(o.X.ART_LIMIT_STATUS, this.artLimitStatus), this.topMenu.removeEventListener(a.Ff.MENU_BUSY, this.putShitOnHold), this.topMenu.removeEventListener(a.Ff.MENU_IDLE, this.resumeThatShit), this.topMenu.removeEventListener(a.Ff.TEST_LEVEL, this.testLevel), this.topMenu.removeEventListener(a.Ff.CLEAR_STAGE, this.clearStage), this.topMenu.removeEventListener(a.Ff.GO_MAIN_MENU, this.exitToMainMenu), this.topMenu.die(), this.helpWindow.die(), this.toolBar.die(), this.horizontalScroller.die(), this.verticalScroller.die(), this.actionRecorder.die(), this.saverLoader.die(), this.saverLoader.removeEventListener(a.bz.CLEAR_STAGE, this.clearStage), this.saverLoader.removeEventListener(a.bz.UPDATE_COPIED_VERTS, this.updateCopiedVerts), this.saverLoader = null, this.arrowTool.die(), this.shapeTool.die(), this.polygonTool.die(), this.jointTool.die(), this.specialTool.die(), this.textTool.die(), this.triggerTool.die(), this.artTool.die(), this.autoSaveTimer && (this.autoSaveTimer.stop(), this.autoSaveTimer.removeEventListener(n.pH.TIMER, this.timerHandler)), delete c.Z.sharedObject.data.editorLevelData;
                }, w.initTestingMode = function () {
                    var e = this;
                    this.topMenu.saveButton.addEventListener(n.TF.CLICK, function () {
                        return e.saveLevelFile();
                    }), this.topMenu.loadButton.addEventListener(n.TF.CLICK, function () {
                        return e.loadLevelFile();
                    }), this.loadLevelFromLocalStorage();
                }, w.loadLevelFromLocalStorage = function () {
                    var e = n.hc.getLocal("editorLevel135").data.editorLevelData;
                    e && this.saverLoader.buildLevel(e);
                }, w.saveLevelOnLocalStorage = function (e) {
                    e || (e = this.saverLoader.createXML().toString()), n.hc.getLocal("editorLevel135").data.editorLevelData = e;
                }, w.saveLevelFile = function () {
                    var e = this.saverLoader.createXML().toString();
                    this.saveLevelOnLocalStorage(e), this.download(e, "level.xml");
                }, w.download = function (e, t) {
                    var i = document.createElement("a"), s = new Blob([e], { type: "text/xml" });
                    i.href = URL.createObjectURL(s), i.download = t, i.click();
                }, w.loadLevelFile = function () {
                    var e = this, t = document.createElement("input");
                    t.type = "file", t.name = "files[]", t.accept = "text/xml", t.style.display = "none", t.addEventListener("change", function (i) {
                        var s = Math.floor(Math.random() * e.loadXMLMessages.length);
                        e.loadContainer.setText(e.loadXMLMessages[s]), e.loadContainer.show(function () {
                            e.clearStage();
                            var s = i.target.files[0], r = new FileReader;
                            r.onload = function (t) {
                                e.saverLoader.buildLevel(t.target.result), e.loadContainer.hide();
                            }, r.onerror = function (t) {
                                e.loadContainer.hide();
                            }, r.readAsText(s), document.body.removeChild(t);
                        });
                    }, false), document.body.appendChild(t), setTimeout(function () {
                        return t.click();
                    }), this.cullObjects(true);
                }, w.cullObjects = function (e) {
                    var t, i = this;
                    if (void 0 === e && (e = false), this.cullingEnabled) {
                        var s = this.getViewport();
                        null === (t = this.canvas.children) || void 0 === t || t.forEach(function (t) {
                            "shapes" !== t.name && "special" !== t.name && "groups" !== t.name && "joints" !== t.name && "triggers" !== t.name && "char" !== t.name || t.children.forEach(function (t) {
                                return i.cull(t, s, e);
                            });
                        }), this.logCull && this.logCulled();
                    }
                }, w.overlapsEditorView = function (e, t, i) {
                    if (void 0 === i && (i = false), e.excludeFromCulling) return true;
                    var s = e.getCullBounds(i), r = s.radius, o = s.x, n = s.y;
                    return !(t.x > o + r || t.x + t.width < o - r || t.y > n + r || t.y + t.height < n - r);
                }, w.logCulled = function () {
                    var e, t = [], i = [];
                    null === (e = this.canvas.children) || void 0 === e || e.forEach(function (e) {
                        return e.children.forEach(function (e) {
                            e._pixiSprite.renderable ? t.push(e) : i.push(e);
                        });
                    });
                }, w.getViewport = function () {
                    var e = this.canvas.width / this.canvasHolder.width, t = -this.canvasHolder.x * e, i = -this.canvasHolder.y * e, s = 500 / (this.canvasHolder.scaleY * o.X.canvasHeight), r = this.canvas.width * s, a = this.canvas.height * s;
                    return new n.Ae(t, i, r, a);
                }, i = t, (r = [{
                    key: "currentTool", get: function () {
                        return this._currentTool;
                    }, set: function (e) {
                        if (this._currentTool) {
                            if (this._currentTool == e) return;
                            this._currentTool.deactivate();
                        }
                        this._currentTool = e, this._currentTool.activate();
                    }
                }, {
                    key: "staticCurrentZoom", get: function () {
                        return t.currentZoom;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(i.prototype, r), Object.defineProperty(i, "prototype", { writable: false }), t;
            }(n.jy);
            _.currentZoom = 0;
        }, 321: (e, t, i) => {
            "use strict";
            i.d(t, { S: () => a }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(22);
            function o(e, t) {
                for (var i, s = 0; s < t.length; s++) {
                    var r = t[s];
                    r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                        if ("object" != typeof e || null === e) return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 !== i) {
                            var s = i.call(e, "string");
                            if ("object" != typeof s) return s;
                            throw new TypeError("@@toPrimitive must return a primitive value.");
                        }
                        return String(e);
                    }(r.key)) ? i : String(i), r);
                }
            }
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function a() {
                    var t;
                    if ((t = e.call(this) || this).windowWidth = 200, t.windowHeight = 155, t.windowClosed = function (e) {
                        a.windowX = t._window.x, a.windowY = t._window.y, t._window.removeEventListener(r.Rz.WINDOW_CLOSED, t.windowClosed), t._window = null, t.dispatchEvent(new s.ju(r.Rz.WINDOW_CLOSED));
                    }, a._instance) throw new Error("help window already exists");
                    return a._instance = function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(t), t.init(), t;
                }
                i = e, (t = a).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var h, l, c, d = a.prototype;
                return d.init = function () {
                    this.createWindow(), this.createShit();
                }, d.createWindow = function () {
                    this._window = new r.Rz(true, this), this._window.setDimensions(this.windowWidth, this.windowHeight), a.windowX && (this._window.x = a.windowX, this._window.y = a.windowY), this._window.addEventListener(r.Rz.WINDOW_CLOSED, this.windowClosed);
                }, d.closeWindow = function () {
                    a.windowX = this._window.x, a.windowY = this._window.y, this._window.removeEventListener(r.Rz.WINDOW_CLOSED, this.windowClosed), this._window.closeWindow(), this._window = null;
                }, d.createShit = function () {
                    this.graphics.beginFill(16777215), this.graphics.drawRect(0, 0, this.windowWidth, this.windowHeight), this.graphics.endFill();
                    var e = new s.SQ("HelveticaNeueLT Std", 12, 0, null, null, null, null, null, s.O3.LEFT);
                    this.textField = new s.nv, this.textField.defaultTextFormat = e, this.textField.width = this.windowWidth - 12, this.textField.height = 20, this.textField.x = 0, this.textField.y = 0, this.textField.multiline = true, this.textField.autoSize = s.ie.LEFT, this.textField.wordWrap = true, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = s.ML.ADVANCED, this.holder = new s.jy, this.addChild(this.holder), this.holder.addChild(this.textField), this.maskSprite = new s.jy, this.maskSprite.graphics.beginFill(0), this.maskSprite.graphics.drawRect(0, 0, this.windowWidth - 12, this.windowHeight), this.maskSprite.graphics.endFill(), this.addChild(this.maskSprite), this.holder.mask = this.maskSprite, this.scroller = new r._P(this.holder, this.maskSprite, 22), this.addChild(this.scroller), this.scroller.x = this.windowWidth - 12;
                }, d.populate = function (e) {
                    this.textField.renderHtml(e), this.holder.y = 0, this.scroller.updateScrollTab();
                }, d.die = function () {
                    a._instance = null, this.scroller.die(), this._window && this._window.closeWindow();
                }, h = a, c = [{
                    key: "instance", get: function () {
                        return this._instance;
                    }
                }], (l = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }]) && o(h.prototype, l), c && o(h, c), Object.defineProperty(h, "prototype", { writable: false }), a;
            }(s.jy);
        }, 320: (e, t, i) => {
            "use strict";
            i.d(t, { x: () => n }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6);
            function r(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function o(e, t) {
                return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var n = function (e) {
                var t, i;
                function n() {
                    var t;
                    if ((t = e.call(this) || this).wMax = 350, t.delayDefault = 10, t._counter = 0, t.rollOutTargetBind = t.rollOutTarget.bind(r(t)), t.followMouseBind = t.followMouse.bind(r(t)), t.resetCounterBind = t.resetCounter.bind(r(t)), n._instance) throw new Error("mouse helper already exists");
                    return n._instance = r(t), t.init(), t;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, o(t, i);
                var a, h, l = n.prototype;
                return l.init = function () {
                    this.visible = false, this.mouseEnabled = false, this.mouseChildren = false;
                    var e = new s.SQ("HelveticaNeueLT Std Med", 10, 6710886, null, null, null, null, null, s.O3.JUSTIFY);
                    this.textField = new s.nv, this.textField.defaultTextFormat = e, this.textField.wordWrap = true, this.textField.width = 20, this.textField.height = 20, this.textField.x = 3, this.textField.y = 2, this.textField.multiline = true, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = s.ML.ADVANCED, this.bg = new s.jy, this.addChild(this.bg), this.addChild(this.textField);
                }, l.drawBg = function () {
                    this.bg.graphics.clear(), this.bg.graphics.beginFill(16776805, 1), this.bg.graphics.drawRect(0, 0, Math.ceil(this.textField.width) + 8, Math.ceil(this.textField.height) + 4), this.bg.graphics.endFill();
                }, l.show = function (e, t, i) {
                    void 0 === i && (i = this.delayDefault), this.textField.htmlText = e, this.textField.width = 10, this.textField.autoSize = s.ie.LEFT, this.textField.wordWrap = false, this.textField.width > this.wMax && (this.textField.wordWrap = true, this.textField.width = this.wMax), this.drawBg(), this._target && this._target.removeEventListener(s.TF.ROLL_OUT, this.rollOutTargetBind), this._target = t, this._delay = i, this.stage && this.stage.addChild(this), this.followMouse(), this.addEventListener(s.ju.ENTER_FRAME, this.followMouseBind), this._target.addEventListener(s.TF.ROLL_OUT, this.rollOutTargetBind), this.removeEventListener(s.ju.ENTER_FRAME, this.resetCounterBind);
                }, l.hide = function () {
                    this.visible = false, this._resetCounter = 0, this.removeEventListener(s.ju.ENTER_FRAME, this.followMouseBind), this._target && (this._target.removeEventListener(s.TF.ROLL_OUT, this.rollOutTargetBind), this._target = null), this.addEventListener(s.ju.ENTER_FRAME, this.resetCounterBind);
                }, l.followMouse = function (e) {
                    void 0 === e && (e = null), this.visible || (this._counter >= this._delay && (this.visible = true), this._counter += 1), this.x = this.parent.mouseX + 20, this.y = this.parent.mouseY + 10, this.y + this.height > 500 && (this.y = Math.max(500 - this.height)), this.x + this.width > 900 && (this.x = Math.max(900 - this.width));
                }, l.resetCounter = function (e) {
                    this._resetCounter == this._delay && (this._counter = 0, this.removeEventListener(s.ju.ENTER_FRAME, this.resetCounterBind)), this._resetCounter += 1;
                }, l.rollOutTarget = function (e) {
                    this.hide();
                }, l.die = function () {
                    n._instance = null, this.removeEventListener(s.ju.ENTER_FRAME, this.resetCounterBind), this.removeEventListener(s.ju.ENTER_FRAME, this.followMouseBind);
                }, a = n, (h = [{
                    key: "instance", get: function () {
                        return n._instance;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a, h), Object.defineProperty(a, "prototype", { writable: false }), n;
            }(s.jy);
        }, 224: (e, t, i) => {
            "use strict";
            i.d(t, { I: () => a }), i(13), i(29), i(0), i(20), i(18), i(11), i(4), i(5), i(1), i(2), i(3);
            var s = i(6), r = i(133), o = i(25);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function r() {
                    var t;
                    return (t = e.call(this, { _triggers: [], _triggerActions: new Map, _triggerActionList: ["disable motor", "change motor speed", "delete self", "disable limits", "change limits"], _triggerActionListProperties: [null, ["newMotorSpeeds", "motorSpeedTimes"], null, null, ["newUpperAngles", "newLowerAngles"]] }) || this)._speed = 3, t._torque = 50, t._upperAngle = 90, t._lowerAngle = -90, t.maxTorque = 1e5, t.maxSpeed = 20, t.maxAngle = 180, t.name = "pin joint", t.triggerable = true, t._triggerString = "triggerActionsPinJoint", t._keyedPropertyObject[t._triggerString] = t._triggerActions, t.inner = new s.jy((0, o.qX)("EditorUI", "PinJoint")), t.addChild(t.inner), t.forceDirty(), t;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var a, h, l = r.prototype;
                return l.setAttributes = function () {
                    this._attributes = ["x", "y", "limit", "motor", "collideSelf"], this._vehicleAttached && this._attributes.push("vehicleControlled"), this.addTriggerProperties();
                }, l.clone = function () {
                    var e = new r;
                    return e.limit = this.limit, e.upperAngle = this.upperAngle, e.lowerAngle = this.lowerAngle, e.motor = this.motor, e.speed = this.speed, e.torque = this.torque, e.collideSelf = this.collideSelf, e.vehicleControlled = this.vehicleControlled, e.x = this.x, e.y = this.y, this.transferKeyedProperties(e), this.forceDirty(), e;
                }, a = r, (h = [{
                    key: "limit", get: function () {
                        return this._limit;
                    }, set: function (e) {
                        this._limit = e, this.forceDirty();
                    }
                }, {
                    key: "upperAngle", get: function () {
                        return this._upperAngle;
                    }, set: function (e) {
                        e > this.maxAngle && (e = this.maxAngle), e < 0 && (e = 0), this._upperAngle = e, this.forceDirty();
                    }
                }, {
                    key: "lowerAngle", get: function () {
                        return this._lowerAngle;
                    }, set: function (e) {
                        e > 0 && (e = -e), e < -this.maxAngle && (e = -this.maxAngle), this._lowerAngle = e, this.forceDirty();
                    }
                }, {
                    key: "motor", get: function () {
                        return this._motor;
                    }, set: function (e) {
                        this._motor = e, this.forceDirty();
                    }
                }, {
                    key: "speed", get: function () {
                        return this._speed;
                    }, set: function (e) {
                        e > this.maxSpeed && (e = this.maxSpeed), e < -this.maxSpeed && (e = -this.maxSpeed), this._speed = e, this.forceDirty();
                    }
                }, {
                    key: "torque", get: function () {
                        return this._torque;
                    }, set: function (e) {
                        e > this.maxTorque && (e = this.maxTorque), this._torque = e, this.forceDirty();
                    }
                }, {
                    key: "triggerActionsPinJoint", get: function () {
                        return this._triggerActions;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), r;
            }(r.n);
        }, 225: (e, t, i) => {
            "use strict";
            i.d(t, { J: () => l }), i(13), i(29), i(0), i(20), i(18), i(11), i(4), i(5), i(1), i(2), i(3);
            var s = i(6), r = i(24), o = i(133), n = i(25), a = i(15);
            function h(e, t) {
                return (h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var l = function (e) {
                var t, i;
                function o() {
                    var t;
                    return (t = e.call(this, { _triggers: [], _triggerActions: new Map, _triggerActionList: ["disable motor", "change motor speed", "delete self", "disable limits", "change limits"], _triggerActionListProperties: [null, ["newMotorSpeedsPris", "motorSpeedTimes"], null, null, ["newUpperLimits", "newLowerLimits"]] }) || this)._speed = 3, t._force = 50, t._upperLimit = 100, t._lowerLimit = -100, t.maxForce = 1e5, t.maxSpeed = 50, t.maxLimit = 8e3, t.name = "sliding joint", t.triggerable = true, t.rotatable = true, t._triggerString = "triggerActionsPrisJoint", t._keyedPropertyObject[t._triggerString] = t._triggerActions, t.inner = new s.jy((0, n.qX)("EditorUI", "PrisJoint")), t.addChild(t.inner), t.axisAngle = 90, t;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, h(t, i);
                var l, c, d = o.prototype;
                return d.setAttributes = function () {
                    this._attributes = ["x", "y", "axisAngle", "limitPris", "motorPris", "collideSelf"], this._vehicleAttached && this._attributes.push("vehicleControlled"), this.addTriggerProperties(), this.forceDirty();
                }, d.drawArms = function () {
                    if (this.graphics.clear(), (this._selected || !a.Z.editorHideArms || this.forceArmDrawing) && (this.graphics.lineStyle(0, 16737792), this._body1 && (this.graphics.moveTo(0, 0), this.graphics.lineTo(this.body1.x - this.x, this.body1.y - this.y)), this.body2 && (this.graphics.moveTo(0, 0), this.graphics.lineTo(this.body2.x - this.x, this.body2.y - this.y)), this._limit)) {
                        this.graphics.lineStyle(0, 16737792, .7);
                        var e = new r._m(-this._lowerLimit, 0), t = new r._m(-this._upperLimit, 0), i = new r.RA(this.axisAngle * Math.PI / 180);
                        e.MulM(i), t.MulM(i);
                        var s = new r._m(t.x - e.x, t.y - e.y), o = s.Length(), n = new r._m(s.x / o, s.y / o), h = 6, l = 6, c = (o - h) / (h + l), d = Math.ceil(c), p = c / d;
                        h *= p, l *= p, d++;
                        var u = e.x, m = e.y, f = new r._m(-25, 0), y = new r._m(25 + h, 0);
                        (this.axisAngle < -90 || this._axisAngle > 90) && (f.x = y.x, y.x = -25), f.MulM(i), y.MulM(i);
                        for (var v = 0; v < d; v++) (u < f.x || u > y.x) && (this.graphics.moveTo(u, m), this.graphics.lineTo(u + n.x * h, m + n.y * h)), u += n.x * (h + l), m += n.y * (h + l);
                        this.graphics.moveTo(e.x - 10 * n.y, e.y + 10 * n.x), this.graphics.lineTo(e.x + 10 * n.y, e.y - 10 * n.x), this.graphics.moveTo(t.x - 10 * n.y, t.y + 10 * n.x), this.graphics.lineTo(t.x + 10 * n.y, t.y - 10 * n.x);
                    }
                    this._selected && this.drawBoundingBox(), this.forceDirty();
                }, d.clone = function () {
                    var e = new o;
                    return e.axisAngle = this.axisAngle, e.limit = this.limit, e.upperLimit = this.upperLimit, e.lowerLimit = this.lowerLimit, e.motor = this.motor, e.speed = this.speed, e.force = this.force, e.collideSelf = this.collideSelf, e.vehicleControlled = this.vehicleControlled, e.x = this.x, e.y = this.y, this.transferKeyedProperties(e), this.forceDirty(), e;
                }, l = o, (c = [{
                    key: "angle", get: function () {
                        return this.axisAngle;
                    }, set: function (e) {
                        this.axisAngle = e;
                    }
                }, {
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, e ? (this.drawArms(), this.alpha = .8) : (this.clearBoundingBox(), this.alpha = 1, a.Z.editorHideArms && this.graphics.clear());
                    }
                }, {
                    key: "axisAngle", get: function () {
                        return this._axisAngle;
                    }, set: function (e) {
                        e > 180 && (e -= 360), e < -180 && (e += 360), this._axisAngle = e, this.inner.rotation = this._axisAngle, this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "limit", get: function () {
                        return this._limit;
                    }, set: function (e) {
                        this._limit = e, this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "upperLimit", get: function () {
                        return this._upperLimit;
                    }, set: function (e) {
                        e > this.maxLimit && (e = this.maxLimit), e < 0 && (e = 0), this._upperLimit = e, this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "lowerLimit", get: function () {
                        return this._lowerLimit;
                    }, set: function (e) {
                        e > 0 && (e = -e), e < -this.maxLimit && (e = -this.maxLimit), this._lowerLimit = e, this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "motor", get: function () {
                        return this._motor;
                    }, set: function (e) {
                        this._motor = e, this.forceDirty();
                    }
                }, {
                    key: "speed", get: function () {
                        return this._speed;
                    }, set: function (e) {
                        e > this.maxSpeed && (e = this.maxSpeed), e < -this.maxSpeed && (e = -this.maxSpeed), this._speed = e, this.forceDirty();
                    }
                }, {
                    key: "force", get: function () {
                        return this._force;
                    }, set: function (e) {
                        e > this.maxForce && (e = this.maxForce), this._force = e, this.forceDirty();
                    }
                }, {
                    key: "triggerActionsPrisJoint", get: function () {
                        return this._triggerActions;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(l.prototype, c), Object.defineProperty(l, "prototype", { writable: false }), o;
            }(o.n);
        }, 133: (e, t, i) => {
            "use strict";
            i.d(t, { n: () => h }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(22), o = i(124), n = i(15);
            function a(e, t) {
                return (a = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var h = function (e) {
                var t, i;
                function h(t) {
                    var i;
                    return (i = e.call(this, t) || this)._vehicleControlled = true, i.forceArmDrawing = false, i.bodyMoved = function (e) {
                        i.drawArms(), i.forceDirty();
                    }, i.bodySelectionChanged = function (e) {
                        i.forceArmDrawing = Boolean(e.target.selected), i.drawArms(), i.forceDirty();
                    }, i.bodyDeleted = function (e) {
                        if (e.target == i.body1) {
                            if (i._body1.removeEventListener(o.J.COORDINATE_CHANGE, i.bodyMoved), i._body1.removeEventListener(o.J.SELECTION_STATE_CHANGE, i.bodySelectionChanged), i._body1 = null, !i.body2) return void i.deleteSelf(i.parent.parent);
                            i._body1 = i._body2, i._body2 = null;
                        }
                        e.target == i.body2 && (i._body2.removeEventListener(o.J.COORDINATE_CHANGE, i.bodyMoved), i._body2.removeEventListener(o.J.SELECTION_STATE_CHANGE, i.bodySelectionChanged), i._body2 = null), i.drawArms();
                    }, i.rotatable = false, i.scalable = false, i.forceDirty(), i;
                }
                i = e, (t = h).prototype = Object.create(i.prototype), t.prototype.constructor = t, a(t, i);
                var l, c, d = h.prototype;
                return d.hitTestObject = function (e) {
                    return this.inner.hitTestObject(e);
                }, d.identifyBodies = function () {
                    var e, t, i = this.parent.parent, n = i.parent, a = n.localToGlobal(new s.E9(this.x, this.y)), h = n.getObjectsUnderPoint(a);
                    h.reverse();
                    for (var l = 0; l < h.length; l++) {
                        var c = h[l];
                        if (c != i && c != n) {
                            for (; c.parent && c.parent.parent != i;) c = c.parent;
                            if (c instanceof o.J) {
                                var d = c;
                                if (d.joinable) if (e) {
                                    if (d != this._body1) {
                                        this._body2 = d, t = true, this._body2.addEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved, false, 0, true), this._body2.addEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged, false, 0, true), d.addJoint(this);
                                        break;
                                    }
                                } else this._body1 = d, e = true, this._body1.addEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved, false, 0, true), this._body1.addEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged, false, 0, true), d.addJoint(this);
                            }
                        }
                    }
                    e ? (t || (this._body2 = null), this._vehicleAttached = false, this._vehicleAttached = !!(this._body1 instanceof r.sn || this._body2 instanceof r.sn), this.setAttributes(), this.drawArms(), this.forceDirty()) : this.deleteSelf(i);
                }, d.drawArms = function () {
                    this.graphics.clear(), (this._selected || !n.Z.editorHideArms || this.forceArmDrawing) && (this.graphics.lineStyle(0, 16737792), this._body1 && (this.graphics.moveTo(0, 0), this.graphics.lineTo(this.body1.x - this.x, this.body1.y - this.y)), this.body2 && (this.graphics.moveTo(0, 0), this.graphics.lineTo(this.body2.x - this.x, this.body2.y - this.y))), this._selected && this.drawBoundingBox();
                }, d.deleteSelf = function (e) {
                    var t, i, n = new s.E9(this.x, this.y);
                    if (this._body1 && (i = t = new r.xP(this, "body1", this._body1, null, n, n), this._body1.removeEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved), this._body1.removeEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged), this._body1.removeJoint(this), this._body1 = null), this._body2 && (t = new r.xP(this, "body2", this._body2, null, n, n), i && (i.nextAction = t), i = t, this._body2.removeEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved), this._body2.removeEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged), this._body2.removeJoint(this), this._body2 = null), this._triggers) for (var a = 0; a < this._triggers.length; a++) {
                        var h = this._triggers[a];
                        t = h.removeTarget(this), i && (i.nextAction = t.firstAction), i = t, this.removeTrigger(h), a -= 1;
                    }
                    return parent ? (t = new r.nO(this, e, this.parent.getChildIndex(this)), i && (i.nextAction = t), e.removeRefSprite(this), t) : null;
                }, d.removeBody = function (e) {
                    var t, i = new s.E9(this.x, this.y);
                    if (e == this._body1) t = new r.xP(this, "body1", this._body1, null, i, i), this._body1 = null; else {
                        if (e != this._body2) throw new Error("body not contained in this joint");
                        t = new r.xP(this, "body2", this._body2, null, i, i), this._body2 = null;
                    }
                    if (null == this._body1 && null == this._body2) {
                        var o = t;
                        t = this.deleteSelf(this.parent.parent), o.nextAction = t;
                    } else this.drawArms();
                    return this._vehicleAttached = false, this._vehicleAttached = !!(this._body1 instanceof r.sn || this._body2 instanceof r.sn), this.setAttributes(), t;
                }, l = h, (c = [{
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, e ? this.alpha = .8 : (this.clearBoundingBox(), this.alpha = 1), this.drawArms();
                    }
                }, {
                    key: "body1", get: function () {
                        return this._body1;
                    }, set: function (e) {
                        this._body1 && (this._body1.removeEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved), this._body1.removeEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged), this._body1.removeJoint(this)), null != e ? (this._body1 = e, this._vehicleAttached = !!(this._body1 instanceof r.sn || this._body2 instanceof r.sn), this._vehicleAttached = false, this.setAttributes(), null != this.stage && (e.addEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved, false, 0, true), e.addEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged, false, 0, true), e.addJoint(this), this.forceDirty())) : this._body1 = null;
                    }
                }, {
                    key: "body2", get: function () {
                        return this._body2;
                    }, set: function (e) {
                        this._body2 && (this._body2.removeEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved), this._body2.removeEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged), this._body2.removeJoint(this)), null != e ? (this._body2 = e, this._vehicleAttached = false, this._vehicleAttached = !!(this._body1 instanceof r.sn || this._body2 instanceof r.sn), this.setAttributes(), null != this.stage && (e.addEventListener(o.J.COORDINATE_CHANGE, this.bodyMoved, false, 0, true), e.addEventListener(o.J.SELECTION_STATE_CHANGE, this.bodySelectionChanged, false, 0, true), e.addJoint(this), this.forceDirty())) : this._body2 = null;
                    }
                }, {
                    key: "x", get: function () {
                        return this.pixiSprite.position.x;
                    }, set: function (e) {
                        this._setX(e), this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "y", get: function () {
                        return this.pixiSprite.position.y;
                    }, set: function (e) {
                        this._setY(e), this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "collideSelf", get: function () {
                        return this._collideSelf;
                    }, set: function (e) {
                        this._collideSelf = e, this.forceDirty();
                    }
                }, {
                    key: "vehicleAttached", get: function () {
                        return this._vehicleAttached;
                    }
                }, {
                    key: "vehicleControlled", get: function () {
                        return this._vehicleControlled;
                    }, set: function (e) {
                        this._vehicleControlled = e, this.forceDirty();
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(l.prototype, c), Object.defineProperty(l, "prototype", { writable: false }), h;
            }(o.J);
        }, 124: (e, t, i) => {
            "use strict";
            i.d(t, { J: () => a }), i(62), i(13), i(29), i(0), i(20), i(18), i(30), i(31), i(4), i(5), i(1), i(2), i(3);
            var s = i(6), r = i(22), o = i(129);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function a(t) {
                    var i;
                    return (i = e.call(this) || this)._joinable = false, i._groupable = false, i._triggerable = false, i.deletable = true, i.cloneable = true, i.rotatable = true, i.scalable = true, i.inGroup = false, i.shapesUsed = 0, i._artUsed = 0, Object.assign(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(i), t), i.excludeFromCulling = false, i.boundingBox = new s.jy, i.addChild(i.boundingBox), i.mouseChildren = false, i._keyedPropertyObject = {}, i.mouseEnabled = true, i.setAttributes(), i.forceDirty(), i;
                }
                i = e, (t = a).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var h, l, c = a.prototype;
                return c.setAttributes = function () {
                    this._attributes = ["x", "y"], this.forceDirty();
                }, c.getFullProperties = function () {
                    return this._attributes;
                }, c.addTriggerProperties = function () {
                    for (var e = 0; e < this._triggers.length; e++) {
                        var t = this._triggers[e];
                        if (1 == t.typeIndex) {
                            var i = this._triggerActions.get(t);
                            i && 0 !== i.length || (i = [], this._triggerActions.set(t, []), i.push(this._triggerActionList[0]));
                            for (var s = 0; s < i.length; s++) {
                                this._attributes.push([this._triggerString, t, s]);
                                var o = i[s], n = this.triggerActionList.indexOf(o), a = this.triggerActionListProperties[n];
                                if (a) for (var h = 0; h < a.length; h++) {
                                    var l = a[h], c = this._keyedPropertyObject[l];
                                    c || (c = this._keyedPropertyObject[l] = new Map);
                                    var d = c.get(t);
                                    d || (d = [], c.set(t, [])), void 0 !== d[s] && null !== d[s] || (d[s] = r.I2.getDefaultValue(l)), this._attributes.push([l, t, s]);
                                }
                            }
                        }
                    }
                }, c.addJoint = function (e) {
                    this._joints.push(e), this.forceDirty();
                }, c.addTrigger = function (e) {
                    for (var t = this._triggers.length, i = e.parent.getChildIndex(e), s = 0; s < t; s++) {
                        var r = this._triggers[s];
                        if (r.parent.getChildIndex(r) > i) return this._triggers.splice(s, 0, e), void this.setAttributes();
                    }
                    this._triggers.push(e), this.setAttributes(), this.forceDirty();
                }, c.removeJoint = function (e) {
                    var t = this._joints.indexOf(e);
                    if (this._joints.splice(t, 1), t < 0) throw new Error("FUCK YOU joint not found");
                    this.forceDirty();
                }, c.removeTrigger = function (e) {
                    var t = this._triggers.indexOf(e);
                    if (this._triggers.splice(t, 1), t < 0) throw new Error("FUCK YOU trigger not found");
                    this.triggerActions && this.triggerActions.has(e), this.setAttributes(), this.forceDirty();
                }, c.drawBoundingBox = function () {
                    this.boundingBox.graphics.clear(), this.boundingBox.scale.set(0), this.boundingBox.position.set(0);
                    var e = this.getBounds(this), t = this.doubleClickEnabled ? 52223 : 0;
                    this.boundingBox.graphics.lineStyle(0, t, 1, true), this.boundingBox.graphics.drawRect(0, 0, e.width * this.scaleX, e.height * this.scaleY), this.boundingBox.scale.set(1 / this.scaleX, 1 / this.scaleY), this.boundingBox.position.set(e.x, e.y);
                }, c.clearBoundingBox = function () {
                    this.boundingBox.graphics.clear();
                }, c.deleteSelf = function (e) {
                    if (this.deletable && this.parent) {
                        var t, i;
                        if (this._joints) for (var s = 0; s < this._joints.length; s++) {
                            var n = this._joints[s];
                            t = n.removeBody(this), i && (i.nextAction = t.firstAction), i = t, this.removeJoint(n), s -= 1;
                        }
                        if (this._triggers) for (s = 0; s < this._triggers.length; s++) {
                            var a = this._triggers[s];
                            t = a.removeTarget(this), i && (i.nextAction = t.firstAction), i = t, this.removeTrigger(a), s -= 1;
                        }
                        return t = new r.nO(this, e, this.parent.getChildIndex(this)), i && (i.nextAction = t), e.removeRefSprite(this), e instanceof o.n && (this.inGroup = false), t;
                    }
                    return null;
                }, c.clone = function () {
                    return null;
                }, c.transferKeyedProperties = function (e) {
                    var t = this, i = function () {
                        var i = t._keyedPropertyObject[s];
                        if (i) {
                            var n = e.keyedPropertyObject[s];
                            n || (n = e.keyedPropertyObject[s] = new Map), i.forEach(function (e, t) {
                                r = i.get(t), o = [];
                                for (var s = r.length, a = 0; a < s; a++) o.push(r[a]);
                                n.set(t, o);
                            });
                        }
                    };
                    for (var s in this._keyedPropertyObject) {
                        var r, o;
                        i();
                    }
                }, c._setX = function (e) {
                    if (this.pixiSprite.position.x = e, this.forceDirty(), this.parent) {
                        var t = this.getBounds(this.parent);
                        if (t.x < 0) {
                            var i = 0 - t.x;
                            e += i;
                        } else t.x + t.width > 2e4 && (e += i = 2e4 - (t.x + t.width));
                        this.pixiSprite.position.x = e, (this._joinable || this._triggerable) && this.dispatchEvent(new s.ju(a.COORDINATE_CHANGE));
                    }
                }, c._setY = function (e) {
                    if (this.forceDirty(), this.pixiSprite.position.y = e, this.parent) {
                        var t = this.getBounds(this.parent);
                        if (t.y < 0) {
                            var i = 0 - t.y;
                            e += i;
                        } else t.y + t.height > 1e4 && (e += i = 1e4 - (t.y + t.height));
                        this._pixiSprite.position.y = e, (this._joinable || this._triggerable) && this.dispatchEvent(new s.ju(a.COORDINATE_CHANGE));
                    }
                }, c._getScaleX = function () {
                    return this.scale.x;
                }, c._setScaleX = function (e) {
                    this.scale.x = e, this.x = this.x, this.y = this.y, this.forceDirty();
                }, c._getScaleY = function () {
                    return this.scale.y;
                }, c._setScaleY = function (e) {
                    this.scale.y = e, this.x = this.x, this.y = this.y, this.forceDirty();
                }, c._setAngle = function (e) {
                    e > 180 && (e -= 360), e < -180 && (e += 360), 0 === (e = Math.round(e)) && (e = 0), this.rotation = e, this.x = this.x, this.y = this.y, this.forceDirty();
                }, c._getShapeHeight = function () {
                    return Math.round(100 * this.scaleY);
                }, c._setShapeHeight = function (e) {
                    this.scaleY = e / 100, this.forceDirty();
                }, c._getShapeWidth = function () {
                    return Math.round(100 * this.scaleX);
                }, c._setShapeWidth = function (e) {
                    this.scaleX = e / 100, this.forceDirty();
                }, c.setFilters = function () {
                    this.forceDirty();
                }, c.checkVehicleAttached = function (e) {
                    if (void 0 === e && (e = null), !this.joints) return false;
                    e || (e = []);
                    for (var t = 0; t < this.joints.length; t++) {
                        var i = this.joints[t];
                        if (e.indexOf(i) < 0) {
                            e.push(i);
                            var s = i.body1;
                            if (s && this != s && s.checkVehicleAttached(e)) return true;
                            var r = i.body2;
                            if (r && this != r && r.checkVehicleAttached(e)) return true;
                        }
                    }
                    return false;
                }, c.setProperty = function (e, t) {
                    var i, o = this[e], n = new s.E9(this.x, this.y);
                    this[e] = t;
                    var a = this[e], h = new s.E9(this.x, this.y);
                    return a != o && (i = new r.xP(this, e, o, a, n, h)), this.forceDirty(), i;
                }, c.setKeyedProperty = function (e, t, i, s) {
                    var o, n = this._keyedPropertyObject[e].get(t)[i];
                    this._keyedPropertyObject[e].get(t)[i] = s;
                    var a = this._keyedPropertyObject[e].get(t)[i];
                    return a != n && (o = new r.Pp(this, e, n, a, t, i)), this.forceDirty(), this.setAttributes(), o;
                }, c.setOwner = function (e) {
                    this.userData.owner = e;
                }, c.getOwner = function () {
                    return this.userData.owner || null;
                }, h = a, (l = [{
                    key: "attributes", get: function () {
                        return this._attributes;
                    }
                }, {
                    key: "functions", get: function () {
                        return this.groupable ? ["groupSelected"] : [];
                    }
                }, {
                    key: "artUsed", get: function () {
                        return this._artUsed;
                    }
                }, {
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        var t = Boolean(this._selected);
                        this._selected = e, e ? (this.drawBoundingBox(), this.alpha = .8) : (this.clearBoundingBox(), this.alpha = 1), t != this._selected && this.dispatchEvent(new s.ju(a.SELECTION_STATE_CHANGE));
                    }
                }, {
                    key: "joinable", get: function () {
                        return this._joinable;
                    }, set: function (e) {
                        this._joinable = e;
                    }
                }, {
                    key: "group", get: function () {
                        return this._group;
                    }, set: function (e) {
                        this._group = e;
                    }
                }, {
                    key: "groupable", get: function () {
                        return this._groupable;
                    }, set: function (e) {
                        this._groupable = e;
                    }
                }, {
                    key: "triggerable", get: function () {
                        return this._triggerable;
                    }, set: function (e) {
                        this._triggerable = e;
                    }
                }, {
                    key: "joints", get: function () {
                        return this._joints;
                    }
                }, {
                    key: "triggers", get: function () {
                        return this._triggers;
                    }
                }, {
                    key: "triggerActions", get: function () {
                        return this._triggerActions;
                    }
                }, {
                    key: "triggerActionList", get: function () {
                        return this._triggerActionList;
                    }
                }, {
                    key: "triggerActionListProperties", get: function () {
                        return this._triggerActionListProperties;
                    }
                }, {
                    key: "x", get: function () {
                        return this.pixiSprite.position.x;
                    }, set: function (e) {
                        this._setX(e);
                    }
                }, {
                    key: "y", get: function () {
                        return this.pixiSprite.position.y;
                    }, set: function (e) {
                        this._setY(e);
                    }
                }, {
                    key: "xUnbound", set: function (e) {
                        this.pixiSprite.position.x = e, this.forceDirty();
                    }
                }, {
                    key: "yUnbound", set: function (e) {
                        this.pixiSprite.position.y = e, this.forceDirty();
                    }
                }, {
                    key: "angle", get: function () {
                        return this.rotation;
                    }, set: function (e) {
                        this._setAngle(e);
                    }
                }, {
                    key: "angleUnbound", set: function (e) {
                        this.rotation = e, this.forceDirty();
                    }
                }, {
                    key: "scaleX", get: function () {
                        return this._getScaleX();
                    }, set: function (e) {
                        this._setScaleX(e);
                    }
                }, {
                    key: "scaleY", get: function () {
                        return this._getScaleY();
                    }, set: function (e) {
                        this._setScaleY(e);
                    }
                }, {
                    key: "shapeWidth", get: function () {
                        return this._getShapeWidth();
                    }, set: function (e) {
                        this._setShapeWidth(e);
                    }
                }, {
                    key: "shapeHeight", get: function () {
                        return this._getShapeHeight();
                    }, set: function (e) {
                        this._setShapeHeight(e);
                    }
                }, {
                    key: "keyedPropertyObject", get: function () {
                        return this._keyedPropertyObject;
                    }
                }, {
                    key: "triggerString", get: function () {
                        return this._triggerString;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), a;
            }(s.KG);
            a.COORDINATE_CHANGE = "coordinatechange", a.SELECTION_STATE_CHANGE = "selectionchange";
        }, 169: (e, t, i) => {
            "use strict";
            i.d(t, { $: () => c }), i(13), i(29), i(0), i(20), i(18), i(11), i(63), i(30), i(4), i(5), i(1), i(2), i(3);
            var s = i(33), r = i(6), o = i(24), n = i(22), a = i(124), h = i(15);
            function l(e, t) {
                return (l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var c = function (e) {
                var t, i;
                function c(t) {
                    var i;
                    return void 0 === t && (t = false), (i = e.call(this, { _triggers: [], _triggerActions: new Map, _triggerActionList: ["activate trigger", "disable", "enable"], _triggerActionListProperties: [null, null, null] }) || this).minDimension = .05, i.maxDimension = 50, i.scaleXCopy = 1, i.scaleYCopy = 1, i.rotationCopy = 0, i._triggeredBy = 1, i._triggerDelay = 0, i._triggerType = "activate object", i._typeIndex = 1, i._repeatType = 1, i._repeatInterval = 1, i._soundEffect = "wg voice 1", i._soundLocation = 1, i._panning = 0, i._volume = 1, i._black = false, i.targetMoved = function (e) {
                        i.drawArms();
                    }, i.targetSelectionChanged = function (e) {
                        i.drawShape();
                    }, i.name = "trigger", i.shapesUsed = 1, i.rotatable = true, i.scalable = true, i._joinable = false, i._groupable = false, i._black = t, i._targets = [], i._cloneTargets = [], i._triggerable = true, i._triggerString = "triggerActionsTrigger", i._keyedPropertyObject[i._triggerString] = i._triggerActions, c.bmd || i.createBMD(), i.bitmapSprite = new r.jy, i.addChildAt(i.bitmapSprite, 0), i.bitmapSprite.blendMode = r.bt.HARDLIGHT, i.armSprite = new r.jy, i.armSprite.blendMode = r.bt.INVERT, i.armSprite.mouseEnabled = false, i.addChild(i.armSprite), i.border = new r.jy, i.border._pixiSprite = new s.NineSlicePlane(s.Texture.from("trigger-border-square.png"), 10, 10, 10, 10), i.border.alpha = .9, i.inner = new r.jy, i.inner._pixiSprite = new s.TilingSprite(s.Texture.from("editor/trigger-tile-fill.png"), i.shapeWidth, i.shapeHeight), i.inner._pixiSprite.anchor.set(.5), i.inner._pixiSprite.tileScale.set(.2), i.inner.alpha = .9, i.disabledInner = new r.jy, i.disabledInner._pixiSprite = new s.TilingSprite(s.Texture.from("editor/trigger-tile-fill-white.png"), i.shapeWidth, i.shapeHeight), i.disabledInner._pixiSprite.anchor.set(.5), i.disabledInner._pixiSprite.tileScale.set(.2), i.disabledInner.alpha = .8, h.Z.currentlyInEditor && (i.createNumLabel(), i.numLabel.cacheAsBitmap = true), i.drawShape(), i.setAttributes(), i;
                }
                i = e, (t = c).prototype = Object.create(i.prototype), t.prototype.constructor = t, l(t, i);
                var d, p, u = c.prototype;
                return u.hitTestObject = function (e) {
                    return this.bitmapSprite.hitTestObject(e);
                }, u.hitTestPoint = function (e, t, i) {
                    return void 0 === e && (e = 0), void 0 === t && (t = 0), void 0 === i && (i = false), this.bitmapSprite.getRelativeBounds(this.stage).contains(e, t);
                }, u.setAttributes = function () {
                    void 0 !== this._typeIndex && (this._attributes = ["x", "y", "shapeWidth", "shapeHeight", "angle", "triggeredBy", "repeatType"], this._repeatType > 2 && this._attributes.push("repeatInterval"), this._attributes.push("triggerType"), 1 == this._typeIndex ? this._attributes.push("triggerDelay") : 2 == this._typeIndex && (this._attributes.push("soundEffect", "triggerDelay", "soundLocation", "volume"), 1 == this.soundLocation && this._attributes.push("panning")), this._attributes.push("startDisabled"), this.addTriggerProperties());
                }, u.createNumLabel = function () {
                    var e = new r.SQ("HelveticaNeueLT Std Med", 15, 4032711, true, null, null, null, null, r.O3.LEFT);
                    this.numLabel = new r.nv, this.numLabel.type = r.T3.DYNAMIC, this.numLabel.defaultTextFormat = e, this.numLabel.autoSize = r.ie.LEFT, this.numLabel.x = 3, this.numLabel.y = 3, this.numLabel.multiline = false, this.numLabel.selectable = false, this.numLabel.embedFonts = true, this.numLabel.antiAliasType = r.ML.ADVANCED, this.addChild(this.numLabel);
                }, u.createBMD = function () {
                    for (var e = new r.jy, t = 0; t < 2; t++) {
                        e.graphics.clear();
                        var i = 0 == t ? 16750848 : 10066329, s = 0 == t ? 16777062 : 13421772;
                        e.graphics.beginFill(i, 1), e.graphics.moveTo(0, 0), e.graphics.lineTo(5, 0), e.graphics.lineTo(0, 5), e.graphics.lineTo(0, 0), e.graphics.endFill(), e.graphics.beginFill(s, 1), e.graphics.moveTo(5, 0), e.graphics.lineTo(15, 0), e.graphics.lineTo(0, 15), e.graphics.lineTo(0, 5), e.graphics.lineTo(5, 0), e.graphics.endFill(), e.graphics.beginFill(i, 1), e.graphics.moveTo(15, 0), e.graphics.lineTo(20, 0), e.graphics.lineTo(20, 5), e.graphics.lineTo(5, 20), e.graphics.lineTo(0, 20), e.graphics.lineTo(0, 15), e.graphics.lineTo(15, 0), e.graphics.endFill(), e.graphics.beginFill(s, 1), e.graphics.moveTo(20, 5), e.graphics.lineTo(20, 15), e.graphics.lineTo(15, 20), e.graphics.lineTo(5, 20), e.graphics.lineTo(20, 5), e.graphics.endFill(), e.graphics.beginFill(i, 1), e.graphics.moveTo(20, 15), e.graphics.lineTo(20, 20), e.graphics.lineTo(15, 20), e.graphics.lineTo(20, 15), e.graphics.endFill(), 0 == t ? (c.bmd = new r.Q$(20, 20, true, 0), c.bmd.draw(e)) : (c.bmd_disabled = new r.Q$(20, 20, true, 0), c.bmd_disabled.draw(e));
                    }
                }, u.drawShape = function () {
                    this.bitmapSprite.graphics.clear(), this.bitmapSprite.removeChild(this.inner), this.bitmapSprite.removeChild(this.disabledInner);
                    var e = 0;
                    if (this._black) {
                        this.bitmapSprite.graphics.lineStyle(5, 0, .5, true), this.bitmapSprite.graphics.beginFill(0, .8);
                        var t = new o.RA(this.rotationCopy * Math.PI / 180), i = 50 * this.scaleXCopy - e, s = 50 * this.scaleYCopy - e, r = new o._m(-i, -s);
                        r.MulM(t), this.bitmapSprite.graphics.moveTo(r.x, r.y), (r = new o._m(i, -s)).MulM(t), this.bitmapSprite.graphics.lineTo(r.x, r.y), (r = new o._m(i, s)).MulM(t), this.bitmapSprite.graphics.lineTo(r.x, r.y), (r = new o._m(-i, s)).MulM(t), this.bitmapSprite.graphics.lineTo(r.x, r.y), (r = new o._m(-i, -s)).MulM(t), this.bitmapSprite.graphics.lineTo(r.x, r.y), this.bitmapSprite.graphics.endFill();
                    } else {
                        e = 8;
                        var n = this._startDisabled ? c.bmd_disabled : c.bmd;
                        this.border._pixiSprite.x = -this.shapeWidth / 2, this.border._pixiSprite.y = -this.shapeHeight / 2, this.border._pixiSprite.width = this.shapeWidth, this.border._pixiSprite.height = this.shapeHeight, this.inner._pixiSprite.height = this.shapeHeight - e, this.inner._pixiSprite.width = this.shapeWidth - e, this.disabledInner._pixiSprite.height = this.shapeHeight - e, this.disabledInner._pixiSprite.width = this.shapeWidth - e, this.bitmapSprite.addChild(this.border), this._startDisabled ? this.bitmapSprite.addChild(this.disabledInner) : this.bitmapSprite.addChild(this.inner), this.bitmapSprite.graphics.beginBitmapFill(n, null, true), this.bitmapSprite.rotation = this.rotationCopy;
                    }
                    this.bitmapSprite.alpha = this._black ? 1 : .65, this.drawArms(), this.drawNumLabel();
                }, u.drawNumLabel = function () {
                    if (void 0 !== this.numLabel && h.Z.currentlyInEditor) {
                        var e = false;
                        if ("activate object" == this.triggerType) for (var t = 0; t < this._targets.length; t++) if (this._targets[t].selected) {
                            e = true;
                            break;
                        }
                        this.selected || !h.Z.editorHideArms || e ? this.numLabel.alpha = 1 : this.numLabel.alpha = 0, this.selected && this.drawBoundingBox(), this.forceDirty();
                    }
                }, u.drawArms = function () {
                    if (h.Z.currentlyInEditor) {
                        if (this.armSprite.graphics.clear(), "activate object" == this.triggerType) {
                            var e = new Array;
                            e.push(new o._m(5, 0), new o._m(-5, 0), new o._m(0, 10));
                            for (var t = this._targets.length, i = 0; i < t; i++) {
                                var s = this._targets[i];
                                if (!h.Z.editorHideArms || s.selected || this.selected) {
                                    var r = s.x - this.x, n = s.y - this.y;
                                    if (this.armSprite.graphics.lineStyle(3, 6710886, 1, false), this.armSprite.graphics.moveTo(0, 0), this.armSprite.graphics.lineTo(r, n), s instanceof c) {
                                        for (var a = 0, l = 0, d = Math.atan2(n, r), p = new o.RA(d - .5 * Math.PI), u = Math.sqrt(Math.pow(n, 2) + Math.pow(r, 2)) - 10, m = Math.floor(u / 50), f = 50 * Math.cos(d), y = 50 * Math.sin(d), v = e[0], g = new Array, S = 0; S < 3; S++) (v = (v = e[S]).Copy()).MulM(p), g.push(v);
                                        for (var _ = 1; _ <= m; _++) {
                                            a += f, l += y, v = g[2], this.armSprite.graphics.lineStyle(null), this.armSprite.graphics.beginFill(6710886), this.armSprite.graphics.moveTo(v.x + a, v.y + l);
                                            for (var w = 0; w < 3; w++) v = g[w], this.armSprite.graphics.lineTo(v.x + a, v.y + l);
                                            this.armSprite.graphics.endFill();
                                        }
                                    }
                                }
                            }
                        }
                        this.selected && this.drawBoundingBox(), this.forceDirty();
                    }
                }, u.setPositionOld = function (e, t) {
                    this._setX(e), this._setY(t), this.forceDirty();
                }, u.clone = function () {
                    var e = new c(false);
                    return e.x = this.x, e.y = this.y, e.angle = this.angle, e.scaleX = this.scaleX, e.scaleY = this.scaleY, e.triggerDelay = this.triggerDelay, e.repeatInterval = this.repeatInterval, e.typeIndex = this.typeIndex, e.triggeredBy = this.triggeredBy, e.repeatType = this.repeatType, e.soundEffect = this.soundEffect, e.panning = this.panning, e.volume = this.volume, e.soundLocation = this.soundLocation, e.startDisabled = this.startDisabled, this.transferKeyedProperties(e), e.forceDirty(), e;
                }, u.setNumLabel = function (e) {
                    void 0 !== this.numLabel && (this.numLabel.text = String(e), this.forceDirty(), this.addChild(this.numLabel));
                }, u.addTarget = function (e) {
                    this._targets.push(e), e.addEventListener(a.J.COORDINATE_CHANGE, this.targetMoved, false, 0, true), e.addEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged, false, 0, true), e.addTrigger(this);
                    var t = new n.Ue(this, e, this._targets.length - 1);
                    return this.drawArms(), this.forceDirty(), t;
                }, u.addMoveListener = function (e) {
                    e.addEventListener(a.J.COORDINATE_CHANGE, this.targetMoved, false, 0, true), e.addEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged, false, 0, true);
                }, u.removeTarget = function (e) {
                    var t = this._targets.indexOf(e);
                    if (t > -1) {
                        var i = this._targets[t];
                        i.removeEventListener(a.J.COORDINATE_CHANGE, this.targetMoved), i.removeEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged);
                        var s = new n.GJ(this, e, t);
                        return this._targets.splice(t, 1), this.drawArms(), this.drawNumLabel(), this.forceDirty(), s;
                    }
                    throw new Error("target not contained in this trigger");
                }, u.removeLastTarget = function () {
                    var e = this._targets.length - 1, t = this._targets[e];
                    t.removeEventListener(a.J.COORDINATE_CHANGE, this.targetMoved), t.removeEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged);
                    var i = new n.GJ(this, t, e);
                    return this._targets.splice(e, 1), t.removeTrigger(this), this.drawArms(), this.forceDirty(), i;
                }, u.removeMoveListener = function (e) {
                    e.removeEventListener(a.J.COORDINATE_CHANGE, this.targetMoved), e.removeEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged);
                }, u.deleteSelf = function (e) {
                    for (var t, i, s = 0; s < this._targets.length; s++) {
                        var r = this._targets[s];
                        this._targets.splice(s, 1), r.removeEventListener(a.J.COORDINATE_CHANGE, this.targetMoved), r.removeEventListener(a.J.SELECTION_STATE_CHANGE, this.targetSelectionChanged), r.removeTrigger(this), t = new n.GJ(this, r, s), i && (i.nextAction = t), i = t, s--;
                    }
                    for (var o = 0; o < this._triggers.length; o++) {
                        var h = this._triggers[o];
                        t = h.removeTarget(this), i && (i.nextAction = t.firstAction), i = t, this.removeTrigger(h), o -= 1;
                    }
                    return parent ? (t = new n.nO(this, e, this.parent.getChildIndex(this)), i && (i.nextAction = t), e.removeRefSprite(this), t) : null;
                }, u.getCullBounds = function (e) {
                    if (void 0 === e && (e = false), this.dirty || e) {
                        this.dirty = false;
                        var t = this.getBounds(this), i = this._pixiSprite, s = i.position, r = i.scale, o = t.width * r._x / 2, n = t.height * r._y / 2;
                        this.cullCircle.radius = Math.sqrt(o * o + n * n), this.cullCircle.x = o + s._x + t.x * r._x, this.cullCircle.y = n + s._y + t.y * r._y;
                    }
                    return this.cullCircle;
                }, d = c, (p = [{
                    key: "functions", get: function () {
                        if (!this._addingTargets && (1 == this._typeIndex || 4 == this._triggeredBy)) {
                            var e = ["addNewTarget"];
                            return this._targets.length > 0 && e.push("removeTarget"), e;
                        }
                        return [];
                    }
                }, {
                    key: "x", get: function () {
                        return this.pixiSprite.position.x;
                    }, set: function (e) {
                        this.armSprite.graphics.clear(), this._setX(e), this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "y", get: function () {
                        return this.pixiSprite.position.y;
                    }, set: function (e) {
                        this.armSprite.graphics.clear(), this._setY(e), this.drawArms(), this.forceDirty();
                    }
                }, {
                    key: "scaleX", get: function () {
                        return this.scaleXCopy;
                    }, set: function (e) {
                        e < this.minDimension && (e = this.minDimension), e > this.maxDimension && (e = this.maxDimension), this.scaleXCopy = e, this.drawShape(), this.x = this.x, this.y = this.y, this.forceDirty();
                    }
                }, {
                    key: "scaleY", get: function () {
                        return this.scaleYCopy;
                    }, set: function (e) {
                        e < this.minDimension && (e = this.minDimension), e > this.maxDimension && (e = this.maxDimension), this.scaleYCopy = e, this.drawShape(), this.x = this.x, this.y = this.y, this.forceDirty();
                    }
                }, {
                    key: "angle", get: function () {
                        return this.rotationCopy;
                    }, set: function (e) {
                        e > 180 && (e -= 360), e < -180 && (e += 360), this.rotationCopy = e, this.drawShape(), this.x = this.x, this.y = this.y, this.forceDirty();
                    }
                }, {
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        var t = Boolean(this._selected);
                        this._selected = e, e ? this.alpha = .8 : (this.clearBoundingBox(), this.alpha = 1), this.drawShape(), t != this._selected && this.dispatchEvent(new r.ju(a.J.SELECTION_STATE_CHANGE));
                    }
                }, {
                    key: "triggerType", get: function () {
                        return this._triggerType;
                    }, set: function (e) {
                        this._triggerType = e;
                        var t = c.typeArray.indexOf(e);
                        if (t < 0) throw new Error("TRIGGER TYPE NOT IN TYPE ARRAY");
                        this._typeIndex = t + 1, (1 == this._typeIndex || 4 != this._triggeredBy && this.armSprite.parent) && (this.drawArms(), this.selected && this.drawBoundingBox()), this.setAttributes();
                        for (var i = 0; i < this._targets.length; i++) this._targets[i].setAttributes();
                        this.forceDirty();
                    }
                }, {
                    key: "triggerDelay", get: function () {
                        return this._triggerDelay;
                    }, set: function (e) {
                        e < c.minDelay && (e = c.minDelay), e > c.maxDelay && (e = c.maxDelay), this._triggerDelay = e, this.forceDirty();
                    }
                }, {
                    key: "typeIndex", get: function () {
                        return this._typeIndex;
                    }, set: function (e) {
                        if (this._typeIndex = e, this._typeIndex > c.typeArray.length || this.typeIndex < 1) throw new Error("TYPE INDEX OUT OF TYPEARRAY RANGE");
                        this.triggerType = c.typeArray[this._typeIndex - 1], this.forceDirty();
                    }
                }, {
                    key: "soundEffect", get: function () {
                        return this._soundEffect;
                    }, set: function (e) {
                        this._soundEffect = e, this.forceDirty();
                    }
                }, {
                    key: "panning", get: function () {
                        return this._panning;
                    }, set: function (e) {
                        e < -1 && (e = -1), e > 1 && (e = 1), this._panning = e, this.forceDirty();
                    }
                }, {
                    key: "volume", get: function () {
                        return this._volume;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > 1 && (e = 1), this._volume = e, this.forceDirty();
                    }
                }, {
                    key: "soundLocation", get: function () {
                        return this._soundLocation;
                    }, set: function (e) {
                        e < 1 && (e = 1), e > 2 && (e = 2), this._soundLocation = e, this.setAttributes(), this.forceDirty();
                    }
                }, {
                    key: "triggeredBy", get: function () {
                        return this._triggeredBy;
                    }, set: function (e) {
                        e < 1 && (e = 1), e > 6 && (e = 6), this._triggeredBy = e, 4 == this._triggeredBy ? (this.addChildAt(this.armSprite, 1), this.selected && this.drawBoundingBox()) : 1 != this._typeIndex && this.armSprite.parent && (this.removeChild(this.armSprite), this.selected && this.drawBoundingBox()), this.forceDirty();
                    }
                }, {
                    key: "repeatType", get: function () {
                        return this._repeatType;
                    }, set: function (e) {
                        e < 1 && (e = 1), e > 4 && (e = 4), this._repeatType = e, this.setAttributes(), this.forceDirty();
                    }
                }, {
                    key: "repeatInterval", get: function () {
                        return this._repeatInterval;
                    }, set: function (e) {
                        e < .1 && (e = .1), e > 30 && (e = 30), this._repeatInterval = e, this.forceDirty();
                    }
                }, {
                    key: "startDisabled", get: function () {
                        return this._startDisabled;
                    }, set: function (e) {
                        e != this._startDisabled && (this._startDisabled = e, this.drawShape(), this.forceDirty());
                    }
                }, {
                    key: "addingTargets", get: function () {
                        return this._addingTargets;
                    }, set: function (e) {
                        this._addingTargets = e, this.forceDirty();
                    }
                }, {
                    key: "targets", get: function () {
                        return this._targets;
                    }
                }, {
                    key: "cloneTargets", get: function () {
                        return this._cloneTargets;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(d.prototype, p), Object.defineProperty(d, "prototype", { writable: false }), c;
            }(a.J);
            c.typeArray = ["activate object", "play sound effect", "level victory"], c.minDelay = 0, c.maxDelay = 30;
        }, 555: (e, t, i) => {
            "use strict";
            i.d(t, { s: () => o }), i(11), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(227);
            function r(e, t) {
                return (r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var o = function (e) {
                var t, i;
                function o() {
                    var t;
                    return (t = e.call(this) || this)._spaceAction = 0, t._shiftAction = 0, t._ctrlAction = 0, t._acceleration = 1, t._characterPose = 0, t._lockJoints = false, t._leaningStrength = 0, t.name = "vehicle", t;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, r(t, i);
                var n, a, h = o.prototype;
                return h.setAttributes = function () {
                    this._attributes = ["x", "y", "angle", "sleeping", "foreground", "acceleration", "lockJoints", "leaningStrength", "spaceAction", "shiftAction", "ctrlAction", "characterPose"], this.addTriggerProperties();
                }, h.checkVehicleAttached = function (e) {
                    return void 0 === e && (e = null), true;
                }, h.clone = function () {
                    var e = new o;
                    e.offset = this.offset, e.x = this.x, e.y = this.y, e.angle = this.angle, e.sleeping = this.sleeping, e.foreground = this.foreground, e.joinable = this.joinable, e.acceleration = this.acceleration, e.leaningStrength = this.leaningStrength, e.spaceAction = this.spaceAction, e.shiftAction = this.shiftAction, e.ctrlAction = this.ctrlAction, e.characterPose = this.characterPose, e.lockJoints = this.lockJoints;
                    for (var t = 0; t < this._shapeContainer.numChildren; t++) {
                        var i = this._shapeContainer.getChildAt(t).clone();
                        e.addShape(i), i.group = e, i.inGroup = true, i.setFilters();
                    }
                    for (var s = 0; s < this._specialContainer.numChildren; s++) {
                        var r = this._specialContainer.getChildAt(s).clone();
                        r.group = e, r.inGroup = true, e.addSpecial(r);
                    }
                    return this.transferKeyedProperties(e), e;
                }, h.cloneAsGroup = function () {
                    var e = new s.c;
                    e.offset = this.offset, e.x = this.x, e.y = this.y, e.angle = this.angle, e.sleeping = this.sleeping, e.foreground = this.foreground, e.joinable = this.joinable;
                    for (var t = 0; t < this._shapeContainer.numChildren; t++) {
                        var i = this._shapeContainer.getChildAt(t).clone();
                        i.group = e, i.inGroup = true, e.addShape(i);
                    }
                    for (var r = 0; r < this._specialContainer.numChildren; r++) {
                        var o = this._specialContainer.getChildAt(r).clone();
                        o.group = e, o.inGroup = true, e.addSpecial(o);
                    }
                    return e;
                }, n = o, (a = [{
                    key: "functions", get: function () {
                        return ["convertVehicleToGroup"];
                    }
                }, {
                    key: "vehiclePossible", get: function () {
                        return false;
                    }
                }, {
                    key: "acceleration", get: function () {
                        return this._acceleration;
                    }, set: function (e) {
                        e < 1 && (e = 1), e > 10 && (e = 10), this._acceleration = e;
                    }
                }, {
                    key: "lockJoints", get: function () {
                        return this._lockJoints;
                    }, set: function (e) {
                        this._lockJoints = e;
                    }
                }, {
                    key: "leaningStrength", get: function () {
                        return this._leaningStrength;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > 10 && (e = 10), this._leaningStrength = e;
                    }
                }, {
                    key: "spaceAction", get: function () {
                        return this._spaceAction;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > o.NUM_ACTIONS && (e = o.NUM_ACTIONS), this._spaceAction = e;
                    }
                }, {
                    key: "shiftAction", get: function () {
                        return this._shiftAction;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > o.NUM_ACTIONS && (e = o.NUM_ACTIONS), this._shiftAction = e;
                    }
                }, {
                    key: "ctrlAction", get: function () {
                        return this._ctrlAction;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > o.NUM_ACTIONS && (e = o.NUM_ACTIONS), this._ctrlAction = e;
                    }
                }, {
                    key: "characterPose", get: function () {
                        return this._characterPose;
                    }, set: function (e) {
                        e < 0 && (e = 0), e > o.NUM_POSES && (e = o.NUM_POSES), this._characterPose = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(s.c);
            o.NUM_ACTIONS = 3, o.NUM_POSES = 3;
        }, 22: (e, t, i) => {
            "use strict";
            i.d(t, { Eb: () => s.Eb, xb: () => s.xb, nO: () => s.nO, xB: () => s.xB, W8: () => s.W8, VX: () => s.VX, WK: () => s.WK, Pp: () => s.Pp, xC: () => s.xC, Rl: () => s.Rl, xP: () => s.xP, Gs: () => s.Gs, iO: () => s.iO, yN: () => s.yN, a1: () => s.a1, Ue: () => s.Ue, GJ: () => s.GJ, Bn: () => s.Bn, Zb: () => n.Zb, eD: () => l.eD, gR: () => o.gR, Iy: () => l.Iy, I2: () => c.I, jn: () => h.jn, O$: () => h.O$, Th: () => n.Th, Ux: () => n.Ux, zE: () => n.zE, So: () => n.So, M8: () => n.M8, RC: () => n.RC, Yb: () => n.Yb, Xz: () => d.X, CO: () => f, h_: () => g, p$: () => n.p$, m9: () => n.m9, Jg: () => a.Jg, AP: () => C, n: () => o.n, TC: () => a.TC, c4: () => a.c4, rT: () => a.rT, hL: () => a.hL, u6: () => a.u6, ML: () => L.M, lx: () => n.lx, Ou: () => n.Ou, KM: () => n.KM, D$: () => B, Me: () => a.Me, _o: () => n._o, nz: () => d.n, fE: () => n.fE, Sb: () => A.S, Ae: () => n.Ae, tq: () => n.tq, M2: () => n.M2, JK: () => l.JK, b9: () => a.b9, bY: () => a.Ae, _N: () => a._N, P_: () => n.P_, xy: () => n.xy, eY: () => n.eY, xx: () => I.x, Ts: () => n.Ts, XL: () => n.XL, bx: () => n.bx, IQ: () => j.I, kL: () => o.kL, Cm: () => l.Cm, J3: () => F.J, sP: () => G, fv: () => n.fv, $1: () => o.$1, cS: () => r.c, nS: () => H.n, D_: () => o.D_, Jh: () => V.J, $F: () => N.$, sn: () => U.s, bz: () => re, TH: () => ne, eJ: () => l.eJ, Q$: () => n.Q$, a: () => a.a, I_: () => n.I_, ph: () => n.ph, e$: () => a.e$, DP: () => a.DP, _P: () => a._P, UC: () => a.UC, KV: () => l.KV, P4: () => n.P4, Re: () => n.Re, yY: () => n.yY, dU: () => w, YJ: () => n.YJ, bB: () => n.bB, cG: () => n.cG, ym: () => l.ym, $P: () => n.$P, Y1: () => n.Y1, uL: () => ce, Ff: () => ve, lb: () => n.lb, E2: () => o.E2, lu: () => l.lu, fF: () => a.fF, uS: () => n.uS, iA: () => h.iA, Rz: () => a.Rz, vT: () => n.vT });
            var s = i(316), r = i(227), o = (i(490), i(212)), n = i(228), a = (i(491), i(211)), h = i(213), l = i(508), c = i(375), d = i(129), p = i(6);
            function u(e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e, m(e, t);
            }
            function m(e, t) {
                return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var f = function (e) {
                function t(t, i, s) {
                    var r;
                    return (r = e.call(this) || this).totalWidth = 900, r.updateCanvas = function (e) {
                        void 0 === e && (e = null);
                        var t = r.canvasHolder.scaleX * d.X.canvasWidth + 2 * r.spacing;
                        r.canvasHolder.x = r.scrollTab.x * t / -r.bg.graphics.width + r.spacing, r.container.cullObjects();
                    }, r.mouseDownHandler = function (e) {
                        switch (e.target) {
                            case r.scrollTab:
                                r.dragging || r.startScrollDrag();
                                break;
                            case r.bg:
                                r.bgPress();
                        }
                    }, r.mouseUpHandler = function (e) {
                        r.stage.removeEventListener(p.TF.MOUSE_UP, r.mouseUpHandler), r.stage.removeEventListener(p.TF.MOUSE_MOVE, r.updateCanvas), r.stopScrollDrag();
                    }, r.container = t, r.canvasHolder = i, r.spacing = s, r.updateScrollTab(), r.scrollTab.addEventListener(p.TF.MOUSE_DOWN, r.mouseDownHandler), r.bg.addEventListener(p.TF.MOUSE_DOWN, r.mouseDownHandler), r;
                }
                u(t, e);
                var i = t.prototype;
                return i.updateScrollTab = function () {
                    var e = this.canvasHolder.scaleX * d.X.canvasWidth + 2 * this.spacing, t = this.totalWidth / e;
                    t > 1 ? this.visible = false : (this.visible = true, this.scrollTab.graphics.width = t * this.bg.graphics.width, this.scrollTab.x = (this.canvasHolder.x - this.spacing) * -this.bg.graphics.width / e);
                }, i.bgPress = function () {
                    this.bg.mouseX > this.scrollTab.x ? (this.scrollTab.x = this.scrollTab.x + this.scrollTab.graphics.width, this.scrollTab.x + this.scrollTab.graphics.width > this.bg.graphics.width && (this.scrollTab.x = this.bg.graphics.width - this.scrollTab.graphics.width)) : (this.scrollTab.x = this.scrollTab.x - this.scrollTab.graphics.width, this.scrollTab.x < 0 && (this.scrollTab.x = 0)), this.updateCanvas();
                }, i.startScrollDrag = function () {
                    this.dragging = true, this.stage.addEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this.stage.addEventListener(p.TF.MOUSE_MOVE, this.updateCanvas), this.scrollTab.startDrag(false, new p.Ae(0, 0, this.bg.graphics.width - this.scrollTab.graphics.width, 0));
                }, i.stopScrollDrag = function () {
                    this.dragging = false, this.scrollTab.stopDrag();
                }, i.die = function () {
                    this.stage.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this.stage.removeEventListener(p.TF.MOUSE_MOVE, this.updateCanvas), this.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler), this.scrollTab.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler), this.bg.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler);
                }, t;
            }(function (e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).bg = new p.jy, t.bg.graphics.beginFill(6710886), t.bg.graphics.drawRect(0, 0, 500, 10), t.addChild(t.bg), t.scrollTab = new p.jy, t.scrollTab.graphics.beginFill(13421772), t.scrollTab.graphics.drawRect(0, 0, 500, 10), t.addChild(t.scrollTab), t;
                }
                return u(t, e), t;
            }(p.jy));
            function y(e, t) {
                e.prototype = Object.create(t.prototype), e.prototype.constructor = e, v(e, t);
            }
            function v(e, t) {
                return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var g = function (e) {
                function t(t, i, s) {
                    var r;
                    return (r = e.call(this) || this).totalHeight = 500, r.updateCanvas = function (e) {
                        void 0 === e && (e = null);
                        var t = r.canvasHolder.scaleY * d.X.canvasHeight + 2 * r.spacing;
                        r.canvasHolder.y = r.scrollTab.y * t / -r.bg.graphics.height + r.spacing, r.container.cullObjects();
                    }, r.mouseDownHandler = function (e) {
                        switch (e.target) {
                            case r.scrollTab:
                                r.dragging || r.startScrollDrag();
                                break;
                            case r.bg:
                                r.bgPress();
                        }
                    }, r.mouseUpHandler = function (e) {
                        r.stage.removeEventListener(p.TF.MOUSE_UP, r.mouseUpHandler), r.stage.removeEventListener(p.TF.MOUSE_MOVE, r.updateCanvas), r.stopScrollDrag();
                    }, r.container = t, r.canvasHolder = i, r.spacing = s, r.updateScrollTab(), r.scrollTab.addEventListener(p.TF.MOUSE_DOWN, r.mouseDownHandler), r.bg.addEventListener(p.TF.MOUSE_DOWN, r.mouseDownHandler), r;
                }
                y(t, e);
                var i = t.prototype;
                return i.updateScrollTab = function () {
                    var e = this.canvasHolder.scaleY * d.X.canvasHeight + 2 * this.spacing, t = this.totalHeight / e;
                    t > 1 ? this.visible = false : (this.visible = true, this.scrollTab.graphics.height = t * this.bg.graphics.height, this.scrollTab.y = (this.canvasHolder.y - this.spacing) * -this.bg.graphics.height / e);
                }, i.bgPress = function () {
                    this.bg.mouseY > this.scrollTab.y ? (this.scrollTab.y = this.scrollTab.y + this.scrollTab.graphics.height, this.scrollTab.y + this.scrollTab.graphics.height > this.bg.graphics.height && (this.scrollTab.y = this.bg.graphics.height - this.scrollTab.graphics.height)) : (this.scrollTab.y = this.scrollTab.y - this.scrollTab.graphics.height, this.scrollTab.y < 0 && (this.scrollTab.y = 0)), this.updateCanvas();
                }, i.startScrollDrag = function () {
                    this.dragging = true, this.stage.addEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this.stage.addEventListener(p.TF.MOUSE_MOVE, this.updateCanvas), this.scrollTab.startDrag(false, new p.Ae(0, 0, 0, this.bg.graphics.height - this.scrollTab.graphics.height));
                }, i.stopScrollDrag = function () {
                    this.dragging = false, this.scrollTab.stopDrag();
                }, i.die = function () {
                    this.stage.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this.stage.removeEventListener(p.TF.MOUSE_MOVE, this.updateCanvas), this.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler), this.scrollTab.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler), this.bg.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownHandler);
                }, t;
            }(function (e) {
                function t() {
                    var t;
                    return (t = e.call(this) || this).bg = new p.jy, t.bg.graphics.beginFill(6710886), t.bg.graphics.drawRect(0, 0, 10, 250), t.addChild(t.bg), t.scrollTab = new p.jy, t.scrollTab.graphics.beginFill(13421772), t.scrollTab.graphics.drawRect(0, 0, 10, 250), t.addChild(t.scrollTab), t;
                }
                return y(t, e), t;
            }(p.jy)), S = (i(4), i(5), i(1), i(2), i(0), i(3), i(319));
            function _(e, t) {
                return (_ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var w = function (e) {
                var t, i;
                function s(t, i, s) {
                    var r;
                    return void 0 === i && (i = true), void 0 === s && (s = 200), (r = e.call(this) || this).bgHeight = 100, r.bgWidth = s, r.createTextField(), r.textField.htmlText = t, r.createBg(), r.createWindow(i), r.adjustText(), r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, _(t, i);
                var r, o, n = s.prototype;
                return n.createBg = function () {
                    this.bgHeight = Math.max(2 * this.textField.height, 100), this.bg = new p.jy, this.bg.graphics.beginFill(13421772), this.bg.graphics.drawRect(0, 0, this.bgWidth, this.bgHeight), this.bg.graphics.endFill(), this.addChildAt(this.bg, 0);
                }, n.createTextField = function () {
                    var e = new p.SQ("HelveticaNeueLT Std", 12, 16777215, null, null, null, null, null, p.O3.CENTER);
                    this.textField = new p.nv, this.textField.defaultTextFormat = e, this.textField.width = this.bgWidth - 20, this.textField.height = 20, this.textField.autoSize = p.ie.LEFT, this.textField.multiline = true, this.textField.wordWrap = true, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = p.ML.ADVANCED, this.addChild(this.textField);
                }, n.adjustText = function () {
                    this.textField.x = (this.bgWidth - this.textField._pixiText.width) / 2, this.textField.y = (this.bgHeight - this.textField._pixiText.height) / 2;
                }, n.createWindow = function (e) {
                    this._window = new S.R(false, this, e);
                }, n.die = function () {
                    this._window.closeWindow();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            function b(e, t) {
                return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var C = function (e) {
                var t, i;
                function s(t, i, r, o, n, a, h, l, c, d) {
                    var u;
                    return void 0 === o && (o = true), void 0 === n && (n = 200), void 0 === a && (a = 70), void 0 === h && (h = 16613761), void 0 === l && (l = 16613761), void 0 === c && (c = 16777215), void 0 === d && (d = 16777215), (u = e.call(this, t, o, n) || this).mouseUpHandler = function (e) {
                        if (e.target == u.answer1Btn) u._index = 0; else {
                            if (e.target != u.answer2Btn) return;
                            u._index = 1;
                        }
                        u.dispatchEvent(new p.ju(s.ANSWER_CHOSEN));
                    }, u.createButtons(i, r, a, h, l, c, d), u.adjustSpacing(), u.addEventListener(p.TF.MOUSE_UP, u.mouseUpHandler, false, 0, true), u;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, b(t, i);
                var r, o, n = s.prototype;
                return n.createBg = function () {
                    this.bgHeight = Math.max(Math.round(this.textField.height + 40), 100), this.bg = new p.jy, this.bg.graphics.beginFill(13421772), this.bg.graphics.drawRect(0, 0, this.bgWidth, this.bgHeight), this.bg.graphics.endFill(), this.addChildAt(this.bg, 0);
                }, n.createButtons = function (e, t, i, s, r, o, n) {
                    this.answer1Btn = new a.Me(e, s, i, o), this.answer2Btn = new a.Me(t, r, i, n), this.addChild(this.answer1Btn), this.addChild(this.answer2Btn);
                    var h = 2 * i + 20, l = .5 * this.bgWidth;
                    this.answer1Btn.x = l - .5 * h, this.answer2Btn.x = l + 10;
                }, n.adjustSpacing = function () {
                    var e = this.bgHeight - 30;
                    this.answer1Btn.y = this.answer2Btn.y = e, this.textField.y = (e - this.textField.height) / 2;
                }, n.die = function () {
                    this._window.closeWindow(), this.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler);
                }, r = s, (o = [{
                    key: "index", get: function () {
                        return this._index;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(w);
            C.ANSWER_CHOSEN = "answerchosen";
            var L = i(221), B = function () {
                function e() { }
                return e.buildButton = function (e) {
                    var t;
                    switch (e) {
                        case "groupSelected":
                            t = new a.Me("Group Items", 16613761, 120);
                            break;
                        case "breakSelectedGroups":
                            t = new a.Me("Break Group", 16613761, 120);
                            break;
                        case "convertGroupToVehicle":
                            t = new a.Me("Set as Vehicle", 16776805, 120, 0);
                            break;
                        case "convertVehicleToGroup":
                            t = new a.Me("Revert to Group", 16613761, 120);
                            break;
                        case "setShapeAsHandle":
                            t = new a.Me("Set as Handle", 16776805, 120, 0);
                            break;
                        case "removeHandleProperty":
                            t = new a.Me("Remove Handle", 16613761, 120);
                            break;
                        case "addNewTarget":
                            t = new a.Me("Add New Target", 16776805, 120, 0);
                            break;
                        case "removeTarget":
                            t = new a.Me("Remove Target", 16613761, 120);
                            break;
                        case "resetScale":
                            t = new a.Me("Reset Scale", 16613761, 120);
                            break;
                        case "reverseShape":
                            t = new a.Me("Reverse Shape", 16613761, 120);
                            break;
                        default:
                            return null;
                    }
                    return t.functionString = e, t;
                }, e;
            }(), A = i(321), E = i(322);
            function M(e, t) {
                return (M = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var k = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).handleColorSelected = function (e) {
                        d.X.backgroundColor != t.backgroundColorInput.color && (-1 == t.backgroundColorInput.color || 16777215 == t.backgroundColorInput.color ? d.X.backgroundColor = t.backgroundColorInput.color = 16777215 : (t.backdropDrop.currentIndex = d.X.backDropIndex = 0, d.X.backgroundColor = t.backgroundColorInput.color));
                    }, t.bdSelected = function (e) {
                        t.backgroundColorInput.color = d.X.backgroundColor = 16777215, d.X.backDropIndex = t.backdropDrop.currentIndex;
                    }, t.windowClosed = function (e) {
                        t.dispatchEvent(e.clone());
                    }, t.init(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, M(t, i);
                var r, o, n = s.prototype;
                return n.init = function () {
                    this.backdropDrop = new E.m("level backdrop:", ["blank", "green hills", "city"], [0, 1, 2], d.X.backDropIndex, 16777215), this.addChild(this.backdropDrop), this.backdropDrop.xLeft = 28, this.backdropDrop.y = 15, this.backdropDrop.addEventListener(E.m.ITEM_SELECTED, this.bdSelected), this.backgroundColorInput = new a.b9("background color", "backgroundColor", true, true), this.addChildAt(this.backgroundColorInput, this.getChildIndex(this.backdropDrop)), this.backgroundColorInput.x = 20, this.backgroundColorInput.y = this.backdropDrop.y + this.backdropDrop.height + 3, this.backgroundColorInput.setValue(d.X.backgroundColor), this.backgroundColorInput.addEventListener(a.fF.VALUE_CHANGE, this.handleColorSelected), this.msg = new p.nv;
                    var e = this.msg.defaultTextFormat;
                    e.font = "HelveticaNeueLT Std", this.msg.setTextFormat(e), this.msg.text = "* The background color you select will\nbe visible during gameplay but not\nwhile you edit.", this.msg.width = 100, this.msg.textColor = 16777215, this.msg.x = 20, this.msg.y = 100, this.addChild(this.msg), this.buildWindow(), this._window.resize();
                }, n.buildWindow = function () {
                    this._window = new a.Rz(true, this, true), this._window.x = s.windowX, this._window.y = s.windowY, this._window.minWidth = 240, this._window.minHeight = 300, this._window.addEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed);
                }, n.die = function () {
                    this._window.removeEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed), this._window.closeWindow(), this.backdropDrop.removeEventListener(E.m.ITEM_SELECTED, this.bdSelected), this.backdropDrop.die(), this.backgroundColorInput.removeEventListener(a.fF.VALUE_CHANGE, this.handleColorSelected), this.backgroundColorInput.die();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            k.windowX = 30, k.windowY = 250, i(26), i(42), i(132), i(105), i(11), i(31);
            var x = i(40), O = i(168), T = i(15), P = i(25);
            function R(e, t) {
                return (R = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var D = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).loadLevels = function (e) {
                        void 0 === e && (e = null), t.clearList(), t.refreshButton.removeEventListener(p.TF.MOUSE_UP, t.loadLevels);
                        var i = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                        i.method = p.H9.POST;
                        var s = new p.JH;
                        s.action = "get_cmb_by_user", i.data = s, t.loader = new p.yW, t.addLoaderListeners(), t.loader.load(i), t.addEventListener(p.ju.ENTER_FRAME, t.spin, false, 0, true);
                    }, t.dataLoadComplete = function (e) {
                        t.removeLoaderListeners(), t.disableSpin = true;
                        var i, r = String(t.loader.data), o = r.substr(0, 8);
                        if (o.indexOf("<html>") > -1) i = new G("There was an unexpected system Error", "oh"); else if (o.indexOf("failure") > -1) {
                            var n = r.split(":");
                            i = "invalid_action" == n[1] ? new G("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == n[1] ? new G("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" == n[1] ? new G("Sorry, you are no longer logged in.", "ok") : new G("An unknown Error has occurred.", "oh");
                        }
                        if (i) {
                            var a = i.window;
                            t.stage && (t.stage.addChild(a), a.center());
                        } else {
                            (r = t.loader.data).split(":")[0];
                            var h = new p.hH(t.loader.data);
                            s.levelDataArray = [];
                            var l = 0;
                            try {
                                l = h.private[0].lvs[0].lv.length;
                            } catch (e) { }
                            for (var c = 0; c < l; c++) {
                                var d = h.private[0].lvs[0].lv[c], u = new O.b(d["@id"], d["@ln"], d["@ui"], d["@un"], 0, 0, 0, d["@dc"], d.uc[0].cdata, d["@pc"], 0, 0, 0);
                                s.levelDataArray.push(u);
                            }
                            l = 0;
                            try {
                                l = h.published[0].lvs[0].lv.length;
                            } catch (e) { }
                            for (var m = 0; m < l; m++) {
                                var f = h.published[0].lvs[0].lv[m], y = new O.b(f["@id"], f["@ln"], f["@ui"], f["@un"], 0, 0, 0, f["@dc"], f.uc, f["@pc"], 0, 0, 1);
                                s.levelDataArray.push(y);
                            }
                            t.loaderText.text = String(s.levelDataArray.length) + " total", t.buildList();
                        }
                    }, t.spin = function (e) {
                        t.refreshButton.rotation = (t.refreshButton.rotation + 15) % 360, "0" == t.refreshButton.rotation.toFixed(0) && t.disableSpin && (t.disableSpin = false, t.removeEventListener(p.ju.ENTER_FRAME, t.spin), t.refreshButton.addEventListener(p.TF.MOUSE_UP, t.loadLevels, false, 0, true));
                    }, t.securityErrorHandler = function (e) {
                        t.removeLoaderListeners();
                    }, t.mouseUpHandler = function (e) {
                        if (e.target instanceof a._N) {
                            var i = e.target;
                            t.currentItem = i;
                        }
                    }, t.loadSelected = function (e) {
                        t._currentItem ? t.dispatchEvent(new p.ju(s.LOAD_SELECTED)) : t.errorText.text = "Select a Level, you fool!";
                    }, t.deleteSelected = function (e) {
                        t._currentItem ? t.dispatchEvent(new p.ju(s.DELETE_SELECTED)) : t.errorText.text = "Select a Level, you fool!";
                    }, t.importLevel = function (e) {
                        "" !== t.levelText.temp.text && (t._leveldata = new p.hH(t.levelText.temp.text), t.dispatchEvent(new p.ju(s.IMPORT_DATA)));
                    }, t.windowClosed = function (e) {
                        t.dispatchEvent(e.clone());
                    }, t.buildView(), t.init(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, R(t, i);
                var r, o, n = s.prototype;
                return n.buildView = function () {
                    var e = new p.KG((0, P.qX)("EditorUI", "LoadMenu"));
                    e.convertChildren(), this.addChild(e), this.loaderText = p.nv.spriteToTextField(e.loaderText, e), this.errorText = p.nv.spriteToTextField(e.errorText, e), this.levelText = p.nv.spriteToTextField(e.levelText, e), this.refreshButton = e.refreshButton, this.listBg = e.listBg, e.children[3].x += 43, e.children[5].x += 43, this.errorText.x += 43;
                }, n.init = function () {
                    this.loaderText.embedFonts = this.errorText.embedFonts = true;
                    var e = new x.oH({ input: { multiline: true } });
                    if (e.setInputStyle("width", "190px"), e.setInputStyle("height", "38px"), e.x = this.levelText.x, e.y = this.levelText.y, e.setInputStyle("fontFamily", this.levelText.pixiText.style.fontFamily), e.setInputStyle("fontSize", this.levelText.pixiText.style.fontSize + "px"), e.setInputStyle("color", this.levelText.pixiText.style.fill), e.substituteText = false, this.levelText.maxChars && (e.maxLength = this.levelText.maxChars), this.pixiSprite.addChild(e), this.removeChild(this.levelText), this.levelText.temp = e, this.loadButton = new a.Me("Load Level", 16613761, 200), this.loadButton.x = 20, this.loadButton.y = 260, this.addChild(this.loadButton), this.loadButton.addEventListener(p.TF.MOUSE_UP, this.loadSelected), this.deleteButton = new a.Me("Delete Level", 16776805, 200, 0), this.deleteButton.x = 20, this.deleteButton.y = this.loadButton.y + 28, this.addChild(this.deleteButton), this.deleteButton.addEventListener(p.TF.MOUSE_UP, this.deleteSelected), this.importButton = new a.Me("Import Level Data", 4032711, 200), this.importButton.x = 20, this.importButton.y = 408, this.addChild(this.importButton), this.importButton.addEventListener(p.TF.MOUSE_UP, this.importLevel), this.refreshButton.buttonMode = true, this.buildWindow(), this._window.resize(), T.Z.user_id > 0) s.levelDataArray ? (this.refreshButton.addEventListener(p.TF.MOUSE_UP, this.loadLevels, false, 0, true), this.buildList()) : this.loadLevels(); else {
                        this.loadButton.disabled = true, this.deleteButton.disabled = true;
                        var t = new p.SQ("HelveticaNeueLT Std", 11, 16613761, true, null, null, null, null, p.O3.CENTER), i = new p.nv;
                        i.width = 240, i.defaultTextFormat = t, i.text = "Log in to load your levels!", i.x = 0, i.y = 130, this.addChild(i);
                    }
                }, n.addLoaderListeners = function () {
                    this.loader.addEventListener(p.ju.COMPLETE, this.dataLoadComplete), this.loader.addEventListener(p.XD.IO_ERROR, this.securityErrorHandler);
                }, n.removeLoaderListeners = function () {
                    this.loader.removeEventListener(p.ju.COMPLETE, this.dataLoadComplete), this.loader.removeEventListener(p.XD.IO_ERROR, this.securityErrorHandler);
                }, n.buildList = function () {
                    this.levelList = [], this.list = new p.jy, this.listHolder = new p.jy, this.listMask = new p.jy, this.listMask.graphics.beginFill(16711680), this.listMask.graphics.drawRect(0, 0, this.listBg.width - 4, this.listBg.height - 4), this.listMask.graphics.endFill(), this.listHolder.x = this.listMask.x = this.listBg.x + 2, this.listHolder.y = this.listMask.y = this.listBg.y + 2, this.listHolder.addChild(this.list), this.addChild(this.listHolder), this.addChild(this.listMask), this.listHolder.mask = this.listMask;
                    for (var e = 0, t = 0; t < s.levelDataArray.length; t++) {
                        var i = s.levelDataArray[t], r = new a._N(i.name);
                        r.y = e, e += r.height - 2, this.list.addChild(r), this.levelList.push(r), r.mouseEnabled = true, r.addEventListener(p.TF.MOUSE_UP, this.mouseUpHandler);
                    }
                    this.scroller = new a._P(this.list, this.listMask, 22), this.addChild(this.scroller), this.scroller.y = this.listMask.y, this.scroller.x = this.listMask.x + this.listMask.graphics.width - 12;
                }, n.clearList = function () {
                    var e = this;
                    this.list && this.list.children.forEach(function (t) {
                        return t.removeEventListener(p.TF.MOUSE_UP, e.mouseUpHandler);
                    }), this.listHolder && this.removeChild(this.listHolder), this.listMask && this.removeChild(this.listMask), this.scroller && (this.scroller.die(), this.removeChild(this.scroller)), this._currentItem = null;
                }, n.buildWindow = function () {
                    this._window = new a.Rz(true, this, true), this._window.x = s.windowX, this._window.y = s.windowY, this._window.addEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed);
                }, n.die = function () {
                    this.loadButton.removeEventListener(p.TF.MOUSE_UP, this.loadSelected), this.importButton.removeEventListener(p.TF.MOUSE_UP, this.importLevel), this.refreshButton.removeEventListener(p.TF.MOUSE_UP, this.loadLevels), this.refreshButton.removeEventListener(p.ju.ENTER_FRAME, this.spin), this.list && this.list.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this._window.removeEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed), this._window.closeWindow(), this.loader && this.removeLoaderListeners(), this.scroller && this.scroller.die(), this.levelText.temp.destroy();
                }, r = s, (o = [{
                    key: "currentItem", set: function (e) {
                        this._currentItem && (this._currentItem.selected = false), this._currentItem = e, this._currentItem.selected = true;
                    }
                }, {
                    key: "currentLevelInfo", get: function () {
                        if (!this._currentItem) return null;
                        var e = this.levelList.indexOf(this._currentItem);
                        return s.levelDataArray[e];
                    }
                }, {
                    key: "levelData", get: function () {
                        return this._leveldata;
                    }
                }, {
                    key: "window", get: function () {
                        return this._window;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            D.LOAD_SELECTED = "loadselected", D.DELETE_SELECTED = "deleteselected", D.IMPORT_DATA = "importdata", D.windowX = 30, D.windowY = 250;
            var I = i(320), j = i(224), F = i(225);
            function J(e, t) {
                return (J = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var G = function (e) {
                var t, i;
                function s(t, i, r, o) {
                    var n;
                    return void 0 === r && (r = true), void 0 === o && (o = 200), (n = e.call(this, t, r, o) || this).mouseUpHandler = function (e) {
                        n.dispatchEvent(new p.ju(s.BUTTON_PRESSED)), n.die();
                    }, n.button = new a.Me(i, 16613761, 70), n.addChild(n.button), n.button.x = Math.round((o - n.button._bgWidth) / 2), n.adjustSpacing(), n.button.addEventListener(p.TF.MOUSE_UP, n.mouseUpHandler, false, 0, true), n;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, J(t, i);
                var r = s.prototype;
                return r.createBg = function () {
                    this.bgHeight = Math.max(Math.round(this.textField._pixiText.height + 40), 100), this.bg = new p.jy, this.bg.graphics.beginFill(13421772), this.bg.graphics.drawRect(0, 0, this.bgWidth, this.bgHeight), this.bg.graphics.endFill(), this.addChildAt(this.bg, 0);
                }, r.adjustSpacing = function () {
                    var e = this.bgHeight - 30;
                    this.button.y = e, this.textField.y = (e - this.textField._pixiText.height) / 2;
                }, r.die = function () {
                    this._window.closeWindow(), this.button.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler);
                }, s;
            }(w);
            G.BUTTON_PRESSED = "buttonpressed";
            var H = i(133), V = i(124), N = i(169), U = i(555), W = i(89), X = i(489), Y = i(492);
            function z(e, t) {
                return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }

            window.showPrompt = function(message, buttonLabel = "ok") {
                const prompt = new G(message, buttonLabel);
                return prompt;
            }
            var Z = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return void 0 === t && (t = null), (i = e.call(this) || this).maxNameChars = 20, i.minNameChars = 4, i.maxCommentChars = 255, i.windowClosed = function (e) {
                        I.x.instance.hide(), i.dispatchEvent(e.clone());
                    }, i.setCharText = function (e) {
                        var t = i.maxNameChars - i.nameText._pixiTextInput.text.length;
                        i.nCharsText.text = t + " chars left";
                        var s = i.maxCommentChars - i.commentsText.temp.text.length;
                        i.cCharsText.text = s + " chars left", i.commentsText.tempText = i.commentsText.temp.text;
                    }, i.rollOverHandler = function (e) {
                        switch (e.target) {
                            case i.saveNewButton:
                                I.x.instance.show("Your saved levels can only be accessed by you until you publish them.<br><br>You must save a level before publishing it.", i.saveNewButton);
                                break;
                            case i.saveOverwriteButton:
                                I.x.instance.show("You may only overwrite non-published levels. If you'd like to alter a published level, you must load it in the editor and save it as a new level.", i.saveOverwriteButton);
                                break;
                            case i.copyLevelButton:
                                I.x.instance.show("Copy your level as text, and paste it in a text file or email.  This way, if the site is running like shit and fails to save, you can have a local copy of your level and try saving it again later.  You can import this data into the editor through the load menu.", i.copyLevelButton);
                        }
                    }, i.savePressHandler = function (e) {
                        var t;
                        switch (I.x.instance.hide(), i.commentsText.temp.blur(), e.target) {
                            case i.saveNewButton:
                                if (i.levelDataObject && i.levelName == i.levelDataObject.name) {
                                    i.errorPrompt = new G("You should save your new level with a new name.", "ok");
                                    var r = i.errorPrompt.window;
                                    return i.stage.addChild(r), void r.center();
                                }
                                if (i.levelName = W.LC.trimWhitespace(i.levelName), i.levelName.length < i.minNameChars) return i.errorPrompt = new G("Level name must be at least 4 characters.", "ok"), r = i.errorPrompt.window, i.stage.addChild(r), void r.center();
                                t = new p.ju(s.SAVE_NEW);
                                break;
                            case i.saveOverwriteButton:
                                t = new p.ju(s.SAVE_OVER);
                                break;
                            default:
                                return;
                        }
                        return T.Z.disableUpload ? (i.errorPrompt = new G(T.Z.disableMessage, "OH FINE"), r = i.errorPrompt.window, i.stage.addChild(r), void r.center()) : 0 == i.levelName.length ? (i.errorPrompt = new G("Enter a name for your level.", "ok"), r = i.errorPrompt.window, i.stage.addChild(r), void r.center()) : X.W.containsBadWord(i.levelName) ? (i.errorPrompt = new G("Your level name contains some risky words. Please remove them. (sorry, I've recently run the risk of losing advertising)", "ok"), r = i.errorPrompt.window, i.stage.addChild(r), void r.center()) : X.W.containsBadWord(i.comments) ? (i.errorPrompt = new G("Your level comments contain some risky words. Please remove them. (sorry, I've recently run the risk of losing advertising)", "ok"), r = i.errorPrompt.window, i.stage.addChild(r), void r.center()) : void i.dispatchEvent(t);
                    }, i.copyLevelText = function (e) {
                        var t = document.createElement("textarea");
                        t.value = re.instance.createXML(true).toXMLString(), t.style.top = "0", t.style.left = "0", t.style.position = "fixed", document.body.appendChild(t), t.focus(), t.select();
                        try {
                            document.execCommand("copy");
                        } catch (e) { }
                        document.body.removeChild(t), W.fX.trackEvent(W.fX.EDITOR, W.fX.COPY_LEVELDATA, "authorID_" + T.Z.user_id);
                    }, i.mouseDownTextHandler = function (e) {
                        i.levelText.setSelection(0, i.levelText.temp.text.length);
                    }, i.levelDataObject = t, i.buildView(), i.init(), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, z(t, i);
                var r, o, n = s.prototype;
                return n.buildView = function () {
                    var e = new p.KG((0, P.qX)("EditorUI", "SaveMenu"));
                    e.convertChildren(), this.addChild(e), this.nameText = p.nv.spriteToTextField(e.nameText, e), this.commentsText = p.nv.spriteToTextField(e.commentsText, e), this.nCharsText = p.nv.spriteToTextField(e.nCharsText, e), this.cCharsText = p.nv.spriteToTextField(e.cCharsText, e), this.levelText = p.nv.spriteToTextField(e.levelText, e);
                    var t = e._pixiSprite.children;
                    t[8].x += 43, t[9].x += 43, t[4].x += 43;
                }, n.init = function () {
                    this.nameText.autoSize = this.commentsText.autoSize = p.ie.NONE, this.nameText.selectable = this.commentsText.selectable = true, this.nCharsText.selectable = this.cCharsText.selectable = false, this.nameText.embedFonts = this.commentsText.embedFonts = this.nCharsText.embedFonts = this.cCharsText.embedFonts = true, this.commentsText.wordWrap = true, this.nameText.multiline = false, this.commentsText.multiline = true, this.nameText.maxChars = this.maxNameChars, this.commentsText.maxChars = this.maxCommentChars, this.commentsText.restrict = this.nameText.restrict = "a-z A-Z 0-9 !@#$%\\^&*()_+\\-=;'|?/,.<> \"", this.nameText.type = p.T3.INPUT, this.nameText._pixiTextInput.setInputStyle("width", "200px");
                    var e = new x.oH({ input: { multiline: true } });
                    e.setInputStyle("width", "190px"), e.setInputStyle("height", "92px"), e.x = this.commentsText.x, e.y = this.commentsText.y, e.setInputStyle("fontFamily", this.commentsText.pixiText.style.fontFamily), e.setInputStyle("fontSize", this.commentsText.pixiText.style.fontSize + "px"), e.setInputStyle("color", this.commentsText.pixiText.style.fill), e.substituteText = true, this.commentsText.maxChars && (e.maxLength = this.commentsText.maxChars), this.pixiSprite.addChild(e), this.removeChild(this.commentsText), this.commentsText.temp = e;
                    var t = new x.oH({ input: { multiline: true } });
                    if (t.setInputStyle("width", "190px"), t.setInputStyle("height", "38px"), t.x = this.levelText.x, t.y = this.levelText.y, t._dom_input.setAttribute("readonly", ""), t.setInputStyle("fontFamily", this.levelText.pixiText.style.fontFamily), t.setInputStyle("fontSize", this.levelText.pixiText.style.fontSize + "px"), t.setInputStyle("color", this.levelText.pixiText.style.fill), t.substituteText = false, this.levelText.maxChars && (t.maxLength = this.levelText.maxChars), this.pixiSprite.addChild(t), this.removeChild(this.levelText), this.levelText.temp = t, this.addEventListener(p.ju.ENTER_FRAME, this.setCharText), T.Z.user_id > 0) {
                        var i = new p.SQ("HelveticaNeueLT Std", 11, 4032711, null, null, null, null, null, p.O3.LEFT), s = new p.nv;
                        s.defaultTextFormat = i, s.text = "Read these rules and follow them!";
                        var r = new p.TC;
                        r.beginFill(0), r.drawRect(0, 0, 180, 20), r.pixiGraphics.alpha = 0, this.rulesSprite = new p.jy, this.rulesSprite.x = 20, this.rulesSprite.y = 190, this.rulesSprite.addChild(s), this.addChild(this.rulesSprite), this.rulesSprite._pixiSprite.addChild(r.pixiGraphics);
                        var o = new Y.H(this.rulesSprite, T.Z.siteURL + "level_rules.tjf");
                        o.colorTransform = new p.JJ(.71, .71, .71, 1, 0, 0, 0, 0), o.overTint = 5082300;
                    } else {
                        var n = new p.SQ("HelveticaNeueLT Std", 11, 16613761, true, null, null, null, null, p.O3.CENTER), h = new p.nv;
                        h.width = 240, h.defaultTextFormat = n, h.text = "Log in to upload your level!", h.x = 0, h.y = 190, this.addChild(h);
                    }
                    this.saveNewButton = new a.Me("Save New Level", 16613761, 200), this.saveNewButton.x = 20, this.saveNewButton.y = 215, this.addChild(this.saveNewButton), this.saveNewButton.addEventListener(p.TF.MOUSE_UP, this.savePressHandler), this.saveNewButton.addEventListener(p.TF.ROLL_OVER, this.rollOverHandler), T.Z.user_id <= 0 && (this.saveNewButton.disabled = true, this.commentsText.disabled = true, this.commentsText.temp.disabled = true, this.nameText.disabled = true, this.nameText._pixiTextInput.disabled = true), this.levelDataObject && (this.levelDataObject.isPublic || (this.saveOverwriteButton = new a.Me("Overwrite Current Level", 16613761, 200), this.saveOverwriteButton.x = 20, this.saveOverwriteButton.y = this.saveNewButton.y + 28, this.addChild(this.saveOverwriteButton), this.saveOverwriteButton.addEventListener(p.TF.MOUSE_UP, this.savePressHandler), this.saveOverwriteButton.addEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.levelName = decodeURI(this.levelDataObject.name), this.comments = decodeURI(this.levelDataObject.comments))), this.copyLevelButton = new a.Me("Copy Leveldata to Clipboard", 4032711, 200), this.copyLevelButton.x = 20, this.copyLevelButton.y = this.levelText.y + 58, this.addChild(this.copyLevelButton), this.copyLevelButton.addEventListener(p.TF.MOUSE_UP, this.copyLevelText), this.copyLevelButton.addEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.levelText.temp.text = re.instance.createXML(true).toXMLString(), this.levelText.addEventListener(p.TF.MOUSE_DOWN, this.mouseDownTextHandler), this.buildWindow(), this._window.resize();
                }, n.buildWindow = function () {
                    this._window = new a.Rz(true, this, true), this._window.x = s.windowX, this._window.y = s.windowY, this._window.addEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed);
                }, n.inputValueChange = function (e) {
                    this[e.inputObject.attribute] = e.value;
                }, n.die = function () {
                    I.x.instance.hide(), this._window.removeEventListener(a.Rz.WINDOW_CLOSED, this.windowClosed), this._window.closeWindow(), this.saveNewButton.removeEventListener(p.TF.MOUSE_UP, this.savePressHandler), this.saveNewButton.removeEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.saveOverwriteButton && (this.saveOverwriteButton.removeEventListener(p.TF.MOUSE_UP, this.savePressHandler), this.saveOverwriteButton.removeEventListener(p.TF.ROLL_OVER, this.rollOverHandler)), this.copyLevelButton.removeEventListener(p.TF.MOUSE_UP, this.copyLevelText), this.copyLevelButton.removeEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.levelText.removeEventListener(p.TF.MOUSE_DOWN, this.mouseDownTextHandler), this.removeEventListener(p.ju.ENTER_FRAME, this.setCharText), this.levelText.temp.destroy(), this.commentsText.temp.destroy();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }, {
                    key: "levelName", get: function () {
                        return this.nameText.text;
                    }, set: function (e) {
                        this.nameText.text = e;
                    }
                }, {
                    key: "comments", get: function () {
                        return this.commentsText.tempText;
                    }, set: function (e) {
                        this.commentsText.temp.text = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            Z.SAVE_NEW = "savenew", Z.SAVE_OVER = "saveover", Z.windowX = 30, Z.windowY = 250, i(54), i(13), i(29), i(20), i(18);
            var $ = i(315), K = i(223), q = i(214), Q = i(164), ee = i(24), te = i(104);
            function ie(e, t) {
                for (var i, s = 0; s < t.length; s++) {
                    var r = t[s];
                    r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                        if ("object" != typeof e || null === e) return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 !== i) {
                            var s = i.call(e, "string");
                            if ("object" != typeof s) return s;
                            throw new TypeError("@@toPrimitive must return a primitive value.");
                        }
                        return String(e);
                    }(r.key)) ? i : String(i), r);
                }
            }
            function se(e, t) {
                return (se = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var re = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    if ((i = e.call(this) || this).pVertIDs = [], i.eVertIDs = [], i.levelSaved = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelSaved), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler);
                        var r = String(t.data), o = r.substr(0, 8), n = r.split(":");
                        o.indexOf("<html>") > -1 ? i.openErrorPrompt("There was an unexpected system Error", "oh") : "failure" === n[0] ? "invalid_action" === n[1] ? i.openErrorPrompt("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "time_lockout" === n[1] ? i.openErrorPrompt("You saved a level too recently. Please wait a moment and try again.", "ok") : "bad_param" === n[1] ? i.openErrorPrompt("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" === n[1] ? i.openErrorPrompt("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" === n[1] ? i.openErrorPrompt("You were logged out somehow. You can try opening a new window and logging in, then attempt to save again.", "alright") : i.openErrorPrompt("An unknown Error has occurred.", "oh") : "success" === n[0] ? (Q.f.trackEvent(Q.f.EDITOR, Q.f.SAVE_LEVEL, "authorID_" + T.Z.user_id), i._lastSavedData.id = (0, p.e$)(n[1]), i._lastSavedData.data = i.levelXML, i.dispatchEvent(new p.ju(s.SAVE_COMPLETE))) : i.openErrorPrompt("Error: something dreadful has happened", "ok");
                    }, i.levelOverWritten = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelOverWritten), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler);
                        var r = String(t.data), o = r.substr(0, 8), n = r.split(":");
                        o.indexOf("<html>") > -1 ? i.openErrorPrompt("There was an unexpected system Error", "oh") : "failure" === n[0] ? "invalid_action" === n[1] ? i.openErrorPrompt("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "time_lockout" === n[1] ? i.openErrorPrompt("You updated a level too recently. Please wait a moment and try again.", "ok") : "bad_param" === n[1] ? i.openErrorPrompt("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" === n[1] ? i.openErrorPrompt("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" === n[1] ? i.openErrorPrompt("You were logged out somehow. You can try opening a new window and logging in, then attempt to save again.", "alright") : i.openErrorPrompt("An unknown Error has occurred.", "oh") : "success" === n[0] ? (Q.f.trackEvent(Q.f.EDITOR, Q.f.OVERWRITE_LEVEL, "authorID_" + T.Z.user_id), i._lastSavedData.data = i.levelXML, i.dispatchEvent(new p.ju(s.SAVE_COMPLETE))) : i.openErrorPrompt("Error: something dreadful has happened", "ok");
                    }, i.levelPublished = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelPublished), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler);
                        var r = String(t.data), o = r.substr(0, 8), n = r.split(":");
                        o.indexOf("<html>") > -1 ? i.openErrorPrompt("There was an unexpected system Error", "oh") : "failure" === n[0] ? "invalid_action" === n[1] ? i.openErrorPrompt("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "time_lockout" === n[1] ? i.openErrorPrompt("You may only publish one level per day.", "ok") : "bad_param" === n[1] ? i.openErrorPrompt("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" === n[1] ? i.openErrorPrompt("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" === n[1] ? i.openErrorPrompt("You were logged out somehow. You can try opening a new window and logging in, then attempt to save and publish again.", "alright") : i.openErrorPrompt("An unknown Error has occurred.", "oh") : "success" === n[0] ? (Q.f.trackEvent(Q.f.EDITOR, Q.f.PUBLISH_LEVEL, "authorID_" + T.Z.user_id), i._lastSavedData.isPublic = true, i.dispatchEvent(new p.ju(s.PUBLISH_COMPLETE))) : i.openErrorPrompt("Error: something dreadful has happened", "ok");
                    }, i.closePrompt = function (e) {
                        i.promptSprite.removeEventListener(G.BUTTON_PRESSED, i.closePrompt), i.promptSprite = null, i.dispatchEvent(new p.ju(s.GENERIC_ERROR));
                    }, i.levelLoaded = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelLoaded), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler);
                        var r = String(t.data), o = r.substr(0, 8);
                        if (o.indexOf("<html>") > -1) i.openErrorPrompt("There was an unexpected system Error", "oh"); else if (o.indexOf("failure") > -1) {
                            var n = r.split(":");
                            "invalid_action" === n[1] ? i.openErrorPrompt("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" === n[1] ? i.openErrorPrompt("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" === n[1] ? i.openErrorPrompt("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : i.openErrorPrompt("An unknown Error has occurred.", "oh");
                        } else {
                            Q.f.trackEvent(Q.f.EDITOR, Q.f.LOAD_LEVEL, "authorID_" + T.Z.user_id);
                            var a = i.importAuthorId > -1 ? i.importAuthorId : T.Z.user_id, h = $.sA.decryptBytes(t.data, "eatshit" + a);
                            i.levelXML = new p.hH(h), i.buildLevel(), i.dispatchEvent(new p.ju(s.LOAD_COMPLETE));
                        }
                    }, i.levelDeleted = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelDeleted), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler);
                        var r = String(t.data), o = r.substr(0, 8), n = r.split(":");
                        o.indexOf("<html>") > -1 ? i.openErrorPrompt("There was an unexpected system Error", "oh") : "failure" === n[0] ? "invalid_action" === n[1] ? i.openErrorPrompt("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" === n[1] ? i.openErrorPrompt("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" === n[1] ? i.openErrorPrompt("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" === n[1] ? i.openErrorPrompt("You were logged out somehow. You can try opening a new window and logging in, then attempt to delete again.", "ok") : i.openErrorPrompt("An unknown Error has occurred.", "oh") : "success" === n[0] ? (Q.f.trackEvent(Q.f.EDITOR, Q.f.DELETE_LEVEL, "authorID_" + T.Z.user_id), i.dispatchEvent(new p.ju(s.DELETE_COMPLETE))) : i.openErrorPrompt("Error: something dreadful has happened", "ok");
                    }, i.IOErrorHandler = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(p.ju.COMPLETE, i.levelLoaded), t.removeEventListener(p.ju.COMPLETE, i.levelOverWritten), t.removeEventListener(p.ju.COMPLETE, i.levelSaved), t.removeEventListener(p.ju.COMPLETE, i.levelPublished), t.removeEventListener(p.ju.COMPLETE, i.levelDeleted), t.removeEventListener(p.XD.IO_ERROR, i.IOErrorHandler), i.openErrorPrompt("Sorry, there was an IO Error. Try changing your CORS proxy?  Maybe try again or something?", "alright");
                    }, s._instance) throw new Error("saverloader already exists");
                    return i.canvas = t, s._instance = function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(i), i.init(), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, se(t, i);
                var a, h, l, c = s.prototype;
                return c.init = function () { }, c.saveNewLevel = function (e, t) {
                    if (this.canvas.tooManyShapes) this.openErrorPrompt("I SAID TOO MANY GODDAMN SHAPES... DELETE SOME", "alright"); else if (this.canvas.tooMuchArt) this.openErrorPrompt("I SAID TOO MANY GODDAMN ART SHAPES... DELETE SOME", "alright"); else {
                        this.statusSprite = new w("Saving New Level...<br><br>(just in case this fails, levels are now autosaved locally)");
                        var i = this.statusSprite.window;
                        this.canvas.parent.parent.addChild(i), i.center(), this._lastSavedData = new O.b(null, e, null, null, null, null, null, null, t, null, null, null, null, null);
                        var s = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/set_level.hw"));
                        s.method = p.H9.POST;
                        var r = new p.JH;
                        r.action = "create", r.level_name = e, r.user_comment = t, r.playable_character = this.canvas.startPlaceHolder.forceChar ? this.canvas.startPlaceHolder.characterIndex : 0, this.levelXML = this.createXML(), T.Z.sharedObject.data.editorLevelData = this.levelXML.toXMLString();
                        var o = this.levelXML.toCompactXMLString(), n = $.sA.encryptBytes(o, "eatshit" + T.Z.user_id), a = $.dr.encodeByteArray(n);
                        r.level_record = encodeURIComponent(a), s.data = r;
                        var h = new p.yW;
                        h.addEventListener(p.ju.COMPLETE, this.levelSaved), h.addEventListener(p.XD.IO_ERROR, this.IOErrorHandler), h.load(s);
                    }
                }, c.saveOverLevel = function (e, t, i) {
                    if (this.canvas.tooManyShapes) this.openErrorPrompt("I SAID TOO MANY GODDAMN SHAPES... DELETE SOME", "alright"); else if (this.canvas.tooMuchArt) this.openErrorPrompt("I SAID TOO MANY GODDAMN ART SHAPES... DELETE SOME", "alright"); else {
                        this.statusSprite = new w("Saving Over Level...<br><br>(just in case this fails, levels are now autosaved locally)");
                        var s = this.statusSprite.window;
                        this.canvas.parent.parent.addChild(s), s.center(), this._lastSavedData = new O.b(e, t, null, null, null, null, null, null, i, null, null, null, null, null);
                        var r = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/set_level.hw"));
                        r.method = p.H9.POST;
                        var o = new p.JH;
                        o.action = "update", o.level_id = e, o.level_name = t, o.user_comment = i, o.playable_character = this.canvas.startPlaceHolder.forceChar ? this.canvas.startPlaceHolder.characterIndex : 0, this.levelXML = this.createXML(), T.Z.sharedObject.data.editorLevelData = this.levelXML.toXMLString();
                        var n = this.levelXML.toXMLString(), a = $.sA.encryptBytes(n, "eatshit" + T.Z.user_id), h = $.dr.encodeByteArray(a);
                        o.level_record = encodeURIComponent(h), r.data = o;
                        var l = new p.yW;
                        l.addEventListener(p.ju.COMPLETE, this.levelOverWritten), l.addEventListener(p.XD.IO_ERROR, this.IOErrorHandler), l.load(r);
                    }
                }, c.publishLevel = function (e) {
                    this.statusSprite = new w("Publishing Level...");
                    var t = this.statusSprite.window;
                    this.canvas.parent.parent.addChild(t), t.center();
                    var i = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/set_level.hw"));
                    i.method = p.H9.POST;
                    var s = new p.JH;
                    s.action = "publish", s.level_id = e, i.data = s;
                    var r = new p.yW;
                    r.addEventListener(p.ju.COMPLETE, this.levelPublished), r.addEventListener(p.XD.IO_ERROR, this.IOErrorHandler), r.load(i);
                }, c.openErrorPrompt = function (e, t) {
                    this.promptSprite = new G(e, t);
                    var i = this.promptSprite.window;
                    this.canvas.parent.parent.addChild(i), i.center(), this.promptSprite.addEventListener(G.BUTTON_PRESSED, this.closePrompt);
                }, c.loadLevel = function (e, t) {
                    void 0 === t && (t = -1), this.statusSprite = new w("Loading Level...");
                    var i = this.statusSprite.window;
                    this.canvas.parent.parent.addChild(i), i.center();
                    var s = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                    s.method = p.H9.POST;
                    var r = new p.JH;
                    r.level_id = e, r.action = "get_record", r.ip_tracking = q.L.randomNumString(4, 8, false), s.data = r, this.importAuthorId = t;
                    var o = new p.yW;
                    o.responseType = "blob", o.dataFormat = p.mN.BINARY, o.addEventListener(p.XD.IO_ERROR, this.IOErrorHandler), o.addEventListener(p.ju.COMPLETE, this.levelLoaded), o.load(s);
                }, c.deleteLevel = function (e, t) {
                    this.statusSprite = new w("Deleting Level...");
                    var i = this.statusSprite.window;
                    this.canvas.parent.parent.addChild(i), i.center();
                    var s = new p.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/set_level.hw"));
                    s.method = p.H9.POST;
                    var r = new p.JH;
                    r.action = t ? "del_level" : "del_priv_level", r.level_id = e, s.data = r;
                    var o = new p.yW;
                    o.addEventListener(p.ju.COMPLETE, this.levelDeleted), o.addEventListener(p.XD.IO_ERROR, this.IOErrorHandler), o.load(s);
                }, c.importLevelData = function (e) {
                    Q.f.trackEvent(Q.f.EDITOR, Q.f.IMPORT_LEVELDATA, "authorID_" + T.Z.user_id), this.levelXML = e, this.buildLevel();
                }, c.checkStolen = function (e) {
                    var t = e.info;
                    return !(Number(t[0]["@e"]) > 0 || Number(t["@e"]) > 0);
                }, c.createXML = function (e) {
                    void 0 === e && (e = false), p.hH.autoPatch = false;
                    var t, i, s = new p.hH("<levelXML></levelXML>"), a = this.canvas.startPlaceHolder, h = a.forceChar ? "t" : "f", l = e ? " e='1'" : "", c = a.hideVehicle ? "t" : "f";
                    t = "<info v='" + T.Z.CURRENT_VERSION + "' x='" + a.x + "' y='" + a.y + "' c='" + a.characterIndex + "' f='" + h + "' h='" + c + "' bg='" + d.X.backDropIndex + "' bgc='" + d.X.backgroundColor + "'" + l + ' e="1"/>';
                    var u = new p.hH(t);
                    if (s.appendChild(u), this.pVertIDs = [], this.eVertIDs = [], this.canvas.shapes.numChildren > 0) {
                        for (var m = new p.hH("<shapes></shapes>"), f = 0; f < this.canvas.shapes.numChildren; f++) {
                            var y = this.canvas.shapes.getChildAt(f);
                            m.appendChild(this.createShapeNode(y));
                        }
                        s.appendChild(m);
                    }
                    if (this.canvas.special.numChildren > 0) {
                        for (var v = new p.hH("<specials></specials>"), g = 0; g < this.canvas.special.numChildren; g++) {
                            var S = this.canvas.special.getChildAt(g);
                            v.appendChild(this.createSpecialNode(S));
                        }
                        s.appendChild(v);
                    }
                    if (this.canvas.groups.numChildren > 0) {
                        for (var _ = new p.hH("<groups></groups>"), w = 0; w < this.canvas.groups.numChildren; w++) {
                            var b = this.canvas.groups.getChildAt(w), C = b.offset, L = b.sleeping ? "t" : "f", B = b.foreground ? "t" : "f", A = b.immovable ? "t" : "f", E = b.fixedRotation ? "t" : "f", M = "<g x='" + b.x + "' y='" + b.y + "' r='" + b.angle + "' ox='" + C.x + "' oy='" + C.y + "' s='" + L + "' f='" + B + "' o='" + b.opacity + "' im='" + A + "' fr='" + E;
                            if (b instanceof U.s) {
                                var k = b, x = k.lockJoints ? "t" : "f";
                                M += "' v='t' sb='" + k.spaceAction + "' sh='" + k.shiftAction + "' ct='" + k.ctrlAction + "' a='" + k.acceleration + "' l='" + k.leaningStrength + "' cp='" + k.characterPose + "' lo='" + x + "'></g>";
                            } else M += "'></g>";
                            var O = new p.hH(M);
                            _.appendChild(O);
                            for (var P = b.shapeContainer, R = 0; R < P.numChildren; R++) {
                                var D = P.getChildAt(R);
                                O.appendChild(this.createShapeNode(D));
                            }
                            P = b.specialContainer;
                            for (var I = 0; I < P.numChildren; I++) {
                                var j = P.getChildAt(I);
                                O.appendChild(this.createSpecialNode(j));
                            }
                        }
                        s.appendChild(_);
                    }
                    if (this.canvas.joints.numChildren > 0) {
                        for (var J = new p.hH("<joints></joints>"), G = 0; G < this.canvas.joints.numChildren; G++) {
                            var V = this.canvas.joints.getChildAt(G);
                            if (t = "<j t='" + (V instanceof F.J ? 1 : 0) + "' x='" + V.x + "' y='" + V.y, V.body1) {
                                var W = V.body1;
                                t += "' b1='" + (i = W instanceof n.ph ? "s" : W instanceof r.c ? "g" : "") + W.parent.getChildIndex(W);
                            } else t += "' b1='-1";
                            if (V.body2) {
                                var X = V.body2;
                                t += "' b2='" + (i = X instanceof n.ph ? "s" : X instanceof r.c ? "g" : "") + X.parent.getChildIndex(X);
                            } else t += "' b2='-1";
                            if (V instanceof F.J) {
                                var Y = V;
                                t += "' a='" + Y.axisAngle;
                                var z = Y.limit ? "t" : "f";
                                t += "' l='" + z, t += "' ul ='" + Y.upperLimit, t += "' ll ='" + Y.lowerLimit, t += "' m='" + (z = Y.motor ? "t" : "f"), t += "' fo='" + Y.force, t += "' sp='" + Y.speed;
                            } else {
                                var Z = V, $ = Z.limit ? "t" : "f";
                                t += "' l='" + $, t += "' ua ='" + Z.upperAngle, t += "' la ='" + Z.lowerAngle, t += "' m='" + ($ = Z.motor ? "t" : "f"), t += "' tq='" + Z.torque, t += "' sp='" + Z.speed;
                            }
                            var q = V.collideSelf ? "t" : "f";
                            t += "' c='" + q, V.vehicleAttached && (t += "' v='" + (q = V.vehicleControlled ? "t" : "f")), t += "'/>", u = new p.hH(t), J.appendChild(u);
                        }
                        s.appendChild(J);
                    }
                    if (this.canvas.triggers.numChildren > 0) {
                        for (var Q = new p.hH("<triggers></triggers>"), ee = 0; ee < this.canvas.triggers.numChildren; ee++) {
                            var te = this.canvas.triggers.getChildAt(ee), ie = !(1 !== te.typeIndex && 4 !== te.triggeredBy), se = 1 === te.typeIndex, re = te.startDisabled ? "t" : "f";
                            if (t = "<t x='" + te.x + "' y='" + te.y + "' w='" + te.shapeWidth + "' h='" + te.shapeHeight + "' a='" + te.angle + "' b='" + te.triggeredBy + "' t='" + te.typeIndex + "' r='" + te.repeatType + "' sd='" + re, te.repeatType > 2 && (t += "' i='" + te.repeatInterval), 1 === te.typeIndex ? t += "' d='" + te.triggerDelay + "'/>" : 2 === te.typeIndex ? t += "' s='" + K.D.instance.sfxLookup.indexOf(te.soundEffect) + "' d='" + te.triggerDelay + "' l='" + te.soundLocation + "' p='" + te.panning + "' v='" + te.volume + "'/>" : t += "'/>", u = new p.hH(t), ie) for (var oe = te.targets, ne = oe.length, ae = 0; ae < ne; ae++) {
                                var he = oe[ae];
                                if (he instanceof o.D_) i = "sh"; else if (he instanceof n.ph) i = "sp"; else if (he instanceof r.c) i = "g"; else if (he instanceof H.n) i = "j"; else {
                                    if (!(he instanceof N.$)) throw new Error("what the fuck instanceof this?");
                                    i = "t";
                                }
                                var le = "<" + i + " i='" + he.parent.getChildIndex(he) + "'>";
                                le += "</" + i + ">";
                                var ce = new p.hH(le);
                                if (se) {
                                    var de = he.triggerActionList;
                                    if (de) for (var pe = he.triggerActionListProperties, ue = he.triggerActions.get(te), me = 0; me < ue.length; me++) {
                                        var fe = "<a", ye = ue[me], ve = ye ? de.indexOf(ye) : 0;
                                        if (fe += " i='" + ve + "'", pe[ve]) for (var ge = pe[ve], Se = 0; Se < ge.length; Se++) {
                                            var _e = ge[Se];
                                            fe += " p" + Se + "='" + he.keyedPropertyObject[_e].get(te)[me] + "'";
                                        }
                                        fe += "/>";
                                        var we = new p.hH(fe);
                                        ce.appendChild(we);
                                    }
                                }
                                u.appendChild(ce);
                            }
                            Q.appendChild(u);
                        }
                        s.appendChild(Q);
                    }
                    return s.patch(), p.hH.autoPatch = true, s;
                }, c.createShapeNode = function (e) {
                    var t, i = e._type, s = T.Z.shapeList.indexOf(i);
                    if (s < 0) throw new Error("shape instance (" + i + ") not found in the class list");
                    var r = "<sh t='" + s;
                    false === e.interactive ? r += "' i='f" : e.group instanceof U.s && (r += "' h='" + (t = true === e.vehicleHandle ? "t" : "f"));
                    for (var o = e.getFullProperties(), n = 0; n < o.length; n++) {
                        var a = o[n];
                        r += "' p" + n + "='" + (t = "boolean" == typeof (t = e[a]) ? true === t ? "t" : "f" : (t = Number(e[a]).toFixed(2)).replace(/\.0+$/, ""));
                    }
                    r += "'/>";
                    var h = new p.hH(r);
                    if (3 === s) {
                        var l = e, c = true === l.completeFill ? "t" : "f", d = l.vID;
                        if (r = "<v f='" + c + "' id='" + d, this.pVertIDs.indexOf(d) > -1) r += "'/>"; else {
                            this.pVertIDs.push(d);
                            var u = l.numVerts;
                            r += "' n='" + u;
                            for (var m = 0; m < u; m++) {
                                var f = l.vertVector[m];
                                r += "' v" + m + "='" + f.x + "_" + f.y;
                            }
                            r += "'/>";
                        }
                        var y = new p.hH(r);
                        h.appendChild(y);
                    } else if (4 === s) {
                        var v = e, g = true === v.completeFill ? "t" : "f", S = v.vID;
                        if (r = "<v f='" + g + "' id='" + S, this.eVertIDs.indexOf(S) > -1) r += "'/>"; else {
                            this.eVertIDs.push(S);
                            var _ = v.numVerts;
                            r += "' n='" + _;
                            for (var w = 0; w < _; w++) {
                                var b = v.vertVector[w], C = v.handleVector[2 * w], L = v.handleVector[2 * w + 1];
                                r += "' v" + w + "='" + b.x + "_" + b.y, 0 === C.x && 0 === C.y && 0 === L.x && 0 === L.y || (r += "_" + C.x + "_" + C.y + "_" + L.x + "_" + L.y);
                            }
                            r += "'/>";
                        }
                        var B = new p.hH(r);
                        h.appendChild(B);
                    }
                    return h;
                }, c.createSpecialNode = function (e) {
                    var t = e._type, i = T.Z.specialList.indexOf(t);
                    if (i < 0) throw new Error("special instance not found in the class list");
                    for (var s = "<sp t='" + i, r = new Array, o = e.getFullProperties(), n = 0; n < o.length; n++) if (!(o[n] instanceof Array)) {
                        var a = o[n], h = e[a];
                        "true" === h || "false" === h || "boolean" == typeof h ? s += "' p" + n + "='" + (h = true === h || "true" === h ? "t" : "f") : isNaN(parseFloat(h)) || "caption" === a ? "string" == typeof h ? r.push(this.createCDataNode("p" + n, h)) : ("boolean" == typeof h && (h = true === h ? "t" : "f"), s += "' p" + n + "='" + h) : /^-?[\d.]+(?:e-?\d+)?$/.test(h) ? s += "' p" + n + "='" + (h = parseFloat(h)) : r.push(this.createCDataNode("p" + n, h));
                    }
                    s += "'/>";
                    for (var l = new p.hH(s), c = 0; c < r.length; c++) {
                        var d = r[c];
                        l.appendChild(d);
                    }
                    return l;
                }, c.createCDataNode = function (e, t) {
                    var i = "<" + e + "><![CDATA[" + t + "]]></" + e + ">";
                    return new p.hH(i);
                }, c.buildLevel = function (e) {
                    var t, i, o, n, a, h, l, c, u, m, f, y, v, g, S;
                    if (e || this.levelXML) {
                        e && (this.levelXML = new p.hH(e)), this.levelXML && this.levelXML.patch && this.levelXML.patch(), this.dispatchEvent(new p.ju(s.CLEAR_STAGE)), T.Z.sharedObject.data.editorLevelData = this.levelXML.toXMLString();
                        var _, w, b, C, L, B, A, E, M = this.levelXML.info[0], k = (null === (t = this.levelXML) || void 0 === t || null === (i = t.shapes) || void 0 === i || null === (o = i[0]) || void 0 === o ? void 0 : o.sh) || [], x = (null === (n = this.levelXML) || void 0 === n || null === (a = n.specials) || void 0 === a || null === (h = a[0]) || void 0 === h ? void 0 : h.sp) || [], O = (null === (l = this.levelXML) || void 0 === l || null === (c = l.groups) || void 0 === c || null === (u = c[0]) || void 0 === u ? void 0 : u.g) || [], P = (null === (m = this.levelXML) || void 0 === m || null === (f = m.joints) || void 0 === f || null === (y = f[0]) || void 0 === y ? void 0 : y.j) || [], R = (null === (v = this.levelXML) || void 0 === v || null === (g = v.triggers) || void 0 === g || null === (S = g[0]) || void 0 === S ? void 0 : S.t) || [], D = Number(M["@v"]);
                        for (var I = k.length, J = [], G = [], H = [], V = [], W = 0; W < I; W++) {
                            var X = k[W];
                            3 === (w = parseInt(X["@t"])) && "f" === X["@i"] && (w = 4), _ = T.Z.shapeList[w], B = new ((0, te.O)(T.Z.shapeClassPath + _)), "f" === X["@i"] && (B.interactive = false), "t" === X["@h"] && (B.vehicleHandle = true), "f" === X["@h"] && (B.vehicleHandle = false);
                            var Y = (C = B.getFullProperties()).length;
                            if (3 === w) {
                                var z = X.v[0], Z = parseInt(z["@id"]), $ = z["@f"], q = G.indexOf(Z);
                                if (q > -1) A = J[q]; else {
                                    var Q = parseInt(z["@n"]);
                                    A = [];
                                    for (var ie = 0; ie < Q; ie++) E = z["@v" + ie], A.push(E);
                                    J.push(A), G.push(Z);
                                }
                                for (var se = B, re = 0; re < A.length; re++) {
                                    E = A[re];
                                    var oe = D < 1.84 ? E.split(".") : E.split("_"), ne = new ee._m(parseFloat(oe[0]), parseFloat(oe[1]));
                                    se.vertVector.push(ne);
                                }
                                if (!(se.numVerts > 1)) {
                                    this.canvas.addRefSprite(this.createDummyShape());
                                    continue;
                                }
                                B.completeFill = "t" === $, B.vID = Z, se.redraw();
                            } else if (4 === w) {
                                var ae = X.v[0], he = parseInt(ae["@id"]), le = ae["@f"], ce = V.indexOf(he);
                                if (ce > -1) A = H[ce]; else {
                                    var de = parseInt(ae["@n"]);
                                    A = [];
                                    for (var pe = 0; pe < de; pe++) E = ae["@v" + pe], A.push(E);
                                    H.push(A), V.push(he);
                                }
                                for (var ue = B, me = 0; me < A.length; me++) {
                                    E = A[me];
                                    var fe = D < 1.84 ? E.split(".") : E.split("_"), ye = new ee._m(parseFloat(fe[0]), parseFloat(fe[1])), ve = fe[2] ? new ee._m(parseFloat(fe[2]), parseFloat(fe[3])) : new ee._m, ge = fe[4] ? new ee._m(parseFloat(fe[4]), parseFloat(fe[5])) : new ee._m;
                                    ue.vertVector.push(ye), ue.handleVector.push(ve), ue.handleVector.push(ge);
                                }
                                if (!(ue.numVerts > 1)) {
                                    this.canvas.addRefSprite(this.createDummyShape());
                                    continue;
                                }
                                B.completeFill = "t" === le, B.vID = he, ue.redraw();
                            }
                            for (var Se = 0; Se < Y; Se++) if (b = C[Se], void 0 !== (L = X["@p" + Se])) if ("t" == L || "f" == L) B[b] = "t" == L; else {
                                var _e = parseFloat(L);
                                "" != L && (B[b] = isNaN(_e) ? L : _e);
                            }
                            this.canvas.addRefSprite(B), B.x = parseFloat(X["@p0"]), B.y = parseFloat(X["@p1"]);
                        }
                        I = x.length;
                        for (var we = 0; we < I; we++) {
                            var be = x[we];
                            w = parseInt(be["@t"]), _ = T.Z.specialList[w], C = (B = new ((0, te.O)(T.Z.specialClassPath + _))).getFullProperties();
                            for (var Ce = 0; Ce < C.length; Ce++) {
                                var Le = C[Ce];
                                if ("string" == typeof B[Le]) {
                                    var Be = be["@p" + Ce] ? be["@p" + Ce] : be["p" + Ce][0].cdata;
                                    void 0 === Be && (Be = ""), B[Le] = Be;
                                } else {
                                    var Ae = be["@p" + Ce];
                                    if (Ae || (Ae = be["p" + Ce]), void 0 === Ae) continue;
                                    if (Ae instanceof Array && (Ae = Ae[0].cdata), "t" == Ae || "f" == Ae) B[Le] = "t" == Ae; else {
                                        var Ee = parseFloat(Ae);
                                        "" != Ae && (B[Le] = isNaN(Ee) ? Ae : Ee);
                                    }
                                }
                            }
                            this.canvas.addRefSprite(B), B.x = parseFloat(be["@p0"]), B.y = parseFloat(be["@p1"]);
                        }
                        I = O.length;
                        for (var Me = 0; Me < I; Me++) {
                            var ke = O[Me], xe = void 0;
                            if ("t" === ke["@v"]) {
                                var Oe = xe = new U.s;
                                Oe.spaceAction = (0, p.e$)(ke["@sb"]), Oe.shiftAction = (0, p.e$)(ke["@sh"]), Oe.ctrlAction = (0, p.e$)(ke["@ct"]), Oe.acceleration = (0, p.e$)(ke["@a"]), Oe.leaningStrength = (0, p.e$)(ke["@l"]), Oe.characterPose = (0, p.e$)(ke["@cp"]), Oe.lockJoints = "t" === ke["@lo"];
                            } else xe = new r.c;
                            xe.offset = new p.E9(parseFloat(ke["@ox"]), parseFloat(ke["@oy"])), xe.angle = parseInt(ke["@r"]), xe.sleeping = "t" === ke["@s"], xe.foreground = "t" === ke["@f"], ke["@o"] ? xe.opacity = "" == String(ke["@o"]) ? 100 : parseInt(ke["@o"]) : xe.opacity = 100, xe.immovable = "t" === ke["@im"], xe.fixedRotation = "t" === ke["@fr"];
                            for (var Te = ke.sh || [], Pe = 0; Pe < Te.length; Pe++) {
                                var Re = Te[Pe];
                                3 === (w = parseInt(Re["@t"])) && "f" === Re["@i"] && (w = 4), _ = T.Z.shapeList[w], (B = new ((0, te.O)(T.Z.shapeClassPath + _))).inGroup = true, B.group = xe, "f" === Re["@i"] && (B.interactive = false), "t" === Re["@h"] && (B.vehicleHandle = true), "f" === Re["@h"] && (B.vehicleHandle = false);
                                var De = (C = B.getFullProperties()).length;
                                if (3 === w) {
                                    var Ie = Re.v[0], je = parseFloat(Ie["@id"]), Fe = Ie["@f"], Je = G.indexOf(je);
                                    if (Je > -1) A = J[Je]; else {
                                        var Ge = parseInt(Ie["@n"]);
                                        A = [];
                                        for (var He = 0; He < Ge; He++) {
                                            var Ve = Ie["@v" + He];
                                            A.push(Ve);
                                        }
                                        J.push(A), G.push(je);
                                    }
                                    for (var Ne = B, Ue = 0; Ue < A.length; Ue++) {
                                        E = A[Ue];
                                        var We = D < 1.84 ? E.split(".") : E.split("_"), Xe = new ee._m(parseFloat(We[0]), parseFloat(We[1]));
                                        Ne.vertVector.push(Xe);
                                    }
                                    if (!(Ne.numVerts > 1)) {
                                        xe.addShape(this.createDummyShape());
                                        continue;
                                    }
                                    B.completeFill = "t" === Fe, B.vID = je, Ne.redraw();
                                } else if (4 === w) {
                                    var Ye = Re.v[0], ze = parseInt(Ye["@id"]), Ze = Ye["@f"], $e = V.indexOf(ze);
                                    if ($e > -1) A = H[$e]; else {
                                        var Ke = parseInt(Ye["@n"]);
                                        A = [];
                                        for (var qe = 0; qe < Ke; qe++) {
                                            var Qe = Ye["@v" + qe];
                                            A.push(Qe);
                                        }
                                        H.push(A), V.push(ze);
                                    }
                                    for (var et = B, tt = 0; tt < A.length; tt++) {
                                        var it = A[tt], st = D < 1.84 ? it.split(".") : it.split("_"), rt = new ee._m(parseFloat(st[0]), parseFloat(st[1])), ot = st[2] ? new ee._m(parseFloat(st[2]), parseFloat(st[3])) : new ee._m, nt = st[4] ? new ee._m(parseFloat(st[4]), parseFloat(st[5])) : new ee._m;
                                        et.vertVector.push(rt), et.handleVector.push(ot), et.handleVector.push(nt);
                                    }
                                    if (!(et.numVerts > 1)) {
                                        xe.addChild(this.createDummyShape());
                                        continue;
                                    }
                                    B.completeFill = "t" == Ze, B.vID = ze, et.redraw();
                                }
                                for (var at = 0; at < De; at++) {
                                    var ht = C[at], lt = Re["@p" + at];
                                    if (void 0 !== lt) if ("t" == lt || "f" == lt) B[ht] = "t" == lt; else {
                                        var ct = parseFloat(lt);
                                        "" != lt && (B[ht] = isNaN(ct) ? lt : ct);
                                    }
                                }
                                xe.addShape(B), B.x = parseFloat(Re["@p0"]), B.y = parseFloat(Re["@p1"]);
                            }
                            for (var dt = ke.sp || [], pt = 0; pt < dt.length; pt++) {
                                var ut = dt[pt];
                                w = parseInt(ut["@t"]), _ = T.Z.specialList[w], (B = new ((0, te.O)(T.Z.specialClassPath + _))).inGroup = true, B.group = xe, C = B.getFullProperties();
                                for (var mt = 0; mt < C.length; mt++) {
                                    var ft = C[mt];
                                    if ("string" == typeof B[ft]) {
                                        var yt = ut["@p" + mt] ? ut["@p" + mt] : ut["p" + mt][0].cdata;
                                        B[ft] = yt || "";
                                    } else {
                                        var vt = ut["@p" + mt];
                                        if (vt || (vt = ut["p" + mt]), void 0 === vt) continue;
                                        if (vt instanceof Array && (vt = vt[0].cdata), "t" == vt || "f" == vt) B[ft] = "t" == vt; else {
                                            var gt = parseFloat(vt);
                                            "" != vt && (B[ft] = isNaN(gt) ? vt : gt);
                                        }
                                    }
                                }
                                xe.addSpecial(B), B.x = parseFloat(ut["@p0"]), B.y = parseFloat(ut["@p1"]);
                            }
                            this.canvas.addRefSprite(xe), xe.x = parseFloat(ke["@x"]), xe.y = parseFloat(ke["@y"]);
                        }
                        I = P.length;
                        for (var St = 0; St < I; St++) {
                            var _t = P[St];
                            if (0 == parseInt(_t["@t"])) {
                                var wt = new j.I;
                                if (this.canvas.addRefSprite(wt), wt.x = parseFloat(_t["@x"]), wt.y = parseFloat(_t["@y"]), -1 != _t["@b1"]) {
                                    var bt = String(_t["@b1"]).charAt(0);
                                    if ("s" == bt) {
                                        var Ct = (0, p.e$)(String(_t["@b1"]).substring(1));
                                        wt.body1 = this.canvas.special.getChildAt(Ct);
                                    } else if ("g" == bt) {
                                        var Lt = (0, p.e$)(String(_t["@b1"]).substring(1));
                                        wt.body1 = this.canvas.groups.getChildAt(Lt);
                                    } else wt.body1 = this.canvas.shapes.getChildAt(_t["@b1"]);
                                }
                                if (-1 != _t["@b2"]) {
                                    var Bt = String(_t["@b2"]).charAt(0);
                                    if ("s" == Bt) {
                                        var At = (0, p.e$)(String(_t["@b2"]).substring(1));
                                        wt.body2 = this.canvas.special.getChildAt(At);
                                    } else if ("g" == Bt) {
                                        var Et = (0, p.e$)(String(_t["@b2"]).substring(1));
                                        wt.body2 = this.canvas.groups.getChildAt(Et);
                                    } else wt.body2 = this.canvas.shapes.getChildAt(_t["@b2"]);
                                }
                                "t" == _t["@l"] && (wt.limit = true), null != _t["@ua"] && (wt.upperAngle = (0, p.e$)(_t["@ua"])), null != _t["@la"] && (wt.lowerAngle = (0, p.e$)(_t["@la"])), "t" == _t["@m"] && (wt.motor = true), null != _t["@tq"] && (wt.torque = parseFloat(_t["@tq"])), null != _t["@sp"] && (wt.speed = parseFloat(_t["@sp"])), "t" == _t["@c"] && (wt.collideSelf = true), "f" == _t["@v"] && (wt.vehicleControlled = false), wt.drawArms();
                            } else if (1 == parseInt(_t["@t"])) {
                                var Mt = new F.J;
                                if (this.canvas.addRefSprite(Mt), Mt.x = parseFloat(_t["@x"]), Mt.y = parseFloat(_t["@y"]), Mt.axisAngle = parseFloat(_t["@a"]), -1 != _t["@b1"]) {
                                    var kt = String(_t["@b1"]).charAt(0);
                                    if ("s" == kt) {
                                        var xt = (0, p.e$)(String(_t["@b1"]).substring(1));
                                        Mt.body1 = this.canvas.special.getChildAt(xt);
                                    } else if ("g" == kt) {
                                        var Ot = (0, p.e$)(String(_t["@b1"]).substring(1));
                                        Mt.body1 = this.canvas.groups.getChildAt(Ot);
                                    } else Mt.body1 = this.canvas.shapes.getChildAt(_t["@b1"]);
                                }
                                if (-1 != _t["@b2"]) {
                                    var Tt = String(_t["@b2"]).charAt(0);
                                    if ("s" == Tt) {
                                        var Pt = (0, p.e$)(String(_t["@b2"]).substring(1));
                                        Mt.body2 = this.canvas.special.getChildAt(Pt);
                                    } else if ("g" == Tt) {
                                        var Rt = (0, p.e$)(String(_t["@b2"]).substring(1));
                                        Mt.body2 = this.canvas.groups.getChildAt(Rt);
                                    } else Mt.body2 = this.canvas.shapes.getChildAt(_t["@b2"]);
                                }
                                "t" == _t["@l"] && (Mt.limit = true), null != _t["@ul"] && (Mt.upperLimit = (0, p.e$)(_t["@ul"])), null != _t["@ll"] && (Mt.lowerLimit = (0, p.e$)(_t["@ll"])), "t" == _t["@m"] && (Mt.motor = true), null != _t["@fo"] && (Mt.force = parseFloat(_t["@fo"])), null != _t["@sp"] && (Mt.speed = parseFloat(_t["@sp"])), "t" == _t["@c"] && (Mt.collideSelf = true), "f" == _t["@v"] && (Mt.vehicleControlled = false), Mt.drawArms();
                            }
                        }
                        I = R.length;
                        for (var Dt = 0; Dt < I; Dt++) {
                            var It = new N.$;
                            this.canvas.addRefSprite(It);
                        }
                        for (var jt = 0; jt < I; jt++) {
                            var Ft = R[jt], Jt = this.canvas.triggers.getChildAt(jt);
                            Jt.x = parseFloat(Ft["@x"]), Jt.y = parseFloat(Ft["@y"]), Jt.angle = parseFloat(Ft["@a"]), Jt.shapeWidth = parseFloat(Ft["@w"]), Jt.shapeHeight = parseFloat(Ft["@h"]), Jt.triggeredBy = parseInt(Ft["@b"]), Jt.typeIndex = parseInt(Ft["@t"]), Jt.repeatType = parseInt(Ft["@r"]), "t" === Ft["@sd"] && (Jt.startDisabled = true), Jt.repeatType > 2 && (Jt.repeatInterval = Ft["@i"]);
                            var Gt = !(1 !== Jt.typeIndex && 4 !== Jt.triggeredBy), Ht = 1 === Jt.typeIndex;
                            if (1 === Jt.typeIndex ? Jt.triggerDelay = parseFloat(Ft["@d"]) : 2 === Jt.typeIndex ? (Jt.soundEffect = K.D.instance.sfxLookup[(0, p.e$)(Ft["@s"])], Jt.triggerDelay = parseFloat(Ft["@d"]), Jt.volume = parseFloat(Ft["@v"]), Jt.soundLocation = parseFloat(Ft["@l"]), Jt.panning = parseFloat(Ft["@p"])) : 3 === Jt.typeIndex && (Jt.triggerDelay = 0), Gt) for (var Vt = Ft.children, Nt = void 0, Ut = 0; Ut < Vt.length; Ut++) {
                                var Wt = Vt[Ut], Xt = Wt.name, Yt = Wt["@i"];
                                if ("sh" === Xt) Nt = this.canvas.shapes.getChildAt(Yt); else if ("sp" === Xt) Nt = this.canvas.special.getChildAt(Yt); else if ("g" === Xt) Nt = this.canvas.groups.getChildAt(Yt); else if ("j" === Xt) Nt = this.canvas.joints.getChildAt(Yt); else {
                                    if (!(Xt = "t")) throw new Error("what the fuck instanceof this target?");
                                    Nt = this.canvas.triggers.getChildAt(Yt);
                                }
                                if (Ht) {
                                    var zt = Nt.triggerActionList, Zt = Nt.triggerActionListProperties;
                                    if (zt) if (D < 1.87) {
                                        var $t = (0, p.e$)(Wt["@a"]), Kt = zt[$t];
                                        Nt.triggerActions.set(Jt, [Kt]);
                                        var qt = Zt ? Zt[$t] : null;
                                        if (qt) for (var Qt = 0; Qt < qt.length; Qt++) {
                                            b = qt[Qt];
                                            var ei = Nt.keyedPropertyObject[b];
                                            ei || (ei = Nt.keyedPropertyObject[b] = new Map);
                                            var ti = Wt["@p" + Qt];
                                            "t" === ti || "f" === ti ? ei.set(Jt, "t" === ti ? [true] : [false]) : "" != ti && ei.set(Jt, [parseFloat(ti)]);
                                        }
                                    } else {
                                        var ii = Wt.children, si = Nt.triggerActions.get(Jt);
                                        si || (si = [], Nt.triggerActions.set(Jt, si));
                                        for (var ri = 0; ri < ii.length; ri++) {
                                            var oi = ii[ri], ni = (0, p.e$)(oi["@i"]);
                                            if (zt) {
                                                var ai = zt[ni];
                                                si.push(ai);
                                                var hi = Zt ? Zt[ni] : null;
                                                if (hi) for (var li = 0; li < hi.length; li++) {
                                                    b = hi[li];
                                                    var ci = Nt.keyedPropertyObject[b];
                                                    ci || (ci = Nt.keyedPropertyObject[b] = new Map);
                                                    var di = ci.get(Jt);
                                                    di || (di = [], ci.set(Jt, di));
                                                    var pi = oi["@p" + li];
                                                    void 0 !== pi && (di[ri] = "t" == pi || "f" == pi ? "t" == pi : parseFloat(pi));
                                                }
                                            }
                                        }
                                    }
                                }
                                Jt.addTarget(Nt);
                            }
                            Jt.x = parseFloat(Ft["@x"]), Jt.y = parseFloat(Ft["@y"]);
                        }
                        this.canvas.relabelTriggers(), this.canvas.startPlaceHolder.x = parseFloat(M["@x"]), this.canvas.startPlaceHolder.y = parseFloat(M["@y"]), this.canvas.startPlaceHolder.characterIndex = parseFloat(M["@c"]), this.canvas.startPlaceHolder.forceChar = "t" === M["@f"], this.canvas.startPlaceHolder.hideVehicle = "t" === M["@h"], d.X.backDropIndex = parseInt(M["@bg"]), d.X.backgroundColor = M["@bgc"] && M["@bgc"].length > 0 ? M["@bgc"] : 16777215, this.dispatchEvent(new p.ju(s.UPDATE_COPIED_VERTS));
                    }
                }, c.createDummyShape = function () {
                    var e = new o.gR(false, false, false, 1, 0, -1, 0);
                    return e.x = e.y = 0, e.vertVector.push(new ee._m), e.vertVector.push(new ee._m(10, 0)), e.vertVector.push(new ee._m(5, 5)), e.handleVector.push(new ee._m), e.handleVector.push(new ee._m), e.handleVector.push(new ee._m), e.handleVector.push(new ee._m), e.handleVector.push(new ee._m), e.handleVector.push(new ee._m), e;
                }, c.clearCanvas = function () {
                    for (var e = this.canvas.shapes.numChildren; e > 0; e--) this.canvas.shapes.getChildAt(e - 1).deleteSelf(this.canvas);
                    for (var t = this.canvas.joints.numChildren; t > 0; t--) this.canvas.joints.getChildAt(t - 1).deleteSelf(this.canvas);
                    for (var i = this.canvas.groups.numChildren; i > 0; i--) this.canvas.groups.getChildAt(i - 1).deleteSelf(this.canvas);
                    for (var s = this.canvas.special.numChildren; s > 0; s--) this.canvas.special.getChildAt(s - 1).deleteSelf(this.canvas);
                }, c.die = function () {
                    s._instance = null;
                }, a = s, l = [{
                    key: "instance", get: function () {
                        return s._instance;
                    }
                }], (h = [{
                    key: "lastSavedData", get: function () {
                        return this._lastSavedData;
                    }
                }]) && ie(a.prototype, h), l && ie(a, l), Object.defineProperty(a, "prototype", { writable: false }), s;
            }(p.pB);
            function oe(e, t) {
                return (oe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            re.LOAD_COMPLETE = "loadcomplete", re.SAVE_COMPLETE = "savecomplete", re.PUBLISH_COMPLETE = "publishcomplete", re.DELETE_COMPLETE = "deletecomplete", re.GENERIC_ERROR = "genericerror", re.CLEAR_STAGE = "clearstage", re.UPDATE_COPIED_VERTS = "updatecopiedverts";
            var ne = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).graphics.lineStyle(1, 0), t.graphics.drawRect(0, 0, 100, 100), t;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, oe(t, i), s.prototype.adjustBg = function (e, t) {
                    this.graphics.clear(), this.graphics.lineStyle(0, 0, 1, true), this.graphics.drawRect(0, 0, 100 * Math.abs(e), 100 * Math.abs(t)), this.scale.x = e >= 0 ? 1 : -1, this.scale.y = t >= 0 ? 1 : -1;
                }, s;
            }(p.jy);
            function ae(e, t) {
                return (ae = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var he = function (e) {
                var t, i;
                function s(t, i) {
                    var s;
                    return (s = e.call(this) || this).buildView(i), s.init(), s;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ae(t, i);
                var r, o, n = s.prototype;
                return n.buildView = function (e) {
                    this.bg = new p.KG, this.bg.setPixiMovieClip(e.bg), this.addChild(this.bg), this.icon = new p.jy(e.icon), this.addChild(this.icon);
                }, n.init = function () {
                    this.mouseChildren = false, this.addEventListener(p.TF.MOUSE_OVER, this.mouseOverHandler.bind(this)), this.addEventListener(p.TF.MOUSE_OUT, this.mouseOutHandler.bind(this));
                }, n.mouseOverHandler = function (e) {
                    this._selected || this.bg.gotoAndStop(2);
                }, n.mouseOutHandler = function (e) {
                    this._selected || this.bg.gotoAndStop(1);
                }, r = s, (o = [{
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        this._selected = e, e ? (this.bg.gotoAndStop(3), this.icon._pixiSprite.children[0].tint = 4032711) : (this.bg.gotoAndStop(1), this.icon._pixiSprite.children[0].tint = 16777215);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            function le(e, t) {
                return (le = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ce = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).mouseUpHandler = function (e) {
                        if (e.target instanceof he) {
                            var i = e.target;
                            t.currentButton = i;
                        }
                        e.stopPropagation();
                    }, t.mouseOverHandler = function (e) {
                        var i = I.x.instance;
                        switch (e.target) {
                            case t.arrowButton:
                                i.show("selection tool (1)", t.arrowButton);
                                break;
                            case t.shapeButton:
                                i.show("shape tool (2)", t.shapeButton);
                                break;
                            case t.polygonButton:
                                i.show("poly tool (3)", t.polygonButton);
                                break;
                            case t.pinButton:
                                i.show("joint tool (5)", t.pinButton);
                                break;
                            case t.specialButton:
                                i.show("special item tool (6)", t.specialButton);
                                break;
                            case t.textButton:
                                i.show("text tool (7)", t.textButton);
                                break;
                            case t.triggerButton:
                                i.show("trigger tool (8)", t.triggerButton);
                                break;
                            case t.artButton:
                                i.show("art tool (4)", t.artButton);
                        }
                    }, t.buildView(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, le(t, i);
                var r, o, n = s.prototype;
                return n.buildView = function () {
                    var e = (0, P.qX)("EditorUI", "ToolBar");
                    this.arrowButton = new he("arrow", e.arrowButton), this.addChild(this.arrowButton);
                    var t = this.arrowButton.height;
                    this.arrowButton.y = 0 * t, this.shapeButton = new he("shape", e.shapeButton), this.addChild(this.shapeButton), this.shapeButton.y = Number(t), this.polygonButton = new he("polygon", e.polygonButton), this.addChild(this.polygonButton), this.polygonButton.y = 2 * t, this.artButton = new he("art", e.artButton), this.addChild(this.artButton), this.artButton.y = 3 * t, this.pinButton = new he("pin", e.pinButton), this.addChild(this.pinButton), this.pinButton.y = 4 * t, this.specialButton = new he("special", e.specialButton), this.addChild(this.specialButton), this.specialButton.y = 5 * t, this.textButton = new he("text", e.textButton), this.addChild(this.textButton), this.textButton.y = 6 * t, this.triggerButton = new he("trigger", e.triggerButton), this.addChild(this.triggerButton), this.triggerButton.y = 7 * t;
                }, n.init = function () {
                    var e = this.parent;
                    this.window = new S.R(false), this.window.x = this.x, this.window.y = this.y, this.window.populate(this), e.addChild(this.window), this.arrowButton.selected = true, this._currentButton = this.arrowButton, this.addEventListener(p.TF.MOUSE_UP, this.mouseUpHandler), this.addEventListener(p.TF.MOUSE_OVER, this.mouseOverHandler);
                }, n.pressButton = function (e) {
                    switch (I.x.instance.hide(), e) {
                        case s.ARROW:
                            this.currentButton = this.arrowButton;
                            break;
                        case s.SHAPE:
                            this.currentButton = this.shapeButton;
                            break;
                        case s.POLYGON:
                            this.currentButton = this.polygonButton;
                            break;
                        case s.JOINT:
                            this.currentButton = this.pinButton;
                            break;
                        case s.SPECIAL:
                            this.currentButton = this.specialButton;
                            break;
                        case s.TEXT:
                            this.currentButton = this.textButton;
                            break;
                        case s.TRIGGER:
                            this.currentButton = this.triggerButton;
                            break;
                        case s.ART:
                            this.currentButton = this.artButton;
                    }
                }, n.die = function () {
                    this.removeEventListener(p.TF.MOUSE_UP, this.mouseUpHandler.bind(this)), this.removeEventListener(p.TF.MOUSE_OVER, this.mouseOverHandler.bind(this));
                }, r = s, (o = [{
                    key: "currentButton", set: function (e) {
                        if (this._currentButton) {
                            if (e == this._currentButton) return;
                            this._currentButton.selected = false;
                        }
                        this._currentButton = e, this._currentButton.selected = true, this.dispatchEvent(new p.ju(s.TOOL_SELECTED));
                    }
                }, {
                    key: "currentSelection", get: function () {
                        switch (this._currentButton) {
                            case this.arrowButton:
                                return s.ARROW;
                            case this.shapeButton:
                                return s.SHAPE;
                            case this.polygonButton:
                                return s.POLYGON;
                            case this.pinButton:
                                return s.JOINT;
                            case this.specialButton:
                                return s.SPECIAL;
                            case this.textButton:
                                return s.TEXT;
                            case this.triggerButton:
                                return s.TRIGGER;
                            case this.artButton:
                                return s.ART;
                        }
                        return "";
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            ce.TOOL_SELECTED = "toolselected", ce.ARROW = "arrow", ce.SHAPE = "shape", ce.POLYGON = "polygon", ce.JOINT = "joint", ce.SPECIAL = "special", ce.TEXT = "text", ce.TRIGGER = "trigger", ce.ART = "art";
            var de = i(162), pe = i(398), ue = i(399), me = i(230);
            function fe(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function ye(e, t) {
                return (ye = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ve = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).edgePixels = 20, t.tweenTime = .5, t.rollOverHandler = function (e) {
                        t.parent && t.parent.addChild(fe(t)), de.iC.to(fe(t), t.tweenTime, { y: 0, ease: de.Au.easeInOut }), de.iC.to(t.menuText, t.tweenTime, { alpha: 0, ease: de.Au.easeInOut });
                    }, t.rollOutHandler = function (e) {
                        de.iC.to(fe(t), t.tweenTime, { y: t.hiddenY, ease: de.Au.easeInOut }), de.iC.to(t.menuText, t.tweenTime, { alpha: 1, ease: de.Au.easeInOut });
                    }, t.testLevel = function (e) {
                        t.dispatchEvent(new p.ju(s.TEST_LEVEL));
                    }, t.promptSpriteClosed = function (e) {
                        t.promptSprite.removeEventListener(G.BUTTON_PRESSED, t.promptSpriteClosed), t.promptSprite = null, t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.openOptionsMenu = function (e) {
                        if (!t.levelOptionsMenu) {
                            t.levelOptionsMenu = new k;
                            var i = t.levelOptionsMenu.window;
                            t.parent.addChild(i), i.center(), t.levelOptionsMenu.addEventListener(S.R.WINDOW_CLOSED, t.closeOptionsMenu);
                        }
                    }, t.closeOptionsMenu = function (e) {
                        void 0 === e && (e = null), t.levelOptionsMenu.removeEventListener(S.R.WINDOW_CLOSED, t.closeOptionsMenu), t.levelOptionsMenu.die(), t.levelOptionsMenu = null;
                    }, t.openSaveMenu = function (e) {
                        if (t.levelTested) {
                            if (!t.saveMenu) {
                                t.loadMenu && t.closeLoadMenu(), t.dispatchEvent(new p.ju(s.MENU_BUSY)), t.saveMenu = new Z(t.currentLevelDataObject);
                                var i = t.saveMenu.window;
                                t.parent.addChild(i), i.center(), t.saveMenu.addEventListener(Z.SAVE_NEW, t.saveNewLevel), t.saveMenu.addEventListener(Z.SAVE_OVER, t.saveOverLevel), t.saveMenu.addEventListener(S.R.WINDOW_CLOSED, t.closeSaveMenu);
                            }
                        } else t.openPrompt("Please test your level before saving.", "ok");
                    }, t.openLoadMenu = function (e) {
                        if (!t.loadMenu) {
                            t.saveMenu && t.closeSaveMenu(), t.dispatchEvent(new p.ju(s.MENU_BUSY)), t.loadMenu = new D;
                            var i = t.loadMenu.window;
                            t.parent.addChild(i), i.center(), t.loadMenu.addEventListener(D.LOAD_SELECTED, t.loadLevel), t.loadMenu.addEventListener(D.DELETE_SELECTED, t.deleteCheck), t.loadMenu.addEventListener(D.IMPORT_DATA, t.importData), t.loadMenu.addEventListener(S.R.WINDOW_CLOSED, t.closeLoadMenu);
                        }
                    }, t.closeSaveMenu = function (e) {
                        void 0 === e && (e = null), t.saveMenu.removeEventListener(Z.SAVE_NEW, t.saveNewLevel), t.saveMenu.removeEventListener(Z.SAVE_OVER, t.saveOverLevel), t.saveMenu.removeEventListener(S.R.WINDOW_CLOSED, t.closeSaveMenu), t.saveMenu.die(), t.saveMenu = null, t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.closeLoadMenu = function (e) {
                        void 0 === e && (e = null), t.loadMenu.removeEventListener(D.LOAD_SELECTED, t.loadLevel), t.loadMenu.removeEventListener(D.DELETE_SELECTED, t.deleteCheck), t.loadMenu.removeEventListener(D.IMPORT_DATA, t.importData), t.loadMenu.removeEventListener(S.R.WINDOW_CLOSED, t.closeLoadMenu), t.loadMenu.die(), t.loadMenu = null, t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.saveNewLevel = function (e) {
                        var i = escape(t.saveMenu.levelName), r = escape(t.saveMenu.comments);
                        t.closeSaveMenu(), t.dispatchEvent(new p.ju(s.MENU_BUSY));
                        var o = re.instance;
                        o.addEventListener(re.SAVE_COMPLETE, t.saveComplete), o.addEventListener(re.GENERIC_ERROR, t.saveComplete), o.saveNewLevel(i, r);
                    }, t.saveOverLevel = function (e) {
                        var i = escape(t.saveMenu.levelName), r = escape(t.saveMenu.comments);
                        t.closeSaveMenu(), t.dispatchEvent(new p.ju(s.MENU_BUSY));
                        var o = re.instance;
                        o.addEventListener(re.SAVE_COMPLETE, t.saveComplete), o.addEventListener(re.GENERIC_ERROR, t.saveComplete), o.saveOverLevel(t.currentLevelDataObject.id, i, r);
                    }, t.saveComplete = function (e) {
                        void 0 === e && (e = null);
                        var i = re.instance;
                        if (i.removeEventListener(re.SAVE_COMPLETE, t.saveComplete), i.removeEventListener(re.GENERIC_ERROR, t.saveComplete), e.type == re.SAVE_COMPLETE) {
                            t.currentLevelDataObject = i.lastSavedData;
                            var r = new C("Your level saved successfully.<br><br>Would you like to publish<br>your level now?<br><br>", ">> Publish Level <<", "Not Yet!", true, 280, 120, 5162061, 16613761, 0), o = r.window;
                            return t.parent.addChild(o), o.center(), D.levelDataArray = null, r.addEventListener(C.ANSWER_CHOSEN, t.publishChoiceSelected, false, 0, true), void (r.answer1Btn.helpString = "When published, a level will be submitted to the public user level browser. Once a level is published, its contents cannot be altered, so make sure everything is exactly as you'd like it before hitting this button. You may publish one level per 24 hours.");
                        }
                        t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.publishChoiceSelected = function (e) {
                        I.x.instance.hide();
                        var i = e.target;
                        i.removeEventListener(C.ANSWER_CHOSEN, t.publishChoiceSelected);
                        var r = i.index;
                        if (i.die(), 0 == r) {
                            var o = re.instance;
                            return o.addEventListener(re.PUBLISH_COMPLETE, t.publishComplete), o.addEventListener(re.GENERIC_ERROR, t.publishComplete), void o.publishLevel(t.currentLevelDataObject.id);
                        }
                        t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.publishComplete = function (e) {
                        var i = re.instance;
                        if (i.removeEventListener(re.PUBLISH_COMPLETE, t.publishComplete), i.removeEventListener(re.GENERIC_ERROR, t.publishComplete), e.type == re.PUBLISH_COMPLETE) return t.openPrompt("Your level was successfully published. It should appear in the user level browser momentarily.", "ok"), void (D.levelDataArray = null);
                        t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.loadLevel = function (e) {
                        t.currentLevelDataObject = t.loadMenu.currentLevelInfo;
                        var i = t.currentLevelDataObject.id;
                        t.closeLoadMenu(), t.dispatchEvent(new p.ju(s.MENU_BUSY));
                        var r = re.instance;
                        r.addEventListener(re.LOAD_COMPLETE, t.loadComplete), r.addEventListener(re.GENERIC_ERROR, t.loadComplete), r.loadLevel(i);
                    }, t.importData = function (e) {
                        t.currentLevelDataObject = null;
                        var i = t.loadMenu.levelData;
                        t.closeLoadMenu();
                        var s = re.instance;
                        s.checkStolen(i) ? t.openPrompt("Invalid data.", "oh, ok") : s.importLevelData(i);
                    }, t.loadComplete = function (e) {
                        var i = re.instance;
                        i.removeEventListener(re.LOAD_COMPLETE, t.loadComplete), i.removeEventListener(re.GENERIC_ERROR, t.loadComplete), e.type == re.LOAD_COMPLETE || (t.currentLevelDataObject = null), t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.deleteCheck = function (e) {
                        var i = new C("Are you sure you'd like to delete this level?", "yes", "no"), s = i.window;
                        t.parent.addChild(s), s.center(), i.addEventListener(C.ANSWER_CHOSEN, t.deleteLevel, false, 0, true);
                    }, t.deleteLevel = function (e) {
                        var i = e.target;
                        i.removeEventListener(C.ANSWER_CHOSEN, t.deleteLevel);
                        var s = i.index;
                        if (i.die(), 0 == s) {
                            t.currentLevelDataObject = t.loadMenu.currentLevelInfo;
                            var r = t.currentLevelDataObject.id, o = re.instance;
                            o.addEventListener(re.DELETE_COMPLETE, t.deleteComplete), o.addEventListener(re.GENERIC_ERROR, t.deleteComplete), o.deleteLevel(r, t.currentLevelDataObject.isPublic);
                        }
                    }, t.deleteComplete = function (e) {
                        var i = re.instance;
                        if (i.removeEventListener(re.DELETE_COMPLETE, t.deleteComplete), i.removeEventListener(re.GENERIC_ERROR, t.deleteComplete), e.type == re.DELETE_COMPLETE) return t.openPrompt("Your level was deleted.", "ok"), void t.loadMenu.loadLevels();
                    }, t.mainMenuPress = function (e) {
                        var i = new C("Are you sure you'd like to exit to the main menu?<br>Unsaved work will be lost<br>FOREVER.", "yes", "no"), r = i.window;
                        t.parent.addChild(r), r.center(), i.addEventListener(C.ANSWER_CHOSEN, t.mainMenuResult, false, 0, true), t.dispatchEvent(new p.ju(s.MENU_BUSY));
                    }, t.mainMenuResult = function (e) {
                        var i = e.target;
                        i.removeEventListener(C.ANSWER_CHOSEN, t.mainMenuResult);
                        var r = i.index;
                        i.die(), 0 == r && t.dispatchEvent(new p.ju(s.GO_MAIN_MENU)), t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.clearPress = function (e) {
                        var i = new C("Are you sure you'd like to clear the stage?<br>This cannot be undone.", "yes", "no"), r = i.window;
                        t.parent.addChild(r), r.center(), i.addEventListener(C.ANSWER_CHOSEN, t.clearResult, false, 0, true), t.dispatchEvent(new p.ju(s.MENU_BUSY));
                    }, t.clearResult = function (e) {
                        var i = e.target;
                        i.removeEventListener(C.ANSWER_CHOSEN, t.clearResult);
                        var r = i.index;
                        i.die(), 0 == r && (t.currentLevelDataObject = null, t.dispatchEvent(new p.ju(s.CLEAR_STAGE))), t.dispatchEvent(new p.ju(s.MENU_IDLE));
                    }, t.helpToggle = function (e) {
                        A.S.instance.window ? A.S.instance.closeWindow() : (A.S.instance.createWindow(), t.parent.addChild(A.S.instance.window));
                    }, t.helpClosed = function (e) {
                        t.helpCheck.setValue(false);
                    }, t.debugToggle = function (e) {
                        T.Z.editorDebugDraw = e.value;
                    }, t.fullScreenToggle = function (e) {
                        t.useFullScreen = e.value;
                    }, t.hideArmsToggle = function (e) {
                        T.Z.editorHideArms = e.value, t.hideArms = e.value, t.dispatchEvent(new p.ju(s.CHANGE_ARM_DRAW_STATE));
                    }, t.buildView(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ye(t, i);
                var r, o, n = s.prototype;
                return n.buildView = function () {
                    this.bg = new p.jy, this.addChild(this.bg), this.bg.graphics.beginFill(10066329), this.bg.graphics.drawRect(0, 0, 110, 325), this.bg.graphics.beginFill(13421772), this.bg.graphics.drawRect(2, 2, 106, 321);
                    var e = new p.pt(10, 90, 0, .75, 15, 15, .25, 3);
                    this.bg.filters = [e];
                    var t = new p.SQ("HelveticaNeueLT Std", 11, 16777215, null, null, null, null, null, p.O3.CENTER);
                    this.menuText = new p.nv, this.addChild(this.menuText), this.menuText.defaultTextFormat = t, this.menuText.x = 24, this.menuText.y = 307, this.menuText.text = "editor menu";
                }, n.init = function () {
                    this._useFullScreen = this.stage.displayState == p.CV.FULL_SCREEN_INTERACTIVE;
                    var e = 10;
                    this.testButton = new ue.M("Test Level >>", 16776805, 90, 0), this.testButton.x = 10, this.testButton.y = e, this.addChild(this.testButton), e += 40, this.optionsButton = new ue.M("Level Options", 16613761, 90), this.optionsButton.x = 10, this.optionsButton.y = e, this.addChild(this.optionsButton), e += 30, this.saveButton = new ue.M("Save Level", 4032711, 90), this.saveButton.x = 10, this.saveButton.y = e, this.addChild(this.saveButton), e += 30, this.loadButton = new ue.M("Load Level", 4032711, 90), this.loadButton.x = 10, this.loadButton.y = e, this.addChild(this.loadButton), e += 30, this.clearButton = new ue.M("New Level", 4032711, 90), this.clearButton.x = 10, this.clearButton.y = e, this.addChild(this.clearButton), e += 30, this.helpCheck = new pe.J("show help", "help"), this.helpCheck.x = 10, this.helpCheck.y = e, this.addChild(this.helpCheck), e += 25, this.debugCheck = new pe.J("debug draw", "useDebugDraw", false), this.debugCheck.x = 10, this.debugCheck.y = e, this.debugCheck.helpCaption = "Debug draw shows all physics shapes and joints when testing your level.", this.addChild(this.debugCheck), e += 25, this.hideArmsCheck = new pe.J("hide arms", "hideArms", false), this.hideArmsCheck.x = 10, this.hideArmsCheck.y = e, this.hideArmsCheck.helpCaption = "Hides trigger and joint arms when they're not selected.", this.addChild(this.hideArmsCheck), e += 25, this.fullScreenCheck = new pe.J("fullscreen", "useFullScreen", this._useFullScreen), this.fullScreenCheck.x = 10, this.fullScreenCheck.y = e, this.fullScreenCheck.helpCaption = "Performance may be greatly reduced when using fullscreen mode. Non-vector graphics will appear pixelated due to scaling up. The only blood setting that will look as intended will be setting 2, which is rendered in vector. Press escape at any time to exit fullscreen mode.", this.addChild(this.fullScreenCheck), e += 30, this.mainMenuButton = new ue.M("<< Main Menu", 16613761, 90), this.mainMenuButton.x = 10, this.mainMenuButton.y = e, this.addChild(this.mainMenuButton), this.bgWidth = this.bg.width, this.bgHeight = this.bg.height, this.hiddenY = this.edgePixels - this.bgHeight, this.x = 10, this.y = this.hiddenY, this.addEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.addEventListener(p.TF.ROLL_OUT, this.rollOutHandler), this.testButton.addEventListener(p.TF.CLICK, this.testLevel), this.mainMenuButton.addEventListener(p.TF.CLICK, this.mainMenuPress), this.clearButton.addEventListener(p.TF.CLICK, this.clearPress), this.optionsButton.addEventListener(p.TF.CLICK, this.openOptionsMenu), this.helpCheck.addEventListener(me.f.VALUE_CHANGE, this.helpToggle), this.debugCheck.addEventListener(me.f.VALUE_CHANGE, this.debugToggle), this.hideArmsCheck.addEventListener(me.f.VALUE_CHANGE, this.hideArmsToggle), this.fullScreenCheck.addEventListener(me.f.VALUE_CHANGE, this.fullScreenToggle), A.S.instance.addEventListener(S.R.WINDOW_CLOSED, this.helpClosed), this.saveButton.addEventListener(p.TF.CLICK, this.openSaveMenu), this.loadButton.addEventListener(p.TF.CLICK, this.openLoadMenu);
                }, n.openPrompt = function (e, t) {
                    this.dispatchEvent(new p.ju(s.MENU_BUSY)), this.promptSprite = new G(e, t);
                    var i = this.promptSprite.window;
                    this.parent.addChild(i), i.center(), this.promptSprite.addEventListener(G.BUTTON_PRESSED, this.promptSpriteClosed);
                }, n.importLevel = function (e, t) {
                    this.dispatchEvent(new p.ju(s.MENU_BUSY));
                    var i = re.instance;
                    i.addEventListener(re.LOAD_COMPLETE, this.loadComplete), i.addEventListener(re.GENERIC_ERROR, this.loadComplete), i.loadLevel(e, t);
                }, n.die = function () {
                    this.removeEventListener(p.TF.ROLL_OVER, this.rollOverHandler), this.removeEventListener(p.TF.ROLL_OUT, this.rollOutHandler), this.levelOptionsMenu && this.closeOptionsMenu(), this.testButton.removeEventListener(p.TF.CLICK, this.testLevel), this.optionsButton.removeEventListener(p.TF.CLICK, this.openOptionsMenu), this.saveButton.removeEventListener(p.TF.CLICK, this.openSaveMenu), this.loadButton.removeEventListener(p.TF.CLICK, this.openLoadMenu), this.clearButton.removeEventListener(p.TF.CLICK, this.clearPress), this.mainMenuButton.removeEventListener(p.TF.CLICK, this.mainMenuPress), this.helpCheck.removeEventListener(me.f.VALUE_CHANGE, this.helpToggle), A.S.instance.removeEventListener(S.R.WINDOW_CLOSED, this.helpClosed);
                }, r = s, (o = [{
                    key: "help", get: function () {
                        return this._help;
                    }, set: function (e) {
                        this._help = e;
                    }
                }, {
                    key: "useDebugDraw", get: function () {
                        return this._useDebugDraw;
                    }, set: function (e) {
                        this._useDebugDraw = e;
                    }
                }, {
                    key: "hideArms", get: function () {
                        return this._hideArms;
                    }, set: function (e) {
                        this._hideArms = e;
                    }
                }, {
                    key: "useFullScreen", get: function () {
                        return this._useFullScreen;
                    }, set: function (e) {
                        this._useFullScreen = e, this.stage.displayState = e ? p.CV.FULL_SCREEN_INTERACTIVE : p.CV.NORMAL;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(p.jy);
            ve.MENU_BUSY = "menubusy", ve.MENU_IDLE = "menuidle", ve.TEST_LEVEL = "testlevel", ve.CLEAR_STAGE = "clearstage", ve.GO_MAIN_MENU = "gomainmenu", ve.CHANGE_ARM_DRAW_STATE = "changearmdrawstate";
        }, 158: (e, t, i) => {
            "use strict";
            i.d(t, { Z: () => n }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(15);
            function o(e, t) {
                return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var n = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this).m_physScale = r.Z.currentSession.level.m_physScale, t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, o(t, i);
                var n, a, h = s.prototype;
                return h.paint = function () { }, h.actions = function () { }, h.singleAction = function () { }, h.die = function () { }, h.getJointBody = function (e) {
                    return void 0 === e && (e = null), null;
                }, h.triggerSingleActivation = function (e, t, i) {
                    this._triggered || (this._triggered = true);
                }, h.triggerRepeatActivation = function (e, t, i, s) {
                    return true;
                }, h.prepareForTrigger = function () { }, n = s, (a = [{
                    key: "groupDisplayObject", get: function () {
                        return null;
                    }
                }, {
                    key: "bodyList", get: function () {
                        return [];
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), s;
            }(s.pB);
            n.oneEightyOverPI = 180 / Math.PI;
        }, 126: (e, t, i) => {
            "use strict";
            i.d(t, { Eh: () => A.Eh, RS: () => A.RS, mM: () => A.mM, E8: () => A.E8, Fw: () => A.Fw, Aw: () => A.Aw, A3: () => A.A3, vY: () => A.vY, E7: () => A.E7, qo: () => A.qo, Hs: () => A.Hs, XG: () => A.XG, bj: () => A.bj, $Y: () => A.$Y, w6: () => A.w6, VH: () => A.VH, HG: () => A.HG, gk: () => A.gk, GS: () => A.GS, k8: () => A.k8, eR: () => A.eR, zq: () => A.zq, zy: () => A.zy, Zb: () => A.Zb, l2: () => A.l2, zn: () => A.zn, bx: () => A.bx, q6: () => A.q6, S0: () => A.S0, y6: () => A.y6, jx: () => A.jx, Xe: () => A.Xe, fx: () => A.fx, TV: () => A.TV, iA: () => A.iA, L$: () => f, n1: () => v, px: () => S, Yf: () => w, oc: () => C, qw: () => B, zC: () => A.zC, qc: () => A.qc, WU: () => A.WU, ZN: () => A.ZN, aZ: () => se, mW: () => A.mW, xJ: () => a, Uw: () => A.Uw }), i(30), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(24), r = i(15), o = i(158);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function o(t, i) {
                    var s;
                    return (s = e.call(this) || this).maxSpinAV = 3.5, s.impulseOffset = 1, s.spaceAction = 0, s.shiftAction = 0, s.ctrlAction = 0, s._characterPose = 0, s._body = i, s.acceleration = t.acceleration, s.leaningStrength = t.leaningStrength, s.spaceAction = t.spaceAction, s.shiftAction = t.shiftAction, s.ctrlAction = t.ctrlAction, s.lockJoints = t.lockJoints, s._characterPose = t.characterPose, s.joints = [], s.jointMotorSpeeds = [], s.jointAccels = [], s.jets = [], s.arrowGuns = [], s.characters = [], s.vehicles = [], s.lastIteration = -1, s;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var a, h, l = o.prototype;
                return l.setShitUp = function () {
                    var e = this._body.GetMass();
                    this.leanImpulse = e * (.1 * this.leaningStrength);
                }, l.addHandle = function (e) {
                    e.SetUserData(this);
                }, l.checkAddSpecial = function (e) {
                    if (e instanceof A.zy) {
                        var t = e;
                        this.jets.indexOf(t) < 0 && (t.firingAllowed = false, this.jets.push(t));
                    } else if (e instanceof A.RS) {
                        var i = e;
                        this.arrowGuns.indexOf(i) < 0 && (i.firingAllowed = false, i.unlimitedArrows = true, this.arrowGuns.push(i));
                    }
                }, l.checkAddVehicle = function (e) {
                    this.vehicles.indexOf(e) < 0 && (this.vehicles.push(e), e.checkAddVehicle(this));
                }, l.addJoint = function (e) {
                    this.joints.push(e);
                    var t = this.joints.length - 1;
                    if (e instanceof s.M) {
                        var i = e;
                        if (i.IsMotorEnabled()) {
                            var o = i.GetMotorSpeed();
                            this.jointMotorSpeeds[t] = o, this.jointAccels[t] = this.acceleration < 10 ? Math.abs(o / (100 - 10 * this.acceleration)) : Math.abs(o), this.lockJoints && (this.slowAfterEject = true, (n = r.Z.currentSession.level.actionsVector).indexOf(this) < 0 && n.push(this));
                        } else this.jointMotorSpeeds[t] = null;
                        i.EnableMotor(false);
                    } else {
                        var n, a = e;
                        a.IsMotorEnabled() ? (o = a.GetMotorSpeed(), this.jointMotorSpeeds[t] = o, this.jointAccels[t] = this.acceleration < 10 ? Math.abs(o / (100 - 10 * this.acceleration)) : Math.abs(o), this.lockJoints && (this.slowAfterEject = true, (n = r.Z.currentSession.level.actionsVector).indexOf(this) < 0 && n.push(this))) : this.jointMotorSpeeds[t] = null, a.EnableMotor(false);
                    }
                }, l.operateKeys = function (e, t, i, s, r, o, n, a, h) {
                    var l = "";
                    if (e <= this.lastIteration) return l;
                    this.lastIteration = e;
                    if (t ? i ? (this.leftAndRightActions(), l += "11") : (this.leftPressedActions(), l += "10") : i ? (this.rightPressedActions(), l += "01") : (this.leftAndRightActions(), l += "00"), s ? r ? (this.upAndDownActions(), l += "11") : (this.upPressedActions(), l += "10") : r ? (this.downPressedActions(), l += "01") : (this.upAndDownActions(), l += "00"), o) {
                        var d = c[this.spaceAction];
                        c[this.spaceAction] = d + 1, l += "1";
                    } else l += "0";
                    n ? (d = c[this.shiftAction], c[this.shiftAction] = d + 1, l += "1") : l += "0", a ? (d = c[this.shiftAction], c[this.ctrlAction] = d + 1, l += "1") : l += "0", (d = 0) > 0 && this.brake(), (d = 0) > 0 ? this.fireJets() : this.stopJets(), (d = 0) > 0 ? this.fireArrows() : this.stopArrows();
                    for (var p = 0; p < this.vehicles.length; p++) this.vehicles[p].operateKeys(e, t, i, s, r, o, n, a, h);
                    return h ? (this.zPressedActions(), l += "1") : l += "0", l;
                }, l.operateReplayData = function (e, t, i) {
                    if (void 0 === i && (i = null), !(e <= this.lastIteration)) {
                        this.lastIteration = e;
                        if (i) {
                            if ("1" == t.charAt(0) ? "1" == t.charAt(1) ? (this.leftAndRightActions(), i.leftKeyON(), i.rightKeyON()) : (this.leftPressedActions(), i.leftKeyON(), i.rightKeyOFF()) : "1" == t.charAt(1) ? (this.rightPressedActions(), i.leftKeyOFF(), i.rightKeyON()) : (this.leftAndRightActions(), i.rightKeyOFF(), i.leftKeyOFF()), "1" == t.charAt(2) ? "1" == t.charAt(3) ? (this.upAndDownActions(), i.upKeyON(), i.downKeyON()) : (this.upPressedActions(), i.upKeyON(), i.downKeyOFF()) : "1" == t.charAt(3) ? (this.downPressedActions(), i.upKeyOFF(), i.downKeyON()) : (this.upAndDownActions(), i.upKeyOFF(), i.downKeyOFF()), "1" == t.charAt(4)) {
                                var r = s[this.spaceAction];
                                s[this.spaceAction] = r + 1, i.spaceKeyON();
                            } else i.spaceKeyOFF();
                            "1" == t.charAt(5) ? (r = s[this.shiftAction], s[this.shiftAction] = r + 1, i.shiftKeyON()) : i.shiftKeyOFF(), "1" == t.charAt(6) ? (r = s[this.shiftAction], s[this.ctrlAction] = r + 1, i.ctrlKeyON()) : i.ctrlKeyOFF(), "1" == t.charAt(7) ? (this.zPressedActions(), i.zKeyON()) : i.zKeyOFF();
                        } else "1" == t.charAt(0) ? "1" == t.charAt(1) ? this.leftAndRightActions() : this.leftPressedActions() : "1" == t.charAt(1) ? this.rightPressedActions() : this.leftAndRightActions(), "1" == t.charAt(2) ? "1" == t.charAt(3) ? this.upAndDownActions() : this.upPressedActions() : "1" == t.charAt(3) ? this.downPressedActions() : this.upAndDownActions(), "1" == t.charAt(4) && (r = s[this.spaceAction], s[this.spaceAction] = r + 1), "1" == t.charAt(5) && (r = s[this.shiftAction], s[this.shiftAction] = r + 1), "1" == t.charAt(6) && (r = s[this.shiftAction], s[this.ctrlAction] = r + 1), "1" == t.charAt(7) && this.zPressedActions();
                        (r = 0) > 0 && this.brake(), (r = 0) > 0 ? this.fireJets() : this.stopJets(), (r = 0) > 0 ? this.fireArrows() : this.stopArrows();
                        for (var o = 0; o < this.vehicles.length; o++) this.vehicles[o].operateReplayData(e, t, i);
                    }
                }, l.leftPressedActions = function () {
                    if (this.leaningStrength > 0) {
                        var e = this._body.GetAngle(), t = (this._body.GetAngularVelocity() + this.maxSpinAV) / this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.leanImpulse * t, r = Math.sin(e) * this.leanImpulse * t, o = this._body.GetLocalCenter();
                        this._body.ApplyImpulse(new s._m(r, -i), this._body.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this._body.ApplyImpulse(new s._m(-r, i), this._body.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, l.rightPressedActions = function () {
                    if (this.leaningStrength > 0) {
                        var e = this._body.GetAngle(), t = (this._body.GetAngularVelocity() - this.maxSpinAV) / -this.maxSpinAV;
                        t < 0 && (t = 0), t > 1 && (t = 1);
                        var i = Math.cos(e) * this.leanImpulse * t, r = Math.sin(e) * this.leanImpulse * t, o = this._body.GetLocalCenter();
                        this._body.ApplyImpulse(new s._m(-r, i), this._body.GetWorldPoint(new s._m(o.x + this.impulseOffset, o.y))), this._body.ApplyImpulse(new s._m(r, -i), this._body.GetWorldPoint(new s._m(o.x - this.impulseOffset, o.y)));
                    }
                }, l.leftAndRightActions = function () { }, l.upPressedActions = function () {
                    for (var e = 0; e < this.joints.length; e++) {
                        var t = this.joints[e];
                        if (t instanceof s.M) {
                            var i = t;
                            if (this.jointMotorSpeeds[e]) {
                                if ((n = this.jointMotorSpeeds[e]) >= 0) var r = this.handlePositiveSpeed(i, n, e); else r = this.handleNegativeSpeed(i, n, e);
                                if (i.IsLimitEnabled()) {
                                    var o = i.GetJointAngle();
                                    o > i.m_upperAngle && r > 0 && i.SetMotorSpeed(0), o < i.m_lowerAngle && r < 0 && i.SetMotorSpeed(0);
                                }
                            }
                        } else {
                            var n, a = t;
                            if (this.jointMotorSpeeds[e] && (r = (n = this.jointMotorSpeeds[e]) >= 0 ? this.handlePositiveSpeedPris(a, n, e) : this.handleNegativeSpeedPris(a, n, e), a.IsLimitEnabled())) {
                                var h = a.GetJointTranslation();
                                h > a.m_upperTranslation && r > 0 && a.SetMotorSpeed(0), h < a.m_lowerTranslation && r < 0 && a.SetMotorSpeed(0);
                            }
                        }
                    }
                }, l.downPressedActions = function () {
                    for (var e = 0; e < this.joints.length; e++) {
                        var t = this.joints[e];
                        if (t instanceof s.M) {
                            var i = t;
                            if (this.jointMotorSpeeds[e]) {
                                var r = -this.jointMotorSpeeds[e];
                                if (r >= 0) var o = this.handlePositiveSpeed(i, r, e); else o = this.handleNegativeSpeed(i, r, e);
                                if (i.IsLimitEnabled()) {
                                    var n = i.GetJointAngle();
                                    n > i.m_upperAngle && o > 0 && i.SetMotorSpeed(0), n < i.m_lowerAngle && o < 0 && i.SetMotorSpeed(0);
                                }
                            }
                        } else {
                            var a = t;
                            if (this.jointMotorSpeeds[e]) {
                                var h = -this.jointMotorSpeeds[e];
                                if (o = h >= 0 ? this.handlePositiveSpeedPris(a, h, e) : this.handleNegativeSpeedPris(a, h, e), a.IsLimitEnabled()) {
                                    var l = a.GetJointTranslation();
                                    l > a.m_upperTranslation && o > 0 && a.SetMotorSpeed(0), l < a.m_lowerTranslation && o < 0 && a.SetMotorSpeed(0);
                                }
                            }
                        }
                    }
                }, l.handlePositiveSpeed = function (e, t, i) {
                    0 == e.IsMotorEnabled() && e.EnableMotor(true);
                    var s, r = e.GetJointSpeed();
                    if (r < 0) s = 0; else {
                        var o = this.jointAccels[i];
                        s = r < t ? Math.min(r + o, t) : r;
                    }
                    return e.SetMotorSpeed(s), s;
                }, l.handleNegativeSpeed = function (e, t, i) {
                    0 == e.IsMotorEnabled() && e.EnableMotor(true);
                    var s, r = e.GetJointSpeed();
                    if (r > 0) s = 0; else {
                        var o = this.jointAccels[i];
                        s = r > t ? Math.max(r - o, t) : r;
                    }
                    return e.SetMotorSpeed(s), s;
                }, l.handlePositiveSpeedPris = function (e, t, i) {
                    0 == e.IsMotorEnabled() && e.EnableMotor(true);
                    var s, r = e.GetJointSpeed();
                    if (r < 0) s = 0; else {
                        var o = this.jointAccels[i];
                        s = r < t ? Math.min(r + o, t) : r;
                    }
                    return e.SetMotorSpeed(s), s;
                }, l.handleNegativeSpeedPris = function (e, t, i) {
                    0 == e.IsMotorEnabled() && e.EnableMotor(true);
                    var s, r = e.GetJointSpeed();
                    if (r > 0) s = 0; else {
                        var o = this.jointAccels[i];
                        s = r > t ? Math.max(r - o, t) : r;
                    }
                    return e.SetMotorSpeed(s), s;
                }, l.upAndDownActions = function () {
                    if (this.lockJoints) for (var e = 0; e < this.joints.length; e++) {
                        var t = this.joints[e];
                        if (t instanceof s.M) {
                            var i = t;
                            if (this.jointMotorSpeeds[e]) {
                                0 == i.IsMotorEnabled() && i.EnableMotor(true);
                                var r = i.GetJointSpeed(), o = this.jointAccels[e], n = 0;
                                r > 0 ? n = (n = r - o) > 0 ? n : 0 : r < 0 && (n = (n = r + o) < 0 ? n : 0), i.SetMotorSpeed(n);
                            }
                        } else {
                            var a = t;
                            this.jointMotorSpeeds[e] && (0 == a.IsMotorEnabled() && a.EnableMotor(true), r = a.GetJointSpeed(), o = this.jointAccels[e], n = 0, r > 0 ? n = (n = r - o) > 0 ? n : 0 : r < 0 && (n = (n = r + o) < 0 ? n : 0), a.SetMotorSpeed(n));
                        }
                    } else for (e = 0; e < this.joints.length; e++) (t = this.joints[e]) instanceof s.M ? (i = t, this.jointMotorSpeeds[e] && 1 == i.IsMotorEnabled() && i.EnableMotor(false)) : (a = t, this.jointMotorSpeeds[e] && 1 == a.IsMotorEnabled() && a.EnableMotor(false));
                }, l.zPressedActions = function () {
                    for (var e = 0; e < this.characters.length; e++) this.characters[e].userVehicleEject();
                }, l.brake = function () {
                    for (var e = 0; e < this.joints.length; e++) {
                        var t = this.joints[e];
                        if (t instanceof s.M) {
                            var i = t;
                            this.jointMotorSpeeds[e] && (i.IsMotorEnabled() || i.EnableMotor(true), i.SetMotorSpeed(0));
                        } else {
                            var r = t;
                            this.jointMotorSpeeds[e] && (r.IsMotorEnabled() || r.EnableMotor(true), r.SetMotorSpeed(0));
                        }
                    }
                }, l.fireJets = function () {
                    if (!this.jetsFiring) {
                        this.jetsFiring = true;
                        for (var e = 0; e < this.jets.length; e++) this.jets[e].firingAllowed = true;
                    }
                }, l.stopJets = function () {
                    if (this.jetsFiring) {
                        this.jetsFiring = false;
                        for (var e = 0; e < this.jets.length; e++) this.jets[e].firingAllowed = false;
                    }
                }, l.fireArrows = function () {
                    if (!this.arrowsFiring) {
                        this.arrowsFiring = true;
                        for (var e = 0; e < this.arrowGuns.length; e++) this.arrowGuns[e].firingAllowed = true;
                    }
                }, l.stopArrows = function () {
                    if (this.arrowsFiring) {
                        this.arrowsFiring = false;
                        for (var e = 0; e < this.arrowGuns.length; e++) this.arrowGuns[e].firingAllowed = false;
                    }
                }, l.addCharacter = function (e) {
                    if ((t = this.characters.indexOf(e)) < 0) {
                        this.characters.push(e);
                        var t, i = r.Z.currentSession.level.actionsVector;
                        (t = i.indexOf(this)) > -1 && i.splice(t, 1);
                    }
                }, l.removeCharacter = function (e) {
                    var t = this.characters.indexOf(e);
                    if (t > -1 && (this.characters.splice(t, 1), this.characters.length < 1)) {
                        if (this.slowAfterEject) {
                            var i = r.Z.currentSession.level.actionsVector;
                            i.indexOf(this) < 0 && i.push(this);
                        } else for (var o = 0; o < this.joints.length; o++) {
                            var n = this.joints[o];
                            if (n instanceof s.M) {
                                var a = n;
                                this.jointMotorSpeeds[o] && 1 == a.IsMotorEnabled() && a.EnableMotor(false);
                            } else {
                                var h = n;
                                this.jointMotorSpeeds[o] && 1 == h.IsMotorEnabled() && h.EnableMotor(false);
                            }
                        }
                        this.stopArrows();
                    }
                }, l.actions = function () {
                    for (var e = 0, t = 0; t < this.joints.length; t++) if (this.joints[t] instanceof s.M) {
                        var i = this.joints[t];
                        if (this.jointMotorSpeeds[t]) {
                            0 == i.IsMotorEnabled() && i.EnableMotor(true);
                            var o = i.GetJointSpeed(), n = this.jointAccels[t], a = 0;
                            o > 0 ? a = (a = o - n) > 0 ? a : 0 : o < 0 && (a = (a = o + n) < 0 ? a : 0), i.SetMotorSpeed(a), e += Math.abs(a);
                        }
                    } else {
                        var h = this.joints[t];
                        this.jointMotorSpeeds[t] && (0 == h.IsMotorEnabled() && h.EnableMotor(true), o = h.GetJointSpeed(), n = this.jointAccels[t], a = 0, o > 0 ? a = (a = o - n) > 0 ? a : 0 : o < 0 && (a = (a = o + n) < 0 ? a : 0), h.SetMotorSpeed(a), e += Math.abs(a));
                    }
                    0 == e && r.Z.currentSession.level.removeFromActionsVector(this);
                }, a = o, (h = [{
                    key: "arm1Joint", set: function (e) {
                        this._arm1Joint = e;
                    }
                }, {
                    key: "arm2Joint", set: function (e) {
                        this._arm2Joint = e;
                    }
                }, {
                    key: "characterPose", get: function () {
                        return this._characterPose;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), o;
            }(o.Z);
            a.oneEightyOverPI = 180 / Math.PI, i(73);
            var h = i(40), l = i(6), c = i(59);
            function d(e, t) {
                return (d = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var p = function (e) {
                var t, i;
                function o() {
                    var t;
                    return (t = e.call(this) || this).checkEndBind = t.checkEnd.bind(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(t)), t.session = r.Z.currentSession, t.m_physScale = t.session.m_physScale, t.create(), t;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, d(t, i);
                var n = o.prototype;
                return n.create = function () {
                    var e = new s.Oi;
                    this.body = this.session.m_world.CreateBody(e);
                    var t = new s.Vb;
                    t.friction = 1, t.restitution = .1, t.filter.categoryBits = 8;
                    var i = this.session.level.shapeGuide.end, r = i.rotation * Math.PI / 180, o = new s._m;
                    o.Set(i.x / this.m_physScale, i.y / this.m_physScale);
                    var n = 5 * i.scaleX / this.m_physScale, a = 5 * i.scaleY / this.m_physScale;
                    t.SetAsOrientedBox(n, a, o, r), this.shape = this.body.CreateShape(t), this.aabb = new s.Cc, this.aabb.lowerBound.Set(o.x - n, o.y - 2 * n), this.aabb.upperBound.Set(o.x + n, o.y), this.session.contactListener.registerListener(h.ec.RESULT, this.shape, this.checkEndBind);
                }, n.checkEnd = function (e) {
                    var t = r.Z.currentSession;
                    if (t.character.dead) t.contactListener.deleteListener(h.ec.RESULT, this.shape); else {
                        var i = t.character.cameraFocus.GetWorldCenter();
                        i.x < this.aabb.upperBound.x && i.x > this.aabb.lowerBound.x && i.y < this.aabb.upperBound.y && i.y > this.aabb.lowerBound.y && (t.contactListener.deleteListener(h.ec.RESULT, this.shape), t.isReplay || t.levelComplete(), c.ij.instance.playSoundItem("Victory"));
                    }
                }, n.die = function () {
                    this.session.contactListener.deleteListener(h.ec.RESULT, this.shape);
                }, o;
            }(l.pB), u = i(22);
            function m(e, t) {
                return (m = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var f = function (e) {
                var t, i;
                function o(t, i, s, r, o) {
                    var n;
                    if ((n = e.call(this) || this).counter = 0, n._refSprite = t, n._shape = i, n._sprite = s, n._actionIndex = t.triggerActionList.indexOf(r), n._lastAngle = t.rotation * Math.PI / 180, n._actionIndex < 0) throw new Error("Target Action not in Shape Action List");
                    return n._instant = "change opacity" != r, n._properties = o, n;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, m(t, i);
                var n, a, h = o.prototype;
                return h.singleAction = function () {
                    var e = r.Z.currentSession.levelVersion;
                    switch (this._actionIndex) {
                        case 0:
                            this._shape && (L = this._shape.GetBody()) && L.WakeUp();
                            break;
                        case 1:
                            if (this._shape && (L = this._shape.GetBody()).m_mass > 0) {
                                var t = r.Z.currentSession.level, i = t.levelBody, n = r.Z.currentSession.m_world, a = L.GetWorldCenter(), h = this._lastAngle = L.GetAngle();
                                if (this._sprite.x = a.x * this.m_physScale, this._sprite.y = a.y * this.m_physScale, this._sprite.rotation = h * o.oneEightyOverPI % 360, this._shape instanceof s.oq) {
                                    var l = this._shape;
                                    if (this._refSprite instanceof u.kL) {
                                        var c = this._refSprite.getFlatSprite(), d = this._sprite.parent, p = d.getChildIndex(this._sprite);
                                        d.addChildAt(c, p), c.rotation = this._sprite.rotation;
                                        var m = this._sprite.getBounds(d), f = c.getBounds(d);
                                        c.x -= f.x - m.x, c.y -= f.y - m.y, d.removeChild(this._sprite), c.alpha = this._sprite.alpha, this._sprite = c, a = L.GetPosition();
                                    }
                                    var y = l.GetVertices(), v = new s.Vb;
                                    v.density = l.m_density, v.filter = l.m_filter.Copy(), e > 1.84 ? 8 == v.filter.categoryBits ? (v.filter.categoryBits = 24, 8 == v.filter.maskBits ? v.filter.maskBits = 56 : 0 == v.filter.groupIndex && (v.filter.groupIndex = -10)) : 16 == v.filter.categoryBits ? (v.filter.maskBits = 48, v.filter.groupIndex = 0) : 32 == v.filter.categoryBits && (v.filter.categoryBits = 48) : 65535 == v.filter.maskBits && 0 == v.filter.groupIndex && (v.filter.groupIndex = -10, v.filter.categoryBits = 24), v.vertexCount = l.m_vertexCount;
                                    for (var g = new s.RA(h), S = 0; S < l.m_vertexCount; S++) {
                                        var _ = y[S], w = _.Copy();
                                        w.MulM(g), w.x += a.x, w.y += a.y, v.vertices[S] = w;
                                    }
                                    this._shape = i.CreateShape(v);
                                } else {
                                    if (!(this._shape instanceof s.V2)) throw new Error("WHAT THE FUCK IS THIS SHAPE?");
                                    var b = this._shape, C = new s.lB;
                                    C.radius = b.m_radius, C.density = b.m_density, C.filter = b.m_filter.Copy(), e > 1.84 ? 8 == C.filter.categoryBits ? (C.filter.categoryBits = 24, 8 == C.filter.maskBits ? C.filter.maskBits = 56 : 0 == C.filter.groupIndex && (C.filter.groupIndex = -10)) : 16 == C.filter.categoryBits ? (C.filter.maskBits = 48, C.filter.groupIndex = 0) : 32 == C.filter.categoryBits && (C.filter.categoryBits = 48) : 65535 == C.filter.maskBits && 0 == C.filter.groupIndex && (C.filter.groupIndex = -10, C.filter.categoryBits = 24), C.localPosition.SetV(a), this._shape = i.CreateShape(C);
                                }
                                n.DestroyBody(L), t.removeFromPaintBodyVector(L), t.updateTargetActionsFor(this._refSprite, this._shape, this._sprite, this._lastAngle);
                            }
                            break;
                        case 2:
                            var L;
                            if (this._shape && 0 == (L = this._shape.GetBody()).m_mass) {
                                i = (t = r.Z.currentSession.level).levelBody, n = r.Z.currentSession.m_world;
                                var B = new s.Oi, A = n.CreateBody(B);
                                if (this._shape instanceof s.oq) {
                                    for (a = (l = this._shape).GetCentroid(), A.SetXForm(a, this._lastAngle), y = l.GetVertices(), (v = new s.Vb).density = l.m_density > 0 ? l.m_density : 1, v.filter = l.m_filter.Copy(), e > 1.84 ? 24 == v.filter.categoryBits ? (v.filter.categoryBits = 8, 56 == v.filter.maskBits ? v.filter.maskBits = 8 : -10 == v.filter.groupIndex && (v.filter.groupIndex = 0)) : 16 == v.filter.categoryBits ? (v.filter.maskBits = 16, v.filter.groupIndex = -322) : 48 == v.filter.categoryBits && (v.filter.categoryBits = 32) : -10 == v.filter.groupIndex && 65535 == v.filter.maskBits && (v.filter.groupIndex = 0, v.filter.categoryBits = 8), v.vertexCount = l.m_vertexCount, g = new s.RA(-this._lastAngle), S = 0; S < l.m_vertexCount; S++) (w = (_ = y[S]).Copy()).x -= a.x, w.y -= a.y, w.MulM(g), v.vertices[S] = w;
                                    if (this._shape = A.CreateShape(v), i.DestroyShape(l), this._refSprite instanceof u.kL) {
                                        var E = this._refSprite, M = new s._m, k = E.vertVector[0];
                                        M.x = E.scaleX * k.x - v.vertices[0].x * this.m_physScale, M.y = E.scaleY * k.y - v.vertices[0].y * this.m_physScale, c = this._refSprite.getCenteredSprite(M), p = (d = this._sprite.parent).getChildIndex(this._sprite), d.addChildAt(c, p), d.removeChild(this._sprite), c.alpha = this._sprite.alpha, this._sprite = c;
                                    }
                                } else {
                                    if (!(this._shape instanceof s.V2)) throw new Error("WHAT THE FUCK IS THIS SHAPE?");
                                    b = this._shape, (C = new s.lB).radius = b.m_radius, C.density = b.m_density > 0 ? b.m_density : 1, C.filter = b.m_filter.Copy(), e > 1.84 ? 24 == C.filter.categoryBits ? (C.filter.categoryBits = 8, 56 == C.filter.maskBits ? C.filter.maskBits = 8 : -10 == C.filter.groupIndex && (C.filter.groupIndex = 0)) : 16 == C.filter.categoryBits ? (C.filter.maskBits = 16, C.filter.groupIndex = -322) : 48 == C.filter.categoryBits && (C.filter.categoryBits = 32) : -10 == C.filter.groupIndex && 65535 == C.filter.maskBits && (C.filter.groupIndex = 0, C.filter.categoryBits = 8), a = b.GetLocalPosition(), A.SetXForm(a, this._lastAngle), this._shape = A.CreateShape(C), i.DestroyShape(b);
                                }
                                A.SetMassFromShapes(), A.m_userData = this._sprite, t.registerShapeSound(this._shape, A), t.paintBodyVector.push(A), t.updateTargetActionsFor(this._refSprite, this._shape, this._sprite, this._lastAngle, true);
                            }
                            break;
                        case 4:
                            if (this._shape) {
                                var x = (L = this._shape.GetBody()).m_mass;
                                if (x > 0) {
                                    var O = this._properties[0], T = this._properties[1], P = this._properties[2];
                                    if (L.ApplyImpulse(new s._m(O * x, T * x), L.GetWorldCenter()), P) {
                                        var R = L.GetAngularVelocity();
                                        L.SetAngularVelocity(R + P);
                                    }
                                }
                            }
                            break;
                        case 5:
                            this._shape && (x = (L = this._shape.GetBody()).m_mass, i = (t = r.Z.currentSession.level).levelBody, n = r.Z.currentSession.m_world, x > 0 ? (n.DestroyBody(L), this._shape = null, t.removeFromPaintBodyVector(L)) : (i.DestroyShape(this._shape), this._shape = null), t.updateTargetActionsFor(this._refSprite, this._shape, this._sprite, this._lastAngle));
                            break;
                        case 6:
                            t = r.Z.currentSession.level, this._shape && (x = (L = this._shape.GetBody()).m_mass, i = t.levelBody, n = r.Z.currentSession.m_world, x > 0 ? (n.DestroyBody(L), this._shape = null, t.removeFromPaintBodyVector(L)) : (L.DestroyShape(this._shape), this._shape = null)), this._sprite.parent && this._sprite.parent.removeChild(this._sprite), t.updateTargetActionsFor(this._refSprite, this._shape, this._sprite, this._lastAngle);
                            break;
                        case 7:
                            t = r.Z.currentSession.level;
                            var D = 0 == this._shape.m_body.m_mass, I = this._properties[0];
                            this._shape && (2 == I ? (this._shape.m_filter.categoryBits = 8, this._shape.m_filter.maskBits = 8, this._shape.m_filter.groupIndex = 0, e > 1.84 && D && (this._shape.m_filter.categoryBits = 24, this._shape.m_filter.maskBits = 56)) : 3 == I ? e < 1.82 ? (this._shape.m_filter.categoryBits = 1, this._shape.m_filter.maskBits = 1, this._shape.m_filter.groupIndex = -10) : (this._shape.m_filter.categoryBits = 0, this._shape.m_filter.maskBits = 0, this._shape.m_filter.groupIndex = 0) : 4 == I ? (this._shape.m_filter.categoryBits = 8, this._shape.m_filter.maskBits = 65535, this._shape.m_filter.groupIndex = -321, e > 1.84 && D && (this._shape.m_filter.categoryBits = 24)) : 5 == I ? (this._shape.m_filter.categoryBits = 16, this._shape.m_filter.maskBits = 16, this._shape.m_filter.groupIndex = -322, e > 1.84 && D && (this._shape.m_filter.maskBits = 48, this._shape.m_filter.groupIndex = 0)) : 6 == I ? (this._shape.m_filter.categoryBits = 16, this._shape.m_filter.maskBits = 16, this._shape.m_filter.groupIndex = 0, e > 1.84 && (this._shape.m_filter.categoryBits = D ? 48 : 32, this._shape.m_filter.maskBits = 48)) : 7 == I ? (this._shape.m_filter.categoryBits = 15, this._shape.m_filter.maskBits = 3840, this._shape.m_filter.groupIndex = 0) : (this._shape.m_filter.categoryBits = 8, this._shape.m_filter.maskBits = 65535, D && (this._shape.m_filter.categoryBits = 24, this._shape.m_filter.groupIndex = -10)), this._shape.m_isSensor = !!(3 == I && e < 1.82), r.Z.currentSession.m_world.Refilter(this._shape), t.updateTargetActionsFor(this._refSprite, this._shape, this._sprite, this._lastAngle));
                    }
                }, h.actions = function () {
                    if (3 === this._actionIndex) {
                        var e = this._properties[0], t = this._properties[1];
                        if (e *= .01, t = Math.round(30 * t), this.counter == t) return r.Z.currentSession.levelVersion > 1.8 && (this.counter = 0), this._sprite.visible = 0 != e, this._sprite.alpha = e, void r.Z.currentSession.level.removeFromActionsVector(this);
                        var i = this._sprite.alpha, s = e - i;
                        this._sprite.alpha = i + s / (t - this.counter), this._sprite.visible = 0 != this._sprite.alpha;
                    }
                    this.counter += 1;
                }, n = o, (a = [{
                    key: "lastAngle", get: function () {
                        return this._lastAngle;
                    }, set: function (e) {
                        this._lastAngle = e;
                    }
                }, {
                    key: "shape", get: function () {
                        return this._shape;
                    }, set: function (e) {
                        this._shape = e;
                    }
                }, {
                    key: "sprite", get: function () {
                        return this._sprite;
                    }, set: function (e) {
                        this._sprite = e;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(o.Z);
            function y(e, t) {
                return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var v = function (e) {
                var t, i;
                function o(t, i, s, r, o) {
                    var n;
                    return (n = e.call(this) || this).counter = 0, n._refSprite = t, n._body = i, n._sprite = s, n._action = r, n._instant = "change opacity" != r, n._properties = o, n;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, y(t, i);
                var n, a, h = o.prototype;
                return h.singleAction = function () {
                    var e = r.Z.currentSession.levelVersion, t = r.Z.currentSession.m_world, i = r.Z.currentSession.level;
                    switch (this._action) {
                        case "wake from sleep":
                            this._body && this._body.WakeUp();
                            break;
                        case "apply impulse":
                            if (this._body) {
                                var o = this._body.m_mass;
                                if (o > 0) {
                                    var n = this._properties[0], a = this._properties[1], h = this._properties[2];
                                    if (this._body.ApplyImpulse(new s._m(n * o, a * o), this._body.GetWorldCenter()), h) {
                                        var l = this._body.GetAngularVelocity();
                                        this._body.SetAngularVelocity(l + h);
                                    }
                                }
                            }
                            break;
                        case "set to fixed":
                            if (this._body && this._body.m_mass > 0) {
                                var c = this._body.GetWorldCenter();
                                this._body.m_userData.x = c.x * this.m_physScale, this._body.m_userData.y = c.y * this.m_physScale, this._body.m_userData.rotation = this._body.GetAngle() * (180 / Math.PI) % 360;
                                var d = new s.WV;
                                if (d.center = new s._m, d.mass = 0, d.I = 0, this._body.SetMass(d), this._body.SetLinearVelocity(new s._m), this._body.SetAngularVelocity(0), this._body.UpdateInterpolation(1), i.removeFromPaintBodyVector(this._body), e > 1.84) for (f = this._body.GetShapeList(); f; f = f.m_next) 8 == f.m_material && (8 == f.m_filter.categoryBits ? (f.m_filter.categoryBits = 24, 8 == f.m_filter.maskBits ? f.m_filter.maskBits = 56 : 0 == f.m_filter.groupIndex && (f.m_filter.groupIndex = -10)) : 16 == f.m_filter.categoryBits ? (f.m_filter.maskBits = 48, f.m_filter.groupIndex = 0) : 32 == f.m_filter.categoryBits && (f.m_filter.categoryBits = 48), t.Refilter(f));
                                for (var p = this._body.GetJointList(); p; p = p.next) 0 == p.other.m_I && 0 != p.other.m_mass && t.DestroyJoint(p.joint);
                            }
                            break;
                        case "set to non fixed":
                            if (this._body && 0 == this._body.m_mass && (this._body.SetMassFromShapes(), this._body.WakeUp(), i.paintBodyVector.push(this._body), this._body.UpdateInterpolation(1), e > 1.84)) for (f = this._body.GetShapeList(); f; f = f.m_next) 24 == f.m_filter.categoryBits ? (f.m_filter.categoryBits = 8, 56 == f.m_filter.maskBits ? f.m_filter.maskBits = 8 : -10 == f.m_filter.groupIndex && (f.m_filter.groupIndex = 0)) : 16 == f.m_filter.categoryBits ? (f.m_filter.maskBits = 16, f.m_filter.groupIndex = -322) : 48 == f.m_filter.categoryBits && (f.m_filter.categoryBits = 32), t.Refilter(f);
                            break;
                        case "delete shapes":
                            this._body && (t.DestroyBody(this._body), i.removeFromPaintBodyVector(this._body), this._body = null, i.updateTargetActionGroupsFor(this._refSprite, this._body, this._sprite));
                            break;
                        case "delete self":
                            this._body && (t.DestroyBody(this._body), i.removeFromPaintBodyVector(this._body), this._body = null, i.updateTargetActionGroupsFor(this._refSprite, this._body, this._sprite)), this._sprite.parent && this._sprite.parent.removeChild(this._sprite), i.updateTargetActionGroupsFor(this._refSprite, this._body, this._sprite);
                            break;
                        case "change collision":
                            var u = this._properties[0];
                            if (this._body) {
                                for (var m = 0 == this._body.m_mass, f = this._body.GetShapeList(); f; f = f.m_next) 8 == f.m_material && (2 == u ? (f.m_filter.categoryBits = 8, f.m_filter.maskBits = 8, f.m_filter.groupIndex = 0, e > 1.84 && m && (f.m_filter.categoryBits = 24, f.m_filter.maskBits = 56)) : 3 == u ? e < 1.82 ? (f.m_filter.categoryBits = 1, f.m_filter.maskBits = 1, f.m_filter.groupIndex = -10) : (f.m_filter.categoryBits = 0, f.m_filter.maskBits = 0, f.m_filter.groupIndex = 0) : 4 == u ? (f.m_filter.categoryBits = 8, f.m_filter.maskBits = 65535, f.m_filter.groupIndex = -321, e > 1.84 && m && (f.m_filter.categoryBits = 24)) : 5 == u ? (f.m_filter.categoryBits = 16, f.m_filter.maskBits = 16, f.m_filter.groupIndex = -322, e > 1.84 && m && (f.m_filter.maskBits = 48, f.m_filter.groupIndex = 0)) : 6 == u ? (f.m_filter.categoryBits = 16, f.m_filter.maskBits = 16, f.m_filter.groupIndex = 0, e > 1.84 && (f.m_filter.categoryBits = m ? 48 : 32, f.m_filter.maskBits = 48)) : 7 == u ? (f.m_filter.categoryBits = 15, f.m_filter.maskBits = 3840, f.m_filter.groupIndex = 0) : (f.m_filter.categoryBits = 8, f.m_filter.maskBits = 65535, m && (f.m_filter.categoryBits = 24, f.m_filter.groupIndex = -10)), f.m_isSensor = !!(3 == u && e < 1.82), r.Z.currentSession.m_world.Refilter(f));
                                i.updateTargetActionGroupsFor(this._refSprite, this._body, this._sprite);
                            }
                    }
                }, h.actions = function () {
                    if ("change opacity" === this._action) {
                        var e = this._properties[0], t = this._properties[1];
                        if (e *= .01, t = Math.round(30 * t), this.counter == t) return r.Z.currentSession.levelVersion > 1.8 && (this.counter = 0), this._sprite.visible = 0 != e, this._sprite.alpha = e, void r.Z.currentSession.level.removeFromActionsVector(this);
                        var i = this._sprite.alpha, s = e - i;
                        this._sprite.alpha = i + s / (t - this.counter), this._sprite.visible = 0 != this._sprite.alpha;
                    }
                    this.counter += 1;
                }, n = o, (a = [{
                    key: "body", get: function () {
                        return this._body;
                    }, set: function (e) {
                        this._body = e;
                    }
                }, {
                    key: "sprite", get: function () {
                        return this._sprite;
                    }, set: function (e) {
                        this._sprite = e;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(o.Z);
            function g(e, t) {
                return (g = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var S = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    var o;
                    return (o = e.call(this) || this).counter = 0, o._refSprite = t, o._joint = i, o._action = s, o._instant = "change motor speed" != s, o._properties = r, o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, g(t, i);
                var o, n, a = s.prototype;
                return a.singleAction = function () {
                    switch (this._action) {
                        case "disable limits":
                            this._joint && (this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp(), this._joint.EnableLimit(false));
                            break;
                        case "change limits":
                            if (this._joint) {
                                this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp();
                                var e = this._properties[0] / this.m_physScale, t = this._properties[1] / this.m_physScale;
                                this._joint.SetLimits(t, e), r.Z.currentSession.levelVersion > 1.84 && this._joint.EnableLimit(true);
                            }
                            break;
                        case "disable motor":
                            this._joint && this._joint.EnableMotor(false);
                            break;
                        case "delete self":
                            this._joint && (r.Z.currentSession.m_world.DestroyJoint(this._joint), this._joint = null);
                    }
                }, a.actions = function () {
                    if ("change motor speed" === this._action && this._joint) {
                        this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp(), this._joint.IsMotorEnabled() || this._joint.EnableMotor(true);
                        var e = this._properties[0], t = this._properties[1];
                        if (t = Math.round(30 * t), this.counter == t) return r.Z.currentSession.levelVersion > 1.8 && (this.counter = 0), this._joint.SetMotorSpeed(e), void r.Z.currentSession.level.removeFromActionsVector(this);
                        var i = this._joint.GetMotorSpeed(), s = e - i;
                        this._joint.SetMotorSpeed(i + s / (t - this.counter));
                    }
                    this.counter += 1;
                }, o = s, (n = [{
                    key: "joint", get: function () {
                        return this._joint;
                    }, set: function (e) {
                        this._joint = e;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), s;
            }(o.Z);
            function _(e, t) {
                return (_ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var w = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    var o;
                    return (o = e.call(this) || this).counter = 0, o._refSprite = t, o._joint = i, o._action = s, o._instant = "change motor speed" != s, o._properties = r, o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, _(t, i);
                var o, n, a = s.prototype;
                return a.singleAction = function () {
                    switch (this._action) {
                        case "disable limits":
                            this._joint && (this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp(), this._joint.EnableLimit(false));
                            break;
                        case "change limits":
                            if (this._joint) {
                                this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp();
                                var e = this._properties[0] * Math.PI / 180, t = this._properties[1] * Math.PI / 180;
                                this._joint.SetLimits(t, e), r.Z.currentSession.levelVersion > 1.84 && this._joint.EnableLimit(true);
                            }
                            break;
                        case "disable motor":
                            this._joint && (this._joint.EnableMotor(false), this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp());
                            break;
                        case "delete self":
                            this._joint && (r.Z.currentSession.m_world.DestroyJoint(this._joint), this._joint = null);
                    }
                }, a.actions = function () {
                    if ("change motor speed" === this._action && this._joint) {
                        this._joint.m_body1.IsSleeping() && this._joint.m_body1.WakeUp(), this._joint.m_body2.IsSleeping() && this._joint.m_body2.WakeUp(), this._joint.IsMotorEnabled() || this._joint.EnableMotor(true);
                        var e = this._properties[0], t = this._properties[1];
                        if (t = Math.round(30 * t), this.counter == t) return r.Z.currentSession.levelVersion > 1.8 && (this.counter = 0), this._joint.SetMotorSpeed(e), void r.Z.currentSession.level.removeFromActionsVector(this);
                        var i = this._joint.GetMotorSpeed(), s = e - i;
                        this._joint.SetMotorSpeed(i + s / (t - this.counter));
                    }
                    this.counter += 1;
                }, o = s, (n = [{
                    key: "joint", get: function () {
                        return this._joint;
                    }, set: function (e) {
                        this._joint = e;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), s;
            }(o.Z);
            function b(e, t) {
                return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var C = function (e) {
                var t, i;
                function s(t, i, s, r, o) {
                    var n;
                    return (n = e.call(this) || this).counter = 0, n._refSprite = t, n._trigger = i, n._levelItem = s, n._targetAction = r, n._instant = !("change opacity" == r || "slide" == r), n._properties = o, n;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, b(t, i);
                var o, n, a = s.prototype;
                return a.singleAction = function () {
                    this._levelItem.triggerSingleActivation(this._trigger, this._targetAction, this._properties);
                }, a.actions = function () {
                    if (this._levelItem.triggerRepeatActivation(this._trigger, this._targetAction, this._properties, this.counter)) return r.Z.currentSession.levelVersion > 1.8 && (this.counter = 0), void r.Z.currentSession.level.removeFromActionsVector(this);
                    this.counter += 1;
                }, o = s, (n = [{
                    key: "targetAction", get: function () {
                        return this._targetAction;
                    }
                }, {
                    key: "levelItem", get: function () {
                        return this._levelItem;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), s;
            }(o.Z);
            function L(e, t) {
                return (L = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var B = function (e) {
                var t, i;
                function s(t, i, s, r, o) {
                    var n;
                    return (n = e.call(this) || this).counter = 0, n._refSprite = t, n._sourceTrigger = i, n._receivingTrigger = s, n._targetAction = r, n._instant = true, n._properties = o, n;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, L(t, i);
                var r, o, n = s.prototype;
                return n.singleAction = function () {
                    switch (this._targetAction) {
                        case "activate trigger":
                            this._receivingTrigger.activateByTrigger();
                            break;
                        case "disable":
                            this._receivingTrigger.disabled = true;
                            break;
                        case "enable":
                            this._receivingTrigger.disabled = false;
                    }
                }, n.actions = function () { }, r = s, (o = [{
                    key: "targetAction", get: function () {
                        return this._targetAction;
                    }
                }, {
                    key: "instant", get: function () {
                        return this._instant;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(o.Z), A = i(507);
            function E(e, t) {
                return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            i(11), i(26), i(42), i(41);
            var M = function (e) {
                var t, i;
                function r(t, i) {
                    var s;
                    return (s = e.call(this) || this)._levelVersion = 0, s.session = i, s.m_physScale = i.m_physScale, s.levelData = t, s._levelVersion = i.levelVersion, t.getChildByName("shapeGuide") && (s.shapeGuide = t.getChildByName("shapeGuide"), s.shapeGuide.x = 0, s.shapeGuide.y = 0), s;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, E(t, i);
                var o, n, a = r.prototype;
                return a.create = function () {
                    this.paintBodyVector = new Array, this.paintItemVector = new Array, this.actionsVector = new Array, this.actionsToRemove = new Array, this.singleActionVector = new Array, this.keepVector = new Array, this._session.containerSprite.addChildAt(this.shapeGuide, 0), this.createBackDrops(), this.createMovieClips(), this.createStaticShapes(), this.createDynamicShapes(), this.createItems();
                }, a.reset = function () {
                    this.paintBodyVector = new Array, this.paintItemVector = new Array, this.actionsVector = new Array, this.actionsToRemove = new Array, this.singleActionVector = new Array, this.keepVector = new Array, this.createStaticShapes(), this.createDynamicShapes(), this.createItems();
                }, a.die = function () {
                    if (this.endBlock && this.endBlock.die(), this.actionsVector) for (var e = 0; e < this.actionsVector.length; e++) this.actionsVector[e].die();
                    this.paintBodyVector = null, this.paintItemVector = null, this.actionsVector = null, this.actionsToRemove = null, this.singleActionVector = null, this.keepVector = null;
                }, a.createStaticShapes = function () {
                    var e = new s.Oi;
                    this.levelBody = this._session.m_world.CreateBody(e);
                    var t = new s.Vb, i = new s.lB, r = new s.Vb;
                    t.friction = 1, t.restitution = .1, t.filter.categoryBits = 8, t.filter.groupIndex = -10, i.friction = 1, i.restitution = .1, i.filter.categoryBits = 8, i.filter.groupIndex = -10, r.friction = 1, r.restitution = .1, r.filter.categoryBits = 8, r.vertexCount = 3, r.filter.groupIndex = -10;
                    for (var o, n = new s._m, a = 0; a < this.shapeGuide.numChildren; a++) {
                        var h = this.shapeGuide.getChildAt(a);
                        switch (h.visible = false, o = h.rotation * Math.PI / 180, n.Set(h.x / this.m_physScale, h.y / this.m_physScale), h.name) {
                            case "rp":
                                t.SetAsOrientedBox(5 * h.scaleX / this.m_physScale, 5 * h.scaleY / this.m_physScale, n, o), this.levelBody.CreateShape(t);
                                break;
                            case "cp":
                                i.localPosition.Set(n.x, n.y), i.radius = 5 * h.scaleX / this.m_physScale, this.levelBody.CreateShape(i);
                                break;
                            case "tp":
                                var l = 5 * h.scaleX / this.m_physScale, c = 10 * h.scaleY / this.m_physScale;
                                r.vertices[0] = new s._m(0, -2 * c), r.vertices[1] = new s._m(l, c), r.vertices[2] = new s._m(-l, c);
                                for (var d = 0; d < 3; d++) {
                                    var p = r.vertices[d], u = Math.cos(o) * p.x - Math.sin(o) * p.y, m = Math.cos(o) * p.y + Math.sin(o) * p.x;
                                    r.vertices[d] = new s._m(n.x + u, n.y + m);
                                }
                                this.levelBody.CreateShape(r);
                                break;
                            case "rpd":
                                var f = new s.Oi;
                                f.isSleeping = true;
                                var y = this._session.m_world.CreateBody(f), v = new s.Vb;
                                v.density = 1, v.friction = 1, v.restitution = .1, v.filter.categoryBits = 8, v.SetAsOrientedBox(5 * h.scaleX / this.m_physScale, 5 * h.scaleY / this.m_physScale, n, o), y.CreateShape(v), y.SetMassFromShapes();
                        }
                    }
                }, a.createDynamicShapes = function () {
                    for (var e, t = new s._m, i = 0; i < this.shapeGuide.numChildren; i++) {
                        var r = this.shapeGuide.getChildAt(i);
                        if (e = r.rotation * Math.PI / 180, t.Set(r.x / this.m_physScale, r.y / this.m_physScale), "LevelRectMC" == (0, l.tL)(r)) {
                            r.visible = false;
                            var o = r.name.split("_"), n = this.background[o[0] + "mc"], a = new s.Oi;
                            "sleep" == o[2] && (a.isSleeping = true);
                            var h = this._session.m_world.CreateBody(a);
                            h.m_userData = n;
                            var c = new s.Vb;
                            c.density = Number(o[1]), c.friction = 1, c.restitution = .1, c.filter.categoryBits = 8, c.SetAsOrientedBox(5 * r.scaleX / this.m_physScale, 5 * r.scaleY / this.m_physScale, t, e), h.CreateShape(c), h.SetMassFromShapes(), this.paintBodyVector.push(h);
                        }
                    }
                }, a.createBackDrops = function () {
                    this.backDrops = [];
                }, a.insertBackDrops = function () {
                    for (var e = this.backDrops.length, t = 0; t < e; t++) {
                        var i = this.backDrops[t];
                        this._session.addChildAt(i, 0);
                    }
                }, a.createMovieClips = function () {
                    this.foreground = this.levelData.getChildByName("foreGround"), this._session.containerSprite.addChild(this.foreground), this._session.particleController.placeBloodBitmap(), this.background = this.levelData.getChildByName("backGround"), this._session.containerSprite.addChildAt(this.background, 1), this.convertBackground();
                }, a.convertBackground = function () {
                    for (var e = 0; e < this.background.numChildren; e++) {
                        var t = this.background.getChildAt(e);
                        if ("bm" == t.name) {
                            var i = this.createBitmap(t);
                            this.background.addChildAt(i, e), i.x = t.x, i.y = t.y, this.background.removeChild(t);
                        }
                    }
                }, a.createBitmap = function (e) {
                    var t = new l.Q$(e.width, e.height, true, 16777215);
                    return t.draw(e), new l.eY(t);
                }, a.createItems = function () {
                    this.endBlock = new p;
                }, a.addListeners = function () { }, a.removeFromPaintBodyVector = function (e) {
                    var t = this.paintBodyVector.indexOf(e);
                    t > -1 && this.paintBodyVector.splice(t, 1);
                }, a.removeFromPaintItemVector = function (e) {
                    var t = this.paintItemVector.indexOf(e);
                    t > -1 && this.paintItemVector.splice(t, 1);
                }, a.removeFromActionsVector = function (e) {
                    this.actionsToRemove.push(e);
                }, a.paint = function () {
                    for (var e = this.paintBodyVector.length, t = 0; t < e; t++) {
                        var i = this.paintBodyVector[t], s = i.GetInterpolatedWorldCenter();
                        i.m_userData.x = s.x * this.m_physScale, i.m_userData.y = s.y * this.m_physScale, i.m_userData.rotation = i.GetInterpolatedAngle() * r.oneEightyOverPI % 360;
                    }
                    e = this.paintItemVector.length;
                    for (var o = 0; o < e; o++) this.paintItemVector[o].paint();
                }, a.actions = function () {
                    for (var e = this.singleActionVector.length; this.singleActionVector.length > 0;) {
                        var t = this.singleActionVector[0];
                        t.singleAction(), this.singleActionVector.indexOf(t) > -1 && this.singleActionVector.splice(this.singleActionVector.indexOf(t), 1);
                    }
                    this.singleActionVector = new Array, e = this.actionsVector.length;
                    for (var i = this.actionsVector.slice(), s = 0; s < e; s++) i[s].actions();
                    e = this.actionsToRemove.length;
                    for (var r = 0; r < e; r++) {
                        var o = this.actionsToRemove[r], n = this.actionsVector.indexOf(o);
                        n > -1 && this.actionsVector.splice(n, 1);
                    }
                    this.actionsToRemove = new Array;
                }, a.registerShapeSound = function (e, t) { }, a.updateTargetActionsFor = function (e, t, i, s, r) {
                    void 0 === r && (r = false);
                }, a.updateTargetActionGroupsFor = function (e, t, i) { }, a.mouseClickTrigger = function (e) { }, o = r, (n = [{
                    key: "session", get: function () {
                        return this._session;
                    }, set: function (e) {
                        this._session = e;
                    }
                }, {
                    key: "startPoint", get: function () {
                        return new s._m(400, 100);
                    }
                }, {
                    key: "cameraBounds", get: function () {
                        var e = this.shapeGuide.getChildByName("camUpper"), t = this.shapeGuide.getChildByName("camLower");
                        return new l.Ae(t.x, t.y, e.x - t.x, e.y - t.y);
                    }
                }, {
                    key: "worldBounds", get: function () {
                        var e = this.shapeGuide.getChildByName("upper"), t = this.shapeGuide.getChildByName("lower");
                        return new l.Ae(t.x, t.y, e.x - t.x, e.y - t.y);
                    }
                }, {
                    key: "levelVersion", get: function () {
                        return this._levelVersion;
                    }, set: function (e) {
                        this._levelVersion = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), r;
            }(l.pB);
            M.oneEightyOverPI = 180 / Math.PI, M.PIOverOneEighty = Math.PI / 180, i(13), i(29), i(20), i(18);
            var k = i(74), x = i(101), O = i(25);
            function T(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function P(e, t) {
                return (P = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var R = function (e) {
                var t, i;
                function o(t, i) {
                    var s;
                    return (s = e.call(this) || this).counter = 0, s.triggeringCount = 0, s.soundLocation = 1, s.mouseOutHandlerBind = s.mouseOutHandler.bind(T(s)), s.mouseUpHandlerBind = s.mouseUpHandler.bind(T(s)), s.checkAdd1Bind = s.checkAdd1.bind(T(s)), s.checkAdd2Bind = s.checkAdd2.bind(T(s)), s.checkAdd3Bind = s.checkAdd3.bind(T(s)), s.checkAdd4Bind = s.checkAdd4.bind(T(s)), s.checkRemove1Bind = s.checkRemove1.bind(T(s)), s.createShape(t), s.triggerIndex = i, s._x = t.x, s._y = t.y, s.session = r.Z.currentSession, s.delayFrames = Math.floor(30 * t.triggerDelay), s.delayVector = new Array, s.repeatFrames = s.repeatCount = Math.floor(30 * t.repeatInterval), s.type = t.typeIndex, 2 == t.typeIndex && (s.soundEffect = c.DF.instance.sfxDictionary.get(t.soundEffect), s.soundLocation = t.soundLocation, s.soundTransform = new c.eN(t.volume, t.panning)), s.triggeredBy = t.triggeredBy, s.repeatType = t.repeatType, s.activationDictionary = new Map, s.targets = new Array, s;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, P(t, i);
                var n, a, h = o.prototype;
                return h.createShape = function (e) {
                    if (5 != e.triggeredBy) {
                        if (6 == e.triggeredBy) {
                            this.buttonSprite = new l.jy, this.buttonSprite.graphics.beginFill(0, 1), this.buttonSprite.graphics.drawRect(-50, -50, 100, 100), this.buttonSprite.x = e.x, this.buttonSprite.y = e.y, this.buttonSprite.scaleX = e.scaleX, this.buttonSprite.scaleY = e.scaleY, this.buttonSprite.alpha = 0;
                            var t = new l.jy;
                            t.graphics.beginFill(0, 1), t.graphics.drawRect(-50, -50, 100, 100), t.x = e.x, t.y = e.y, t.scaleX = e.scaleX, t.scaleY = e.scaleY, t.mouseEnabled = false, t.visible = false, this.buttonSprite.hitArea = t, this.buttonSprite.buttonMode = true, !e.startDisabled && this.buttonSprite.addEventListener(l.TF.MOUSE_UP, this.mouseUpHandlerBind, false, 0, true);
                            var i = r.Z.currentSession.buttonContainer;
                            i.addChild(this.buttonSprite), i.addChild(t);
                        }
                        var o = new s.Vb;
                        o.filter.categoryBits = 24, o.filter.groupIndex = -20, o.isSensor = true;
                        var n = r.Z.currentSession.level.m_physScale, a = new s._m(e.x / n, e.y / n), h = e.angle * Math.PI / 180;
                        o.SetAsOrientedBox(50 * e.scaleX / n, 50 * e.scaleY / n, new s._m(a.x, a.y), h), this.sensor = r.Z.currentSession.level.levelBody.CreateShape(o), 1 == e.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd1Bind) : 2 == e.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd2Bind) : 3 == e.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd3Bind) : 4 == e.triggeredBy && r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd4Bind);
                    }
                }, h.addActivationBody = function (e) {
                    if (4 == this.triggeredBy && this.activationDictionary) for (var t = 0; t < e.length; t++) {
                        var i = e[t];
                        this.activationDictionary.set(i, 1);
                    }
                }, h.mouseUpHandler = function (e) {
                    if (void 0 === e && (e = null), null == e) {
                        var t = new l.KG;
                        t.setPixiMovieClip((0, O.qX)("Game", "mouseClickMC")), t.mouseEnabled = false, t.x = this._x, t.y = this._y, t.loop = false, t.play(), this.session.containerSprite.addChild(t);
                    }
                    if (this.repeatType > 2) {
                        var i = this.session.level.actionsVector, s = i.indexOf(this);
                        s < 0 && (this.session.isReplay || this.session.replayData.addMouseEntry(this.session.iteration, this.triggerIndex), i.push(this), this.triggeringBody = this.session.level.levelBody, 3 == this.repeatType && this.buttonSprite.addEventListener(l.TF.ROLL_OUT, this.mouseOutHandlerBind, false, 0, true));
                    } else 1 == this.repeatType && (this.buttonSprite.removeEventListener(l.TF.MOUSE_UP, this.mouseUpHandlerBind), this.buttonSprite.parent && this.buttonSprite.parent.removeChild(this.buttonSprite)), 0 == this.delayFrames ? (s = (i = this.session.level.singleActionVector).indexOf(this)) < 0 && (this.session.isReplay || this.session.replayData.addMouseEntry(this.session.iteration, this.triggerIndex), i.push(this)) : (s = (i = this.session.level.actionsVector).indexOf(this), this.delayVector.push(0), s < 0 && (this.session.isReplay || this.session.replayData.addMouseEntry(this.session.iteration, this.triggerIndex), i.push(this)));
                }, h.mouseOutHandler = function (e) {
                    void 0 === e && (e = null), this.buttonSprite.removeEventListener(l.TF.ROLL_OUT, this.mouseOutHandlerBind), this.triggeringBody = null, this.session.isReplay || this.session.replayData.addMouseEntry(this.session.iteration, this.triggerIndex, 1);
                }, h.addTargetActionShape = function (e, t, i, s, r) {
                    var o = new f(e, t, i, s, r);
                    return this.targets.push(o), o;
                }, h.addTargetActionGroup = function (e, t, i, s, r) {
                    var o = new v(e, t, i, s, r);
                    return this.targets.push(o), o;
                }, h.addTargetItemSpecial = function (e, t, i, s) {
                    var r = new C(t, this, e, i, s);
                    return this.targets.push(r), r;
                }, h.addTargetActionRevJoint = function (e, t, i, s) {
                    var r = new w(e, t, i, s);
                    return this.targets.push(r), r;
                }, h.addTargetActionPrisJoint = function (e, t, i, s) {
                    var r = new S(e, t, i, s);
                    return this.targets.push(r), r;
                }, h.addTargetActionTrigger = function (e, t, i, s, r) {
                    var o = new B(e, t, i, s, r);
                    return this.targets.push(o), o;
                }, h.singleAction = function () {
                    if (1 == this.type) for (var e = this.targets.length, t = 0; t < e; t++) if (this.targets[t] instanceof f) {
                        var i = this.targets[t];
                        i.instant ? i.singleAction() : r.Z.currentSession.level.actionsVector.push(i);
                    } else if (this.targets[t] instanceof C) {
                        var o = this.targets[t];
                        o.instant ? o.singleAction() : r.Z.currentSession.level.actionsVector.push(o);
                    } else if (this.targets[t] instanceof v) {
                        var n = this.targets[t];
                        n.instant ? n.singleAction() : r.Z.currentSession.level.actionsVector.push(n);
                    } else if (this.targets[t] instanceof w) {
                        var a = this.targets[t];
                        a.instant ? a.singleAction() : r.Z.currentSession.level.actionsVector.push(a);
                    } else if (this.targets[t] instanceof S) {
                        var h = this.targets[t];
                        h.instant ? h.singleAction() : r.Z.currentSession.level.actionsVector.push(h);
                    } else this.targets[t] instanceof B && this.targets[t].singleAction(); else if (2 == this.type) if (1 == this.soundLocation) c.ij.instance.playSoundInstance(this.soundEffect, 0, 0, this.soundTransform); else {
                        var l = r.Z.currentSession.level.m_physScale, d = new s._m(this._x / l, this._y / l);
                        c.ij.instance.playPointSoundInstance(this.soundEffect, d, this.soundTransform.volume);
                    } else if (3 == this.type) {
                        var p = r.Z.currentSession;
                        p.isReplay || p.levelComplete(), c.ij.instance.playSoundItem("Victory");
                    }
                    1 == this.repeatType && this.sensor && (r.Z.currentSession.level.levelBody.DestroyShape(this.sensor), this.sensor = null);
                }, h.actions = function () {
                    var e, t;
                    if (this.delayVector.length > 0) {
                        for (var i = this.delayVector.length - 1; i > -1; i--) {
                            var s = this.delayVector[i];
                            s == this.delayFrames ? (this.singleAction(), this.delayVector.splice(i, 1)) : this.delayVector[i] = s + 1;
                        }
                        0 == this.delayVector.length && (e = true);
                    } else e = true;
                    this.repeatType > 2 && this.triggeringBody ? this.repeatCount == this.repeatFrames || isNaN(this.repeatFrames) ? (0 == this.delayFrames ? this.singleAction() : this.delayVector.push(0), this.repeatCount = 0) : this.repeatCount++ : t = true, e && t && this.session.level.removeFromActionsVector(this);
                }, h.addTriggeringBody = function (e) {
                    if (this.triggeringBody) e == this.triggeringBody && (this.triggeringCount += 1); else {
                        for (var t = 0, i = e.m_contactList; i; i = i.next) {
                            var s = i.contact;
                            s.m_shape1 == this.sensor ? s.m_shape2.m_isSensor || (t += s.m_manifoldCount) : s.m_shape2 == this.sensor && (s.m_shape1.m_isSensor || (t += s.m_manifoldCount));
                        }
                        if (t > 0) return;
                        if (this.triggeringBody = e, this.triggeringCount += 1, this.repeatType > 2) {
                            var o = this.session.level.actionsVector, n = o.indexOf(this);
                            n < 0 && (o.push(this), 3 == this.repeatType && r.Z.currentSession.contactListener.registerListener(k.$S.REMOVE, this.sensor, this.checkRemove1Bind));
                        } else 1 == this.repeatType ? (r.Z.currentSession.contactListener.deleteListener(k.$S.ADD, this.sensor), this.activationDictionary = null) : r.Z.currentSession.contactListener.registerListener(k.$S.REMOVE, this.sensor, this.checkRemove1Bind), 0 == this.delayFrames ? (n = (o = this.session.level.singleActionVector).indexOf(this)) < 0 && o.push(this) : (n = (o = this.session.level.actionsVector).indexOf(this), this.delayVector.push(0), n < 0 && o.push(this));
                    }
                }, h.activateByTrigger = function () {
                    if (!this._disabled) if (1 == this.repeatType) {
                        if (!this.activationDictionary) return;
                        if (0 == this.delayFrames) {
                            var e = this.session.level.singleActionVector, t = e.indexOf(this);
                            t < 0 && (r.Z.currentSession.contactListener.deleteListener(k.$S.ADD, this.sensor), this.activationDictionary = null, this.singleAction());
                        } else (t = (e = this.session.level.actionsVector).indexOf(this)) < 0 && (r.Z.currentSession.contactListener.deleteListener(k.$S.ADD, this.sensor), this.activationDictionary = null, e.push(this), this.delayVector.push(0));
                    } else if (2 == this.repeatType) 0 == this.delayFrames ? (t = (e = this.session.level.singleActionVector).indexOf(this)) < 0 && this.singleAction() : (t = (e = this.session.level.actionsVector).indexOf(this)) < 0 ? (e.push(this), this.delayVector.push(0)) : this.delayVector.push(0); else if (3 == this.repeatType) {
                        if (this.triggeringBody) return;
                        0 == this.delayFrames ? (t = (e = this.session.level.singleActionVector).indexOf(this)) < 0 && this.singleAction() : (t = (e = this.session.level.actionsVector).indexOf(this)) < 0 && (e.push(this), this.delayVector.push(0));
                    } else if (4 == this.repeatType) {
                        if (this.triggeringBody) return;
                        this.triggeringBody = this.session.level.levelBody, (t = (e = this.session.level.actionsVector).indexOf(this)) < 0 && e.push(this);
                    }
                }, h.checkRemove1 = function (e) {
                    var t = e.shape2.GetBody();
                    t == this.triggeringBody && 0 == e.shape2.m_isSensor && (this.triggeringCount -= 1, this.triggeringCount < 1 && t.m_mass > 0 && (this.triggeringCount = 0, this.triggeringBody = null));
                }, h.checkAdd1 = function (e) {
                    var t = e.shape2.GetBody();
                    t == this.session.character.centralBody && this.addTriggeringBody(t);
                }, h.checkAdd2 = function (e) {
                    var t = e.shape2.GetBody(), i = e.shape2;
                    i.m_userData instanceof A.bx ? t == i.m_userData.centralBody && this.addTriggeringBody(t) : i.m_userData instanceof x.PW && t == i.m_userData.centralBody && this.addTriggeringBody(t);
                }, h.checkAdd3 = function (e) {
                    var t = e.shape2.GetBody();
                    t.m_mass > 0 && 0 == e.shape2.m_isSensor && this.addTriggeringBody(t);
                }, h.checkAdd4 = function (e) {
                    var t = e.shape2.GetBody();
                    t.m_mass > 0 && 0 == e.shape2.m_isSensor && this.activationDictionary.get(t) && this.addTriggeringBody(t);
                }, n = o, (a = [{
                    key: "disabled", get: function () {
                        return this._disabled;
                    }, set: function (e) {
                        if (this._disabled) e || this.activationDictionary && (t = r.Z.currentSession, 1 == this.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd1Bind) : 2 == this.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd2Bind) : 3 == this.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd3Bind) : 4 == this.triggeredBy ? r.Z.currentSession.contactListener.registerListener(k.$S.ADD, this.sensor, this.checkAdd4Bind) : 6 == this.triggeredBy && (this.buttonSprite.mouseEnabled = true, this.buttonSprite.addEventListener(l.TF.MOUSE_UP, this.mouseUpHandlerBind, false, 0, true)), this.sensor && t.m_world.Refilter(this.sensor)); else if (e) {
                            var t = r.Z.currentSession;
                            this.sensor && (t.contactListener.deleteListener(k.$S.ADD, this.sensor), t.contactListener.deleteListener(k.$S.REMOVE, this.sensor)), this.triggeringBody = null, this.triggeringCount = 0, this.repeatCount = this.repeatFrames, this.delayVector = new Array;
                            var i = t.level.singleActionVector, s = i.indexOf(this);
                            s > -1 && i.splice(s, 1), (s = (i = t.level.actionsVector).indexOf(this)) > -1 && i.splice(s, 1), 6 == this.triggeredBy && (this.buttonSprite.mouseEnabled = false, this.buttonSprite.removeEventListener(l.TF.MOUSE_UP, this.mouseUpHandlerBind), this.buttonSprite.interactive = false);
                        }
                        this._disabled = e;
                    }
                }, {
                    key: "x", get: function () {
                        return this._x;
                    }
                }, {
                    key: "y", get: function () {
                        return this._y;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, a), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(o.Z), D = (i(31), i(129)), I = i(216), j = i(224), F = i(225), J = i(133), G = i(169), H = i(386), V = i(167), N = i(159), U = i(222), W = i(103), X = i(104), Y = i(391), z = i(392), Z = (i(63), i(33));
            function $(e, t) {
                return ($ = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var K = function (e) {
                var t, i;
                function s(t, i, s, r, o, n) {
                    var a;
                    return void 0 === r && (r = 0), void 0 === o && (o = 3), void 0 === n && (n = false), (a = e.call(this) || this)._multiplier = i, a.blur = r, a.quality = o, a.transparent = s, t instanceof Z.DisplayObject && !n ? a.pixiSprite.addChild(t) : (a._visual = t, a.createBitmaps()), a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, $(t, i);
                var r, o, n = s.prototype;
                return n.createBitmaps = function () {
                    for (var e = 0; e < this.visual.numChildren; e++) {
                        var t = this.visual.getChildAt(e);
                        this.drawBitmap(t);
                    }
                    this._visual = null;
                }, n.drawBitmap = function (e, t, i) {
                    if (void 0 === t && (t = false), void 0 === i && (i = 5e3), e instanceof l.jy || (e = new l.jy(e)), this.blur > 0) {
                        var s = new l.T0(this.blur, 0, this.quality);
                        e.filters = [s];
                    }
                    var r = new l.Q$(e.width + 2 * this.blur, e.height + 2 * this.blur, this.transparent, 16777215);
                    (new l.y3).translate(this.blur, this.blur), r.draw(e);
                    var o = new l.eY(r);
                    this.addChild(o), o.x = e.x - this.blur, o.y = e.y - this.blur, o.pixiSprite.anchor.set(0), t && (o = new l.eY(r), this.addChild(o), o.x = e.x + i - this.blur, o.y = e.y - this.blur);
                }, n.drawBuilding = function (e, t, i, s, r) {
                    var o, n, a;
                    void 0 === s && (s = false), void 0 === r && (r = 5e3), e instanceof l.jy || (e = new l.jy(e));
                    var h = 1e4 * this._multiplier + 500 * (1 - this._multiplier), c = new l.T0(this.blur, 0, this.quality);
                    e.filters = [c];
                    var d = e.x - this.blur, p = e.y - this.blur, u = e.width + 2 * this.blur;
                    a = t + this.blur, o = new l.Q$(u, a, this.transparent, 0), n = new l.y3(1, 0, 0, 1, this.blur, this.blur), o.draw(e, n), n = new l.y3(1, 0, 0, 1, d, p), this.graphics.beginBitmapFill(o, n, false, false), this.graphics.drawRect(d, p, u, a), this.graphics.endFill(), s && (n = new l.y3(1, 0, 0, 1, d + r, p), this.graphics.beginBitmapFill(o, n, false, false), this.graphics.drawRect(d + r, p, u, a), this.graphics.endFill()), a = i, p = p + t + this.blur, o = new l.Q$(u, a, this.transparent, 0), n = new l.y3(1, 0, 0, 1, this.blur, -t), o.draw(e, n), n = new l.y3(1, 0, 0, 1, d, p);
                    var m = h - p;
                    this.graphics.beginBitmapFill(o, n, true, false), this.graphics.drawRect(d, p, u, m), this.graphics.endFill(), s && (n = new l.y3(1, 0, 0, 1, d + r, p), this.graphics.beginBitmapFill(o, n, true, false), this.graphics.drawRect(d + r, p, u, m), this.graphics.endFill());
                }, r = s, (o = [{
                    key: "visual", get: function () {
                        return this._visual;
                    }
                }, {
                    key: "multiplier", get: function () {
                        return this._multiplier;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(l.jy);
            function q(e, t) {
                return (q = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Q = function (e) {
                var t, i;
                function s() {
                    return e.call(this, (0, O.qX)("BackDrops", "backdrop1"), .5, true, 2, 3, true) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, q(t, i), s.prototype.createBitmaps = function () {
                    var e = this._visual.b1;
                    this.drawBuilding(e, 90, 88, true, 5e3), e = this._visual.b2, this.drawBuilding(e, 140, 90, true, 5e3), e = this._visual.b3, this.drawBuilding(e, 60, 102, true, 5e3), e = this._visual.b4, this.drawBuilding(e, 160, 101, true, 5e3), this._visual = null;
                }, s;
            }(K);
            function ee(e, t) {
                return (ee = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var te = function (e) {
                var t, i;
                function s() {
                    return e.call(this, (0, O.qX)("BackDrops", "backdrop2"), .25, true, 5, 3, true) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ee(t, i), s.prototype.createBitmaps = function () {
                    var e = this._visual.b1;
                    this.drawBuilding(e, 90, 88), e = this._visual.b2, this.drawBuilding(e, 40, 50, true, 2500), e = this._visual.b3, this.drawBuilding(e, 46, 50, true, 2500), e = this._visual.b4, this.drawBuilding(e, 15, 50, true, 2500), this._visual = null;
                }, s;
            }(K);
            function ie(e, t) {
                return (ie = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var se = function (e) {
                var t, i;
                function o(t, i) {
                    var r;
                    return (r = e.call(this, t, i) || this).tokens = 0, r.borderThickness = 250, r.skyHeight = 5e3, r.shapeContactAdd = function (e) {
                        var t = e.shape1, i = t.m_body, o = e.shape2, n = o.m_body.m_mass;
                        if (!(r.contactAddBuffer.get(t) || o.m_isSensor || 0 != n && n < i.m_mass)) {
                            var a = s.Yt.b2Dot(e.velocity, e.normal);
                            (a = Math.abs(a)) > 4 && r.contactAddBuffer.set(t, a);
                        }
                    }, r.levelData = null, r.shapeGuide = t, r;
                }
                i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, ie(t, i);
                var n, h, c = o.prototype;
                return c.create = function () {
                    this.paintBodyVector = new Array, this.paintItemVector = new Array, this.actionsVector = new Array, this.actionsToRemove = new Array, this.singleActionVector = new Array, this.keepVector = new Array, this.triggers = new Array, this.impactDictionary = new Map, this.contactAddBuffer = new Map, this.contactAddSounds = new Map, this.createBackDrops(), this.createMovieClips(), this.createStaticShapes(), this.createDynamicShapes(), this.createSpecials(), this.createGroups(), this.createJoints(), this.createTriggers(), this.createItems(), this.createTokenHUD();
                }, c.reset = function () {
                    this.die(), this._session.containerSprite.removeChild(this.background), this._session.containerSprite.removeChild(this.characterLayer), this._session.containerSprite.removeChild(this.foreground), this.tokens = 0, this.paintBodyVector = new Array, this.paintItemVector = new Array, this.actionsVector = new Array, this.actionsToRemove = new Array, this.singleActionVector = new Array, this.keepVector = new Array, this.triggers = new Array, this.createMovieClips(), this.createStaticShapes(), this.createDynamicShapes(), this.createSpecials(), this.createGroups(), this.createJoints(), this.createTriggers(), this.createItems(), this.createTokenHUD();
                }, c.die = function () {
                    e.prototype.die.call(this), this.targetActionDictionary = null, this.refTriggerDictionary = null, this.triggerDictionary = null;
                }, c.createStaticShapes = function () {
                    this.shapeDictionary = new Map, this.spriteDictionary = new Map;
                    var e = new s.Oi;
                    this.levelBody = this._session.m_world.CreateBody(e);
                    var t = new s.Vb, i = new s.lB, r = new s.Vb, o = new s.Vb;
                    t.friction = 1, t.restitution = .1, t.filter.categoryBits = 8, t.filter.groupIndex = -10;
                    var n, a = new s._m, h = .5 * this.borderThickness / this.m_physScale, l = (this.borderThickness + .5 * (D.X.canvasHeight + this.skyHeight)) / this.m_physScale;
                    a.Set(-h, .5 * (D.X.canvasHeight - this.skyHeight) / this.m_physScale), t.SetAsOrientedBox(h, l, a, 0), this.levelBody.CreateShape(t), a.Set((D.X.canvasWidth + .5 * this.borderThickness) / this.m_physScale, .5 * (D.X.canvasHeight - this.skyHeight) / this.m_physScale), t.SetAsOrientedBox(h, l, a, 0), this.levelBody.CreateShape(t), h = (this.borderThickness + .5 * D.X.canvasWidth) / this.m_physScale, l = .5 * this.borderThickness / this.m_physScale, a.Set(.5 * D.X.canvasWidth / this.m_physScale, -(.5 * this.borderThickness + this.skyHeight) / this.m_physScale), t.SetAsOrientedBox(h, l, a, 0), this.levelBody.CreateShape(t);
                    for (var c, d = this.shapeGuide.getChildByName("shapes"), p = 0; p < d.numChildren; p++) {
                        var u = d.getChildAt(p);
                        if (u instanceof V.D_) {
                            var m = u;
                            if (m.immovable && (c = m.getFlatSprite(), this.background.addChild(c), this.spriteDictionary.set(u, c), m.interactive)) {
                                if (n = u.rotation * Math.PI / 180, a.Set(u.x / this.m_physScale, u.y / this.m_physScale), m instanceof V.$1) {
                                    t = new s.Vb, this.setShapeFilter(m.collision, m.immovable, t), t.SetAsOrientedBox(50 * u.scaleX / this.m_physScale, 50 * u.scaleY / this.m_physScale, a, n);
                                    var f = this.levelBody.CreateShape(t);
                                } else if (m instanceof V.n) i = new s.lB, this.setShapeFilter(m.collision, m.immovable, i), i.localPosition.Set(a.x, a.y), i.radius = 50 * u.scaleX / this.m_physScale, f = this.levelBody.CreateShape(i); else if (m instanceof V.E2) {
                                    r = new s.Vb, this.setShapeFilter(m.collision, m.immovable, r), r.vertexCount = 3, h = 50 * u.scaleX / this.m_physScale, l = 100 * u.scaleY / this.m_physScale, r.vertices[0] = new s._m(0, -2 * l), r.vertices[1] = new s._m(h, l), r.vertices[2] = new s._m(-h, l);
                                    for (var y = 0; y < 3; y++) {
                                        var v = r.vertices[y], g = Math.cos(n) * v.x - Math.sin(n) * v.y, S = Math.cos(n) * v.y + Math.sin(n) * v.x;
                                        r.vertices[y] = new s._m(a.x + g, a.y + S);
                                    }
                                    f = this.levelBody.CreateShape(r);
                                } else if (m instanceof H.k) {
                                    o = new s.Vb, this.setShapeFilter(m.collision, m.immovable, o);
                                    var _ = u, w = o.vertexCount = _.numVerts;
                                    for (y = 0; y < w; y++) {
                                        var b = _.vertVector[y], C = new s._m(_.scaleX * b.x / this.m_physScale, _.scaleY * b.y / this.m_physScale);
                                        g = Math.cos(n) * C.x - Math.sin(n) * C.y, S = Math.cos(n) * C.y + Math.sin(n) * C.x, o.vertices[y] = new s._m(a.x + g, a.y + S);
                                    }
                                    f = this.levelBody.CreateShape(o);
                                }
                                this.shapeDictionary.set(u, f);
                            }
                        }
                    }
                }, c.createDynamicShapes = function () {
                    for (var e, t = new s._m, i = this.shapeGuide.getChildByName("shapes"), r = 0; r < i.numChildren; r++) {
                        var o = i.getChildAt(r);
                        if (o instanceof V.D_) {
                            var n = o;
                            if (!n.immovable) {
                                var a = n.getFlatSprite();
                                if (this.session.levelVersion >= 1.8 ? this.background.addChildAt(a, r + 1) : this.background.addChild(a), this.spriteDictionary.set(o, a), n.interactive) {
                                    if (e = o.rotation * Math.PI / 180, t.Set(o.x / this.m_physScale, o.y / this.m_physScale), o instanceof V.$1) {
                                        var h = o, l = new s.Oi;
                                        l.position.Set(t.x, t.y), l.angle = e, l.isSleeping = h.sleeping;
                                        var c = this._session.m_world.CreateBody(l);
                                        c.m_userData = a;
                                        var d = new s.Vb;
                                        d.density = h.density, this.setShapeFilter(n.collision, n.immovable, d), d.SetAsBox(50 * o.scaleX / this.m_physScale, 50 * o.scaleY / this.m_physScale);
                                        var p = c.CreateShape(d);
                                        c.SetMassFromShapes(), this.paintBodyVector.push(c), this.shapeDictionary.set(o, p);
                                    } else if (o instanceof V.n) {
                                        var u = o, m = new s.Oi;
                                        m.position.Set(t.x, t.y), m.angle = e, m.isSleeping = u.sleeping, (c = this._session.m_world.CreateBody(m)).m_userData = a;
                                        var f = new s.lB;
                                        f.density = u.density, this.setShapeFilter(n.collision, n.immovable, f), f.localPosition.Set(0, 0), f.radius = 50 * o.scaleX / this.m_physScale, p = c.CreateShape(f), c.SetMassFromShapes(), this.paintBodyVector.push(c), this.shapeDictionary.set(o, p);
                                    } else if (o instanceof V.E2) {
                                        var y = o, v = new s.Oi;
                                        v.isSleeping = y.sleeping, v.position.Set(t.x, t.y), v.angle = e, (c = this._session.m_world.CreateBody(v)).m_userData = a;
                                        var g = new s.Vb;
                                        g.density = y.density, this.setShapeFilter(n.collision, n.immovable, g), g.vertexCount = 3;
                                        var S = 50 * y.scaleX / this.m_physScale, _ = 100 * y.scaleY / this.m_physScale;
                                        g.vertices[0] = new s._m(0, -2 * _), g.vertices[1] = new s._m(S, _), g.vertices[2] = new s._m(-S, _), p = c.CreateShape(g), c.SetMassFromShapes(), this.paintBodyVector.push(c), this.shapeDictionary.set(o, p);
                                    } else if (o instanceof H.k) {
                                        var w = o, b = new s.Oi;
                                        b.isSleeping = w.sleeping, b.position.Set(t.x, t.y), b.angle = e, c = this._session.m_world.CreateBody(b);
                                        var C = new s.Vb;
                                        C.density = w.density, this.setShapeFilter(n.collision, n.immovable, C);
                                        for (var L = C.vertexCount = w.numVerts, B = 0; B < L; B++) {
                                            var A = w.vertVector[B];
                                            C.vertices[B] = new s._m(w.scaleX * A.x / this.m_physScale, w.scaleY * A.y / this.m_physScale);
                                        }
                                        p = c.CreateShape(C), c.SetMassFromShapes();
                                        var E = c.GetLocalCenter().Copy();
                                        E.x = E.x * this.m_physScale, E.y = E.y * this.m_physScale, this.background.removeChild(a), a = w.getCenteredSprite(E), this.background.addChild(a), c.m_userData = a, this.paintBodyVector.push(c), this.shapeDictionary.set(o, p), this.spriteDictionary.set(o, a);
                                    }
                                    this.registerShapeSound(p, c);
                                }
                            }
                        }
                    }
                }, c.setShapeFilter = function (e, t, i) {
                    i.friction = 1, i.restitution = .1, 2 == e ? (i.filter.categoryBits = 8, i.filter.maskBits = 8, this._levelVersion > 1.84 && t && (i.filter.categoryBits = 24, i.filter.maskBits = 56)) : 3 == e ? this._levelVersion < 1.85 ? (i.filter.categoryBits = 1, i.filter.maskBits = 1, i.filter.groupIndex = -10, i.isSensor = true) : (i.filter.categoryBits = 0, i.filter.maskBits = 0) : 4 == e ? (i.filter.categoryBits = 8, i.filter.groupIndex = -321, this._levelVersion > 1.84 && t && (i.filter.categoryBits = 24)) : 5 == e ? (i.filter.categoryBits = 16, i.filter.maskBits = 16, i.filter.groupIndex = -322, this._levelVersion > 1.84 && t && (i.filter.maskBits = 48, i.filter.groupIndex = 0)) : 6 == e ? this._levelVersion > 1.84 ? (i.filter.categoryBits = t ? 48 : 32, i.filter.maskBits = 48) : (i.filter.categoryBits = 16, i.filter.maskBits = 16) : 7 == e ? (i.filter.categoryBits = 15, i.filter.maskBits = 3840) : t ? (i.filter.categoryBits = 24, i.filter.groupIndex = -10) : i.filter.categoryBits = 8;
                }, c.createSpecials = function () {
                    var e = this.shapeGuide.getChildByName("special");
                    this.specialDictionary = new Map;
                    for (var t = 0; t < e.numChildren; t++) {
                        var i = e.getChildAt(t), s = i._type.substring(0, i._type.length - 3), r = new ((0, X.O)(s))(i);
                        r instanceof z.W && this.tokens++, this.specialDictionary.set(i, r);
                    }
                    this.totalTokens = this.tokens;
                }, c.createGroups = function () {
                    var e = this.shapeGuide.getChildByName("groups");
                    this.groupDictionary = new Map, this.vehicleDictionary = new Map;
                    for (var t = Math.PI / 180, i = 0; i < e.numChildren; i++) {
                        var r = e.getChildAt(i), n = r.rotation * t, h = new s._m(r.x / this.m_physScale, r.y / this.m_physScale);
                        if (r.shapesUsed > 0) {
                            var c = new s.Oi;
                            c.position.Set(h.x, h.y), c.angle = n, c.isSleeping = r.sleeping, c.fixedRotation = r.fixedRotation;
                            var d = this._session.m_world.CreateBody(c), p = new l.jy, m = new l.jy;
                            if (p.addChild(m), d.m_userData = p, p.alpha = .01 * r.opacity, r.foreground ? this.foreground.addChild(p) : this.background.addChild(p), r instanceof u.sn) {
                                var f = new a(r, d);
                                this.vehicleDictionary.set(r, f);
                            }
                            for (var y = 0; y < r.shapeContainer.numChildren; y++) {
                                var v = r.shapeContainer.getChildAt(y);
                                if (v.interactive) {
                                    h.Set((v.x + r.offset.x) / this.m_physScale, (v.y + r.offset.y) / this.m_physScale), n = v.rotation * t;
                                    var g = this._levelVersion > 1.84 ? r.immovable : v.immovable;
                                    if (v instanceof V.$1) {
                                        var S = new s.Vb;
                                        S.density = v.density, this.setShapeFilter(v.collision, g, S), S.SetAsOrientedBox(50 * v.scaleX / this.m_physScale, 50 * v.scaleY / this.m_physScale, h, n);
                                        var _ = d.CreateShape(S);
                                    } else if (v instanceof V.n) {
                                        var w = new s.lB;
                                        w.density = v.density, this.setShapeFilter(v.collision, g, w), w.localPosition.Set(h.x, h.y), w.radius = 50 * v.scaleX / this.m_physScale, _ = d.CreateShape(w);
                                    } else if (v instanceof V.E2) {
                                        var b = new s.Vb;
                                        b.density = v.density, this.setShapeFilter(v.collision, g, b), b.vertexCount = 3;
                                        var C = 50 * v.scaleX / this.m_physScale, L = 100 * v.scaleY / this.m_physScale;
                                        b.vertices[0] = new s._m(0, -2 * L), b.vertices[1] = new s._m(C, L), b.vertices[2] = new s._m(-C, L);
                                        for (var B = 0; B < 3; B++) {
                                            var A = b.vertices[B], E = Math.cos(n) * A.x - Math.sin(n) * A.y, M = Math.cos(n) * A.y + Math.sin(n) * A.x;
                                            b.vertices[B] = new s._m(h.x + E, h.y + M);
                                        }
                                        _ = d.CreateShape(b);
                                    } else {
                                        if (!(v instanceof H.k)) throw new Error("shape isn't a defined type ");
                                        var k = new s.Vb;
                                        k.density = v.density, this.setShapeFilter(v.collision, g, k);
                                        var x = v, O = k.vertexCount = x.numVerts;
                                        for (B = 0; B < O; B++) {
                                            var T = x.vertVector[B], P = new s._m(x.scaleX * T.x / this.m_physScale, x.scaleY * T.y / this.m_physScale);
                                            E = Math.cos(n) * P.x - Math.sin(n) * P.y, M = Math.cos(n) * P.y + Math.sin(n) * P.x, k.vertices[B] = new s._m(h.x + E, h.y + M);
                                        }
                                        _ = d.CreateShape(k);
                                    }
                                    _.SetMaterial(8), v.vehicleHandle && f && f.addHandle(_);
                                }
                                var R = v.getFlatSprite();
                                R.x += r.offset.x, R.y += r.offset.y, m.addChild(R);
                            }
                            for (y = 0; y < r.specialContainer.numChildren; y++) {
                                var D = r.specialContainer.getChildAt(y), I = D._type.substring(0, D._type.length - 3), j = new ((0, X.O)(I))(D, d, r.offset), F = j.groupDisplayObject;
                                F.x += r.offset.x, F.y += r.offset.y, m.addChild(F), j instanceof Y.R && f && f.checkAddSpecial(j);
                            }
                            d.SetMassFromShapes();
                            var J = d.GetLocalCenter();
                            if (m.x = -J.x * this.m_physScale, m.y = -J.y * this.m_physScale, this.paintBodyVector.push(d), this.groupDictionary.set(r, d), f && (f.setShitUp(), f = null), r.immovable && d.m_mass > 0) {
                                var G = d.GetWorldCenter();
                                d.m_userData.x = G.x * this.m_physScale, d.m_userData.y = G.y * this.m_physScale, d.m_userData.rotation = d.GetAngle() * o.oneEightyOverPI % 360;
                                var N = new s.WV;
                                N.center = new s._m, N.mass = 0, N.I = 0, d.SetMass(N), d.SetLinearVelocity(new s._m), d.SetAngularVelocity(0), this.removeFromPaintBodyVector(d);
                            }
                        } else {
                            for (p = new l.jy, m = new l.jy, p.addChild(m), p.alpha = .01 * r.opacity, r.foreground ? this.foreground.addChild(p) : this.background.addChild(p), y = 0; y < r.shapeContainer.numChildren; y++) (R = (v = r.shapeContainer.getChildAt(y)).getFlatSprite()).x += r.offset.x, R.y += r.offset.y, m.addChild(R);
                            for (y = 0; y < r.specialContainer.numChildren; y++) {
                                var U = (D = r.specialContainer.getChildAt(y))._type.substring(0, D._type.length - 3);
                                (F = (j = new ((0, X.O)(U))(D, null, r.offset)).groupDisplayObject).x += r.offset.x, F.y += r.offset.y, m.addChild(F);
                            }
                            p.x = r.x, p.y = r.y, p.rotation = r.rotation;
                        }
                        this.spriteDictionary.set(r, p);
                    }
                }, c.createJoints = function () {
                    this.jointDictionary = new Map, new s._m;
                    for (var e, t, i, r, n = this.shapeGuide.getChildByName("joints"), a = (this.shapeGuide.getChildByName("shapes"), null), h = 0; h < n.numChildren; h++) {
                        var l = n.getChildAt(h);
                        if (l instanceof j.I) {
                            var c = l, d = new s.tu, p = new s._m;
                            p.Set(c.x / this.m_physScale, c.y / this.m_physScale), c.body1 ? c.body1 instanceof N.p ? (e = (f = this.specialDictionary.get(c.body1)).getJointBody(p), f instanceof A.bx && (a = f)) : c.body1 instanceof I.c ? (e = this.groupDictionary.get(c.body1), this.vehicleDictionary.get(c.body1) && (i = this.vehicleDictionary.get(c.body1), c.body2 && ((y = c.body2) instanceof N.p ? i.checkAddSpecial(this.specialDictionary.get(y)) : y instanceof u.sn && i.checkAddVehicle(this.vehicleDictionary.get(y))))) : e = this.shapeDictionary.get(c.body1).GetBody() : e = this.levelBody, c.body2 ? c.body2 instanceof N.p ? (t = (f = this.specialDictionary.get(c.body2)).getJointBody(p), f instanceof A.bx && (a = f)) : c.body2 instanceof I.c ? (t = this.groupDictionary.get(c.body2), this.vehicleDictionary.get(c.body2) && (r = this.vehicleDictionary.get(c.body2), c.body1 && ((y = c.body1) instanceof N.p ? r.checkAddSpecial(this.specialDictionary.get(y)) : y instanceof u.sn && r.checkAddVehicle(this.vehicleDictionary.get(y))))) : t = this.shapeDictionary.get(c.body2).GetBody() : t = this.levelBody, d.Initialize(e, t, p), c.limit && (d.enableLimit = true, d.upperAngle = c.upperAngle * Math.PI / 180, d.lowerAngle = c.lowerAngle * Math.PI / 180), d.maxMotorTorque = 50, c.motor && (d.enableMotor = true, d.maxMotorTorque = c.torque, d.motorSpeed = c.speed), this._levelVersion > 1.84 && (d.upperAngle = c.upperAngle * Math.PI / 180, d.lowerAngle = c.lowerAngle * Math.PI / 180, d.maxMotorTorque = c.torque, d.motorSpeed = c.speed), c.collideSelf && (d.collideConnected = true);
                            var m = this._session.m_world.CreateJoint(d);
                            i && c.vehicleControlled && i.addJoint(m), r && c.vehicleControlled && r.addJoint(m), a && a.addUserJoint(m), i = r = null, a = null, this.jointDictionary.set(l, m);
                        } else if (l instanceof F.J) {
                            var f, y, v = l, g = new s.wN;
                            if ((p = new s._m).Set(v.x / this.m_physScale, v.y / this.m_physScale), v.body1) if (v.body1 instanceof N.p) e = (f = this.specialDictionary.get(v.body1)).getJointBody(p), f instanceof A.bx && (a = f); else if (v.body1 instanceof I.c) e = this.groupDictionary.get(v.body1), this.vehicleDictionary.get(v.body1) && (i = this.vehicleDictionary.get(v.body1), v.body2 && ((y = v.body2) instanceof N.p ? i.checkAddSpecial(this.specialDictionary.get(y)) : y instanceof u.sn && i.checkAddVehicle(this.vehicleDictionary.get(y)))); else e = this.shapeDictionary.get(v.body1).GetBody(); else e = this.levelBody;
                            v.body2 ? v.body2 instanceof N.p ? (t = (f = this.specialDictionary.get(v.body2)).getJointBody(p), f instanceof A.bx && (a = f)) : v.body2 instanceof I.c ? (t = this.groupDictionary.get(v.body2), this.vehicleDictionary.get(v.body2) && (r = this.vehicleDictionary.get(v.body2), v.body1 && ((y = v.body1) instanceof N.p ? r.checkAddSpecial(this.specialDictionary.get(y)) : y instanceof u.sn && r.checkAddVehicle(this.vehicleDictionary.get(y))))) : t = this.shapeDictionary.get(v.body2).GetBody() : t = this.levelBody;
                            var S = new s._m(Math.cos(v.axisAngle * o.PIOverOneEighty), Math.sin(v.axisAngle * o.PIOverOneEighty));
                            g.Initialize(e, t, p, S), v.limit && (g.enableLimit = true), g.upperTranslation = v.upperLimit / this.m_physScale, g.lowerTranslation = v.lowerLimit / this.m_physScale, v.motor && (g.enableMotor = true), g.maxMotorForce = v.force, g.motorSpeed = v.speed, v.collideSelf && (g.collideConnected = true);
                            var _ = this._session.m_world.CreateJoint(g);
                            i && v.vehicleControlled && i.addJoint(_), r && v.vehicleControlled && r.addJoint(_), a && a.addUserJoint(_), i = r = null, a = null, this.jointDictionary.set(l, _);
                        }
                    }
                }, c.createTriggers = function () {
                    this.targetActionDictionary = new Map, this.refTriggerDictionary = new Map, this.triggerDictionary = new Map;
                    for (var e = this.shapeGuide.getChildByName("triggers"), t = 0; t < e.numChildren; t++) {
                        var i = e.getChildAt(t), s = new R(i, t);
                        this.triggers.push(s), this.triggerDictionary.set(i, s);
                    }
                    for (t = 0; t < e.numChildren; t++) {
                        if (i = e.getChildAt(t), s = this.triggerDictionary.get(i), 1 == i.typeIndex) for (var r = i.targets, o = r.length, n = 0; n < o; n++) {
                            var a = r[n];
                            if (a instanceof V.D_) {
                                for (var h = this.shapeDictionary.get(a), l = this.spriteDictionary.get(a), c = a.triggerActions.get(i), d = c.length, p = 0; p < d; p++) {
                                    var u = c[p], m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m], y = null;
                                    if (f) {
                                        y = [];
                                        for (var v = 0; v < f.length; v++) {
                                            var g = f[v], S = a.keyedPropertyObject[g];
                                            y.push(S.get(i)[p]);
                                        }
                                    }
                                    var _ = s.addTargetActionShape(a, h, l, u, y);
                                    if (this.targetActionDictionary.get(a)) var w = this.targetActionDictionary.get(a); else w = new Array, this.targetActionDictionary.set(a, w);
                                    w.push(_);
                                }
                                if (this.refTriggerDictionary.get(a)) var b = this.refTriggerDictionary.get(a); else b = new Array, this.refTriggerDictionary.set(a, b);
                                b.push(s);
                            } else if (a instanceof N.p) {
                                var C = this.specialDictionary.get(a);
                                if (u = void 0, y = null, a.triggerActionList) for (d = (c = a.triggerActions.get(i)).length, p = 0; p < d; p++) {
                                    if (u = c[p], m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m]) for (y = [], v = 0; v < f.length; v++) g = f[v], S = a.keyedPropertyObject[g], y.push(S.get(i)[p]);
                                    s.addTargetItemSpecial(C, a, u, y);
                                } else s.addTargetItemSpecial(C, a, u, y);
                                C.prepareForTrigger();
                            } else if (a instanceof I.c) {
                                var L = this.groupDictionary.get(a);
                                for (l = this.spriteDictionary.get(a), d = (c = a.triggerActions.get(i)).length, p = 0; p < d; p++) {
                                    if (u = c[p], m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m]) for (y = [], v = 0; v < f.length; v++) g = f[v], S = a.keyedPropertyObject[g], y.push(S.get(i)[p]);
                                    var B = s.addTargetActionGroup(a, L, l, u, y);
                                }
                                this.targetActionDictionary.get(a) ? w = this.targetActionDictionary.get(a) : (w = new Array, this.targetActionDictionary.set(a, w)), w.push(B);
                            } else if (a instanceof J.n) {
                                if (a instanceof j.I) {
                                    var A = this.jointDictionary.get(a);
                                    for (d = (c = a.triggerActions.get(i)).length, p = 0; p < d; p++) {
                                        if (u = c[p], m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m]) for (y = [], v = 0; v < f.length; v++) g = f[v], S = a.keyedPropertyObject[g], y.push(S.get(i)[p]);
                                        s.addTargetActionRevJoint(a, A, u, y);
                                    }
                                } else if (a instanceof F.J) {
                                    var E = this.jointDictionary.get(a);
                                    for (d = (c = a.triggerActions.get(i)).length, p = 0; p < d; p++) {
                                        if (u = c[p], m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m]) for (y = [], v = 0; v < f.length; v++) g = f[v], S = a.keyedPropertyObject[g], y.push(S.get(i)[p]);
                                        s.addTargetActionPrisJoint(a, E, u, y);
                                    }
                                }
                            } else {
                                if (!(a instanceof G.$)) throw new Error("what the fuck instanceof this target");
                                var M = this.triggerDictionary.get(a), k = a.triggerActions.get(i);
                                if (u = Array.isArray(k) ? k[0] : k, m = a.triggerActionList.indexOf(u), f = a.triggerActionListProperties[m]) for (y = [], v = 0; v < f.length; v++) g = f[v], S = a.keyedPropertyObject[g], y.push(S.get(i));
                                s.addTargetActionTrigger(a, s, M, u, y);
                            }
                        }
                        if (4 == i.triggeredBy) for (o = (r = i.targets).length, n = 0; n < o; n++) if ((a = r[n]) instanceof V.D_) (h = this.shapeDictionary.get(a)) && (L = h.GetBody()).m_mass > 0 && 0 == h.m_isSensor && s.addActivationBody([L]); else if (a instanceof N.p) C = this.specialDictionary.get(a), s.addActivationBody(C.bodyList); else if (a instanceof I.c) (L = this.groupDictionary.get(a)) && s.addActivationBody([L]); else if (a instanceof J.n); else if (!(a instanceof G.$)) throw new Error("what the fuck instanceof this target");
                        i.startDisabled && (s.disabled = true);
                    }
                    this.shapeDictionary = null, this.spriteDictionary = null, this.specialDictionary = null, this.groupDictionary = null, this.vehicleDictionary = null;
                }, c.createMovieClips = function () {
                    this.foreground = new l.jy, this.characterLayer = new l.jy, this.background = new l.jy, 0 == r.Z.bdIndex && (this.background.graphics.beginFill(r.Z.bdColor, 1), this.background.graphics.drawRect(0, 0, 2e4, 1e4), this.background.graphics.endFill()), this._session.containerSprite.addChildAt(this.characterLayer, 0), this._session.containerSprite.addChildAt(this.background, 0), this._session.containerSprite.addChild(this.foreground), this._session.particleController.placeBloodBitmap();
                }, c.createBackDrops = function () {
                    switch (this.backDrops = new Array, r.Z.bdIndex) {
                        case 0:
                        default:
                            break;
                        case 1:
                            var e = new K((0, O.qX)("BackDrops", "green_backdrop1"), .1, true, 3, 3);
                            this._session.addChildAt(e, 0), this.backDrops.push(e), e = new K((0, O.qX)("BackDrops", "green_backdrop2"), .05, true, 6), this._session.addChildAt(e, 0), this.backDrops.push(e), e = new K((0, O.qX)("BackDrops", "green_backdrop3"), .01, true, 7), this._session.addChildAt(e, 0), this.backDrops.push(e), e = new K((0, O.qX)("BackDrops", "green_sky_backdrop"), 0, false), this._session.addChildAt(e, 0), this.backDrops.push(e);
                            break;
                        case 2:
                            e = new Q, this._session.addChildAt(e, 0), this.backDrops.push(e), e = new te, this._session.addChildAt(e, 0), this.backDrops.push(e);
                            var t = (0, O.qX)("BackDrops", "city_bd1");
                            e = new K(t, 0, false), this._session.addChildAt(e, 0), this.backDrops.push(e);
                    }
                }, c.createItems = function () { }, c.createTokenHUD = function () {
                    if (this.totalTokens > 0) {
                        var e = new l.jy, t = this.tokenIcon = new l.jy((0, O.qX)("Game", "Token_Icon")), i = new l.SQ("Clarendon LT Std Bold", 18, 4032711, null, null, null, null, null, l.O3.LEFT);
                        this.tokenField = new l.nv, this.tokenField.defaultTextFormat = i, this.tokenField.autoSize = l.ie.RIGHT, this.tokenField.multiline = false, this.tokenField.selectable = false, this.tokenField.embedFonts = true, this.tokenField.antiAliasType = l.ML.ADVANCED, this.tokenField.text = "0/" + this.totalTokens, e.addChild(t), e.addChild(this.tokenField), this.tokenField.x = -8, t.y = this.tokenField.height / 2 + 1, t.x = this.tokenField.x - this.tokenField.width - this.tokenIcon.width / 2 - 3, this._session.addChild(e), e.x = 900, e.y = 4;
                        var s = new l.pt(2, 90, 0, 1, 2, 2, .25);
                        e.filters = [s], r.Z.hideHUD && (e.alpha = 0);
                    }
                }, c.actions = function () {
                    e.prototype.actions.call(this), this.handleContactAdds();
                }, c.tokenFound = function () {
                    --this.tokens, this.tokenField.text = this.totalTokens - this.tokens + "/" + this.totalTokens, this.tokenIcon.x = this.tokenField.x - this.tokenField.width - this.tokenIcon.width / 2 - 3, 0 == this.tokens && (r.Z.currentSession.isReplay || r.Z.currentSession.levelComplete(), W.i.instance.playSoundItem("Victory"));
                }, c.registerShapeSound = function (e, t) {
                    t.m_mass > 15 ? (this.contactAddSounds.set(e, "ShapeHit4"), this._session.contactListener.registerListener(U.$.ADD, e, this.shapeContactAdd)) : t.m_mass > 10 ? (this.contactAddSounds.set(e, "ShapeHit3"), this._session.contactListener.registerListener(U.$.ADD, e, this.shapeContactAdd)) : t.m_mass > 5 ? (this.contactAddSounds.set(e, "ShapeHit2"), this._session.contactListener.registerListener(U.$.ADD, e, this.shapeContactAdd)) : t.m_mass > 1 && (this.contactAddSounds.set(e, "ShapeHit1"), this._session.contactListener.registerListener(U.$.ADD, e, this.shapeContactAdd));
                }, c.handleContactAdds = function () {
                    var e = this;
                    this.contactAddBuffer.forEach(function (t, i) {
                        var s = e.contactAddSounds.get(i), r = e.contactAddBuffer.get(i), o = Math.min(r / 12, 1);
                        W.i.instance.playAreaSoundInstance(s, i.m_body, o), e.contactAddBuffer.delete(i);
                    });
                }, c.updateTargetActionsFor = function (e, t, i, s, r) {
                    void 0 === r && (r = false);
                    for (var o = this.targetActionDictionary.get(e), n = o.length, a = 0; a < n; a++) {
                        var h = o[a];
                        h.shape = t, h.sprite = i, h.lastAngle = s;
                    }
                    if (r) {
                        var l = this.refTriggerDictionary.get(e);
                        if (!l) return;
                        for (n = l.length, a = 0; a < n; a++) l[a].addActivationBody([t.GetBody()]);
                    }
                }, c.updateTargetActionGroupsFor = function (e, t, i) {
                    for (var s = this.targetActionDictionary.get(e), r = s.length, o = 0; o < r; o++) {
                        var n = s[o];
                        n.body = t, n.sprite = i;
                    }
                }, c.mouseClickTrigger = function (e) {
                    var t = this.shapeGuide.getChildByName("triggers");
                    if (0 == e.first) {
                        if (e.click) {
                            var i = t.getChildAt(e.clickTriggerIndex), s = this.triggerDictionary.get(i);
                            s.mouseUpHandler(null);
                        }
                        e.rollOut && (i = t.getChildAt(e.rollOutTriggerIndex), (s = this.triggerDictionary.get(i)).mouseOutHandler(null));
                    } else e.rollOut && (i = t.getChildAt(e.rollOutTriggerIndex), (s = this.triggerDictionary.get(i)).mouseOutHandler(null)), e.click && (i = t.getChildAt(e.clickTriggerIndex), (s = this.triggerDictionary.get(i)).mouseUpHandler(null));
                }, n = o, (h = [{
                    key: "startPoint", get: function () {
                        var e = this.shapeGuide.getChildByName("main character");
                        return new s._m(e.x, e.y);
                    }
                }, {
                    key: "cameraBounds", get: function () {
                        return new l.Ae(0, 0, 2e4, 1e4);
                    }
                }, {
                    key: "worldBounds", get: function () {
                        return new l.Ae(-this.borderThickness, -(this.borderThickness + this.skyHeight), 2e4 + 2 * this.borderThickness, 1e4 + this.skyHeight + 2 * this.borderThickness);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(n.prototype, h), Object.defineProperty(n, "prototype", { writable: false }), o;
            }(M);
        }, 322: (e, t, i) => {
            "use strict";
            i.d(t, { m: () => l }), i(31), i(11), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(128), r = i(6), o = i(25);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function s(t, i, s) {
                    var n;
                    void 0 === s && (s = 100), n = e.call(this) || this;
                    var a = new r.KG((0, o.qX)("GameUI", "mc_dropmenu_item"));
                    return a.convertChildren(), n.addChild(a), n.currText = r.nv.spriteToTextField(a.currText, a), n.bg = a.bg, n.mouseChildren = false, n.buttonMode = true, n._index = i, n.currText.autoSize = r.ie.LEFT, n.currText.wordWrap = false, n.currText.embedFonts = true, n.currText.selectable = false, n.currText.text = t, n._bgWidth = s, n.bg = new r.jy, n.addChildAt(n.bg, 0), n.rollOut(), n;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var a, h, l = s.prototype;
                return l.drawBg = function (e) {
                    this.bg.graphics.clear(), this.bg.graphics.lineStyle(1, 13421772, 1, false, r.sJ.NORMAL, r.R$.NONE, r.f$.MITER, 3), this.bg.graphics.beginFill(e), this.bg.graphics.drawRect(0, 0, this._bgWidth, 22), this.bg.graphics.endFill();
                }, l.rollOver = function () {
                    this.drawBg(16777215), this.currText.textColor = 4032711;
                }, l.rollOut = function () {
                    this.drawBg(15724527), this.currText.textColor = 8947848;
                }, l.mouseDown = function () {
                    this.drawBg(13421772), this.currText.textColor = 16777215;
                }, a = s, (h = [{
                    key: "height", get: function () {
                        return this.bg.height;
                    }
                }, {
                    key: "index", get: function () {
                        return this._index;
                    }
                }, {
                    key: "text", get: function () {
                        return this.currText.text;
                    }
                }, {
                    key: "textWidth", get: function () {
                        return this.currText.textWidth;
                    }
                }, {
                    key: "bgWidth", get: function () {
                        return this.bg.width;
                    }, set: function (e) {
                        this._bgWidth = e, this.rollOut();
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(a.prototype, h), Object.defineProperty(a, "prototype", { writable: false }), s;
            }(r.jy);
            function h(e, t) {
                return (h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var l = function (e) {
                var t, i;
                function n(t, i, s, o, h) {
                    var l;
                    void 0 === o && (o = -1), void 0 === h && (h = 13421772), (l = e.call(this) || this).menuItems = [], l.itemHeight = 22, l.rollOverHandler = function (e) {
                        l.open || (l.open = true, l.createMenu());
                    }, l.rollOutHandler = function (e) {
                        l.open && (l.open = false, l.removeAll());
                    }, l.mouseOverHandler = function (e) {
                        if (l.deselectAll(), e.target instanceof a) {
                            var t = e.target;
                            e.buttonDown ? t.mouseDown() : t.rollOver();
                        }
                    }, l.mouseDownHandler = function (e) {
                        e.target instanceof a && e.target.mouseDown();
                    }, l.mouseUpHandler = function (e) {
                        if (e.target instanceof a) {
                            l.removeAll();
                            var t = e.target;
                            if (l.currentIndex != t.index) {
                                l.currentIndex = t.index;
                                var i = new r.ju(n.ITEM_SELECTED);
                                i.target = function (e) {
                                    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                    return e;
                                }(l), l.dispatchEvent(i);
                            }
                        }
                    }, l.buildView(), l.displayList = i, l.valueList = s, l.currText.mouseEnabled = false, l.arrow.mouseEnabled = false, l.bg.alpha = 0, l.labelText.autoSize = r.ie.RIGHT, l.currText.autoSize = r.ie.LEFT, l.currText.wordWrap = l.labelText.wordWrap = false, l.currText.embedFonts = l.labelText.embedFonts = true, l.currText.selectable = l.labelText.selectable = false, l.currText.multiline = l.labelText.multiline = false;
                    var c = -1 != o ? o : l.displayList.length - 1;
                    l.currentIndex = c, l.labelText.text = t, l.labelText.textColor = h, l.holder = new r.jy, l.addChildAt(l.holder, 0), l.menuSprite = new r.jy, l.holder.addChild(l.bg), l.holder.addChild(l.menuSprite);
                    var d = new r.pt(3, 45, 0, .25, 8, 8, 1, 3);
                    return l.menuSprite.filters = [d], l.holder.mouseEnabled = true, l.holder.addEventListener(r.TF.ROLL_OVER, l.rollOverHandler), l.holder.addEventListener(r.TF.ROLL_OUT, l.rollOutHandler), l;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, h(t, i);
                var l, c, d = n.prototype;
                return d.buildView = function () {
                    var e = this, t = (0, o.qX)("GameUI", "mc_dropmenu"), i = [];
                    t.children.forEach(function (t) {
                        var o;
                        t instanceof s.MovieClip ? (o = new r.KG(null, false)).setPixiMovieClip(t) : o = new r.jy(t, false), t.name ? (o.name = o.pixiSprite.name = t.name, e[t.name] = o) : o.name = o.pixiSprite.name = "unknown", i.push(o);
                    }), i.forEach(function (t) {
                        e.addChild(t);
                    }), this.currText = r.nv.spriteToTextField(this.currText, this), this.labelText = r.nv.spriteToTextField(this.labelText, this);
                }, d.deselectAll = function () {
                    for (var e = 0; e < this.menuItems.length; e++) this.menuItems[e].rollOut();
                }, d.removeAll = function () {
                    for (var e = 0; e < this.menuItems.length; e++) {
                        var t = this.menuItems[e];
                        this.menuSprite.removeChild(t), t.removeEventListener(r.TF.MOUSE_OVER, this.mouseOverHandler), t.removeEventListener(r.TF.MOUSE_DOWN, this.mouseDownHandler), t.removeEventListener(r.TF.MOUSE_UP, this.mouseUpHandler);
                    }
                    this.menuItems = [];
                }, d.createMenu = function () {
                    this.menuItems = [];
                    for (var e = this.bg.height, t = 0, i = 0; i < this.displayList.length; i++) {
                        var s = this.displayList[i], o = new a(s, i);
                        this.menuSprite.addChild(o), o.y = e, this.menuItems.push(o), t = Math.max(t, o.textWidth), e += this.itemHeight, o.addEventListener(r.TF.MOUSE_OVER, this.mouseOverHandler), o.addEventListener(r.TF.MOUSE_DOWN, this.mouseDownHandler), o.addEventListener(r.TF.MOUSE_UP, this.mouseUpHandler);
                    }
                    for (var n = 0; n < this.menuItems.length; n++) this.menuItems[n].bgWidth = t + 20;
                }, d.valueIndex = function (e) {
                    return this.valueList.indexOf(e);
                }, d.containsValue = function (e) {
                    return -1 != this.valueList.indexOf(e);
                }, d.addValue = function (e, t) {
                    this.containsValue(t) || (this.displayList.push(e), this.valueList.push(t));
                }, d.die = function () {
                    this.holder.removeEventListener(r.TF.ROLL_OVER, this.rollOverHandler), this.holder.removeEventListener(r.TF.ROLL_OUT, this.rollOutHandler);
                }, l = n, (c = [{
                    key: "display", get: function () {
                        return this._display;
                    }, set: function (e) {
                        this._display = e, this.currText.text = e, this.arrow.x = this.currText.textWidth + 7, this.bg.width = this.arrow.x + this.arrow.width, this._currentIndex = this.displayList.indexOf(e);
                    }
                }, {
                    key: "value", get: function () {
                        return this._value;
                    }
                }, {
                    key: "currentIndex", get: function () {
                        return this._currentIndex;
                    }, set: function (e) {
                        this._currentIndex = e, this.display = this.displayList[e], this._value = this.valueList[e];
                    }
                }, {
                    key: "xLeft", get: function () {
                        return this.x - this.labelText.width;
                    }, set: function (e) {
                        this.x = e + this.labelText.width;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(l.prototype, c), Object.defineProperty(l, "prototype", { writable: false }), n;
            }(r.jy);
            l.ITEM_SELECTED = "itemselected";
        }, 401: (e, t, i) => {
            "use strict";
            i.d(t, { R: () => n }), i(11);
            var s = i(6), r = i(33);
            function o(e, t) {
                return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var n = function (e) {
                var t, i;
                function n(t, i, r) {
                    var o;
                    return void 0 === r && (r = 10), (o = e.call(this) || this).updateContent = function (e) {
                        void 0 === e && (e = null), o.content.y = o.scrollTab.y * o.content.height / -o.bg.height;
                    }, o.mouseDownHandler = function (e) {
                        switch (e.target) {
                            case o.scrollTab:
                                o.dragging || o.startScrollDrag();
                                break;
                            case o.bg:
                                o.bgPress();
                        }
                    }, o.mouseWheelHandler = function (e) {
                        if (o.active) {
                            var t = -e.deltaY < 0;
                            o.step(t);
                        }
                    }, o.mouseUpHandler = function (e) {
                        o.stage.removeEventListener(s.TF.MOUSE_UP, o.mouseUpHandler), o.stage.removeEventListener(s.TF.MOUSE_MOVE, o.updateContent), o.stopScrollDrag(), o.stage.focus = o.content;
                    }, o.content = t, o.maskSprite = i, o.stepDistance = r, o.createParts(), o.bg.height = i.graphics.height, o.updateScrollTab(), o.mouseEnabled = true, o.bg.mouseEnabled = true, o.scrollTab.mouseEnabled = true, o.bg.addEventListener(s.TF.MOUSE_DOWN, o.mouseDownHandler), o.scrollTab.addEventListener(s.TF.MOUSE_DOWN, o.mouseDownHandler), t.mouseEnabled = true, window.addEventListener("wheel", o.mouseWheelHandler), o.content.parent.interactive = true, o.content.parent.pixiSprite.on("pointerover", function () {
                        o.active = true;
                    }), o.content.parent.pixiSprite.on("pointerout", function () {
                        o.active = false;
                    }), o;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, o(t, i);
                var a = n.prototype;
                return a.createParts = function () {
                    this.bg = new s.jy, this.bg.pixiSprite.name = "scroll bg", this.addChild(this.bg), this.bg.graphics.beginFill(16777215), this.bg.graphics.drawRoundRect(0, 0, 21.5, 100, 0, 0), this.bg.graphics.endFill(), this.bg.alpha = .12;
                    var e = new r.NineSlicePlane(r.Texture.from("scroll-bar-asset.png"), 20, 50, 20, 50);
                    this.scrollTab = new s.jy(e), this.scrollTab.alpha = 1, this.scrollTab._pixiSprite.width = 21.5, this.addChild(this.scrollTab), this.tickHolder = new s.jy, this.tickHolder.alpha = 0, this.tickHolder.pixiSprite.name = "tick holder", this.tickHolder.mouseChildren = false, this.tickHolder.mouseEnabled = false, this.addChild(this.tickHolder);
                }, a.updateScrollTab = function () {
                    this.adjustContentLimits();
                    var e = this.maskSprite.graphics.height / this.content.height;
                    e > 1 && (e = 1), this.scrollTab._pixiSprite.height = e * this.bg.height, this.scrollTab.y = this.content.y * -this.bg.height / this.content.height;
                }, a.bgPress = function () {
                    this.mouseY > this.scrollTab.y ? (this.scrollTab.y = this.scrollTab.y + this.scrollTab.height, this.scrollTab.y + this.scrollTab.height > this.bg.height && (this.scrollTab.y = this.bg.height - this.scrollTab.height)) : (this.scrollTab.y = this.scrollTab.y - this.scrollTab.height, this.scrollTab.y < 0 && (this.scrollTab.y = 0)), this.updateContent();
                }, a.startScrollDrag = function () {
                    this.dragging = true, this.stage.addEventListener(s.TF.MOUSE_UP, this.mouseUpHandler, false, 0, true), this.stage.addEventListener(s.TF.MOUSE_MOVE, this.updateContent, false, 0, true), this.scrollTab.startDrag(false, new s.Ae(0, 0, 0, this.bg.height - this.scrollTab.height));
                }, a.stopScrollDrag = function () {
                    this.dragging = false, this.scrollTab.stopDrag(), this.updateContent();
                }, a.step = function (e) {
                    void 0 === e && (e = true), this.maskSprite.graphics.height / this.content.height > 1 || (e ? this.content.y -= this.stepDistance : this.content.y += this.stepDistance, this.updateScrollTab());
                }, a.adjustContentLimits = function () {
                    this.content.y + this.content.height < this.maskSprite.graphics.height && (this.content.y = this.maskSprite.graphics.height - this.content.height), this.content.y > 0 && (this.content.y = 0);
                }, a.die = function () {
                    this.stage && (this.stage.removeEventListener(s.TF.MOUSE_UP, this.mouseUpHandler), this.stage.removeEventListener(s.TF.MOUSE_MOVE, this.updateContent)), this.scrollTab.removeEventListener(s.TF.MOUSE_DOWN, this.mouseDownHandler), this.bg.removeEventListener(s.TF.MOUSE_DOWN, this.mouseDownHandler), this.content.removeEventListener(s.TF.MOUSE_WHEEL, this.mouseWheelHandler), window.removeEventListener("wheel", this.mouseWheelHandler);
                }, n;
            }(s.jy);
        }, 492: (e, t, i) => {
            "use strict";
            i.d(t, { H: () => o });
            var s = i(6);
            function r(e, t) {
                return (r = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var o = function (e) {
                var t, i;
                function o(t, i) {
                    var r;
                    return (r = e.call(this) || this).overTint = 16744062, r.offTint = 16777215, r.rollOverHandler = function (e) {
                        r.textSprite.tint = r.overTint, r.transform.colorTransform = r.colorTransform;
                    }, r.rollOutHandler = function (e) {
                        r.textSprite.tint = 16777215, r.transform.colorTransform = new s.JJ(1, 1, 1, 1, 0, 0, 0, 0);
                    }, r.mouseUpHandler = function (e) {
                        if (r.active) {
                            var t = new s.RW(r.url);
                            (0, s.hR)(t, "_blank");
                        }
                    }, r.textSprite = t, r.url = i, r.buttonMode = true, r.tabEnabled = false, r.colorTransform = new s.JJ(1, 1, 1, 1, 253, -129, -129, 0), r.x = r.textSprite.x, r.y = r.textSprite.y, r.textSprite.parent.addChild(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(r)), r.textSprite.x = 0, r.textSprite.y = 0, r.addChild(r.textSprite), r.addEventListener(s.TF.ROLL_OVER, r.rollOverHandler, false, 0, true), r.addEventListener(s.TF.ROLL_OUT, r.rollOutHandler, false, 0, true), r.pixiSprite.interactive = true, r.pixiSprite.on("pointerup", r.mouseUpHandler), r.pixiSprite.on("pointerover", function () {
                        return r.active = true;
                    }), r.pixiSprite.on("pointerout", function () {
                        return r.active = false;
                    }), r;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, r(t, i), o.prototype.die = function () {
                    this.removeEventListener(s.TF.ROLL_OVER, this.rollOverHandler), this.removeEventListener(s.TF.ROLL_OUT, this.rollOutHandler), this.pixiSprite.off("pointerup");
                }, o;
            }(s.jy);
        }, 393: (e, t, i) => {
            "use strict";
            i.d(t, { i: () => d }), i(73);
            var s = i(317), r = i(15), o = i(24), n = i(165), a = i(347), h = i(222), l = i(6);
            function c(e, t) {
                return (c = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var d = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return (i = e.call(this, r.Z.CURRENT_VERSION, t, null, 0) || this)._accumulatedStep = 1, i.run = function (e) {
                        30 === l.Xj.maxFPS ? i.run30fps(e) : i.run60fps(e);
                    }, i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, c(t, i);
                var d = s.prototype;
                return d.setupLevel = function (e) { }, d.getStartPoint = function () {
                    switch (r.Z.characterIndex) {
                        case 1:
                            return new o._m(100, 80);
                        case 2:
                        case 9:
                            return new o._m(100, 40);
                        case 3:
                            return new o._m(100, 65);
                        case 4:
                            return new o._m(80, 90);
                        case 5:
                            return new o._m(90, 65);
                        case 6:
                            return new o._m(80, 70);
                        case 7:
                            return new o._m(85, 75);
                        case 8:
                            return new o._m(100, 70);
                        case 10:
                            return new o._m(125, 70);
                        case 11:
                            return new o._m(125, 80);
                        default:
                            return new o._m(100, 100);
                    }
                }, d.create = function () {
                    this._particleController = new n.z(this._containerSprite), this.createWorld(), this._character.create(), this._camera = new a.M(this._containerSprite, this._character.cameraFocus, this), this.setupTextFields(), this.fpsText.visible = false, this._containerSprite.addChild(this.debug_sprite), this.m_world.InterpolatedStep(1), this._character.paint(), this.start();
                }, d.createWorld = function () {
                    var e = new o.Cc, t = new l.Ae(0, 0, 1e3, 1e3);
                    e.lowerBound.Set(t.x / this.m_physScale, t.y / this.m_physScale), e.upperBound.Set((t.x + t.width) / this.m_physScale, (t.y + t.height) / this.m_physScale);
                    var i = new o._m(0, 10);
                    this.m_world = new o.Dw(e, i, true);
                    var s = new o.Wv;
                    s.m_sprite = this.debug_sprite, s.m_drawScale = 62.5, s.m_fillAlpha = .3, s.m_lineThickness = 1, s.m_drawFlags = o.Wv.e_shapeBit | o.Wv.e_jointBit, this._contactListener = new h.$, this.m_world.SetContactListener(this._contactListener);
                    var r = new o.Oi, n = new o.Vb;
                    n.friction = 1, n.restitution = .1, n.filter.categoryBits = 8, n.filter.groupIndex = -10;
                    var a = this.m_world.CreateBody(r);
                    n.SetAsOrientedBox(80 / this.m_physScale, 50 / this.m_physScale, new o._m(100 / this.m_physScale, 225 / this.m_physScale)), a.CreateShape(n);
                }, d.start = function () {
                    this.paused = false, this.frames = 0, this._iteration = 0, this.addEventListener(l.ju.ENTER_FRAME, this.run);
                }, d.run30fps = function (e) {
                    o.of.USE_INTERPOLATION = false, this.frames += 1, this.steps += 1, this._character.preActions(), this._character.doNothing(), this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._character.paint(), this._particleController.step(1);
                }, d.run60fps = function (e) {
                    o.of.USE_INTERPOLATION = true, this.frames += 1, this.steps += 1;
                    var t = 30 / l.Xj.maxFPS;
                    1 === this.steps && (t = 1), this._accumulatedStep += t, this._accumulatedStep >= 1 && (this._accumulatedStep = 1), this.m_world.InterpolatedStep(this._accumulatedStep), 1 === this._accumulatedStep && (this._character.preActions(), this._character.doNothing(), this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._accumulatedStep = 0), 1 === this.steps && this.m_world.InterpolatedStep(1), this._character.paint(), this._particleController.step(t);
                }, d.die = function () {
                    this.removeEventListener(l.ju.ENTER_FRAME, this.run);
                    for (var e = this.m_world.GetBodyList(); e; e = e.m_next) this.m_world.DestroyBody(e);
                    this.m_world = null, this._character.die(), this._character = null, this._particleController.die(), this._particleController = null;
                }, s;
            }(s.z);
        }, 489: (e, t, i) => {
            "use strict";
            i.d(t, { W: () => s }), i(291), i(26), i(34);
            var s = function () {
                function e() { }
                return e.containsBadWord = function (t) {
                    for (var i = t, s = e.regList.length, r = 0; r < s; r++) {
                        var o = e.regList[r];
                        if (new RegExp(o, "i").test(i)) return true;
                    }
                    return false;
                }, e;
            }();
            s.regList = ["\\b[a@]+ss[^aeiou]+", "\\b[a@]+ss+\\b", "[a@4]+[_\\W]*p[_\\W]*p+[_\\W]*n+[_\\W]*[a@4]+[_\\W]*n+[_\\W]*[a@4]+", "[^a-z]+[a@]ss[^aiou]+\\b", "[^a-z]+[a@]ss\\b", "\\ban[a@]l", "[a@]n[a@]l", "b[a@]st[a@e3]rd", "b[i1!]+a*tch", "bl[o0]+wj[o0]+b", "b[o0][o0]+b+s", "bu+tt[-_ ]*h[o0]+l[e3]", "c[o0]ck", "cl[i1!]+t", "\\bcu+m", "cu+nt", "d[i1!]+ck", "d[i1!]+ld[o0]+", "f[a@]+gs", "f[a@]+g+[0oi]+t", "f[-_ ]*u+[-_ ]*c[-_ ]*k", "fu+k", "g[o0][o0]+k", "j[e3]+rk[-_ ]*[o0]+ff", "j[i1!]+z+", "kunt", "m[a@]+st[uea]+rb[a@]+t", "n[a4@]+k+[e3]+d", "n[i1!]+g+[a@]+", "n[i1!]+g+[e3]+r", "nu+d[e3]", "p[e3]+n[i1!u]+s", "pu+ss+[iye3]+", "p[o0]+rn", "preteen", "pr[o0]+n", "quee+f", "s[e3]+x", "s[e3]+m[e3]n", "sh[i!1y]+t", "sl+u+t", "smu+t", "t[i1!]+ts*", "v[a@]+g[i1!]+n[a@]", "wh[o0]+r[e3]", "w[o0]p"];
        }, 306: (e, t, i) => {
            "use strict";
            i.d(t, { $o: () => a, SL: () => c, eZ: () => m, sH: () => v }), i(61), i(0), i(34), i(4), i(5), i(1), i(2), i(3);
            var s = i(6), r = i(24), o = i(33);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var a = function (e) {
                var t, i;
                function a(t) {
                    var i;
                    return void 0 === t && (t = false), (i = e.call(this) || this).m_iterations = 10, i.m_timeStep = .03333333333333333, i.m_physScale = 62.5, i.totalFrames = 30, i.frames = 0, i.runBind = i.run.bind(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(i)), i.useDebugger = t, i.parent && (i.useDebugger = true, i.test()), i;
                }
                i = e, (t = a).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var h, l, c = a.prototype;
                return c.test = function () {
                    if (this.useDebugger) this.debug_sprite = new s.jy, this.addChild(this.debug_sprite), this.useDebugger = true, this.createTextField(), this.createWorld(), this.createBodies(), this.addEventListener(s.ju.ENTER_FRAME, this.runBind); else {
                        for (this.createWorld(), this.createBodies(), this.frames = 0; this.frames <= this.totalFrames; this.frames++) this.m_world.Step(this.m_timeStep, this.m_iterations);
                        this.dispatchEvent(new s.ju(s.ju.COMPLETE));
                    }
                }, c.createTextField = function () {
                    var e = new s.SQ("HelveticaNeueLT Std", 11, 0, null, null, null, null, null, s.O3.LEFT);
                    this.textField = new s.nv, this.textField.width = 390, this.textField.height = 10, this.textField.defaultTextFormat = e, this.textField.autoSize = s.ie.LEFT, this.textField.y = 0, this.textField.multiline = true, this.textField.selectable = true, this.textField.embedFonts = true, this.textField.antiAliasType = s.ML.ADVANCED, this.addChild(this.textField), this.debugString = "";
                }, c.createWorld = function () {
                    var e = new r.Cc, t = new o.Rectangle(-500, -500, 2e3, 2e3);
                    e.lowerBound.Set(t.x / this.m_physScale, t.y / this.m_physScale), e.upperBound.Set((t.x + t.width) / this.m_physScale, (t.y + t.height) / this.m_physScale);
                    var i = new r._m(0, 10);
                    this.m_world = new r.Dw(e, i, true);
                    var s = new r.Wv;
                    s.m_sprite = this.debug_sprite, s.m_drawScale = 62.5, s.m_fillAlpha = .3, s.m_lineThickness = 1, s.m_drawFlags = r.Wv.e_shapeBit | r.Wv.e_jointBit, this.useDebugger && this.m_world.SetDebugDraw(s);
                }, c.createBodies = function () {
                    var e = new r.Oi, t = new r.Vb, i = new r.lB;
                    t.friction = i.friction = 1, t.restitution = i.restitution = .3, t.density = 1;
                    var s = this.m_world.CreateBody(e);
                    t.SetAsOrientedBox(275 / this.m_physScale, 50 / this.m_physScale, new r._m(275 / this.m_physScale, 400 / this.m_physScale)), s.CreateShape(t), t.SetAsOrientedBox(275 / this.m_physScale, 50 / this.m_physScale, new r._m(275 / this.m_physScale, 0 / this.m_physScale)), s.CreateShape(t), t.SetAsOrientedBox(50 / this.m_physScale, 200 / this.m_physScale, new r._m(550 / this.m_physScale, 200 / this.m_physScale)), s.CreateShape(t), t.SetAsOrientedBox(50 / this.m_physScale, 200 / this.m_physScale, new r._m(0 / this.m_physScale, 200 / this.m_physScale)), s.CreateShape(t), t.SetAsOrientedBox(5 / this.m_physScale, 5 / this.m_physScale, new r._m(0, 0));
                    for (var o = 255, n = 345, a = 0; a < 5; a++) {
                        for (var h = 0; h < 5; h++) e.position.Set(o / this.m_physScale, n / this.m_physScale), (s = this.m_world.CreateBody(e)).CreateShape(t), s.SetMassFromShapes(), 0 == a && 4 == h && (this.trackingBody = s), o += 10;
                        o = 255, n -= 10;
                    }
                    e.position.Set(85 / this.m_physScale, 315 / this.m_physScale), s = this.m_world.CreateBody(e), i.radius = 25 / this.m_physScale, i.density = 3, s.CreateShape(i), s.SetMassFromShapes(), s.SetLinearVelocity(new r._m(20, 0));
                }, c.run = function (e) {
                    this.frames == this.totalFrames && (this.removeEventListener(s.ju.ENTER_FRAME, this.runBind), this.textField.htmlText = this.debugString), this.m_world.Step(this.m_timeStep, this.m_iterations);
                    var t = "frame " + this.frames + " = " + this.trackingBody.GetPosition().x + "<br>";
                    this.debugString = this.debugString.concat(t), this.frames += 1;
                }, h = a, (l = [{
                    key: "result", get: function () {
                        for (var e = this.trackingBody.GetPosition().x.toString(); e.length < 17;) e = e.concat("0");
                        return e.substr(e.length - 8, 8);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(h.prototype, l), Object.defineProperty(h, "prototype", { writable: false }), a;
            }(s.jy);
            function h(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function l(e, t) {
                return (l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var c = function (e) {
                var t, i;
                function r() {
                    var t;
                    (t = e.call(this) || this).startFadeBind = t.startFade.bind(h(t)), t.fadeOutBind = t.fadeOut.bind(h(t)), t._textField = new s.nv;
                    var i = new s.SQ("HelveticaNeueLT Std", 12, 16711680, null, null, null, null, null, s.O3.CENTER);
                    return t._textField.defaultTextFormat = i, t._textField.multiline = true, t._textField.height = 20, t._textField.width = 300, t._textField.x = 450, t._textField.mouseEnabled = false, t._textField.selectable = false, t._textField.embedFonts = true, t._textField.autoSize = s.ie.CENTER, t._textField.wordWrap = true, t.addChild(t._textField), t.mouseEnabled = false, t.mouseChildren = false, t;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, l(t, i);
                var o, n, a = r.prototype;
                return a.appendText = function (e) {
                    this.removeListeners(), this.alpha = 1, this._textField.appendText(e);
                }, a.removeListeners = function () {
                    this._timer && (this._timer.stop(), this._timer.removeEventListener(s.pH.TIMER, this.startFadeBind), this._timer = null), this.removeEventListener(s.ju.ENTER_FRAME, this.fadeOutBind);
                }, a.show = function (e, t, i) {
                    void 0 === t && (t = 2), void 0 === i && (i = 1), this.alpha = 1, this._textField.text = e, this._timer && (this._timer.stop(), this._timer.removeEventListener(s.pH.TIMER, this.startFadeBind), this.removeEventListener(s.ju.ENTER_FRAME, this.fadeOutBind), this._timer = null), this.fadeTime = 30 * i, this._timer = new s.B7(1e3 * t, 1), this._timer.addEventListener(s.pH.TIMER, this.startFadeBind), this._timer.start();
                }, a.startFade = function (e) {
                    this._timer && (this._timer.stop(), this._timer.removeEventListener(s.pH.TIMER, this.startFadeBind), this._timer = null), this.counter = 0, this.addEventListener(s.ju.ENTER_FRAME, this.fadeOutBind);
                }, a.fadeOut = function (e) {
                    this.counter++, this.alpha = (this.fadeTime - this.counter) / this.fadeTime, this.counter == this.fadeTime && this.removeEventListener(s.ju.ENTER_FRAME, this.fadeOutBind);
                }, o = r, (n = [{
                    key: "text", get: function () {
                        return this._textField.text;
                    }, set: function (e) {
                        this.removeListeners(), this.alpha = 1, this._textField.text = e;
                    }
                }, {
                    key: "htmlText", set: function (e) {
                        this.removeListeners(), this.alpha = 1, this._textField.htmlText = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(o.prototype, n), Object.defineProperty(o, "prototype", { writable: false }), r;
            }(s.jy), d = (i(31), i(13), i(18), i(15)), p = i(25);
            function u(e, t) {
                return (u = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var m = function (e) {
                var t, i;
                function r(t) {
                    var i;
                    return (i = e.call(this) || this).alphaVal = .2, i.char = t, i.setupMCs(), i;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, u(t, i);
                var o = r.prototype;
                return o.setupMCs = function () {
                    var e = new s.KG((0, p.qX)("GameUI", "KeyDisplay"));
                    e.convertChildren(), this.addChild(e), this.upKey = e.upKey, this.downKey = e.downKey, this.leftKey = e.leftKey, this.rightKey = e.rightKey, this.spaceKey = e.spaceKey, this.shiftKey = e.shiftKey, this.ctrlKey = e.ctrlKey, this.zKey = e.zKey, this.upKey.cacheAsBitmap = true, this.downKey.cacheAsBitmap = true, this.leftKey.cacheAsBitmap = true, this.rightKey.cacheAsBitmap = true, this.spaceKey.cacheAsBitmap = true, this.shiftKey.cacheAsBitmap = true, this.ctrlKey.cacheAsBitmap = true, this.zKey.cacheAsBitmap = true, this.upKey.alpha = this.alphaVal, this.downKey.alpha = this.alphaVal, this.leftKey.alpha = this.alphaVal, this.rightKey.alpha = this.alphaVal, this.spaceKey.alpha = this.alphaVal, this.shiftKey.alpha = this.alphaVal, this.ctrlKey.alpha = this.alphaVal, this.zKey.alpha = this.alphaVal;
                }, o.upKeyON = function () {
                    this.upKey.alpha = 1;
                }, o.upKeyOFF = function () {
                    this.upKey.alpha = .2;
                }, o.rightKeyON = function () {
                    this.rightKey.alpha = 1;
                }, o.rightKeyOFF = function () {
                    this.rightKey.alpha = .2;
                }, o.downKeyON = function () {
                    this.downKey.alpha = 1;
                }, o.downKeyOFF = function () {
                    this.downKey.alpha = .2;
                }, o.leftKeyON = function () {
                    this.leftKey.alpha = 1;
                }, o.leftKeyOFF = function () {
                    this.leftKey.alpha = .2;
                }, o.spaceKeyON = function () {
                    this.spaceKey.alpha = 1;
                }, o.spaceKeyOFF = function () {
                    this.spaceKey.alpha = .2;
                }, o.shiftKeyON = function () {
                    this.shiftKey.alpha = 1;
                }, o.shiftKeyOFF = function () {
                    this.shiftKey.alpha = .2;
                }, o.ctrlKeyON = function () {
                    this.ctrlKey.alpha = 1;
                }, o.ctrlKeyOFF = function () {
                    this.ctrlKey.alpha = .2;
                }, o.zKeyON = function () {
                    this.zKey.alpha = 1;
                }, o.zKeyOFF = function () {
                    this.zKey.alpha = .2;
                }, o.setInteractive = function (e, t) {
                    var i = this;
                    [{ key: "upKey", code: d.Z.accelerateCode }, { key: "downKey", code: d.Z.decelerateCode }, { key: "leftKey", code: d.Z.leanBackCode }, { key: "rightKey", code: d.Z.leanForwardCode }, { key: "spaceKey", code: d.Z.primaryActionCode }, { key: "shiftKey", code: d.Z.secondaryAction1Code }, { key: "ctrlKey", code: d.Z.secondaryAction2Code }, { key: "zKey", code: d.Z.ejectCode }].forEach(function (r) {
                        var o = i[r.key];
                        o.interactive = true, o.buttonMode = true, o.keyCode = r.code, o.keys = { on: i[r.key + "ON"].bind(i), off: i[r.key + "OFF"].bind(i) }, i[r.key + "ON"](), o.addEventListener(s.TF.MOUSE_DOWN, t), o.addEventListener(s.TF.MOUSE_UP, e);
                    });
                }, r;
            }(s.jy), f = i(22);
            function y(e, t) {
                return (y = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var v = function (e) {
                var t, i;
                function r() {
                    var t;
                    return (t = e.call(this) || this).barWidth = 600, t.barHeight = 6, t.border = 2, t.minWidth = 10, t.remainder = t.barWidth - t.minWidth, t.speedArray = [5, 15, 30, 60, 100], t.speedIndex = 2, t.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case t.leftArrows:
                                t.decreaseSpeed();
                                break;
                            case t.rightArrows:
                                t.increaseSpeed();
                        }
                    }, t.mouseOverHandler = function (e) {
                        switch (e.target) {
                            case t.leftArrows:
                                f.xx.instance.show("slower", t.leftArrows);
                                break;
                            case t.rightArrows:
                                f.xx.instance.show("faster", t.rightArrows);
                        }
                    }, t.drawShapes(), t.leftArrows.addEventListener(s.TF.MOUSE_UP, t.mouseUpHandler), t.rightArrows.addEventListener(s.TF.MOUSE_UP, t.mouseUpHandler), t.leftArrows.addEventListener(s.TF.MOUSE_OVER, t.mouseOverHandler), t.rightArrows.addEventListener(s.TF.MOUSE_OVER, t.mouseOverHandler), t;
                }
                i = e, (t = r).prototype = Object.create(i.prototype), t.prototype.constructor = t, y(t, i);
                var o = r.prototype;
                return o.drawShapes = function () {
                    this.bgBar = new s.jy, this.addChild(this.bgBar), this.bgBar.graphics.beginFill(13421772), this.bgBar.graphics.drawRoundRect(-this.border, -this.border, this.barWidth + 2 * this.border, this.barHeight + 2 * this.border, 2 * this.border, 2 * this.border), this.bgBar.graphics.endFill(), this.progBar = new s.jy, this.addChild(this.progBar), this.progBar.graphics.beginFill(16613761), this.progBar.graphics.drawRoundRect(0, 0, this.barWidth, this.barHeight, this.border, this.border), this.progBar.graphics.endFill(), this.progBar.scale9Grid = new s.Ae(this.border, this.border, 5, 2), this.updateProgress(0, 1);
                    var e = this.barHeight + 2 * this.border, t = e / 2;
                    this.rightArrows = new s.jy, this.addChild(this.rightArrows), this.rightArrows.graphics.beginFill(13421772), this.rightArrows.graphics.lineTo(e, t), this.rightArrows.graphics.lineTo(0, e), this.rightArrows.graphics.lineTo(0, 0), this.rightArrows.graphics.endFill(), this.rightArrows.graphics.beginFill(13421772), this.rightArrows.graphics.moveTo(t, 0), this.rightArrows.graphics.lineTo(e + t, t), this.rightArrows.graphics.lineTo(t, e), this.rightArrows.graphics.lineTo(t, 0), this.rightArrows.graphics.endFill(), this.rightArrows.x = this.barWidth + 15, this.rightArrows.y = -this.border, this.leftArrows = new s.jy, this.addChild(this.leftArrows), this.leftArrows.graphics.beginFill(13421772), this.leftArrows.graphics.lineTo(0, e), this.leftArrows.graphics.lineTo(-e, t), this.leftArrows.graphics.lineTo(0, 0), this.leftArrows.graphics.endFill(), this.leftArrows.graphics.beginFill(13421772), this.leftArrows.graphics.moveTo(-t, 0), this.leftArrows.graphics.lineTo(-t, e), this.leftArrows.graphics.lineTo(-(e + t), t), this.leftArrows.graphics.lineTo(-t, 0), this.leftArrows.graphics.endFill(), this.leftArrows.x = -15, this.leftArrows.y = -this.border, this.leftArrows.buttonMode = this.rightArrows.buttonMode = true, this.tabChildren = false;
                }, o.updateProgress = function (e, t) {
                    var i = e / t;
                    this.progBar.width = this.minWidth + Math.min(i * this.remainder, this.remainder);
                }, o.increaseSpeed = function () {
                    this.speedIndex = Math.min(this.speedArray.length - 1, this.speedIndex + 1), this.stage.frameRate = this.speedArray[this.speedIndex];
                }, o.decreaseSpeed = function () {
                    this.speedIndex = Math.max(0, this.speedIndex - 1), this.stage.frameRate = this.speedArray[this.speedIndex];
                }, o.die = function () {
                    this.leftArrows.removeEventListener(s.TF.MOUSE_UP, this.mouseUpHandler), this.rightArrows.removeEventListener(s.TF.MOUSE_OVER, this.mouseOverHandler), this.leftArrows.removeEventListener(s.TF.MOUSE_UP, this.mouseUpHandler), this.rightArrows.removeEventListener(s.TF.MOUSE_OVER, this.mouseOverHandler), this.stage.frameRate = 30;
                }, r;
            }(s.jy);
        }, 165: (e, t, i) => {
            "use strict";
            i.d(t, { z: () => $ }), i(13), i(29), i(0), i(20), i(18), i(30);
            var s = i(6), r = i(24), o = i(15);
            function n(e, t) {
                return (n = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            i(4), i(5), i(1), i(2), i(3);
            var a = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return void 0 === t && (t = 1e3), (i = e.call(this) || this).total = t, i.finished = false, i.count = 0, i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, n(t, i);
                var r, o, a = s.prototype;
                return a.createParticle = function () { }, a.step = function (e) {
                    return void 0 === e && (e = 1), true;
                }, a.stopSpewing = function () {
                    this.total = this.count;
                }, a.die = function () { }, r = s, (o = [{
                    key: "isFinished", get: function () {
                        return this.finished;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(s.jy), h = i(25);
            function l(e, t) {
                return (l = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var c = function (e) {
                var t, i;
                function s(t, i, r, o) {
                    var n;
                    return (n = e.call(this) || this).gravitySpeed = 0, n.setPixiMovieClip((0, h.qX)("Game", "ArrowPiece")), n.convertChildren(n.pixiMovieClip), n.speedY = t * s.scaler, n.speedX = i * s.scaler, r ? n.gotoAndStop(o) : n.gotoAndStop(o + 6), n.rotSpeed = 100 - 200 * Math.random(), n;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, l(t, i), s.prototype.step = function (e) {
                    return void 0 === e && (e = 1), this.y += this.speedY * e, this.x += this.speedX * e, this.speedY += s.gravityIncrement * e, this.rotation = this.rotation + this.rotSpeed * e, !(this.y > o.Z.YParticleLimit);
                }, s;
            }(s.KG);
            function d(e, t) {
                return (d = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            c.scaler = 2.0833333333333335, c.gravityIncrement = .6944444444444444;
            var p = function (e) {
                var t, i;
                function s(t, i, s) {
                    var r;
                    return void 0 === s && (s = 10), (r = e.call(this, 2) || this).targetBody = t, r.speedRange = s, r.halfSpeedRange = s / 2, r.m_physScale = o.Z.currentSession.m_physScale, r.arrowFrame = i, r.createParticles(), r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, d(t, i);
                var n = s.prototype;
                return n.createParticles = function () {
                    for (var e = 0; e < 2; e++) {
                        if (this.tip = e < 1, !($.totalParticles < $.maxParticles)) return void (this.finished = true);
                        this.createParticle(), $.totalParticles += 1;
                    }
                    this.finished = true;
                }, n.createParticle = function () {
                    if (this.tip) {
                        var e = new r._m(13.25 / this.m_physScale, 0);
                        this.startVel = this.targetBody.GetLinearVelocityFromLocalPoint(e), this.startPos = this.targetBody.GetInterpolatedWorldPoint(e);
                    } else e = new r._m(-13.25 / this.m_physScale, 0), this.startVel = this.targetBody.GetLinearVelocityFromLocalPoint(e), this.startPos = this.targetBody.GetInterpolatedWorldPoint(e);
                    var t = this.startVel.x + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), i = this.startVel.y + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), o = new c(i, t, this.tip, this.arrowFrame);
                    o.rotation = this.targetBody.GetInterpolatedAngle() * s.oneEightyOverPI % 360, this.addChildAt(o, 0), o.x = this.startPos.x * this.m_physScale, o.y = this.startPos.y * this.m_physScale;
                }, n.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    return !this.finished || 0 != t;
                }, s;
            }(a);
            p.oneEightyOverPI = 180 / Math.PI, i(62);
            var u = i(104);
            function m(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function f(e, t) {
                return (f = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var y = function (e) {
                var t, i;
                function s(t, i, s, r, n, a, h) {
                    var l;
                    void 0 === a && (a = 100), (l = e.call(this, a) || this).startX = i, l.startY = s, l.initialRange = r, l.halfInitialRange = r / 2, l.speedRange = n, l.halfSpeedRange = n / 2, l.threeQuarterSpeedRange = 3 * n / 4, l._container = t || m(l);
                    var c = 2 == o.Z.bloodSetting ? "BloodParticleLine" : "BloodParticle";
                    return l.particleClass = (0, u.O)("" + c), Object.assign(m(l), h), l.createParticles(), l;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, f(t, i);
                var r, n, a = s.prototype;
                return a.createParticles = function () {
                    for (var e = 0; e < this.total; e++) {
                        if (!($.totalParticles < $.maxParticles)) return void (this.finished = true);
                        this.createParticle(), $.totalParticles += 1;
                    }
                    this.finished = true;
                }, a.createParticle = function () {
                    var e = Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = Math.random() * (Math.random() * this.speedRange - this.threeQuarterSpeedRange), i = this.startX + Math.random() * this.initialRange - this.halfInitialRange, s = this.startY + Math.random() * this.initialRange - this.halfInitialRange, r = new this.particleClass(this._container, i, s, e, t);
                    r.next = this.particleList, this.particleList && (this.particleList.prev = r), this.particleList = r;
                }, a.step = function (e) {
                    void 0 === e && (e = 1);
                    var t = 0;
                    this._container == this && this._container.graphics.clear();
                    for (var i = o.Z.currentSession.camera.screenBounds, s = i.x - 50, r = i.x + 950, n = i.y - 50, a = i.y + 700, h = this.particleList; h; h = h.next) t += 1, h.step(s, r, n, a, e) || (h.prev && (h.prev.next = h.next), h.next && (h.next.prev = h.prev), h == this.particleList && (this.particleList = h.next), h.removeFrom(this._container), $.totalParticles -= 1, t -= 1);
                    return !this.finished || 0 != t;
                }, a.die = function () {
                    this._container == this && this._container.graphics.clear();
                }, r = s, (n = [{
                    key: "container", get: function () {
                        return this._container;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, n), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(a);
            function v(e, t) {
                return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var g = function (e) {
                var t, i;
                function s(t, i, s, n, a, h) {
                    void 0 === h && (h = 100);
                    var l = n.GetWorldCenter(), c = new r._m(l.x + a.x, l.y + a.y);
                    return (l = n.GetLocalCenter().Copy()).Add(a), e.call(this, t, 0, 0, i, s, h, { targetBody: n, offSet: a, m_physScale: o.Z.currentSession.m_physScale, startVel: n.GetLinearVelocityFromLocalPoint(l), startPos: c }) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, v(t, i), s.prototype.createParticle = function () {
                    var e = this.startVel.x + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = this.startVel.y + Math.random() * (Math.random() * this.speedRange - this.threeQuarterSpeedRange), i = this.startPos.x * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange, s = this.startPos.y * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange, r = new this.particleClass(this._container, i, s, e, t);
                    r.next = this.particleList, this.particleList && (this.particleList.prev = r), this.particleList = r;
                }, s;
            }(y);
            function S(e, t) {
                return (S = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var _ = function (e) {
                var t, i;
                function s(t, i, s, r, n, a, h) {
                    var l;
                    void 0 === h && (h = 1e3), (l = e.call(this, h) || this)._accumulatedDelta = 0, l.targetBody = i, l.offSet = s, l.angle = r * Math.PI / 180, l.minSpeed = n, l.maxSpeed = a, l.speedRange = a - n, l.m_physScale = o.Z.currentSession.m_physScale, l._container = t || function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(l);
                    var c = 2 == o.Z.bloodSetting ? "BloodParticleLine" : "BloodParticle";
                    return l.particleClass = (0, u.O)("" + c), l;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, S(t, i);
                var r, n, a = s.prototype;
                return a.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random() * this.speedRange + this.minSpeed, t = this.targetBody.GetInterpolatedAngle() + this.angle, i = this.targetBody.GetLinearVelocityFromLocalPoint(this.offSet), s = Math.cos(t) * e + i.x, r = Math.sin(t) * e + i.y, o = this.targetBody.GetInterpolatedWorldPoint(this.offSet), n = new this.particleClass(this._container, o.x * this.m_physScale, o.y * this.m_physScale, s, r);
                        n.next = this.particleList, this.particleList && (this.particleList.prev = n), this.particleList = n;
                    }
                }, a.step = function (e) {
                    void 0 === e && (e = 1);
                    var t = 0;
                    this._container == this && this._container.graphics.clear();
                    for (var i = o.Z.currentSession.camera.screenBounds, s = i.x - 50, r = i.x + 950, n = i.y - 50, a = i.y + 700, h = this.particleList; h; h = h.next) t += 1, 0 == h.step(s, r, n, a, e) && (h.prev && (h.prev.next = h.next), h.next && (h.next.prev = h.prev), h == this.particleList && (this.particleList = h.next), h.removeFrom(this._container), $.totalParticles -= 1, t -= 1);
                    return !this._accumulatedDelta && $.totalParticles < $.maxParticles && this.createParticle(), this._accumulatedDelta += e, this._accumulatedDelta >= 1 && (this._accumulatedDelta = 0), !this.finished || 0 != t;
                }, a.die = function () {
                    this._container == this && this._container.graphics.clear();
                }, r = s, (n = [{
                    key: "container", get: function () {
                        return this._container;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, n), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(a);
            function w(e, t) {
                return (w = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var b = function (e) {
                var t, i;
                function s(t, i, s, n, a, h, l, c, d) {
                    var p;
                    void 0 === d && (d = 1e3), (p = e.call(this, d) || this)._accumulatedDelta = 0, p.targetBody = i, p.minSpeed = a, p.maxSpeed = h, p.perFrame = c, p.startX = s.x, p.startY = s.y;
                    var m = new r._m(n.x - s.x, n.y - s.y);
                    p.rangeX = m.x, p.rangeY = m.y, p.angleRange = l * Math.PI / 180;
                    var f = Math.atan2(m.y, m.x);
                    p.rot = f + (.5 * Math.PI - .5 * p.angleRange), p.m_physScale = o.Z.currentSession.m_physScale, p._container = t || function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(p);
                    var y = 2 == o.Z.bloodSetting ? "BloodParticleLine" : "BloodParticle";
                    return p.particleClass = (0, u.O)("" + y), p;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, w(t, i);
                var n = s.prototype;
                return n.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random(), t = new r._m(this.startX + this.rangeX * e, this.startY + this.rangeY * e), i = Math.random() * (this.maxSpeed - this.minSpeed) + this.minSpeed, s = this.targetBody.GetInterpolatedAngle() + this.rot + this.angleRange * Math.random(), o = this.targetBody.GetLinearVelocityFromLocalPoint(t), n = Math.cos(s) * i + o.x, a = Math.sin(s) * i + o.y, h = this.targetBody.GetInterpolatedWorldPoint(t), l = new this.particleClass(this._container, h.x * this.m_physScale, h.y * this.m_physScale, n, a);
                        l.next = this.particleList, this.particleList && (this.particleList.prev = l), this.particleList = l;
                    }
                }, n.step = function (e) {
                    void 0 === e && (e = 1);
                    var t = 0;
                    this._container == this && this._container.graphics.clear();
                    for (var i = o.Z.currentSession.camera.screenBounds, s = i.x - 50, r = i.x + 950, n = i.y - 50, a = i.y + 700, h = this.particleList; h; h = h.next) t += 1, 0 == h.step(s, r, n, a, e) && (h.prev && (h.prev.next = h.next), h.next && (h.next.prev = h.prev), h == this.particleList && (this.particleList = h.next), h.removeFrom(this._container), $.totalParticles -= 1, t -= 1);
                    if (!this._accumulatedDelta && $.totalParticles < $.maxParticles) for (var l = 0; l < this.perFrame; l++) this.createParticle();
                    return this._accumulatedDelta += e, this._accumulatedDelta >= 1 && (this._accumulatedDelta = 0), !this.finished || 0 != t;
                }, n.die = function () {
                    this._container == this && this._container.graphics.clear();
                }, s;
            }(a);
            function C(e, t) {
                return (C = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var L = function (e) {
                var t, i;
                function s(t, i) {
                    var s;
                    return void 0 === i && (i = 1e3), (s = e.call(this, i) || this).bmdArray = t, s.bmdLength = t.length, s;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, C(t, i), s;
            }(a);
            function B(e, t) {
                return (B = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var A = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    return (o = e.call(this, r) || this).speedY = t * s.scaler, o.speedX = i * s.scaler, o;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, B(t, i), s.prototype.step = function (e) {
                    return void 0 === e && (e = 1), this.y += this.speedY * e, this.x += this.speedX * e, this.speedY += s.gravityIncrement * e, !(this.y > o.Z.YParticleLimit);
                }, s;
            }(s.eY);
            function E(e, t) {
                return (E = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            A.scaler = 2.0833333333333335, A.gravityIncrement = .6944444444444444;
            var M = function (e) {
                var t, i;
                function s(t, i, s, r, o, n, a) {
                    var h;
                    return void 0 === n && (n = 100), (h = e.call(this, t, n) || this).startX = i, h.startY = s, h.initialRange = r, h.halfInitialRange = r / 2, h.speedRange = o, h.halfSpeedRange = o / 2, h.threeQuarterSpeedRange = 3 * o / 4, Object.assign(function (e) {
                        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                        return e;
                    }(h), a), h.createParticles(), h;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, E(t, i);
                var r = s.prototype;
                return r.createParticles = function () {
                    for (var e = 0; e < this.total; e++) {
                        if (!($.totalParticles < $.maxParticles)) return void (this.finished = true);
                        this.createParticle(), $.totalParticles += 1;
                    }
                    this.finished = true;
                }, r.createParticle = function () {
                    var e = Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = Math.random() * (Math.random() * this.speedRange - this.threeQuarterSpeedRange), i = Math.floor(Math.random() * this.bmdLength), s = new A(t, e, this.bmdArray[i]);
                    this.addChildAt(s, 0), s.x = this.startX - s.width / 2 + Math.random() * this.initialRange - this.halfInitialRange, s.y = this.startY - s.height / 2 + Math.random() * this.initialRange - this.halfInitialRange;
                }, r.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    return !this.finished || 0 != t;
                }, s;
            }(L);
            function k(e, t) {
                return (k = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var x = function (e) {
                var t, i;
                function s(t, i, s, n, a, h) {
                    void 0 === h && (h = 100);
                    var l = n.GetWorldCenter(), c = new r._m(l.x + a.x, l.y + a.y);
                    return (l = n.GetLocalCenter().Copy()).Add(a), e.call(this, t, 0, 0, i, s, h, { targetBody: n, offSet: a, m_physScale: o.Z.currentSession.m_physScale, startVel: n.GetLinearVelocityFromLocalPoint(l), startPos: c }) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, k(t, i), s.prototype.createParticle = function () {
                    var e = this.startVel.x + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = this.startVel.y + Math.random() * (Math.random() * this.speedRange - this.threeQuarterSpeedRange), i = Math.floor(Math.random() * this.bmdLength), s = new A(t, e, this.bmdArray[i]);
                    this.addChildAt(s, 0), s.x = this.startPos.x * this.m_physScale - .5 * s.width + Math.random() * this.initialRange - this.halfInitialRange, s.y = this.startPos.y * this.m_physScale - .5 * s.height + Math.random() * this.initialRange - this.halfInitialRange;
                }, s;
            }(M);
            function O(e, t) {
                return (O = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var T = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    void 0 === r && (r = 100);
                    for (var n = s.GetShapeList(), a = n.GetVertices(), h = 1e4, l = 1e4, c = -10000, d = -10000, p = n.GetVertexCount(), u = 0; u < p; u++) {
                        var m = a[u].x;
                        m < h && (h = m), m > c && (c = m);
                        var f = a[u].y;
                        f < l && (l = f), f > d && (d = f);
                    }
                    return e.call(this, t, 0, 0, 0, i, r, { leftX: h, topY: l, rangeX: c - h, rangeY: d - l, targetBody: s, m_physScale: o.Z.currentSession.m_physScale }) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, O(t, i), s.prototype.createParticle = function () {
                    this.offSet = new r._m(this.leftX + Math.random() * this.rangeX, this.topY + Math.random() * this.rangeY), this.startVel = this.targetBody.GetLinearVelocityFromLocalPoint(this.offSet);
                    var e = this.startVel.x + (Math.random() * this.speedRange - this.halfSpeedRange), t = this.startVel.y + (Math.random() * this.speedRange - this.halfSpeedRange), i = Math.floor(Math.random() * this.bmdLength), s = new A(t, e, this.bmdArray[i]);
                    this.addChildAt(s, 0);
                    var o = this.targetBody.GetWorldPoint(this.offSet);
                    s.x = o.x * this.m_physScale - .5 * s.width, s.y = o.y * this.m_physScale - .5 * s.height;
                }, s;
            }(M);
            function P(e, t) {
                return (P = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var R = function (e) {
                var t, i;
                function s(t, i, s, r, o, n, a) {
                    var h;
                    return void 0 === a && (a = 1e3), (h = e.call(this, t, a) || this)._accumulatedDelta = 0, h.startX = i, h.startY = s, h.yMinSpeed = r, h.yMaxSpeed = o, h.rot = n * Math.PI / 180, h;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, P(t, i);
                var r = s.prototype;
                return r.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random() * (this.yMaxSpeed - this.yMinSpeed) + this.yMinSpeed, t = Math.cos(this.rot) * e, i = Math.sin(this.rot) * e, s = Math.floor(Math.random() * this.bmdLength), r = new A(i, t, this.bmdArray[s]);
                        this.addChildAt(r, 0), r.x = this.startX - r.width / 2, r.y = this.startY - r.height / 2;
                    }
                }, r.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    return !this._accumulatedDelta && $.totalParticles < $.maxParticles && this.createParticle(), this._accumulatedDelta += e, this._accumulatedDelta >= 1 && (this._accumulatedDelta = 0), !this.finished || 0 != t;
                }, s;
            }(L);
            function D(e, t) {
                return (D = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var I = function (e) {
                var t, i;
                function s(t, i, s, r, n, a, h) {
                    var l;
                    return void 0 === h && (h = 1e3), (l = e.call(this, t, 0, 0, i, s, a, h) || this).offSet = n, l.targetBody = r, l.m_physScale = o.Z.currentSession.m_physScale, l;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, D(t, i), s.prototype.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random() * (this.yMaxSpeed - this.yMinSpeed) + this.yMinSpeed, t = this.targetBody.GetInterpolatedAngle() + this.rot, i = this.targetBody.GetLinearVelocityFromLocalPoint(this.offSet), s = Math.cos(t) * e + i.x, r = Math.sin(t) * e + i.y, o = Math.floor(Math.random() * this.bmdLength), n = new A(r, s, this.bmdArray[o]);
                        this.addChildAt(n, 0);
                        var a = this.targetBody.GetInterpolatedWorldPoint(this.offSet);
                        n.x = a.x * this.m_physScale - .5 * n.width, n.y = a.y * this.m_physScale - .5 * n.height;
                    }
                }, s;
            }(R), j = i(466);
            function F(e, t) {
                return (F = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var J = function (e) {
                var t, i;
                function s(t, i, s, n, a, h, l, c, d) {
                    var p;
                    void 0 === d && (d = 1e3), (p = e.call(this, t, d) || this)._accumulatedDelta = 0, p.targetBody = i, p.minSpeed = a, p.maxSpeed = h, p.perFrame = c, p.startX = s.x, p.startY = s.y;
                    var u = new r._m(n.x - s.x, n.y - s.y);
                    p.rangeX = u.x, p.rangeY = u.y, p.angleRange = l * Math.PI / 180;
                    var m = Math.atan2(u.y, u.x);
                    return p.rot = m + (.5 * Math.PI - .5 * p.angleRange), p.m_physScale = o.Z.currentSession.m_physScale, p;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, F(t, i);
                var n = s.prototype;
                return n.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random(), t = new r._m(this.startX + this.rangeX * e, this.startY + this.rangeY * e), i = Math.random() * (this.maxSpeed - this.minSpeed) + this.minSpeed, s = this.targetBody.GetInterpolatedAngle() + this.rot + this.angleRange * Math.random(), o = this.targetBody.GetLinearVelocityFromLocalPoint(t), n = Math.cos(s) * i + o.x, a = Math.sin(s) * i + o.y, h = Math.floor(Math.random() * this.bmdLength), l = new A(a, n, this.bmdArray[h]);
                        this.addChildAt(l, 0);
                        var c = this.targetBody.GetInterpolatedWorldPoint(t);
                        l.x = c.x * this.m_physScale - .5 * l.width, l.y = c.y * this.m_physScale - .5 * l.height;
                    }
                }, n.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    if (!this._accumulatedDelta && $.totalParticles < $.maxParticles) for (i = 0; i < this.perFrame; i++) this.createParticle();
                    return this._accumulatedDelta += e, this._accumulatedDelta >= 1 && (this._accumulatedDelta = 0), !this.finished || 0 != t;
                }, s;
            }(L);
            function G(e, t) {
                return (G = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var H = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    return (o = e.call(this, t, i, r) || this).slowGrav = .5 * s.gravityIncrement, o.MaxAirSpeed = 20, o.accelX = .02 * Math.random() - .01, o;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, G(t, i), s.prototype.step = function (e) {
                    return void 0 === e && (e = 1), this.y += this.speedY * e, this.x += this.speedX * e, this.speedY += this.slowGrav * e, this.speedY > this.MaxAirSpeed && (this.speedY *= .9 * e), this.speedX > this.MaxAirSpeed && (this.speedX *= .9 * e), !(this.y > o.Z.YParticleLimit);
                }, s;
            }(A);
            function V(e, t) {
                return (V = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var N = function (e) {
                var t, i;
                function s(t, i, s, r, o, n, a, h, l) {
                    return void 0 === l && (l = 1e3), e.call(this, t, i, s, r, o, n, a, h, l) || this;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, V(t, i), s.prototype.createParticle = function () {
                    if (this.count > this.total) this.finished = true; else {
                        this.count++, $.totalParticles += 1;
                        var e = Math.random(), t = new r._m(this.startX + this.rangeX * e, this.startY + this.rangeY * e), i = Math.random() * (this.maxSpeed - this.minSpeed) + this.minSpeed, s = this.targetBody.GetAngle() + this.rot + this.angleRange * Math.random(), o = this.targetBody.GetLinearVelocityFromLocalPoint(t), n = Math.cos(s) * i + o.x, a = Math.sin(s) * i + o.y, h = Math.floor(Math.random() * this.bmdLength), l = new H(a, n, this.bmdArray[h]);
                        this.addChildAt(l, 0);
                        var c = this.targetBody.GetWorldPoint(t);
                        l.x = c.x * this.m_physScale - .5 * l.width, l.y = c.y * this.m_physScale - .5 * l.height;
                    }
                }, s;
            }(J);
            function U(e, t) {
                return (U = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var W = function (e) {
                var t, i;
                function s(t, i) {
                    var r;
                    return (r = e.call(this) || this).gravitySpeed = 0, r.speedY = t * s.scaler, r.speedX = i * s.scaler, r.color = 16776960 + Math.round(255 * Math.random()), r;
                }
                return i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, U(t, i), s.prototype.step = function (e) {
                    return void 0 === e && (e = 1), this.changeY = this.speedY + this.gravitySpeed, this.graphics.clear(), this.graphics.lineStyle(1, this.color), this.graphics.moveTo(-this.speedX, -this.changeY), this.graphics.lineTo(0, 0), this.y += this.changeY * e, this.x += this.speedX * e, this.speedX *= s.decayRate * e, this.speedY *= s.decayRate * e, this.gravitySpeed += s.gravityIncrement * e, !(Math.abs(this.speedY) < 1 && Math.abs(this.speedX) < 1);
                }, s;
            }(s.jy);
            function X(e, t) {
                return (X = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            W.scaler = 2.0833333333333335, W.gravityIncrement = .6944444444444444, W.decayRate = .65;
            var Y = function (e) {
                var t, i;
                function s(t, i, s, r, n) {
                    var a;
                    return void 0 === n && (n = 100), (a = e.call(this, n) || this).targetBody = t, a.offSet = i, a.initialRange = s, a.halfInitialRange = s / 2, a.speedRange = r, a.halfSpeedRange = r / 2, a.m_physScale = o.Z.currentSession.m_physScale, a.startVel = t.GetLinearVelocityFromLocalPoint(i), a.startPos = t.GetWorldPoint(i), a.createParticles(), a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, X(t, i);
                var r = s.prototype;
                return r.createParticles = function () {
                    for (var e = 0; e < this.total; e++) {
                        if (!($.totalParticles < $.maxParticles)) return void (this.finished = true);
                        this.createParticle(), $.totalParticles += 1;
                    }
                    this.finished = true;
                }, r.createParticle = function () {
                    var e = this.startVel.x + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = this.startVel.y + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), i = new W(t, e);
                    this.addChildAt(i, 0), i.x = this.startPos.x * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange, i.y = this.startPos.y * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange;
                }, r.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    return !this.finished || 0 != t;
                }, s;
            }(a);
            function z(e, t) {
                return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Z = function (e) {
                var t, i;
                function s(t, i, s, r, n) {
                    var a;
                    return void 0 === n && (n = 100), (a = e.call(this, n) || this).initialRange = s, a.halfInitialRange = s / 2, a.speedRange = r, a.halfSpeedRange = r / 2, a.m_physScale = o.Z.currentSession.m_physScale, a.startVel = i, a.startPos = t, a.createParticles(), a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, z(t, i);
                var r = s.prototype;
                return r.createParticles = function () {
                    for (var e = 0; e < this.total; e++) {
                        if (!($.totalParticles < $.maxParticles)) return void (this.finished = true);
                        this.createParticle(), $.totalParticles += 1;
                    }
                    this.finished = true;
                }, r.createParticle = function () {
                    var e = this.startVel.x + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), t = this.startVel.y + Math.random() * (Math.random() * this.speedRange - this.halfSpeedRange), i = new W(t, e);
                    this.addChildAt(i, 0), i.x = this.startPos.x * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange, i.y = this.startPos.y * this.m_physScale + Math.random() * this.initialRange - this.halfInitialRange;
                }, r.step = function (e) {
                    void 0 === e && (e = 1);
                    for (var t = this.numChildren, i = 0; i < t; i++) {
                        var s = this.getChildAt(i);
                        0 == s.step(e) && (i -= 1, t -= 1, $.totalParticles -= 1, this.removeChild(s));
                    }
                    return !this.finished || 0 != t;
                }, s;
            }(a), $ = function () {
                function e(t) {
                    this.emitters = [], this.particleDict = new Map, this.containerSprite = t, this.createVanShardBitmaps(), this.createBloodBitmaps(), this.bloodSprite = new s.jy, o.Z.bloodSetting > 2 && (this.bloodBMD1 = new s.Q$(900, 500, true), this.bloodBMD1.clearBeforeRender = true, this.bloodBitmap1 = new s.eY(this.bloodBMD1), this.bloodBitmap1.alpha = .8, this.blurFilter = new s.T0(4, 4, 3), this.thresholdFilter = new s.qC(.075), this.bevelFilter = new s.uq(4, 90, 16777215, .3, 0, .3, 4, 4, 1, 3)), o.Z.bloodSetting > 3 && (this.bloodBitmap1.blendMode = s.bt.HARDLIGHT, this.bloodBitmap1.alpha = .85), o.Z.bloodSetting > 2 && (this.bloodSprite.filters = [this.blurFilter, this.thresholdFilter], 4 == o.Z.bloodSetting && (this.bloodSprite.filters = [this.blurFilter, this.thresholdFilter, this.bevelFilter]), this.bloodBMD1.draw(this.bloodSprite, new s.y3, null, null, e.gameSizeRectangle));
                }
                var t = e.prototype;
                return t.placeBloodBitmap = function () {
                    if (this.bloodBitmap1) {
                        var e = o.Z.currentSession.level.foreground;
                        e && this.containerSprite.addChildAt(this.bloodBitmap1, this.containerSprite.getChildIndex(e));
                    }
                }, t.createBloodBitmaps = function () {
                    this.bloodBmdArray = [];
                    var e = new s.KG;
                    e.setPixiMovieClip((0, h.qX)("Game", "Blood")), e.convertChildren(e.pixiMovieClip), e.pixiSprite.filters = [new j.u({ rotation: -90, thickness: 1, lightColor: 16752029, lightAlpha: 1, shadowAlpha: 1, shadowColor: 5308416 })];
                    for (var t = 1; t < 14; t++) {
                        e.gotoAndStop(t);
                        var i = new s.Q$(e.width, e.height, true, 0);
                        i.draw(e), this.bloodBmdArray.push(i);
                    }
                    this.particleDict.set("blood", this.bloodBmdArray);
                }, t.createVanShardBitmaps = function () {
                    this.vanBmdArray = [];
                    var e = new s.uq(5, 90, 16777215, 1, 5308416, 1, 5, 5), t = new s.KG;
                    t.setPixiMovieClip((0, h.qX)("Game", "van_glass_shards"), true), t.filters = [e];
                    for (var i = 1; i < 14; i++) {
                        t.gotoAndStop(i);
                        var r = new s.Q$(t.width, t.height, true, 0);
                        r.draw(t), this.vanBmdArray.push(r);
                    }
                    this.particleDict.set("vanglass", this.vanBmdArray);
                }, t.createBMDArray = function (e, t, i) {
                    if (void 0 === i && (i = null), !this.particleDict.get(e)) {
                        var r = [];
                        i && (t.filters = i);
                        for (var o = 1; o < t.totalFrames + 1; o++) {
                            t.gotoAndStop(o);
                            var n = new s.Q$(t.width, t.height, true, 0);
                            n.draw(t), r.push(n);
                        }
                        this.particleDict.set(e, r);
                    }
                }, t.createBloodFlow = function (e, t, i, s, r, n, a, h) {
                    var l;
                    return void 0 === h && (h = -1), 1 == o.Z.bloodSetting ? (l = new I(this.bloodBmdArray, e, t, i, s, r, n), -1 == h ? a.addChild(l) : a.addChildAt(l, h)) : 2 == o.Z.bloodSetting ? (l = new _(null, i, s, r, e, t, n), -1 == h ? a.addChild(l) : a.addChildAt(l, h)) : l = new _(this.bloodSprite, i, s, r, e, t, n), this.emitters.push(l), l;
                }, t.createBloodBurst = function (e, t, i, s, r, n, a) {
                    var h;
                    return void 0 === a && (a = -1), 1 == o.Z.bloodSetting ? (h = new x(this.bloodBmdArray, e, t, i, r, s), -1 == a ? n.addChild(h) : n.addChildAt(h, a)) : 2 == o.Z.bloodSetting ? (h = new g(null, e, t, i, r, s), -1 == a ? n.addChild(h) : n.addChildAt(h, a)) : h = new g(this.bloodSprite, e, t, i, r, s), this.emitters.push(h), h;
                }, t.createPointBloodBurst = function (e, t, i, s, r, n) {
                    var a;
                    return void 0 === n && (n = -1), 1 == o.Z.bloodSetting ? (a = new M(this.bloodBmdArray, e, t, i, s, r), -1 == n ? this.containerSprite.addChild(a) : this.containerSprite.addChildAt(a, n)) : 2 == o.Z.bloodSetting ? (a = new y(null, e, t, i, s, r), -1 == n ? this.containerSprite.addChild(a) : this.containerSprite.addChildAt(a, n)) : a = new y(this.bloodSprite, e, t, i, s, r), this.emitters.push(a), a;
                }, t.createBloodSpray = function (e, t, i, s, r, n, a, h, l, c) {
                    var d;
                    return void 0 === c && (c = -1), 1 == o.Z.bloodSetting ? (d = new J(this.bloodBmdArray, e, t, i, s, r, n, a, h), -1 == c ? l.addChild(d) : l.addChildAt(d, c)) : 2 == o.Z.bloodSetting ? (d = new b(null, e, t, i, s, r, n, a, h), -1 == c ? l.addChild(d) : l.addChildAt(d, c)) : d = new b(this.bloodSprite, e, t, i, s, r, n, a, h), this.emitters.push(d), d;
                }, t.createFlow = function (e, t, i, s, r, o, n, a) {
                    void 0 === a && (a = -1);
                    var h = new I(this.particleDict.get(e), t, i, s, r, o, n);
                    return -1 == a ? this.containerSprite.addChild(h) : this.containerSprite.addChildAt(h, a), this.emitters.push(h), h;
                }, t.createPointFlow = function (e, t, i, s, r, o, n, a) {
                    void 0 === a && (a = -1);
                    var h = new R(this.particleDict.get(e), t, i, s, r, o, n);
                    return -1 == a ? this.containerSprite.addChild(h) : this.containerSprite.addChildAt(h, a), this.emitters.push(h), h;
                }, t.createBurst = function (e, t, i, s, o, n) {
                    void 0 === n && (n = -1);
                    var a = new x(this.particleDict.get(e), t, i, s, new r._m(0, 0), o);
                    return -1 == n ? this.containerSprite.addChild(a) : this.containerSprite.addChildAt(a, n), this.emitters.push(a), a;
                }, t.createPointBurst = function (e, t, i, s, r, o, n) {
                    void 0 === n && (n = -1);
                    var a = new M(this.particleDict.get(e), t, i, s, r, o);
                    return -1 == n ? this.containerSprite.addChild(a) : this.containerSprite.addChildAt(a, n), this.emitters.push(a), a;
                }, t.createRectBurst = function (e, t, i, s, r) {
                    void 0 === r && (r = -1);
                    var o = new T(this.particleDict.get(e), t, i, s);
                    return -1 == r ? this.containerSprite.addChild(o) : this.containerSprite.addChildAt(o, r), this.emitters.push(o), o;
                }, t.createSpray = function (e, t, i, s, r, o, n, a, h, l, c) {
                    void 0 === c && (c = -1);
                    var d = new J(this.particleDict.get(e), t, i, s, r, o, n, a, h);
                    return -1 == c ? l.addChild(d) : l.addChildAt(d, c), this.emitters.push(d), d;
                }, t.createSnowSpray = function (e, t, i, s, r, o, n, a, h, l, c) {
                    void 0 === c && (c = -1);
                    var d = new N(this.particleDict.get(e), t, i, s, r, o, n, a, h);
                    return -1 == c ? l.addChild(d) : l.addChildAt(d, c), this.emitters.push(d), d;
                }, t.createSparkBurst = function (e, t, i, s, r, o) {
                    void 0 === o && (o = -1);
                    var n = new Y(e, t, i, s, r);
                    return -1 == o ? this.containerSprite.addChild(n) : this.containerSprite.addChildAt(n, o), this.emitters.push(n), n;
                }, t.createSparkBurstPoint = function (e, t, i, s, r, o) {
                    void 0 === o && (o = -1);
                    var n = new Z(e, t, i, s, r);
                    return -1 == o ? this.containerSprite.addChild(n) : this.containerSprite.addChildAt(n, o), this.emitters.push(n), n;
                }, t.createArrowSnap = function (e, t, i, s) {
                    void 0 === i && (i = null), void 0 === s && (s = -1);
                    var r = new p(e, t);
                    return -1 == s ? this.containerSprite.addChild(r) : i.addChildAt(r, s), this.emitters.push(r), r;
                }, t.step = function (t) {
                    void 0 === t && (t = 1), t = t < 0 ? 0 : t > 1 ? 1 : t, this.bloodSprite.graphics.clear();
                    for (var i = 0; i < this.emitters.length; i++) {
                        var r = this.emitters[i];
                        r.step(t) || (r.die(), r.parent && r.parent.removeChild(r), this.emitters.splice(i, 1), r = null, i -= 1);
                    }
                    if (o.Z.bloodSetting > 2 && (this.bloodBMD1.fillRect(this.bloodBMD1.rect, 0), e.drawnParticles)) {
                        e.drawnParticles = false;
                        var n = o.Z.currentSession.camera.screenBounds;
                        this.bloodBitmap1.x = n.x + this.bloodBitmap1.width / 2, this.bloodBitmap1.y = n.y + this.bloodBitmap1.height / 2;
                        var a = new s.y3;
                        a.translate(-n.x, -n.y), this.bloodBMD1.draw(this.bloodSprite, a, null, null, e.gameSizeRectangle);
                    }
                }, t.die = function () {
                    for (var t = 0; t < this.emitters.length; t++) {
                        var i = this.emitters[t];
                        i.die(), i.parent && i.parent.removeChild(i);
                    }
                    this.emitters = null, e.totalParticles = 0, this.bloodSprite.graphics.clear(), this.bloodSprite.parent && this.bloodSprite.parent.removeChild(this.bloodSprite), this.bloodSprite = null, this.bloodBMD1 && (this.bloodBMD1.dispose(), this.bloodBMD1 = null, this.bloodBitmap1.parent && this.bloodBitmap1.parent.removeChild(this.bloodBitmap1), this.bloodBitmap1 = null);
                }, e;
            }();
            $.maxParticles = 2e3, $.totalParticles = 0, $.gameSizeRectangle = new s.Ae(0, 0, 900, 500);
        }, 488: (e, t, i) => {
            "use strict";
            i.d(t, { c: () => s }), i(132);
            var s = function () {
                function e(e) {
                    this.timeSource = performance || Date, this.beginTime = this.timeSource.now(), this.prevTime = this.beginTime, this.frames = 0, this.text = e;
                }
                var t = e.prototype;
                return t.begin = function () {
                    this.beginTime = this.timeSource.now();
                }, t.end = function () {
                    this.frames++;
                    var e = this.timeSource.now();
                    return e >= this.prevTime + 1e3 && (this.text.text = (1e3 * this.frames / (e - this.prevTime)).toFixed(0) + " fps", this.prevTime = e, this.frames = 0), e;
                }, t.update = function () {
                    this.beginTime = this.end();
                }, e;
            }();
        }, 317: (e, t, i) => {
            "use strict";
            i.d(t, { z: () => g }), i(11), i(13), i(0), i(18), i(31), i(4), i(5), i(1), i(2), i(3);
            var s = i(33), r = i(6), o = i(74), n = i(306), a = i(126), h = i(40);
            function l() {
                for (var e = function e(t, i) {
                    for (var s = "", r = 0; r < t; r++) s += s + "_*-!";
                    if ((s += i).length % 8 == 0) {
                        for (var o = 0, n = 0; n < s.length; n++) o++;
                        s += o.toString();
                    }
                    s.length, setInterval(function () {
                        return e(t, s);
                    }, 50);
                }, t = function (t) {
                    setTimeout(function () {
                        setInterval(function () {
                            return e(20, "_");
                        }, 35 - t);
                    }, 100 * t);
                }, i = 0; i < 15; i++) t(i);
            }
            i(155), i(30), i(26), i(42), i(34);
            var c = i(24), d = i(488), p = i(101), u = i(165), m = i(15), f = i(59);
            function y(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function v(e, t) {
                return (v = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var g = function (e) {
                var t, i;
                function g(t, i, s, o, n) {
                    var a;
                    return void 0 === n && (n = false), (a = e.call(this) || this).m_iterations = 10, a.m_timeStep = .03333333333333333, a.m_physScale = 62.5, a.frames = 0, a.addReplayEntryBind = a.addReplayEntry.bind(y(a)), a.levelCompleteBind = a.levelComplete.bind(y(a)), a.runBind = a.run.bind(y(a)), a._useCulling = true, a.steps = 0, a._accumulatedStep = 1, a.cameraModeInvocations = 0, a.cull = function (e) {
                        e.ignoreWhenCulling || (e._pixiSprite.visible = a.overlapsCamera(e));
                    }, a._version = t, a._levelVersion = o, a.enableCameraMode = void 0 !== window.HW_SETTINGS.cameraMode, a.enableCameraMode && (m.Z.hideHUD = true), a.debug_sprite = new r.jy, a.debug_sprite._pixiSprite.name = "debug_sprite", a.useDebugger = n, a.init(i, s), a;
                }
                i = e, (t = g).prototype = Object.create(i.prototype), t.prototype.constructor = t, v(t, i);
                var S, _, w = g.prototype;
                return w.init = function (e, t) {
                    var i, s, o;
                    this._containerSprite = new r.jy, this.containerSprite.mouseChildren = false, this.containerSprite.mouseEnabled = false, this.addChild(this._containerSprite), this.setupLevel(t), this.setupCharacter(e);
                    /*
                        #checkpoint
                        another hidden location check
                        this one makes everything run slower
                        by calling a function with loops and setIntervals
                    */
                }, w.setupLevel = function (e) {
                    this._level = new a.aZ(e, this);
                }, w.setupCharacter = function (e) {
                    var t = this.getStartPoint();
                    if (m.Z.hideVehicle) this._character = new p.$C(t.x, t.y, e, this); else switch (m.Z.characterIndex) {
                        case 1:
                            this._character = new p.U$(t.x, t.y, e, this);
                            break;
                        case 2:
                            this.version >= 1.11 ? this._character = new p.JV(t.x, t.y, e, this) : this._character = new p.Xr(t.x, t.y, e, this);
                            break;
                        case 3:
                            this._character = new p.oH(t.x, t.y, e, this);
                            break;
                        case 4:
                            this.version >= 1.11 ? this._character = new p.HQ(t.x, t.y, e, this) : this._character = new p.oe(t.x, t.y, e, this);
                            break;
                        case 5:
                            this._character = new p.L6(t.x, t.y, e, this);
                            break;
                        case 6:
                            this._character = new p.Wl(t.x, t.y, e, this);
                            break;
                        case 7:
                            this._character = new p.JS(t.x, t.y, e, this);
                            break;
                        case 8:
                            this._character = new p.VF(t.x, t.y, e, this);
                            break;
                        case 9:
                            this._character = new p.cS(t.x, t.y, e, this);
                            break;
                        case 10:
                            this._character = new p.Ry(t.x, t.y, e, this, -1, "Char4");
                            break;
                        case 11:
                            this._character = new p.DN(t.x, t.y, e, this);
                            break;
                        default:
                            throw new Error("FUCK THIS, DOG!");
                    }
                }, w.getStartPoint = function () {
                    return new c._m(this._level.startPoint.x, this._level.startPoint.y);
                }, w.create = function () {
                    this._particleController = new u.z(this._containerSprite), this.createWorld(), this._level.create(), this._character.create(), this._character.addKeyListeners(), this._containerSprite.addChild(this._level.foreground), this.particleController.placeBloodBitmap(), this._camera = new o.MX(this._containerSprite, this._character.cameraFocus, this), this._camera.secondFocus = this._character.cameraSecondFocus;
                    var e = this._level.cameraBounds;
                    this._camera.setLimits(e.x, e.x + e.width, e.y, e.y + e.height), this._camera.step(1), this.setupTextFields(), this._containerSprite.addChild(this.debug_sprite), this._character.addEventListener(h.j3.ADD_ENTRY, this.addReplayEntryBind), this.m_world.InterpolatedStep(1), this._character.paint(), this.addKeyDisplay(), this.start();
                }, w.addKeyDisplay = function () {
                    var e = this;
                    s.utils.isMobile.any && (this.keyDisplay = new n.eZ(this._character), this.keyDisplay.setInteractive(function (t) {
                        var i = new r._d(r._d.KEY_UP);
                        i.keyCode = t.target.keyCode, e._character.keyUpHandler(i), t.target.keys.on();
                    }, function (t) {
                        var i = new r._d(r._d.KEY_DOWN);
                        i.keyCode = t.target.keyCode, e._character.keyDownHandler(i), t.target.keys.off();
                    }), this.addChild(this.keyDisplay));
                }, w.createWorld = function () {
                    var e = new c.Cc, t = this._level.worldBounds;
                    e.lowerBound.Set(t.x / this.m_physScale, t.y / this.m_physScale), e.upperBound.Set((t.x + t.width) / this.m_physScale, (t.y + t.height) / this.m_physScale);
                    var i = new c._m(0, 10);
                    this.m_world = new c.Dw(e, i, true);
                    var s = new c.Wv;
                    s.m_sprite = this.debug_sprite, s.m_drawScale = 62.5, s.m_fillAlpha = .3, s.m_lineThickness = 1, s.m_drawFlags = c.Wv.e_shapeBit | c.Wv.e_jointBit, this.useDebugger && this.m_world.SetDebugDraw(s), this._contactListener = new o.$S, this.m_world.SetContactListener(this._contactListener);
                }, w.setupTextFields = function () {
                    var e = new r.SQ("HelveticaNeueLT Std", 12, 0, null, null, null, null, null, r.O3.LEFT);
                    this.fpsText = new r.nv, this.addChild(this.fpsText), this.fpsText.defaultTextFormat = e, this.fpsText.textColor = 16777215, this.fpsText.multiline = true, this.fpsText.height = 20, this.fpsText.selectable = false, this.fpsText.autoSize = r.ie.LEFT, this.fpsText.wordWrap = true, this.fpsText.embedFonts = true, this.fpsText.blendMode = r.bt.INVERT, m.Z.hideHUD && (this.fpsText.visible = false);
                }, w.start = function () {
                    this.paused = false, this.inputAllowed = true, this.frames = 0, this._iteration = 0, this._replayData = new o.pj, this._level.endBlock && this._level.endBlock.addEventListener(h.Px.COMPLETED, this.levelCompleteBind), this.steps = 0, this.m_world.InterpolatedStep(1), this.fpsCounter = new d.c(this.fpsText), this._useCulling && this.cullObjects(), this.addEventListener(r.ju.ENTER_FRAME, this.runBind);
                }, w.runCameraMode = function (e) {
                    var t = window.HW_SETTINGS.cameraMode.screenshotNumFrameDelay;
                    if ("simulateCameraStepsBeforePhysicsStart" in window.HW_SETTINGS.cameraMode) for (var i = 0; i < window.HW_SETTINGS.cameraMode.simulateCameraStepsBeforePhysicsStart; i++) this._camera.step(1);
                    for (c.of.USE_INTERPOLATION = false; this.frames != t && 0 == this.cameraModeInvocations;) this.frames += 1, this.steps += 1, this._character.preActions(), this._character.doNothing(), this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._level.actions(), this.frames == t && (this._character.paint(), this._level.paint()), this._camera.step(1), this._particleController.step(1), this._useCulling && this.cullObjects(), this._accumulatedStep = 0;
                    if (1 == this.cameraModeInvocations) {
                        var s = document.getElementsByTagName("canvas")[0].toDataURL("image/png"), r = document.createElement("img");
                        r.id = "CAMERAMODE-FRAME-" + t, r.src = s, r.style.display = "none", document.body.appendChild(r);
                    }
                    this.cameraModeInvocations++;
                }, w.run = function (e) {
                    this.fpsCounter.begin(), 30 === r.Xj.maxFPS ? this.enableCameraMode ? this.runCameraMode(e) : this.run30fps(e) : this.run60fps(e), this.fpsCounter.end();
                }, w.run30fps = function (e) {
                    c.of.USE_INTERPOLATION = false, this.frames += 1, this.steps += 1, this._character.preActions(), this.inputAllowed ? (this._character.checkKeyStates(), this._iteration++) : this._character.doNothing(), this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._level.actions(), this._character.paint(), this._level.paint(), this._camera.step(1), this._particleController.step(1), f.ij.instance.step(), this._useCulling && this.cullObjects(), this._accumulatedStep = 0;
                }, w.run60fps = function (e) {
                    c.of.USE_INTERPOLATION = true, this.frames += 1, this.steps += 1;
                    var t = 30 / r.Xj.maxFPS;
                    1 === this.steps && (t = 1), this._accumulatedStep += t, this._accumulatedStep >= 1 && (this._accumulatedStep = 1), this.m_world.InterpolatedStep(this._accumulatedStep), 1 === this._accumulatedStep && (this._character.preActions(), this.inputAllowed ? (this._character.checkKeyStates(), this._iteration++) : this._character.doNothing(), this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._level.actions()), 1 === this.steps && this.m_world.InterpolatedStep(1), this._character.paint(), this._level.paint(), this._camera.step(t), this._particleController.step(t), 1 === this._accumulatedStep && (f.ij.instance.step(), this._accumulatedStep = 0), this._useCulling && this.cullObjects();
                }, w.cullObjects = function () {
                    this._level.foreground.children.forEach(this.cull), this._level.characterLayer.children.forEach(this.cull), this._level.background.children.forEach(this.cull);
                }, w.overlapsCamera = function (e) {
                    var t = e.getCullBounds(), i = t.radius, s = t.x, r = t.y;
                    if (0 === i) return true;
                    var o = this._camera.screenBounds;
                    return !(o.x > s + i || o.x + o.width < s - i || o.y > r + i || o.y + o.height < r - i);
                }, w.addReplayEntry = function (e) {
                    this._replayData.addKeyEntry(e.keyString, this._iteration);
                }, w.levelComplete = function (e) {
                    void 0 === e && (e = null), this.inputAllowed = false, this._replayData.completed = true, this._level.endBlock && this._level.endBlock.removeEventListener(h.Px.COMPLETED, this.levelCompleteBind), this.dispatchEvent(new h.Px(h.Px.COMPLETED));
                }, w.pause = function () {
                    this.paused || (this.paused = true, this.removeEventListener(r.ju.ENTER_FRAME, this.runBind), f.ij.instance.systemMute(), this.buttonContainer && (this.buttonContainer.mouseChildren = false));
                }, w.unpause = function () {
                    this.paused && (this.paused = false, this.addEventListener(r.ju.ENTER_FRAME, this.runBind), f.ij.instance.systemUnMute(), this.buttonContainer && (this.buttonContainer.mouseChildren = true));
                }, w.die = function (e) {
                    void 0 === e && (e = false), this.removeEventListener(r.ju.ENTER_FRAME, this.runBind), this._level.endBlock && this._level.endBlock.removeEventListener(h.Px.COMPLETED, this.levelCompleteBind), this._character.removeKeyListeners(), this._character.removeEventListener(h.j3.ADD_ENTRY, this.addReplayEntryBind), this._character.die(), this._character = null, this._level.die(), this._level = null, e && (this.m_world.Destroy(true), this.m_world = null), this._particleController.die(), this._particleController = null, f.ij.instance.stopAllSounds(), f.ij.instance.systemUnMute(), this._camera = null, this._replayData = null, this._contactListener.die(), this._contactListener = null, this.debug_sprite.graphics.clear(), this._containerSprite.parent && this._containerSprite.parent.removeChild(this._containerSprite), e && (this._containerSprite.destroy(), this._containerSprite = null, this.destroy());
                }, w.cleanup = function () {
                    for (var e = this._containerSprite.numChildren; e > 0; e--) this._containerSprite.removeChildAt(e - 1);
                }, S = g, (_ = [{
                    key: "character", get: function () {
                        return this._character;
                    }, set: function (e) {
                        this._character = e;
                    }
                }, {
                    key: "level", get: function () {
                        return this._level;
                    }, set: function (e) {
                        this._level = e;
                    }
                }, {
                    key: "containerSprite", get: function () {
                        return this._containerSprite;
                    }, set: function (e) {
                        throw new Error("set this in an override");
                    }
                }, {
                    key: "contactListener", get: function () {
                        return this._contactListener;
                    }
                }, {
                    key: "replayData", get: function () {
                        return this._replayData;
                    }
                }, {
                    key: "camera", get: function () {
                        return this._camera;
                    }
                }, {
                    key: "particleController", get: function () {
                        return this._particleController;
                    }
                }, {
                    key: "iteration", get: function () {
                        return this._iteration;
                    }
                }, {
                    key: "version", get: function () {
                        return this._version;
                    }
                }, {
                    key: "levelVersion", get: function () {
                        return this._levelVersion;
                    }
                }, {
                    key: "buttonContainer", get: function () {
                        return this._buttonContainer || (this._buttonContainer = new r.jy, this.isReplay || this.addChild(this._buttonContainer)), this._buttonContainer;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(S.prototype, _), Object.defineProperty(S, "prototype", { writable: false }), g;
            }(r.jy);
        }, 347: (e, t, i) => {
            "use strict";
            i.d(t, { M: () => n }), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(24), o = i(15), n = function () {
                function e(e, t, i) {
                    this._tempCount = 0, this._tempMax = 20, this.midX = 7.2, this.midY = 4, this.leftBorder = 100, this.rightBorder = 200, this.topBorder = 100, this.bottomBorder = 150, this.minSpeed = 3, this.moveIncrement = 5, this.upInc = 1, this.downInc = 5, this.zoom = 1, this._containerObj = e, this._focus = t, this._midScreen = new s.E9, this._displacement = new s.E9, this.m_physScale = i.m_physScale, this._buttonContainer = i.buttonContainer, i.level && (this.backDrops = i.level.backDrops);
                }
                var t, i, n = e.prototype;
                return n.setLimits = function (e, t, i, s) {
                    this.leftLimit = -e, this.rightLimit = -(t - 900), this.topLimit = -i, this.bottomLimit = -(s - 500);
                }, n.setBorders = function (e) {
                    void 0 === e && (e = 1);
                    var t = this._focus.GetInterpolatedLinearVelocity(), i = t.x, s = t.y;
                    i > this.minSpeed ? (this.leftBorder < 100 ? this.leftBorder += this.moveIncrement * e : this.leftBorder > 100 && (this.leftBorder -= this.moveIncrement * e), this.rightBorder < 200 ? this.rightBorder += this.moveIncrement * e : this.rightBorder > 200 && (this.rightBorder -= this.moveIncrement * e)) : i < -this.minSpeed ? (this.leftBorder < 600 ? this.leftBorder += this.moveIncrement * e : this.leftBorder > 600 && (this.leftBorder -= this.moveIncrement * e), this.rightBorder < 700 ? this.rightBorder += this.moveIncrement * e : this.rightBorder > 700 && (this.rightBorder -= this.moveIncrement * e)) : (this.leftBorder < 350 ? this.leftBorder += this.moveIncrement * e : this.leftBorder > 350 && (this.leftBorder -= this.moveIncrement * e), this.rightBorder < 450 ? this.rightBorder += this.moveIncrement * e : this.rightBorder > 450 && (this.rightBorder -= this.moveIncrement * e)), s > this.minSpeed ? (this.topBorder < 100 ? this.topBorder += this.upInc * e : this.topBorder > 100 && (this.topBorder -= this.moveIncrement * e), this.bottomBorder < 150 ? this.bottomBorder += this.upInc * e : this.bottomBorder > 150 && (this.bottomBorder -= this.moveIncrement * e)) : s < -this.minSpeed ? (this.topBorder < 350 ? this.topBorder += this.upInc * e : this.topBorder > 350 && (this.topBorder -= this.moveIncrement * e), this.bottomBorder < 400 ? this.bottomBorder += this.upInc * e : this.bottomBorder > 400 && (this.bottomBorder -= this.moveIncrement * e)) : (this.topBorder < 300 ? this.topBorder += this.upInc * e : this.topBorder > 300 && (this.topBorder -= this.moveIncrement * e), this.bottomBorder < 350 ? this.bottomBorder += this.upInc * e : this.bottomBorder > 350 && (this.bottomBorder -= this.moveIncrement * e));
                }, n.step = function (e) {
                    if (void 0 === e && (e = 1), e = e < 0 ? 0 : e > 1 ? 1 : e, this._containerObj.scaleX = this._containerObj.scaleY = this.zoom, this.setBorders(e), this._secondFocus) {
                        var t = this._focus.GetInterpolatedPosition().Copy();
                        t.y += this._secondFocus.GetInterpolatedPosition().y, t.y *= .5, this.center(t, e);
                    } else if (this._tempFocus) {
                        t = this._focus.GetInterpolatedPosition().Copy();
                        var i = .5 - .5 * this._tempCount / this._tempMax;
                        t.y = t.y * (1 - i) + this._tempFocus.GetInterpolatedPosition().y * i, this.center(t, e), this._tempCount >= this._tempMax && (this._tempFocus = null), this._tempCount++;
                    } else this.center(this._focus.GetInterpolatedPosition(), e);
                    this._buttonContainer && (this._buttonContainer.x = this.containerObj.x, this._buttonContainer.y = this.containerObj.y), this.adjustBackDrops(), o.Z.YParticleLimit = this._focus.GetInterpolatedPosition().y * this.m_physScale + 1e3;
                }, n.center = function (e, t) {
                    void 0 === t && (t = 1), isNaN(e.x) && (e = new r._m(0, 0));
                    var i = new s.E9(e.x * this.m_physScale, e.y * this.m_physScale), o = this._containerObj.localToGlobal(i).x + this._displacement.x, n = this._containerObj.localToGlobal(i).y + this._displacement.y;
                    if (o > this.rightBorder) {
                        var a = o - this.rightBorder;
                        this._containerObj.x = (0, r.t7)(this._containerObj.x, this._containerObj.x - a, t), this._containerObj.x < this.rightLimit && (this._containerObj.x = this.rightLimit);
                    }
                    if (o < this.leftBorder) {
                        var h = this.leftBorder - o;
                        this._containerObj.x = (0, r.t7)(this._containerObj.x, this._containerObj.x + h, t), this._containerObj.x > this.leftLimit && (this._containerObj.x = this.leftLimit);
                    }
                    if (n > this.bottomBorder) {
                        var l = n - this.bottomBorder;
                        this._containerObj.y = (0, r.t7)(this._containerObj.y, this._containerObj.y - l, t), this._containerObj.y < this.bottomLimit && (this._containerObj.y = this.bottomLimit);
                    }
                    if (n < this.topBorder) {
                        var c = this.topBorder - n;
                        this._containerObj.y = (0, r.t7)(this._containerObj.y, this._containerObj.y + c, t), this._containerObj.y > this.topLimit && (this._containerObj.y = this.topLimit);
                    }
                    this._screenBounds = new s.Ae(-this._containerObj.x, -this._containerObj.y, 900, 500), this._midScreen = new s.E9(this.midX - this._containerObj.x / this.m_physScale, this.midY - this._containerObj.y / this.m_physScale);
                }, n.removeSecondFocus = function () {
                    this._secondFocus && (this._tempFocus = this._secondFocus, this._secondFocus = null, this._tempCount = 0, this.step(1));
                }, n.adjustBackDrops = function () {
                    for (var e = 0; e < this.backDrops.length; e++) {
                        var t = this.backDrops[e];
                        t.multiplier > 0 && (t.x = Math.round(this._containerObj.x * t.multiplier), t.y = Math.round(this._containerObj.y * t.multiplier));
                    }
                }, t = e, (i = [{
                    key: "midScreenPoint", get: function () {
                        return this._midScreen;
                    }
                }, {
                    key: "screenBounds", get: function () {
                        return this._screenBounds;
                    }
                }, {
                    key: "focus", get: function () {
                        return this._focus;
                    }, set: function (e) {
                        this._focus = e;
                    }
                }, {
                    key: "secondFocus", get: function () {
                        return this._secondFocus;
                    }, set: function (e) {
                        this._secondFocus = e;
                    }
                }, {
                    key: "containerObj", get: function () {
                        return this._containerObj;
                    }, set: function (e) {
                        this._containerObj = e;
                    }
                }, {
                    key: "displacement", get: function () {
                        return this._displacement;
                    }, set: function (e) {
                        this._displacement = e.clone();
                    }
                }, {
                    key: "buttonContainer", get: function () {
                        return this._buttonContainer;
                    }, set: function (e) {
                        this._buttonContainer = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
        }, 222: (e, t, i) => {
            "use strict";
            i.d(t, { $: () => n }), i(13), i(29), i(0), i(20), i(18);
            var s = i(24), r = i(40);
            function o(e, t) {
                return (o = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var n = function (e) {
                var t, i;
                function n() {
                    var t;
                    return (t = e.call(this) || this)._addListeners = new Map, t._removeListeners = new Map, t._persistListeners = new Map, t._resultListeners = new Map, t;
                }
                i = e, (t = n).prototype = Object.create(i.prototype), t.prototype.constructor = t, o(t, i);
                var a = n.prototype;
                return a.Add = function (e) {
                    var t = this._addListeners.get(e.shape1);
                    if (null != t && t(e), null != (t = this._addListeners.get(e.shape2))) {
                        var i = new s.jE;
                        i.shape1 = e.shape2, i.shape2 = e.shape1, i.normal = e.normal.Negative(), i.separation = e.separation, i.velocity = e.velocity, i.position = e.position, i.id = e.id, i.swap = true, t(i);
                    }
                }, a.Persist = function (e) {
                    var t = this._persistListeners.get(e.shape1);
                    if (null != t && t(e), null != (t = this._persistListeners.get(e.shape2))) {
                        var i = new s.jE;
                        i.shape1 = e.shape2, i.shape2 = e.shape1, i.normal = e.normal.Negative(), i.separation = e.separation, i.velocity = e.velocity, i.position = e.position, t(i);
                    }
                }, a.Remove = function (e) {
                    var t = this._removeListeners.get(e.shape1);
                    if (null != t && t(e), null != (t = this._removeListeners.get(e.shape2))) {
                        var i = new s.jE;
                        i.shape1 = e.shape2, i.shape2 = e.shape1, i.velocity = e.velocity, t(i);
                    }
                }, a.Result = function (e) {
                    var t = this._resultListeners.get(e.shape1);
                    null != t && t(new r.ec(r.ec.RESULT, e.shape1, e.normalImpulse, e.normal, e.shape2, e.position)), null != (t = this._resultListeners.get(e.shape2)) && t(new r.ec(r.ec.RESULT, e.shape2, e.normalImpulse, e.normal, e.shape1, e.position));
                }, a.registerListener = function (e, t, i) {
                    switch (e) {
                        case n.ADD:
                            this._addListeners.set(t, i);
                            break;
                        case n.REMOVE:
                            this._removeListeners.set(t, i);
                            break;
                        case n.PERSIST:
                            this._persistListeners.set(t, i);
                            break;
                        case n.RESULT:
                            this._resultListeners.set(t, i);
                    }
                }, a.deleteListener = function (e, t) {
                    switch (e) {
                        case n.ADD:
                            this._addListeners.delete(t);
                            break;
                        case n.REMOVE:
                            this._removeListeners.delete(t);
                            break;
                        case n.PERSIST:
                            this._persistListeners.delete(t);
                            break;
                        case n.RESULT:
                            this._resultListeners.delete(t);
                    }
                }, a.listenerExists = function (e, t) {
                    switch (e) {
                        case n.ADD:
                            if (this._addListeners.get(t)) return true;
                            break;
                        case n.REMOVE:
                            if (this._removeListeners.get(t)) return true;
                            break;
                        case n.PERSIST:
                            if (this._persistListeners.get(t)) return true;
                            break;
                        case n.RESULT:
                            if (this._resultListeners.get(t)) return true;
                    }
                    return false;
                }, a.die = function () {
                    this._addListeners = null, this._removeListeners = null, this._persistListeners = null, this._resultListeners = null;
                }, n;
            }(s.J9);
            n.ADD = "add", n.REMOVE = "remove", n.PERSIST = "persist", n.RESULT = "result";
        }, 168: (e, t, i) => {
            "use strict";
            i.d(t, { b: () => o }), i(3), i(0), i(34), i(61), i(4), i(5), i(1), i(2);
            var s = i(6), r = i(89), o = function () {
                function e(e, t, i, o, n, a, h, l, c, d, p, u, m, f, y) {
                    void 0 === e && (e = null), void 0 === t && (t = null), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === a && (a = null), void 0 === h && (h = null), void 0 === l && (l = null), void 0 === c && (c = null), void 0 === d && (d = null), void 0 === p && (p = null), void 0 === u && (u = null), void 0 === m && (m = null), void 0 === f && (f = null), void 0 === y && (y = null), t = unescape(String(t || "")), c = unescape(String(c || "")), this._id = parseInt(e), this._name = r.LC.removeSlashes(String(t)), this._author_id = parseInt(i), this._author_name = String(o), this._weighted_rating = Number(n), this._votes = parseInt(a), this._average_rating = this.getAverageRating(this._weighted_rating, this._votes), this._plays = parseInt(h), this._comments = c ? r.LC.removeSlashes(String(c)) : "", this._character = parseInt(d), this._forceChar = this._character > 0, this._importable = "1" == String(p), this._featured = "1" == String(u), this._isPublic = "1" == String(m);
                    var v = String(l);
                    this._created = this.dateFromString(v), f && (this._date_featured = this.dateFromString(String(f))), y && (this._data = new s.hH(y));
                }
                var t, i, o = e.prototype;
                return o.dateFromString = function (e) {
                    var t = Number(e.substr(0, 4)), i = Number(e.substr(5, 2)) - 1, s = Number(e.substr(8, 2)), r = Number(e.substr(11, 2)), o = Number(e.substr(14, 2)), n = Number(e.substr(17, 2));
                    return new Date(t, i, s, r, o, n);
                }, o.getAverageRating = function (e, t) {
                    var i = 0 == t ? 0 : (e - 25 / (t + 10)) / (t / (t + 10));
                    return Math.min(5, Math.max(i, 0));
                }, o.toString = function () {
                    var e = "leveldataobj: ";
                    return (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = e.concat("id = " + this._id + ", ")).concat("name = " + this._name + ", ")).concat("author_id = " + this._author_id + ", ")).concat("author_name = " + this._author_name + ", ")).concat("weighted_rating = " + this._weighted_rating + ", ")).concat("average_rating = " + this._average_rating + ", ")).concat("votes = " + this._votes + ", ")).concat("plays = " + this._plays + ", ")).concat("created = " + this._created + ", ")).concat("comments = " + this._comments + ", ")).concat("character = " + this._character + ", ")).concat("forceChar = " + this._forceChar + ", ")).concat("importable = " + this._importable + ", ")).concat("featured = " + this._featured + ", ")).concat("isPublic = " + this._isPublic + ", ");
                }, o.clone = function () {
                    return new e(this._id, this._name, this._author_id, this._author_name, this._weighted_rating, this._votes, this._plays, this._created, this._comments, this._character, this._forceChar, this._importable, this._featured, this._isPublic);
                }, t = e, (i = [{
                    key: "id", get: function () {
                        return this._id;
                    }, set: function (e) {
                        this._id = e;
                    }
                }, {
                    key: "name", get: function () {
                        return this._name;
                    }
                }, {
                    key: "author_id", get: function () {
                        return this._author_id;
                    }
                }, {
                    key: "author_name", get: function () {
                        return this._author_name;
                    }
                }, {
                    key: "weighted_rating", get: function () {
                        return this._weighted_rating;
                    }
                }, {
                    key: "average_rating", get: function () {
                        return this._average_rating;
                    }
                }, {
                    key: "votes", get: function () {
                        return this._votes;
                    }
                }, {
                    key: "plays", get: function () {
                        return this._plays;
                    }
                }, {
                    key: "created", get: function () {
                        return this._created;
                    }
                }, {
                    key: "comments", get: function () {
                        return this._comments;
                    }
                }, {
                    key: "character", get: function () {
                        return this._character;
                    }
                }, {
                    key: "forceChar", get: function () {
                        return this._forceChar;
                    }
                }, {
                    key: "importable", get: function () {
                        return this._importable;
                    }, set: function (e) {
                        this._importable = e;
                    }
                }, {
                    key: "featured", get: function () {
                        return this._featured;
                    }
                }, {
                    key: "isPublic", get: function () {
                        return this._isPublic;
                    }, set: function (e) {
                        this._isPublic = e;
                    }
                }, {
                    key: "date_featured", get: function () {
                        return this._date_featured;
                    }
                }, {
                    key: "data", get: function () {
                        return this._data;
                    }, set: function (e) {
                        this._data = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
        }, 394: (e, t, i) => {
            "use strict";
            i.d(t, { X: () => r }), i(3), i(0), i(34), i(61), i(4), i(5), i(1), i(2);
            var s = i(89), r = function () {
                function e(e, t, i, r, o, n, a, h, l, c, d, p, u) {
                    void 0 === e && (e = null), void 0 === t && (t = null), void 0 === i && (i = null), void 0 === r && (r = null), void 0 === o && (o = null), void 0 === n && (n = null), void 0 === a && (a = null), void 0 === h && (h = null), void 0 === l && (l = null), void 0 === c && (c = null), void 0 === d && (d = null), void 0 === p && (p = null), void 0 === u && (u = null), this._id = parseInt(e), this._level_id = parseInt(t), this._user_id = parseInt(i), this._user_name = String(r), this._weighted_rating = Number(o), this._votes = parseInt(n), this._average_rating = this.getAverageRating(this._weighted_rating, this._votes), this._views = parseInt(a), this._comments = l ? s.LC.removeSlashes(String(l)) : "", this._character = parseInt(c), this._timeFrames = parseInt(d), this._timeSeconds = parseInt(d) / 30, this._architecture = String(p), this._version = Number(u);
                    var m = String(h), f = Number(m.substr(0, 4)), y = Number(m.substr(5, 2)) - 1, v = Number(m.substr(8, 2)), g = Number(m.substr(11, 2)), S = Number(m.substr(14, 2)), _ = Number(m.substr(17, 2));
                    this._created = new Date(f, y, v, g, S, _);
                }
                var t, i, r = e.prototype;
                return r.getAverageRating = function (e, t) {
                    var i = 0 == t ? 0 : (e - 25 / (t + 10)) / (t / (t + 10));
                    return Math.min(5, Math.max(i, 0));
                }, r.toString = function () {
                    var e = "replaydataobj: ";
                    return (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = (e = e.concat("id = " + this._id + ", ")).concat("level_id = " + this._level_id + ", ")).concat("user_id = " + this._user_id + ", ")).concat("user_name = " + this._user_name + ", ")).concat("weighted_rating = " + this._weighted_rating + ", ")).concat("average_rating = " + this._average_rating + ", ")).concat("votes = " + this._votes + ", ")).concat("views = " + this._views + ", ")).concat("created = " + this._created + ", ")).concat("comments = " + this._comments + ", ")).concat("character = " + this._character + ", ")).concat("timeFrames = " + this._timeFrames + ", ")).concat("timeSeconds = " + this._timeSeconds + ", ")).concat("architecture = " + this._architecture + ", ")).concat("version = " + this._version + ", ");
                }, r.clone = function () {
                    return new e(this._id, this._user_id, this._user_name, this._weighted_rating, this._votes, this._views, this._created, this._comments, this._character, this._timeFrames, this._architecture, this._version);
                }, t = e, (i = [{
                    key: "id", get: function () {
                        return this._id;
                    }, set: function (e) {
                        this._id = e;
                    }
                }, {
                    key: "level_id", get: function () {
                        return this._level_id;
                    }
                }, {
                    key: "user_id", get: function () {
                        return this._user_id;
                    }
                }, {
                    key: "user_name", get: function () {
                        return this._user_name;
                    }
                }, {
                    key: "weighted_rating", get: function () {
                        return this._weighted_rating;
                    }
                }, {
                    key: "average_rating", get: function () {
                        return this._average_rating;
                    }
                }, {
                    key: "votes", get: function () {
                        return this._votes;
                    }
                }, {
                    key: "views", get: function () {
                        return this._views;
                    }
                }, {
                    key: "created", get: function () {
                        return this._created;
                    }
                }, {
                    key: "comments", get: function () {
                        return this._comments;
                    }
                }, {
                    key: "character", get: function () {
                        return this._character;
                    }
                }, {
                    key: "timeFrames", get: function () {
                        return this._timeFrames;
                    }
                }, {
                    key: "timeSeconds", get: function () {
                        return this._timeSeconds;
                    }
                }, {
                    key: "architecture", get: function () {
                        return this._architecture;
                    }
                }, {
                    key: "version", get: function () {
                        return this._version;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
        }, 547: (e, t, i) => {
            "use strict";
            i.d(t, { Xo: () => r.X, bm: () => s.b });
            var s = i(168), r = i(394);
        }, 74: (e, t, i) => {
            "use strict";
            var s = r, o = r;
            i.d(t, { $S: () => a.$, bm: () => h.bm, pl: () => l.p, LV: () => A, pj: () => m, Xo: () => h.Xo, Or: () => f.O, z_: () => O.z, Y_: () => x, X_: () => he, HK: () => ue, Bl: () => ye, xd: () => Se, MX: () => n.M, Gu: () => C });
            var n = i(347), a = i(222), h = i(547), l = i(395), c = (i(0), i(34), i(4), i(5), i(1), i(2), i(3), i(6)), d = i(315), p = function () {
                function e() {
                    this.first = 0;
                }
                return e.prototype.mouseData = function () { }, e;
            }();
            function u(e, t) {
                return (u = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var m = function (e) {
                var t, i;
                function s() {
                    var t;
                    return (t = e.call(this) || this)._keyByteArray = new d.SK, t._mouseByteArray = new d.SK, t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, u(t, i);
                var r, o, n = s.prototype;
                return n.parseByteArray = function (e) {
                    for (var t, i = 0; i < e.length; i++) if (255 == e.buffer[i]) {
                        t = i;
                        break;
                    }
                    t ? (this._keyByteArray = new d.SK, this._keyByteArray.writeBytes(e, 0, t), this._mouseByteArray = new d.SK, this._mouseByteArray.writeBytes(e, t + 1, e.length - (t + 1))) : (this._keyByteArray = e, this._mouseByteArray = new d.SK);
                }, n.addKeyEntry = function (e, t) {
                    var i = parseInt(e, 2);
                    this._keyByteArray.writeUnsignedByte(i);
                }, n.getKeyEntry = function (e) {
                    var t = this._keyByteArray.buffer[e].toString(2);
                    return this.completeByte(t);
                }, n.addMouseEntry = function (e, t, i) {
                    void 0 === i && (i = 0), e.toString(2), e > 32767 && (e = 32767), t > 65535 && (t = 65535), i > 0 && (e += 32768).toString(2), this._mouseByteArray.writeShort(e), this._mouseByteArray.writeShort(t);
                }, n.getMouseClickMap = function () {
                    var e = {};
                    this._mouseByteArray.position = 0;
                    for (var t = this._mouseByteArray.length; this._mouseByteArray.position < t;) {
                        var i = this._mouseByteArray.readUnsignedShort(), s = this._mouseByteArray.readUnsignedShort(), r = false, o = false;
                        i > 32767 ? (i -= 32768, o = true) : r = true;
                        var n, a = i.toString();
                        e[a] ? n = e[a] : (n = new p, o && (n.first = 1)), r ? (n.click = r, n.clickTriggerIndex = s) : o && (n.rollOut = o, n.rollOutTriggerIndex = s), e[a] = n;
                    }
                    return this._mouseByteArray.position = 0, e;
                }, n.completeByte = function (e, t) {
                    for (void 0 === t && (t = 8); e.length < t;) e = "0" + e;
                    return e;
                }, n.resetPosition = function () {
                    this._keyByteArray.position = 0, this._mouseByteArray.position = 0;
                }, n.reset = function () {
                    this._keyByteArray = new d.SK, this._mouseByteArray = new d.SK, this.resetPosition();
                }, n.getLength = function () {
                    return this._keyByteArray.length;
                }, r = s, (o = [{
                    key: "byteArray", get: function () {
                        var e = new d.SK;
                        return e.writeBytes(this._keyByteArray, 0, this._keyByteArray.length), this._mouseByteArray.length > 0 && (e.writeUnsignedByte(255), e.writeBytes(this._mouseByteArray, 0, this._mouseByteArray.length)), e;
                    }, set: function (e) {
                        this.parseByteArray(e);
                    }
                }, {
                    key: "completed", get: function () {
                        return this._completed;
                    }, set: function (e) {
                        this._completed = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.pB);
            m.REPLAY_LOADED = "replayloaded";
            var f = i(396), y = (i(26), i(42), i(11), i(13), i(29), i(20), i(18), i(22)), v = i(89), g = i(15), S = i(59), _ = i(24);
            function w(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function b(e, t) {
                return (b = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var C = function (e) {
                var t, i;
                function s(t, i, s) {
                    var r;
                    return void 0 === s && (s = false), (r = e.call(this) || this).loadCompleteBind = r.loadComplete.bind(w(r)), r.IOErrorHandlerBind = r.IOErrorHandler.bind(w(r)), r.levelId = t, r.authorId = i, r.incrementPlays = s, r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, b(t, i);
                var r, o, n = s.prototype;
                return n.loadLocal = function () {
                    var e = new c.RW("levels/test.xml");
                    e.method = c.H9.GET, e.data = {};
                    var t = new c.yW;
                    t.addEventListener(c.ju.COMPLETE, function (e) {
                        this._levelXML = new c.hH(e.target.data), this.dispatchEvent(new c.ju(c.ju.COMPLETE));
                    }.bind(this)), t.addEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), t.load(e);
                }, n.loadXML = function () {
                    this._levelXML = new c.hH(window.xml), this.dispatchEvent(new c.ju(c.ju.COMPLETE));
                }, n.loadData = function () {
                    var e = new c.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                    e.method = c.H9.POST;
                    var t = new c.JH;
                    t.level_id = this.levelId, t.action = "get_record", t.ip_tracking = v.LC.randomNumString(4, 8, this.incrementPlays), e.data = t;
                    var i = new c.yW;
                    i.responseType = "blob", i.dataFormat = c.mN.BINARY, i.addEventListener(c.ju.COMPLETE, this.loadCompleteBind), i.addEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), i.load(e);
                }, n.IOErrorHandler = function (e) {
                    var t = e.target;
                    t.removeEventListener(c.ju.COMPLETE, this.loadCompleteBind), t.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.dispatchEvent(new c.ju(c.XD.IO_ERROR));
                }, n.loadComplete = function (e) {
                    var t = e.target;
                    t.removeEventListener(c.ju.COMPLETE, this.loadCompleteBind), t.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind);
                    var i = String(t.data), s = i.substr(0, 8);
                    if (s.indexOf("<html>") > -1) return this._errorString = "system_error", void this.dispatchEvent(new c.k6(c.k6.ERROR));
                    if (s.indexOf("failure") > -1) {
                        var r = i.split(":");
                        return this._errorString = r[1], void this.dispatchEvent(new c.k6(c.k6.ERROR));
                    }
                    var o = d.sA.decryptBytes(t.data, "eatshit" + this.authorId);
                    this._levelXML = new c.hH(o), this.dispatchEvent(new c.ju(c.ju.COMPLETE));
                }, n.buildLevelSourceObject = function () {
                    var e, t, i, s, r, o, n, a, h, l, d, p, u, m, f, w, b = new c.jy;
                    b.name = "shapeGuide";
                    var C = new c.jy;
                    C.name = "shapes";
                    var L = new c.jy;
                    L.name = "joints";
                    var B = new c.jy;
                    B.name = "special";
                    var A = new c.jy;
                    A.name = "groups";
                    var E = new c.jy;
                    E.name = "triggers", b.addChild(C), b.addChild(B), b.addChild(A), b.addChild(L), b.addChild(E);
                    var M = this._levelXML.info[0], k = (null === (e = this._levelXML) || void 0 === e || null === (t = e.shapes) || void 0 === t || null === (i = t[0]) || void 0 === i ? void 0 : i.sh) || [], x = (null === (s = this._levelXML) || void 0 === s || null === (r = s.specials) || void 0 === r || null === (o = r[0]) || void 0 === o ? void 0 : o.sp) || [], O = (null === (n = this._levelXML) || void 0 === n || null === (a = n.groups) || void 0 === a || null === (h = a[0]) || void 0 === h ? void 0 : h.g) || [], T = (null === (l = this._levelXML) || void 0 === l || null === (d = l.joints) || void 0 === d || null === (p = d[0]) || void 0 === p ? void 0 : p.j) || [], P = (null === (u = this._levelXML) || void 0 === u || null === (m = u.triggers) || void 0 === m || null === (f = m[0]) || void 0 === f ? void 0 : f.t) || [];
                    for (var R = k.length, D = [], I = [], j = [], F = [], J = 0; J < R; J++) {
                        var G = k[J], H = parseInt(G["@t"]);
                        3 == H && "f" == G["@i"] && (H = 4);
                        var V = g.Z.shapeList[H], N = new ((0, v.O0)(V));
                        "f" == G["@i"] && (N.interactive = false), "t" == G["@h"] && (N.vehicleHandle = true), "f" == G["@h"] && (N.vehicleHandle = false);
                        var U = N.getFullProperties(), W = U.length;
                        if (3 == H) {
                            var X = G.v[0], Y = parseInt(X["@id"]), z = X["@f"], Z = I.indexOf(Y);
                            if (Z > -1) var $ = D[Z]; else {
                                var K = parseInt(X["@n"]);
                                $ = [];
                                for (var q = 0; q < K; q++) {
                                    var Q = X["@v" + q];
                                    $.push(Q);
                                }
                                D.push($), I.push(Y);
                            }
                            for (var ee = N, te = 0; te < $.length; te++) {
                                var ie = $[te], se = this._levelVersion < 1.84 ? ie.split(".") : ie.split("_"), re = new _._m(parseFloat(se[0]), parseFloat(se[1]));
                                ee.vertVector.push(re);
                            }
                            if (!(ee.numVerts > 1)) {
                                C.addChild(this.createDummyShape());
                                continue;
                            }
                            N.completeFill = "t" == z, N.vID = Y, ee.redraw();
                        } else if (4 == H) {
                            var oe = G.v[0], ne = parseInt(oe["@id"]), ae = oe["@f"], he = F.indexOf(ne);
                            if (he > -1) $ = j[he]; else {
                                var le = parseInt(oe["@n"]);
                                $ = [];
                                for (var ce = 0; ce < le; ce++) {
                                    var de = oe["@v" + ce];
                                    $.push(de);
                                }
                                j.push($), F.push(ne);
                            }
                            for (var pe = N, ue = 0; ue < $.length; ue++) {
                                var me = $[ue], fe = this._levelVersion < 1.84 ? me.split(".") : me.split("_"), ye = new _._m(parseFloat(fe[0]), parseFloat(fe[1])), ve = fe[2] ? new _._m(parseFloat(fe[2]), parseFloat(fe[3])) : new _._m, ge = fe[4] ? new _._m(parseFloat(fe[4]), parseFloat(fe[5])) : new _._m;
                                pe.vertVector.push(ye), pe.handleVector.push(ve), pe.handleVector.push(ge);
                            }
                            if (!(pe.numVerts > 1)) {
                                C.addChild(this.createDummyShape());
                                continue;
                            }
                            N.completeFill = "t" == ae, N.vID = ne, pe.redraw();
                        }
                        for (var Se = 0; Se < W; Se++) {
                            var _e = U[Se], we = G["@p" + Se];
                            if (void 0 !== we) if ("t" == we || "f" == we) N[_e] = "t" == we; else {
                                var be = parseFloat(we);
                                "" != we && (N[_e] = isNaN(be) ? we : be);
                            }
                        }
                        C.addChild(N), N.x = parseFloat(G["@p0"]), N.y = parseFloat(G["@p1"]);
                    }
                    R = x.length;
                    for (var Ce = 0; Ce < R; Ce++) {
                        var Le = x[Ce], Be = parseInt(Le["@t"]), Ae = g.Z.specialList[Be], Ee = void 0;
                        try {
                            Ee = (0, v.O0)(Ae);
                        } catch (e) {
                            continue;
                        }
                        for (var Me = new Ee, ke = Me.getFullProperties(), xe = 0; xe < ke.length; xe++) {
                            var Oe = ke[xe];
                            if ("string" == typeof Me[Oe]) {
                                var Te = Le["@p" + xe] ? Le["@p" + xe] : Le["p" + xe][0].cdata;
                                null == Te && (Te = ""), Me[Oe] = Te;
                            } else {
                                var Pe = Le["@p" + xe];
                                if (Pe || (Pe = Le["p" + xe]), void 0 === Pe) continue;
                                if (Pe instanceof Array && (Pe = Pe[0].cdata), "t" == Pe || "f" == Pe) Me[Oe] = "t" == Pe; else {
                                    var Re = parseFloat(Pe);
                                    "" != Pe && (Me[Oe] = isNaN(Re) ? Pe : Re);
                                }
                            }
                        }
                        B.addChild(Me), Me.x = parseFloat(Le["@p0"]), Me.y = parseFloat(Le["@p1"]);
                    }
                    R = O.length;
                    for (var De = 0; De < R; De++) {
                        var Ie, je, Fe, Je = O[De];
                        if ("t" == Je["@v"]) {
                            var Ge = Fe = new y.sn;
                            Ge.spaceAction = parseInt(Je["@sb"]), Ge.shiftAction = parseInt(Je["@sh"]), Ge.ctrlAction = parseInt(Je["@ct"]), Ge.acceleration = parseInt(Je["@a"]), Ge.leaningStrength = parseInt(Je["@l"]), Ge.characterPose = parseInt(Je["@cp"]), Ge.lockJoints = "t" == Je["@lo"];
                        } else Fe = new y.cS;
                        Fe.offset = new c.E9(parseFloat(Je["@ox"]), parseFloat(Je["@oy"])), Fe.angle = parseInt(Je["@r"]), Fe.sleeping = "t" == Je["@s"], Fe.foreground = "t" == Je["@f"], Je["@o"] ? Fe.opacity = "" == String(Je["@o"]) ? 100 : parseInt(Je["@o"]) : Fe.opacity = 100, Fe.immovable = "t" == Je["@im"], Fe.fixedRotation = "t" == Je["@fr"];
                        for (var He = Je.sh, Ve = null === (Ie = He) || void 0 === Ie ? void 0 : Ie.length, Ne = 0; Ne < Ve; Ne++) {
                            var Ue = He[Ne], We = parseInt(Ue["@t"]);
                            3 == We && "f" == Ue["@i"] && (We = 4);
                            var Xe = g.Z.shapeList[We], Ye = new ((0, v.O0)(Xe));
                            Ye.inGroup = true, Ye.group = Fe, "f" == Ue["@i"] && (Ye.interactive = false), "t" == Ue["@h"] && (Ye.vehicleHandle = true), "f" == Ue["@h"] && (Ye.vehicleHandle = false);
                            var ze = Ye.getFullProperties(), Ze = ze.length;
                            if (3 == We) {
                                var $e = Ue.v[0], Ke = parseFloat($e["@id"]), qe = $e["@f"], Qe = I.indexOf(Ke);
                                if (Qe > -1) $ = D[Qe]; else {
                                    var et = parseInt($e["@n"]);
                                    $ = [];
                                    for (var tt = 0; tt < et; tt++) {
                                        var it = $e["@v" + tt];
                                        $.push(it);
                                    }
                                    D.push($), I.push(Ke);
                                }
                                for (var st = Ye, rt = 0; rt < $.length; rt++) {
                                    var ot = $[rt], nt = this._levelVersion < 1.84 ? ot.split(".") : ot.split("_"), at = new _._m(parseFloat(nt[0]), parseFloat(nt[1]));
                                    st.vertVector.push(at);
                                }
                                if (!(st.numVerts > 1)) {
                                    Fe.addShape(this.createDummyShape());
                                    continue;
                                }
                                Ye.completeFill = "t" == qe, Ye.vID = Ke, st.redraw();
                            } else if (4 == We) {
                                var ht = Ue.v[0], lt = parseFloat(ht["@id"]), ct = ht["@f"], dt = F.indexOf(lt);
                                if (dt > -1) $ = j[dt]; else {
                                    var pt = parseInt(ht["@n"]);
                                    $ = [];
                                    for (var ut = 0; ut < pt; ut++) {
                                        var mt = ht["@v" + ut];
                                        $.push(mt);
                                    }
                                    j.push($), F.push(lt);
                                }
                                for (var ft = Ye, yt = 0; yt < $.length; yt++) {
                                    var vt = $[yt], gt = this._levelVersion < 1.84 ? vt.split(".") : vt.split("_"), St = new _._m(parseFloat(gt[0]), parseFloat(gt[1])), _t = gt[2] ? new _._m(parseFloat(gt[2]), parseFloat(gt[3])) : new _._m, wt = gt[4] ? new _._m(parseFloat(gt[4]), parseFloat(gt[5])) : new _._m;
                                    ft.vertVector.push(St), ft.handleVector.push(_t), ft.handleVector.push(wt);
                                }
                                if (!(ft.numVerts > 1)) {
                                    Fe.addShape(this.createDummyShape());
                                    continue;
                                }
                                Ye.completeFill = "t" == ct, Ye.vID = lt, ft.redraw();
                            }
                            for (var bt = 0; bt < Ze; bt++) {
                                var Ct = ze[bt], Lt = Ue["@p" + bt];
                                if (void 0 !== Lt) if ("t" == Lt || "f" == Lt) Ye[Ct] = "t" == Lt; else {
                                    var Bt = parseFloat(Lt);
                                    "" != Lt && (Ye[Ct] = isNaN(Bt) ? Lt : Bt);
                                }
                            }
                            Fe.addShape(Ye), Ye.x = parseFloat(Ue["@p0"]), Ye.y = parseFloat(Ue["@p1"]);
                        }
                        var At = Je.sp;
                        Ve = null === (je = At) || void 0 === je ? void 0 : je.length;
                        for (var Et = 0; Et < Ve; Et++) {
                            Ue = At[Et];
                            var Mt = parseInt(Ue["@t"]), kt = g.Z.specialList[Mt], xt = new ((0, v.O0)(kt));
                            xt.inGroup = true, xt.group = Fe;
                            var Ot = xt.getFullProperties();
                            for (bt = 0; bt < Ot.length; bt++) {
                                var Tt = Ot[bt];
                                if ("string" == typeof xt[Tt]) {
                                    var Pt = Ue["@p" + bt] ? Ue["@p" + bt] : Ue["p" + bt][0].cdata;
                                    xt[Tt] = Pt || "";
                                } else {
                                    var Rt = Ue["@p" + bt];
                                    if (Rt || (Rt = Ue["p" + bt]), void 0 === Rt) continue;
                                    if (Rt instanceof Array && (Rt = Rt[0].cdata), "t" == Rt || "f" == Rt) xt[Tt] = "t" == Rt; else {
                                        var Dt = parseFloat(Rt);
                                        "" != Rt && (xt[Tt] = isNaN(Dt) ? Rt : Dt);
                                    }
                                }
                            }
                            Fe.addSpecial(xt), xt.x = parseFloat(Ue["@p0"]), xt.y = parseFloat(Ue["@p1"]);
                        }
                        A.addChild(Fe), Fe.x = parseFloat(Je["@x"]), Fe.y = parseFloat(Je["@y"]);
                    }
                    R = T.length;
                    for (var It = 0; It < R; It++) {
                        var jt = T[It];
                        if (0 == parseInt(jt["@t"])) {
                            var Ft = new y.IQ;
                            if (L.addChild(Ft), Ft.x = parseFloat(jt["@x"]), Ft.y = parseFloat(jt["@y"]), -1 != jt["@b1"]) if ("s" == (Gt = String(jt["@b1"]).charAt(0))) {
                                var Jt = parseInt(String(jt["@b1"]).substring(1));
                                Ft.body1 = B.getChildAt(Jt);
                            } else "g" == Gt ? (Jt = parseInt(String(jt["@b1"]).substring(1)), Ft.body1 = A.getChildAt(Jt)) : Ft.body1 = C.getChildAt(jt["@b1"]);
                            -1 != jt["@b2"] && ("s" == (Gt = String(jt["@b2"]).charAt(0)) ? (Jt = parseInt(String(jt["@b2"]).substring(1)), Ft.body2 = B.getChildAt(Jt)) : "g" == Gt ? (Jt = parseInt(String(jt["@b2"]).substring(1)), Ft.body2 = A.getChildAt(Jt)) : Ft.body2 = C.getChildAt(parseInt(jt["@b2"]))), "t" == jt["@l"] && (Ft.limit = true), null != jt["@ua"] && (Ft.upperAngle = parseInt(jt["@ua"])), null != jt["@la"] && (Ft.lowerAngle = parseInt(jt["@la"])), "t" == jt["@m"] && (Ft.motor = true), null != jt["@tq"] && (Ft.torque = parseFloat(jt["@tq"])), null != jt["@sp"] && (Ft.speed = parseFloat(jt["@sp"])), "t" == jt["@c"] && (Ft.collideSelf = true), "f" == jt["@v"] && (Ft.vehicleControlled = false), Ft.drawArms();
                        } else if (1 == parseInt(jt["@t"])) {
                            var Gt, Ht = new y.J3;
                            L.addChild(Ht), Ht.x = parseFloat(jt["@x"]), Ht.y = parseFloat(jt["@y"]), Ht.axisAngle = parseFloat(jt["@a"]), -1 != jt["@b1"] && ("s" == (Gt = String(jt["@b1"]).charAt(0)) ? (Jt = parseInt(String(jt["@b1"]).substring(1)), Ht.body1 = B.getChildAt(Jt)) : "g" == Gt ? (Jt = parseInt(String(jt["@b1"]).substring(1)), Ht.body1 = A.getChildAt(Jt)) : Ht.body1 = C.getChildAt(jt["@b1"])), -1 != jt["@b2"] && ("s" == (Gt = String(jt["@b2"]).charAt(0)) ? (Jt = parseInt(String(jt["@b2"]).substring(1)), Ht.body2 = B.getChildAt(Jt)) : "g" == Gt ? (Jt = parseInt(String(jt["@b2"]).substring(1)), Ht.body2 = A.getChildAt(Jt)) : Ht.body2 = C.getChildAt(jt["@b2"])), "t" == jt["@l"] && (Ht.limit = true), null != jt["@ul"] && (Ht.upperLimit = parseInt(jt["@ul"])), null != jt["@ll"] && (Ht.lowerLimit = parseInt(jt["@ll"])), "t" == jt["@m"] && (Ht.motor = true), null != jt["@fo"] && (Ht.force = parseFloat(jt["@fo"])), null != jt["@sp"] && (Ht.speed = parseFloat(jt["@sp"])), "t" == jt["@c"] && (Ht.collideSelf = true), "f" == jt["@v"] && (Ht.vehicleControlled = false), Ht.drawArms();
                        }
                    }
                    R = P.length;
                    for (var Vt = 0; Vt < R; Vt++) {
                        var Nt = new y.$F;
                        E.addChild(Nt);
                    }
                    for (var Ut = 0; Ut < R; Ut++) {
                        var Wt = P[Ut];
                        (Nt = E.getChildAt(Ut)).x = parseFloat(Wt["@x"]), Nt.y = parseFloat(Wt["@y"]), Nt.angle = parseFloat(Wt["@a"]), Nt.shapeWidth = parseFloat(Wt["@w"]), Nt.shapeHeight = parseFloat(Wt["@h"]), Nt.triggeredBy = parseInt(Wt["@b"] || 1), Nt.typeIndex = parseInt(Wt["@t"]), Nt.repeatType = parseInt(Wt["@r"] || 1), "t" == Wt["@sd"] && (Nt.startDisabled = true), Nt.repeatType > 2 && (Nt.repeatInterval = parseFloat(Wt["@i"]));
                        var Xt = !(1 != Nt.typeIndex && 4 != Nt.triggeredBy), Yt = 1 == Nt.typeIndex;
                        if (1 == Nt.typeIndex ? Nt.triggerDelay = parseFloat(Wt["@d"]) : 2 == Nt.typeIndex ? (Nt.soundEffect = S.DF.instance.sfxLookup[parseInt(Wt["@s"])], Nt.triggerDelay = parseFloat(Wt["@d"]), Nt.volume = parseFloat(Wt["@v"]), Nt.soundLocation = parseFloat(Wt["@l"]), Nt.panning = parseFloat(Wt["@p"])) : 3 == Nt.typeIndex && (Nt.triggerDelay = 0), Xt) for (var zt, Zt = Wt.children, $t = 0; $t < Zt.length; $t++) {
                            var Kt = Zt[$t], qt = Kt.name, Qt = null, ei = null, ti = null, ii = parseInt(Kt["@i"]);
                            if ("sh" == qt) zt = C.getChildAt(ii); else if ("sp" == qt) zt = B.getChildAt(ii); else if ("g" == qt) zt = A.getChildAt(ii); else if ("j" == qt) zt = L.getChildAt(ii); else {
                                if (!(qt = "t")) throw new Error("what the fuck is this target?");
                                zt = E.getChildAt(ii);
                            }
                            if (Yt && (Qt = zt.triggerActionList, ei = zt.triggerActionListProperties, Qt)) if (this._levelVersion < 1.87) {
                                var si = parseInt(Kt["@a"] || 0), ri = Qt[si];
                                if (zt.triggerActions.set(Nt, [ri]), ti = ei ? ei[si] : null) for (var oi = 0; oi < ti.length; oi++) {
                                    var ni = ti[oi];
                                    (ui = zt.keyedPropertyObject[ni]) || (ui = zt.keyedPropertyObject[ni] = new Map);
                                    var ai = Kt["@p" + oi];
                                    "t" == ai || "f" == ai ? ui.set(Nt, "t" == ai ? [true] : [false]) : "" != ai && ui.set(Nt, [parseFloat(ai)]);
                                }
                            } else {
                                var hi = Kt.a, li = zt.triggerActions.get(Nt);
                                li || (li = [], zt.triggerActions.set(Nt, li));
                                for (var ci = 0; ci < (null == hi ? void 0 : hi.length); ci++) {
                                    var di = hi[ci];
                                    if (si = parseInt(di["@i"]), Qt && (ri = Qt[si], li.push(ri), ti = ei ? ei[si] : null)) for (var pi = 0; pi < ti.length; pi++) {
                                        var ui, mi = ti[pi];
                                        (ui = zt.keyedPropertyObject[mi]) || (ui = zt.keyedPropertyObject[mi] = new Map);
                                        var fi = ui.get(Nt);
                                        fi || (fi = [], ui.set(Nt, fi));
                                        var yi = di["@p" + pi];
                                        void 0 !== yi && (fi[ci] = "t" == yi || "f" == yi ? "t" == yi : parseFloat(yi));
                                    }
                                }
                            }
                            Nt.addTarget(zt);
                        }
                        Nt.x = parseFloat(Wt["@x"]), Nt.y = parseFloat(Wt["@y"]);
                    }
                    var vi = new y.yY;
                    return b.addChild(vi), vi.x = parseFloat(M["@x"]), vi.y = parseFloat(M["@y"]), vi.characterIndex = parseFloat(M["@c"]), vi.hideVehicle = "t" == M["@h"], g.Z.hideVehicle = vi.hideVehicle, g.Z.bdIndex = parseInt(M["@bg"]), (null == M || null === (w = M["@bgc"]) || void 0 === w ? void 0 : w.length) > 0 ? g.Z.bdColor = M["@bgc"] : g.Z.bdColor = 16777215, b;
                }, n.createDummyShape = function () {
                    var e = new y.gR(false, false, false, 1, 0, -1, 0);
                    return e.x = e.y = 0, e.vertVector.push(new _._m), e.vertVector.push(new _._m(10, 0)), e.vertVector.push(new _._m(5, 5)), e.handleVector.push(new _._m), e.handleVector.push(new _._m), e.handleVector.push(new _._m), e.handleVector.push(new _._m), e.handleVector.push(new _._m), e.handleVector.push(new _._m), e;
                }, n.buildRefShape = function (e) {
                    return null;
                }, r = s, (o = [{
                    key: "levelXML", get: function () {
                        return this._levelXML;
                    }, set: function (e) {
                        this._levelXML = e;
                    }
                }, {
                    key: "levelVersion", get: function () {
                        return this._levelVersion;
                    }
                }, {
                    key: "errorString", get: function () {
                        return this._errorString;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.pB), L = i(69);
            function B(e, t) {
                return (B = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var A = function (e) {
                var t, i, s, r;
                function o(t, i, s) {
                    var r;
                    return (r = e.call(this, i, s, false) || this).loadComplete = function (e) {
                        var t = e.target;
                        t.removeEventListener(c.ju.COMPLETE, r.loadComplete), t.removeEventListener(c.XD.IO_ERROR, r.IOErrorHandler);
                        var i = String(t.data), s = i.substr(0, 8);
                        if (s.indexOf("<html>") > -1) return r._errorString = "system_error", void r.dispatchEvent(new c.k6(c.k6.ERROR));
                        if (s.indexOf("failure") > -1) {
                            var o = i.split(":");
                            return r._errorString = o[1], void r.dispatchEvent(new c.k6(c.k6.ERROR));
                        }
                        var n = L.Buffer.from(t.data), a = new d.SK(n), h = a.readInt(), l = new d.SK;
                        a.readBytes(l, 0, h), r._replayByteArray = l;
                        var p = new d.SK;
                        a.readBytes(p, 0, 0), d.sA.decryptByteArray(p, "eatshit" + r.authorId), p.uncompress("zlib");
                        var u = p.readUTFBytes(p.length);
                        r._levelXML = new c.hH(u), r.dispatchEvent(new c.ju(c.ju.COMPLETE));
                    }, r.replayId = t, r;
                }
                return i = e, (t = o).prototype = Object.create(i.prototype), t.prototype.constructor = t, B(t, i), o.prototype.loadData = function () {
                    var e = new c.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"));
                    e.method = c.H9.POST;
                    var t = new c.JH;
                    t.replay_id = this.replayId, t.level_id = this.levelId, t.action = "get_cmb_records", e.data = t;
                    var i = new c.yW;
                    i.responseType = "blob", i.dataFormat = c.mN.BINARY, i.addEventListener(c.ju.COMPLETE, this.loadComplete), i.addEventListener(c.XD.IO_ERROR, this.IOErrorHandler), i.load(e);
                }, s = o, (r = [{
                    key: "replayByteArray", get: function () {
                        return this._replayByteArray;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(s.prototype, r), Object.defineProperty(s, "prototype", { writable: false }), o;
            }(C), E = i(25);
            function M(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function k(e, t) {
                return (k = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var x = function (e) {
                var t, i;
                function s(t, i, s, r) {
                    var o;
                    return void 0 === s && (s = -1), void 0 === r && (r = false), (o = e.call(this) || this).dataLoadedBind = o.dataLoaded.bind(M(o)), o.IOErrorHandlerBind = o.IOErrorHandler.bind(M(o)), o.loadErrorHandlerBind = o.loadErrorHandler.bind(M(o)), o.levelDataObject = t, o.replayId = s, o.characterIndex = i, o.incrementPlays = r, o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, k(t, i);
                var r, o, n = s.prototype;
                return n.load = function () {
                    this.loadData();
                }, n.loadData = function () {
                    this.replayId > 0 ? this.userLevelLoader = new A(this.replayId, this.levelDataObject.id, this.levelDataObject.author_id) : this.userLevelLoader = new C(this.levelDataObject.id, this.levelDataObject.author_id, this.incrementPlays), this.userLevelLoader.addEventListener(c.ju.COMPLETE, this.dataLoadedBind), this.userLevelLoader.addEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.userLevelLoader.addEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.levelDataObject.id || this.replayId > 0 ? this.userLevelLoader.loadData() : window.xml ? this.userLevelLoader.loadXML() : this.userLevelLoader.loadLocal();
                }, n.dataLoaded = function (e) {
                    if (this.userLevelLoader.removeEventListener(c.ju.COMPLETE, this.dataLoadedBind), this.userLevelLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.userLevelLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.userLevelLoader instanceof A) {
                        var t = this.userLevelLoader;
                        this._replayData = new m, this._replayData.byteArray = t.replayByteArray;
                    }
                    if (1 == this.levelDataObject.id) throw Error("oops... SessionContentLoader: levelDataObject id === 1. This shouldn't happen");
                    this._levelData = this.userLevelLoader.buildLevelSourceObject(), this._levelVersion = this.userLevelLoader.levelVersion, this.loadCharacterData();
                }, n.IOErrorHandler = function (e) {
                    this.userLevelLoader.removeEventListener(c.ju.COMPLETE, this.dataLoadedBind), this.userLevelLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.userLevelLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.dispatchEvent(new c.ju(c.XD.IO_ERROR));
                }, n.loadErrorHandler = function (e) {
                    this.userLevelLoader.removeEventListener(c.ju.COMPLETE, this.dataLoadedBind), this.userLevelLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.userLevelLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this._errorString = this.userLevelLoader.errorString, this.dispatchEvent(new c.ju(c.k6.ERROR));
                }, n.loadCharacterData = function () {
                    this._characterData = new c.KG;
                    var e = "Character" + this.characterIndex;
                    this._levelVersion >= 1.11 && (e += "V111"), this._characterData.setPixiMovieClip((0, E.qX)(e)), this._characterData.convertChildren(this._characterData.pixiMovieClip), this.dispatchEvent(new c.ju(c.ju.COMPLETE));
                }, r = s, (o = [{
                    key: "replayData", get: function () {
                        return this._replayData;
                    }
                }, {
                    key: "levelData", get: function () {
                        return this._levelData;
                    }
                }, {
                    key: "levelVersion", get: function () {
                        return this._levelVersion;
                    }
                }, {
                    key: "characterData", get: function () {
                        return this._characterData;
                    }
                }, {
                    key: "errorString", get: function () {
                        return this._errorString;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.pB), O = i(317), T = (i(68), i(60), i(75), i(76), i(77), i(78), i(79), i(31), i(41), i(162)), P = i(40), R = i(103), D = i(33);
            function I(e, t) {
                return (I = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var j = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    return (i = e.call(this) || this)._index = t, i.createBg(), i.mouseChildren = false, t <= g.Z.totalCharacters && (i.loadBitmaps(), i.loaderBW.visible = true, i.loaderColor.visible = false, i._selectable = true, i.buttonMode = true), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, I(t, i);
                var r, o, n = s.prototype;
                return n.createBg = function () {
                    this.bg = new c.jy, this.addChild(this.bg), this.bg.graphics.beginFill(16777215, .1), this.bg.graphics.drawRect(0, 0, s.iconWidth, s.iconHeight), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill(), this.bg.graphics.beginFill(0, .1), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill();
                }, n.loadBitmaps = function () {
                    this.loaderBW = new c.jy(D.Sprite.from(s.fileString + this.index + "_bw.png")), this.loaderColor = new c.jy(D.Sprite.from(s.fileString + this.index + ".png")), this.loaderBW.x = this.loaderColor.x = 5, this.loaderBW.y = this.loaderColor.y = 5, this.addChild(this.loaderBW), this.addChild(this.loaderColor);
                }, n.IOErrorHandler = function (e) { }, r = s, (o = [{
                    key: "selected", get: function () {
                        return this._selected;
                    }, set: function (e) {
                        e != this._selected && (this._selected = e, this._selected ? (this.bg.graphics.clear(), this.bg.graphics.beginFill(16777215, 1), this.bg.graphics.drawRect(0, 0, s.iconWidth, s.iconHeight), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill(), this.bg.graphics.beginFill(0, .7), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill(), this.bg.alpha = .25, this.glowFilter = new c.Vw(16777215, 1, 10, 10, 2, 3), this.bg.filters = [this.glowFilter], this.loaderBW.visible = false, this.loaderColor.visible = true) : (this.bg.graphics.clear(), this.bg.graphics.beginFill(16777215, .1), this.bg.graphics.drawRect(0, 0, s.iconWidth, s.iconHeight), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill(), this.bg.graphics.beginFill(0, .1), this.bg.graphics.drawRect(5, 5, s.iconWidth - 10, s.iconHeight - 10), this.bg.graphics.endFill(), this.bg.blendMode = c.bt.NORMAL, this.bg.filters = [], this.bg.alpha = 1, this.loaderBW.visible = true, this.loaderColor.visible = false));
                    }
                }, {
                    key: "selectable", get: function () {
                        return this._selectable;
                    }
                }, {
                    key: "index", get: function () {
                        return this._index;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.jy);
            j.fileString = "char", j.iconWidth = 50, j.iconHeight = 50;
            var F = i(393);
            function J(e, t) {
                return (J = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var G = function (e) {
                var t, i;
                function s() {
                    var t;
                    (t = e.call(this) || this).scrollSpeedX = 2, t.scrollSpeedY = 1, t.scaleInc1 = 0, t.rotInc1 = 0, t.scaleInc2 = 3.14, t.rotInc2 = 3.14, t.iconMouseOverHandler = function (e) {
                        if (e.target instanceof j) {
                            var i = e.target;
                            if (i == t.selectedIcon || 0 == i.selectable) return;
                            t.selectedIcon.selected = false, i.selected = true, t.selectedIcon = i, t.loadCharacter(), R.i.instance.playSoundItem("SelectCharacter");
                        }
                    }, t.iconMouseUpHandler = function (e) {
                        if (e.target instanceof j) {
                            if (!e.target.selectable) return;
                            R.i.instance.playSoundItem("MenuSelect"), t.dispatchEvent(new c.ju(s.CHARACTER_SELECTED));
                        }
                    }, t.scrollSmoke = function (e) {
                        var i = 30 / c.Xj.maxFPS;
                        t.smokeSprite1.x += 2 * t.scrollSpeedX * i, t.smokeSprite1.y -= t.scrollSpeedY * i, t.smokeSprite2.x -= t.scrollSpeedX * i, t.smokeSprite2.y -= t.scrollSpeedY * i, t.smokeSprite1.x > 0 && (t.smokeSprite1.x -= t.smokeSprite1.width / 2), t.smokeSprite1.y < -t.smokeSprite1.height / 2 && (t.smokeSprite1.y += t.smokeSprite1.height / 2), t.smokeSprite2.x < -t.smokeSprite2.width / 2 && (t.smokeSprite2.x += t.smokeSprite2.width / 2), t.smokeSprite2.y < -t.smokeSprite2.height / 2 && (t.smokeSprite2.y += t.smokeSprite2.height / 2), t.adjustSpotlights(i);
                    }, t.characterLoaded = function () {
                        var e = (0, v.pI)(g.Z.characterIndex);
                        g.Z.currentSession = t.session = new F.i(e), t.session.visible = false, t.addChild(t.session), t.session.scaleX = t.session.scaleY = 2, t.session.create(), t.session.visible = true;
                    }, g.Z.stageSprite = t.stage, g.Z.characterIndex = 1;
                    var i = new c.KG((0, E.qX)("GameUI", "mc_CharacterMenu"));
                    return i.convertChildren(), t.addChild(i), t.altar = i.altar, t.spotlight1 = i.spotlight1, t.spotlight2 = i.spotlight2, t.spotlight1.blendMode = c.bt.ADD, t.spotlight2.blendMode = c.bt.ADD, t.spotlight1.alpha = .3, t.spotlight2.alpha = .3, t.buildStage(), t.buildMenu(), R.i.instance.playSoundItem("DrumLong"), t.addEventListener(c.ju.ENTER_FRAME, t.scrollSmoke), t.loadCharacter(), t;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, J(t, i);
                var r = s.prototype;
                return r.buildStage = function () {
                    this.bg = new c.jy, this.bg.graphics.beginFill(51), this.bg.graphics.drawRect(0, 0, 900, 500), this.bg.graphics.endFill();
                    var e = c.PI.instance;
                    if (null == e.getTexture("smoke1")) {
                        var t = new c.Q$(900, 500, true, 0, true);
                        t.perlinNoise(900, 500, 10, 4, true, true, 0, true, null);
                        var i = t;
                        e.addTexture("smoke1", t), e.addTexture("smoke2", i);
                    } else t = e.getTexture("smoke1"), i = e.getTexture("smoke2");
                    this.smokeSprite1 = new c.jy, this.tileSmoke(this.smokeSprite1, t, 1), this.smokeSprite2 = new c.jy, this.tileSmoke(this.smokeSprite2, i, .75), this.smokeSprite1.alpha = .5, this.smokeSprite2.alpha = .5, this.addChildAt(this.altar, 0), this.addChildAt(this.spotlight2, 0), this.addChildAt(this.spotlight1, 0), this.addChildAt(this.smokeSprite2, 0), this.addChildAt(this.smokeSprite1, 0), this.addChildAt(this.bg, 0);
                }, r.tileSmoke = function (e, t, i) {
                    void 0 === i && (i = 1);
                    for (var s = 0; s < 4; s++) {
                        var r = new c.jy;
                        r.alpha = i, r.pixiSprite.texture = t.pixiTexture, r.x = Math.floor(s % 2) * t.pixiTexture.width, r.y = Math.floor(s / 2) * t.pixiTexture.height, e.addChild(r);
                    }
                }, r.buildMenu = function () {
                    this.iconHolder = new c.jy, this.iconHolder.x = 500, this.iconHolder.y = 120, this.addChild(this.iconHolder), this.icons = [];
                    for (var e = 0; e < 25; e++) {
                        var t = new j(e + 1);
                        this.iconHolder.addChild(t), t.x = e % 5 * 60, t.y = 60 * Math.floor(.2 * e), this.icons.push(t), e < 11 && (t.addEventListener(c.TF.MOUSE_OVER, this.iconMouseOverHandler), t.addEventListener(c.TF.MOUSE_UP, this.iconMouseUpHandler));
                    }
                    var i = this.icons[0];
                    i.selected = true, this.selectedIcon = i;
                }, r.adjustSpotlights = function (e) {
                    void 0 === e && (e = 1), this.spotlight1.scaleY = .25 * Math.sin(this.scaleInc1) + 1.25, this.scaleInc1 += .01 * e, this.spotlight1.rotation = 15 * Math.sin(this.rotInc1) + 10, this.rotInc1 += .04 * e, this.spotlight2.scaleY = .25 * Math.cos(this.scaleInc2) + 1.25, this.scaleInc2 -= .012 * e, this.spotlight2.rotation = 15 * Math.cos(this.rotInc2) - 10, this.rotInc2 -= .04 * e;
                }, r.loadCharacter = function () {
                    g.Z.characterIndex = this.selectedIcon.index, this.session && this.killSession(), this.characterLoaded();
                }, r.killSession = function () {
                    this.session && (this.session.die(), this.removeChild(this.session), g.Z.currentSession = this.session = null);
                }, r.die = function () {
                    var e = this;
                    this.killSession(), this.icons.forEach(function (t, i) {
                        t.removeEventListener(c.TF.MOUSE_OVER, e.iconMouseOverHandler), t.removeEventListener(c.TF.MOUSE_UP, e.iconMouseUpHandler);
                    }), this.removeEventListener(c.ju.ENTER_FRAME, this.scrollSmoke);
                }, s;
            }(c.jy);
            function H() {
                var e = s, t = s;
                H = function () {
                    return i;
                };
                var i = {}, r = Object.prototype, o = r.hasOwnProperty, n = Object.defineProperty || function (e, t, i) {
                    e[t] = i.value;
                }, a = "function" == typeof Symbol ? Symbol : {}, h = a.iterator || "@@iterator", l = a.asyncIterator || "@@asyncIterator", c = a.toStringTag || "@@toStringTag";
                function d(e, t, i) {
                    return Object.defineProperty(e, t, { value: i, enumerable: true, configurable: true, writable: true }), e[t];
                }
                try {
                    d({}, "");
                } catch (e) {
                    d = function (e, t, i) {
                        return e[t] = i;
                    };
                }
                function p(i, s, r, o) {
                    var a, h, l, c, d = s && s.prototype instanceof f ? s : f, p = Object.create(d.prototype), y = new E(o || []);
                    return n(p, "_invoke", {
                        value: (a = i, h = r, l = y, t, e, c = "suspendedStart", function (e, t) {
                            if ("executing" === c) throw new Error("Generator is already running");
                            if ("completed" === c) {
                                if ("throw" === e) throw t;
                                return { value: void 0, done: true };
                            }
                            for (l.method = e, l.arg = t; ;) {
                                var i = l.delegate;
                                if (i) {
                                    var s = L(i, l);
                                    if (s) {
                                        if (s === m) continue;
                                        return s;
                                    }
                                }
                                if ("next" === l.method) l.sent = l._sent = l.arg; else if ("throw" === l.method) {
                                    if ("suspendedStart" === c) throw c = "completed", l.arg;
                                    l.dispatchException(l.arg);
                                } else "return" === l.method && l.abrupt("return", l.arg);
                                c = "executing";
                                var r = u(a, h, l);
                                if ("normal" === r.type) {
                                    if (c = l.done ? "completed" : "suspendedYield", r.arg === m) continue;
                                    return { value: r.arg, done: l.done };
                                }
                                "throw" === r.type && (c = "completed", l.method = "throw", l.arg = r.arg);
                            }
                        })
                    }), p;
                }
                function u(e, t, i) {
                    try {
                        return { type: "normal", arg: e.call(t, i) };
                    } catch (e) {
                        return { type: "throw", arg: e };
                    }
                }
                i.wrap = p;
                var m = {};
                function f() { }
                function y() { }
                function v() { }
                var g = {};
                d(g, h, function () {
                    return this;
                });
                var S = Object.getPrototypeOf, _ = S && S(S(M([])));
                _ && _ !== r && o.call(_, h) && (g = _);
                var w = v.prototype = f.prototype = Object.create(g);
                function b(e) {
                    ["next", "throw", "return"].forEach(function (t) {
                        d(e, t, function (e) {
                            return this._invoke(t, e);
                        });
                    });
                }
                function C(e, t) {
                    var i;
                    function s(i, r, n, a) {
                        var h = u(e[i], e, r);
                        if ("throw" !== h.type) {
                            var l = h.arg, c = l.value;
                            return c && "object" == typeof c && o.call(c, "__await") ? t.resolve(c.__await).then(function (e) {
                                s("next", e, n, a);
                            }, function (e) {
                                s("throw", e, n, a);
                            }) : t.resolve(c).then(function (e) {
                                l.value = e, n(l);
                            }, function (e) {
                                return s("throw", e, n, a);
                            });
                        }
                        a(h.arg);
                    }
                    n(this, "_invoke", {
                        value: function (e, r) {
                            function o() {
                                return new t(function (t, i) {
                                    s(e, r, t, i);
                                });
                            }
                            return i = i ? i.then(o, o) : o();
                        }
                    });
                }
                function L(e, t) {
                    var i = t.method, s = e.iterator[i];
                    if (void 0 === s) return t.delegate = null, "throw" === i && e.iterator.return && (t.method = "return", t.arg = void 0, L(e, t), "throw" === t.method) || "return" !== i && (t.method = "throw", t.arg = new TypeError("The iterator does not provide a '" + i + "' method")), m;
                    var r = u(s, e.iterator, t.arg);
                    if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, m;
                    var o = r.arg;
                    return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, m) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, m);
                }
                function B(e) {
                    var t = { tryLoc: e[0] };
                    1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
                }
                function A(e) {
                    var t = e.completion || {};
                    t.type = "normal", delete t.arg, e.completion = t;
                }
                function E(e) {
                    this.tryEntries = [{ tryLoc: "root" }], e.forEach(B, this), this.reset(true);
                }
                function M(e) {
                    if (e) {
                        var t = e[h];
                        if (t) return t.call(e);
                        if ("function" == typeof e.next) return e;
                        if (!isNaN(e.length)) {
                            var i = -1, s = function t() {
                                for (; ++i < e.length;) if (o.call(e, i)) return t.value = e[i], t.done = false, t;
                                return t.value = void 0, t.done = true, t;
                            };
                            return s.next = s;
                        }
                    }
                    return { next: k };
                }
                function k() {
                    return { value: void 0, done: true };
                }
                return y.prototype = v, n(w, "constructor", { value: v, configurable: true }), n(v, "constructor", { value: y, configurable: true }), y.displayName = d(v, c, "GeneratorFunction"), i.isGeneratorFunction = function (e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === y || "GeneratorFunction" === (t.displayName || t.name));
                }, i.mark = function (e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, v) : (e.__proto__ = v, d(e, c, "GeneratorFunction")), e.prototype = Object.create(w), e;
                }, i.awrap = function (e) {
                    return { __await: e };
                }, b(C.prototype), d(C.prototype, l, function () {
                    return this;
                }), i.AsyncIterator = C, i.async = function (e, t, s, r, o) {
                    void 0 === o && (o = Promise);
                    var n = new C(p(e, t, s, r), o);
                    return i.isGeneratorFunction(t) ? n : n.next().then(function (e) {
                        return e.done ? e.value : n.next();
                    });
                }, b(w), d(w, c, "Generator"), d(w, h, function () {
                    return this;
                }), d(w, "toString", function () {
                    return "[object Generator]";
                }), i.keys = function (e) {
                    var t = Object(e), i = [];
                    for (var s in t) i.push(s);
                    return i.reverse(), function e() {
                        for (; i.length;) {
                            var s = i.pop();
                            if (s in t) return e.value = s, e.done = false, e;
                        }
                        return e.done = true, e;
                    };
                }, i.values = M, E.prototype = {
                    constructor: E, reset: function (e) {
                        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(A), !e) for (var t in this) "t" === t.charAt(0) && o.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                    }, stop: function () {
                        this.done = true;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type) throw e.arg;
                        return this.rval;
                    }, dispatchException: function (e) {
                        if (this.done) throw e;
                        var t = this;
                        function i(i, s) {
                            return n.type = "throw", n.arg = e, t.next = i, s && (t.method = "next", t.arg = void 0), !!s;
                        }
                        for (var s = this.tryEntries.length - 1; s >= 0; --s) {
                            var r = this.tryEntries[s], n = r.completion;
                            if ("root" === r.tryLoc) return i("end");
                            if (r.tryLoc <= this.prev) {
                                var a = o.call(r, "catchLoc"), h = o.call(r, "finallyLoc");
                                if (a && h) {
                                    if (this.prev < r.catchLoc) return i(r.catchLoc, true);
                                    if (this.prev < r.finallyLoc) return i(r.finallyLoc);
                                } else if (a) {
                                    if (this.prev < r.catchLoc) return i(r.catchLoc, true);
                                } else {
                                    if (!h) throw new Error("try statement without catch or finally");
                                    if (this.prev < r.finallyLoc) return i(r.finallyLoc);
                                }
                            }
                        }
                    }, abrupt: function (e, t) {
                        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                            var s = this.tryEntries[i];
                            if (s.tryLoc <= this.prev && o.call(s, "finallyLoc") && this.prev < s.finallyLoc) {
                                var r = s;
                                break;
                            }
                        }
                        r && ("break" === e || "continue" === e) && r.tryLoc <= t && t <= r.finallyLoc && (r = null);
                        var n = r ? r.completion : {};
                        return n.type = e, n.arg = t, r ? (this.method = "next", this.next = r.finallyLoc, m) : this.complete(n);
                    }, complete: function (e, t) {
                        if ("throw" === e.type) throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), m;
                    }, finish: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), A(i), m;
                        }
                    }, catch: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.tryLoc === e) {
                                var s = i.completion;
                                if ("throw" === s.type) {
                                    var r = s.arg;
                                    A(i);
                                }
                                return r;
                            }
                        }
                        throw new Error("illegal catch attempt");
                    }, delegateYield: function (e, t, i) {
                        return this.delegate = { iterator: M(e), resultName: t, nextLoc: i }, "next" === this.method && (this.arg = void 0), m;
                    }
                }, i;
            }
            function V(e, t, i, s, r, o, n) {
                try {
                    var a = e[o](n), h = a.value;
                } catch (e) {
                    return void i(e);
                }
                a.done ? t(h) : Promise.resolve(h).then(s, r);
            }
            G.CHARACTER_SELECTED = "characterselected", i(63);
            var N = function () {
                function e(e, t) {
                    this.parent = e, this.loadContainer = new c._P;
                    var i = new c.jy;
                    i.graphics.beginFill(4032711), i.graphics.drawRect(-450, -250, 900, 500), this.loadContainer.x = 450, this.loadContainer.y = 250, this.loadContainer.addChild(i), this.text = new D.Text(t, { fill: 16777215, fontSize: 46, font: "Times New Roman" }), this.text.anchor.set(.5), i._pixiSprite.addChild(this.text), this.showing = false, this.loadContainer.alpha = 0, this.cameraModeEnabled = void 0 !== window.HW_SETTINGS.cameraMode;
                }
                var t, i, s = e.prototype;
                return s.show = (t = H().mark(function e(t) {
                    var i = this;
                    return H().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                if (!this.cameraModeEnabled) {
                                    e.next = 2;
                                    break;
                                }
                                return e.abrupt("return", new Promise(function (e) {
                                    t && t(), e();
                                }));
                            case 2:
                                return this.showing = true, T.iC.killTweensOf(this.loadContainer), e.abrupt("return", new Promise(function (e) {
                                    i.parent.stage.addChild(i.loadContainer), i.loadContainer.alpha = 1, setTimeout(function () {
                                        t && t(), e();
                                    }, 10);
                                }));
                            case 5:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                }), i = function () {
                    var e = this, i = arguments;
                    return new Promise(function (s, r) {
                        var o = t.apply(e, i);
                        function n(e) {
                            V(o, s, r, n, a, "next", e);
                        }
                        function a(e) {
                            V(o, s, r, n, a, "throw", e);
                        }
                        n(void 0);
                    });
                }, function (e) {
                    return i.apply(this, arguments);
                }), s.hide = function () {
                    var e = this;
                    return this.cameraModeEnabled ? new Promise(function (e) {
                        e();
                    }) : (this.showing = false, T.iC.killTweensOf(this.loadContainer), new Promise(function (t) {
                        T.iC.to(e.loadContainer, 0, {
                            alpha: 0, onComplete: function () {
                                e.parent.stage.removeChild(e.loadContainer), t();
                            }
                        });
                    }));
                }, s.setText = function (e) {
                    this.text.text = e;
                }, e;
            }(), U = (i(105), i(489)), W = (i(54), function () {
                function e() { }
                return e.toArray = function (e) {
                    e = e.replace(/\s|:/gm, "");
                    var t = new d.SK;
                    1 == (1 & e.length) && (e = "0" + e), t.length = e.length / 2;
                    for (var i = 0; i < e.length; i += 2) {
                        var s = e.substr(i, 2);
                        t.buffer[i / 2] = parseInt(s, 16);
                    }
                    return t;
                }, e.fromArray = function (e, t) {
                    void 0 === t && (t = false);
                    for (var i = "", s = 0; s < e.length; s++) i += ("0" + e.buffer[s].toString(16)).substr(-2, 2), t && s < e.length - 1 && (i += ":");
                    return i;
                }, e.toString = function (t) {
                    var i = e.toArray(t);
                    return i.readUTFBytes(i.length);
                }, e.fromString = function (t, i) {
                    void 0 === i && (i = false);
                    var s = new d.SK;
                    return s.writeUTFBytes(t), e.fromArray(s, i);
                }, e;
            }()), X = i(348), Y = function () {
                function e(e) {
                    this.ALGORITHM = "aes-cbc", this.PADDING = new d.cC, this.keyData = W.toArray(e), this.key = e;
                }
                var t = e.prototype;
                return t.encrypt = function (e) {
                    var t = X.enc.Hex.parse(this.key), i = X.lib.WordArray.random(16), s = X.AES.encrypt(e, t, { iv: i, mode: X.mode.CBC });
                    return this.IV = i.toString(X.enc.Hex), s.toString();
                }, t.decrypt = function (e, t) {
                    var i = X.enc.Base64.parse(e), s = X.enc.Hex.parse(this.key), r = X.enc.Hex.parse(t);
                    return X.AES.decrypt({ ciphertext: i }, s, { iv: r, mode: X.mode.CBC }).toString(X.enc.Utf8);
                }, t.getIV = function () {
                    return this.IV;
                }, t.genKey = function (e) {
                    var t = new d.kk, i = new d.SK;
                    return t.nextBytes(i, e / 8), W.fromArray(i);
                }, e;
            }();
            function z(e, t) {
                return (z = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Z = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    (o = e.call(this) || this).APPLESAUCE = "7ab7657e5595b5c3486988c90728c6ae", o.maxCommentChars = 200, o.setCharText = function (e) {
                        var t = o.maxCommentChars - o.commentsText.temp.text.length;
                        o.cCharsText.text = String(t) + " chars left";
                    }, o.mouseUpHandler = function (e) {
                        if (U.W.containsBadWord(o.commentsText.temp.text)) {
                            o.errorPrompt = new y.sP("Your replay comments contain some risky words. Please remove them. (sorry, I've recently run the risk of losing advertising)", "ok");
                            var t = o.errorPrompt.window;
                            return o.stage.addChild(t), void t.center();
                        }
                        o.save();
                    }, o.replaySaved = function (e) {
                        o.statusSprite.die(), o.loader.removeEventListener(c.ju.COMPLETE, o.replaySaved);
                        var t = String(o.loader.data), i = t.substr(0, 8), r = t.split(":");
                        i.indexOf("<html>") > -1 ? (o._errorMessage = "There was an unexpected system Error", o.dispatchEvent(new c.ju(s.GENERIC_ERROR))) : "failure" == r[0] ? ("invalid_action" == r[1] ? o._errorMessage = "An invalid action was passed (you really shouldn't ever be seeing this)." : "time_lockout" == r[1] ? o._errorMessage = "You saved a replay too recently. Please wait a moment and try again." : "hi_comp_time" == r[1] ? o._errorMessage = "Your replay is too long." : "bad_param" == r[1] ? o._errorMessage = "A bad parameter was passed (you really shouldn't ever be seeing this)." : "app_error" == r[1] ? o._errorMessage = "Sorry, there was an application error. It was most likely database related. Please try again in a moment." : "not_logged_in" == r[1] ? o._errorMessage = "You are not currently logged in." : o._errorMessage = "An unknown Error has occurred.", o.dispatchEvent(new c.ju(s.GENERIC_ERROR))) : "success" == r[0] ? (o._newReplayID = (0, c.e$)(r[1]), o.dispatchEvent(new c.ju(s.SAVE_COMPLETE))) : (o._errorMessage = "Error: something dreadful has happened", o.dispatchEvent(new c.ju(s.GENERIC_ERROR)));
                    }, o.windowClosed = function (e) {
                        o.dispatchEvent(e.clone());
                    }, o._byteArray = t.byteArray, o._completed = t.completed, o._length = t.getLength(), o._levelId = i, o._character = r;
                    var n = new c.KG((0, E.qX)("GameUI", "mc_SaveReplayMenu"));
                    n.convertChildren(), o.addChild(n), n.children[3].x += 42, n.children[3].y -= 2, n.children[4].x -= 75, o.commentsText = c.nv.pixiToFlash(n.commentsText.pixiSprite, n), o.cCharsText = c.nv.pixiToFlash(n.cCharsText.pixiSprite, n), o.buildWindow(), o.saveButton = new y.Me("save", 16613761, 100), o.addChild(o.saveButton), o.saveButton.x = 70, o.saveButton.y = 153, o.saveButton.addEventListener(c.TF.MOUSE_UP, o.mouseUpHandler), o.commentsText.autoSize = c.ie.NONE, o.commentsText.selectable = true, o.cCharsText.selectable = false, o.commentsText.embedFonts = o.cCharsText.embedFonts = true, o.commentsText.wordWrap = true, o.commentsText.multiline = true, o.commentsText.maxChars = o.maxCommentChars, o.commentsText.restrict = "a-z A-Z 0-9 !@#$%\\^&*()_+\\-=;'|?/,.<> \"";
                    var a = new P.oH({ input: { multiline: true } });
                    return a.setInputStyle("width", "190px"), a.setInputStyle("height", "93px"), a.x = o.commentsText.pixiText.x, a.y = o.commentsText.pixiText.y, a.setInputStyle("fontFamily", o.commentsText.pixiText.style.fontFamily), a.setInputStyle("fontSize", o.commentsText.pixiText.style.fontSize + "px"), a.setInputStyle("color", o.commentsText.pixiText.style.fill), o.commentsText.maxChars && (a.maxLength = o.commentsText.maxChars), o.pixiSprite.addChild(a), o.removeChild(o.commentsText), o.commentsText.temp = a, o.addEventListener(c.ju.ENTER_FRAME, o.setCharText), o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, z(t, i);
                var r, o, n = s.prototype;
                return n.createReplayQueryString = function (e, t, i, s, r, o) {
                    return "id=" + e + "&pc=" + t + "&ar=" + i + "&ct=" + s + "&vr=" + r + "&uc=" + (o = escape(o)) + "&ui=" + g.Z.user_id;
                }, n.save = function () {
                    this.statusSprite = new y.dU("Saving Replay...");
                    var e = this.statusSprite.window;
                    this._window.parent.addChild(e), e.center();
                    var t = this.createReplayQueryString(this._levelId, this._character, g.Z.architecture, this._completed ? this._length : g.Z.maxReplayFrames, g.Z.CURRENT_VERSION, this.commentsText.temp.text), i = new Y(this.APPLESAUCE), s = i.encrypt(t), r = i.getIV(), o = new d.SK;
                    o.writeBytes(this._byteArray);
                    var n = d.dr.encodeByteArray(o), a = window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"), h = new c.RW(a);
                    h.method = c.H9.POST;
                    var l = new c.JH;
                    l.action = "create", l.rr = encodeURIComponent(n), l.em = encodeURIComponent(s), l.ei = encodeURIComponent(r), h.data = l, this.loader = new c.yW, this.loader.addEventListener(c.ju.COMPLETE, this.replaySaved), this.loader.load(h);
                }, n.buildWindow = function () {
                    this._window = new y.Rz(true, this, true), this._window.addEventListener(y.Rz.WINDOW_CLOSED, this.windowClosed);
                }, n.die = function () {
                    this._window.removeEventListener(y.Rz.WINDOW_CLOSED, this.windowClosed), this._window.closeWindow(), this.removeEventListener(c.ju.ENTER_FRAME, this.setCharText), this.saveButton.removeEventListener(c.TF.MOUSE_UP, this.mouseUpHandler);
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }, {
                    key: "errorMessage", get: function () {
                        return this._errorMessage;
                    }
                }, {
                    key: "newReplayID", get: function () {
                        return this._newReplayID;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.jy);
            Z.SAVE_COMPLETE = "savecomplete", Z.GENERIC_ERROR = "genericerror", i(30);
            var $ = i(164);
            function K(e, t) {
                return (K = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var q = function (e) {
                var t, i;
                function s(t, i, r) {
                    var o;
                    void 0 === t && (t = 0), void 0 === i && (i = null), void 0 === r && (r = 16777062), (o = e.call(this) || this).maxRating = 5, o.starWidth = 30, o.fullWidth = 150, o.levelRatings = ["0 - godawful", "1 - shitty", "2 - meh", "3 - good", "4 - pretty great", "5 - superb!"], o.mouseMoveHandler = function (e) {
                        var t = Math.max(Math.min(Math.ceil(o.mouseX / o.starWidth), 5), 0);
                        o.rating = t, o.textBox && (o.setText(), o.drawBg(), o.textBox.x = o.mouseX + 20, o.textBox.y = o.mouseY + 10);
                    }, o.rollOutHandler = function (e) {
                        void 0 === e && (e = null), o._rating = -1, o.filler.scaleX = 0, o.textBox && o.removeTextBox();
                    }, o.rollOverHandler = function (e) {
                        o.textBox || o.addTextBox();
                    }, o.mouseUpHandler = function (e) {
                        o.buttonMode = false, o.textBox && o.removeTextBox(), o.removeEventListener(c.TF.ROLL_OUT, o.rollOutHandler), o.removeEventListener(c.TF.ROLL_OVER, o.rollOverHandler), o.removeEventListener(c.TF.MOUSE_MOVE, o.mouseMoveHandler), o.removeEventListener(c.TF.MOUSE_UP, o.mouseUpHandler), o.dispatchEvent(new c.ju(s.RATING_SELECTED));
                    };
                    var n = new c.KG((0, E.qX)("GameUI", "mc_votingstars"));
                    return n.convertChildren(n.pixiSprite), o.publicFiller = n.publicFiller, o.starMask = n.starMask, o.publicFiller.mask = o.starMask, o.addChild(n), o.publicRating = t, i && (o.levelRatings = i), o.buildHitBox(), o.createFiller(r), o.rollOutHandler(), o.mouseChildren = false, o.buttonMode = true, o.tabEnabled = false, o.addEventListener(c.TF.ROLL_OUT, o.rollOutHandler), o.addEventListener(c.TF.ROLL_OVER, o.rollOverHandler), o.addEventListener(c.TF.MOUSE_MOVE, o.mouseMoveHandler), o.addEventListener(c.TF.MOUSE_UP, o.mouseUpHandler), o;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, K(t, i);
                var r, o, n = s.prototype;
                return n.createFiller = function (e) {
                    this.filler = new c.jy, this.addChild(this.filler), this.filler.graphics.beginFill(e, 1), this.filler.graphics.drawRect(0, 0, 150, 30), this.filler.graphics.endFill(), this.filler.mask = this.starMask;
                }, n.addTextBox = function () {
                    var e = new c.SQ("HelveticaNeueLT Std Med", 12, 16777215, null, null, null, null, null, c.O3.LEFT);
                    this.textField = new c.nv, this.textField.defaultTextFormat = e, this.textField.autoSize = c.ie.LEFT, this.textField.width = 20, this.textField.height = 20, this.textField.x = 3, this.textField.y = 3, this.textField.multiline = false, this.textField.selectable = false, this.textField.embedFonts = true, this.textField.antiAliasType = c.ML.ADVANCED, this.textBg = new c.jy, this.textBox = new c.jy, this.addChild(this.textBox), this.textBox.addChild(this.textBg), this.textBox.addChild(this.textField);
                    var t = new c.pt(10, 90, 0, 1, 7, 7, .2, 3);
                    this.textBox.filters = [t];
                }, n.removeTextBox = function () {
                    this.removeChild(this.textBox), this.textBox = null;
                }, n.drawBg = function () {
                    this.textBg.graphics.clear(), this.textBg.graphics.lineStyle(1, 10066329, 1, true), this.textBg.graphics.beginFill(13421772, 1), this.textBg.graphics.drawRect(0, 0, Math.ceil(this.textField.width) + 5, Math.ceil(this.textField.height) + 5), this.textBg.graphics.endFill();
                }, n.setText = function () {
                    this.textField.htmlText = this.levelRatings[this._rating], this.textField.width = 10, this.textField.autoSize = c.ie.LEFT, this.textField.wordWrap = false, this.drawBg();
                }, n.buildHitBox = function () {
                    this.hitBox = new c.jy, this.hitBox.graphics.beginFill(0), this.hitBox.graphics.drawRect(-20, 0, 190, 29), this.hitBox.graphics.endFill(), this.addChild(this.hitBox), this.hitArea = this.hitBox, this.hitBox.alpha = 0;
                }, n.setCaption = function () {
                    this._rating > -1 && (this.textField.text = this.levelRatings[this._rating]);
                }, n.die = function () {
                    this.removeEventListener(c.TF.ROLL_OUT, this.rollOutHandler), this.removeEventListener(c.TF.ROLL_OVER, this.rollOverHandler), this.removeEventListener(c.TF.MOUSE_MOVE, this.mouseMoveHandler), this.removeEventListener(c.TF.MOUSE_UP, this.mouseUpHandler);
                }, r = s, (o = [{
                    key: "publicRating", get: function () {
                        return this._publicRating;
                    }, set: function (e) {
                        this._publicRating = e, this.publicFiller.scaleX = e / this.maxRating;
                    }
                }, {
                    key: "rating", get: function () {
                        return this._rating;
                    }, set: function (e) {
                        this._rating = e, this.filler.scaleX = Math.max(0, this._rating) / this.maxRating;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.jy);
            function Q(e, t) {
                return (Q = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            q.RATING_SELECTED = "ratingselected";
            var ee = function (e) {
                var t, i;
                function s(t, i) {
                    var r;
                    void 0 === i && (i = false), (r = e.call(this) || this).mouseUpHandler = function (e) {
                        switch (e.target) {
                            case r.restartButton:
                                r.dispatchEvent(new c.ju(s.RESTART_LEVEL));
                                break;
                            case r.characterButton:
                                $.f.trackEvent($.f.LEVEL, $.f.CHANGE_CHARACTER, "levelID_" + r.levelDataObject.id), r.dispatchEvent(new c.ju(s.CHOOSE_CHARACTER));
                                break;
                            case r.replayButton:
                                r.dispatchEvent(new c.ju(s.VIEW_REPLAY));
                                break;
                            case r.saveButton:
                                if (g.Z.user_id <= 0) {
                                    r.promptSprite = new y.sP("You must be logged in to save replays.  Login or register for free up there on the right.", "ok");
                                    var t = r.promptSprite.window;
                                    return r._window.parent.addChild(t), void t.center();
                                }
                                if (g.Z.disableUpload) return r.promptSprite = new y.sP(g.Z.disableMessage, "OH FINE"), t = r.promptSprite.window, r._window.parent.addChild(t), void t.center();
                                r.dispatchEvent(new c.ju(s.SAVE_REPLAY));
                                break;
                            case r.editFavoritesButton:
                                if (g.Z.user_id <= 0) return r.promptSprite = new y.sP("You must be logged in to edit your favorite levels.  Login or register for free up there on the right.", "ok"), t = r.promptSprite.window, r._window.parent.addChild(t), void t.center();
                                if (g.Z.disableUpload) return r.promptSprite = new y.sP(g.Z.disableMessage, "OH FINE"), t = r.promptSprite.window, r._window.parent.addChild(t), void t.center();
                                r.editFavorites();
                                break;
                            case r.exitButton:
                                r.dispatchEvent(new c.ju(s.EXIT));
                                break;
                            case r.cancelButton:
                                r.dispatchEvent(new c.ju(s.CANCEL));
                                break;
                            case r.muteButton:
                                1 == r.muteButton.currentFrame ? (r.muteButton.gotoAndStop(2), R.i.instance.mute(), $.f.trackEvent($.f.LEVEL, $.f.MUTE)) : (r.muteButton.gotoAndStop(1), R.i.instance.unMute(), $.f.trackEvent($.f.LEVEL, $.f.UNMUTE));
                                break;
                            case r.fullScreenButton:
                                r.stage.displayState == c.CV.FULL_SCREEN_INTERACTIVE ? (r.stage.displayState = c.CV.NORMAL, r.stage.displayState == c.CV.NORMAL && r.fullScreenButton.gotoAndStop(1)) : (r.stage.displayState = c.CV.FULL_SCREEN_INTERACTIVE, r.stage.displayState == c.CV.FULL_SCREEN_INTERACTIVE && r.fullScreenButton.gotoAndStop(2));
                        }
                    }, r.rollOverHandler = function (e) {
                        switch (e.target) {
                            case r.restartButton:
                                y.xx.instance.show("(R)", r.restartButton);
                                break;
                            case r.fullScreenButton:
                                y.xx.instance.show("Fullscreen", r.fullScreenButton);
                                break;
                            case r.muteButton:
                                y.xx.instance.show("Mute / Unmute", r.muteButton);
                        }
                    }, r.keyDownHandler = function (e) {
                        r._disableKeys || 82 !== e.keyCode || r.dispatchEvent(new c.ju(s.RESTART_LEVEL));
                    }, r.editFavorites = function () {
                        var e = new c.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/user.hw"));
                        e.method = c.H9.POST;
                        var t = new c.JH;
                        if (t.level_id = r.levelDataObject.id, e.data = t, r.isFavorite) i = "removing level from favorites...", t.action = "delete_favorite"; else {
                            var i = "adding level to favorites...";
                            t.action = "set_favorite";
                        }
                        r.statusSprite = new y.dU(i);
                        var s = r.statusSprite.window;
                        r._window.parent.addChild(s), s.center();
                        var o = new c.yW;
                        o.addEventListener(c.ju.COMPLETE, r.editFavoritesComplete), o.load(e);
                    }, r.editFavoritesComplete = function (e) {
                        r.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(c.ju.COMPLETE, r.editFavoritesComplete);
                        var i = String(t.data), s = i.substr(0, 8), o = i.split(":");
                        if (s.indexOf("<html>") > -1) r.promptSprite = new y.sP("There was an unexpected system Error", "oh"); else if ("failure" == o[0]) "not_logged_in" == o[1] ? r.promptSprite = new y.sP("You must be logged in to edit your favorite levels.  Login or register for free up there on the right.", "ok") : "duplicate" == o[1] ? r.promptSprite = new y.sP("This level is already one of your favorite levels.", "ok") : "invalid_action" == o[1] ? r.promptSprite = new y.sP("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "bad_param" == o[1] ? r.promptSprite = new y.sP("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == o[1] ? r.promptSprite = new y.sP("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : r.promptSprite = new y.sP("An unknown Error has occurred.", "oh"); else if ("success" == o[0]) {
                            r.promptSprite = new y.sP("Favorites list updated.", "ok");
                            var n = g.Z.favoriteLevelIds.indexOf(r.levelDataObject.id);
                            r.isFavorite ? ($.f.trackEvent($.f.LEVEL, $.f.REMOVE_FAVORITE), n > -1 && g.Z.favoriteLevelIds.splice(n, 1)) : ($.f.trackEvent($.f.LEVEL, $.f.ADD_FAVORITE), -1 == n && g.Z.favoriteLevelIds.push(r.levelDataObject.id)), r.editFavoritesButton.disabled = true;
                        } else r.promptSprite = new y.sP("Error: something dreadful has happened", "ok");
                        var a = r.promptSprite.window;
                        r._window.parent.addChild(a), a.center();
                    }, r.vote = function (e) {
                        if (void 0 === e && (e = null), g.Z.user_id <= 0) {
                            r.promptSprite = new y.sP("You must be logged in to vote.  Login or register for free up there on the right.", "ok");
                            var t = r.promptSprite.window;
                            return r._window.parent.addChild(t), void t.center();
                        }
                        if (g.Z.disableUpload) return r.promptSprite = new y.sP(g.Z.disableMessage, "OH FINE"), t = r.promptSprite.window, r._window.parent.addChild(t), void t.center();
                        r.statusSprite = new y.dU("casting your vote...");
                        var i = r.statusSprite.window;
                        r._window.parent.addChild(i), i.center();
                        var s = new c.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/set_level.hw"));
                        s.method = c.H9.POST;
                        var o = new c.JH;
                        o.level_id = r.levelDataObject.id, o.rating = r.votingStars.rating, o.action = "rate_level", s.data = o;
                        var n = new c.yW;
                        n.addEventListener(c.ju.COMPLETE, r.voteComplete), n.load(s);
                    }, r.voteComplete = function (e) {
                        r.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(c.ju.COMPLETE, r.voteComplete);
                        var i = String(t.data), s = i.substr(0, 8), o = i.split(":");
                        s.indexOf("<html>") > -1 ? r.promptSprite = new y.sP("There was an unexpected system Error", "oh") : "failure" == o[0] ? "invalid_action" == o[1] ? r.promptSprite = new y.sP("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "duplicate_rating" == o[1] ? r.promptSprite = new y.sP("You've already voted on this level.", "ok") : "illegal_argument" == o[1] ? r.promptSprite = new y.sP("Rating must be between 0 and 5.", "ok") : "bad_param" == o[1] ? r.promptSprite = new y.sP("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == o[1] ? r.promptSprite = new y.sP("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" == o[1] ? r.promptSprite = new y.sP("You are not currently logged in.", "alright") : r.promptSprite = new y.sP("An unknown Error has occurred.", "oh") : "success" == o[0] ? ($.f.trackEvent($.f.LEVEL, $.f.VOTE, "rating_" + r.votingStars.rating), r.promptSprite = new y.sP("You voted! Good job.", "thanks")) : r.promptSprite = new y.sP("Error: something dreadful has happened", "ok");
                        var n = r.promptSprite.window;
                        r._window.parent.addChild(n), n.center();
                    }, r.levelDataObject = t, r._disableSave = i;
                    var o = new c.KG((0, E.qX)("GameUI", "mc_session_menu"));
                    return o.convertChildren(o.pixiSprite), r.addChild(o), r.levelNameText = c.nv.pixiToFlash(o.levelNameText.pixiSprite, o), r.authorText = c.nv.pixiToFlash(o.authorText.pixiSprite, o), r.buildWindow(), r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, Q(t, i);
                var r, o, n = s.prototype;
                return n.init = function () {
                    this.levelNameText.text = "" + this.levelDataObject.name, this.levelNameText.htmlText = "<b>" + this.levelDataObject.name + "</b>", this.levelNameText.filters = [new c.pt(2, 90, 0, 1, 1, 1, .5, 3)], this.authorText.text = this.levelDataObject.author_name, this.votingStars = new q(this.levelDataObject.average_rating), this.votingStars.x = 45, this.votingStars.y = 74;
                    var e = 120, t = 60;
                    this.restartButton = new y.Me("restart level", 4032711, e), this.restartButton.x = t, this.restartButton.y = 114, this.addChild(this.restartButton), this.characterButton = new y.Me("change character", 4032711, e), this.characterButton.x = t, this.characterButton.y = 144, this.addChild(this.characterButton), this.levelDataObject.forceChar && (this.characterButton.disabled = true), this.replayButton = new y.Me("view replay", 4032711, e), this.replayButton.x = t, this.replayButton.y = 174, this.addChild(this.replayButton), this.saveButton = new y.Me("save replay", 4032711, e), this.saveButton.x = t, this.saveButton.y = 204, this.addChild(this.saveButton), this.disableSave = this._disableSave, this.isFavorite = g.Z.favoriteLevelIds.indexOf(this.levelDataObject.id) > -1;
                    var i = this.isFavorite ? "remove favorite" : "add to favorites";
                    this.editFavoritesButton = new y.Me(i, 16776805, e, 0), this.editFavoritesButton.x = t, this.editFavoritesButton.y = 234, this.addChild(this.editFavoritesButton), this.exitButton = new y.Me("exit to menu", 16613761, e), this.exitButton.x = t, this.exitButton.y = 272, this.addChild(this.exitButton), this.cancelButton = new y.Me("resume", 16613761, e), this.cancelButton.x = t, this.cancelButton.y = 303, this.addChild(this.cancelButton), this.muteButton = new c.KG, this.muteButton.setPixiMovieClip((0, E.qX)("GameUI", "MuteButton")), R.i.instance.isMuted ? this.muteButton.gotoAndStop(2) : this.muteButton.gotoAndStop(1), this.muteButton.x = 12, this.muteButton.y = 319, this.addChild(this.muteButton), this.muteButton.mouseChildren = false, this.muteButton.buttonMode = true, this.muteButton.tabEnabled = false, this.fullScreenButton = new c.KG, this.fullScreenButton.setPixiMovieClip((0, E.qX)("GameUI", "FullScreenButton")), this.stage.displayState == c.CV.FULL_SCREEN_INTERACTIVE ? this.fullScreenButton.gotoAndStop(2) : this.fullScreenButton.gotoAndStop(1), this.fullScreenButton.x = 213, this.fullScreenButton.y = 316, this.addChild(this.fullScreenButton), this.fullScreenButton.mouseChildren = false, this.fullScreenButton.buttonMode = true, this.fullScreenButton.tabEnabled = false, this.addChild(this.votingStars), this.restartButton.addEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.fullScreenButton.addEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.muteButton.addEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.addEventListener(c.TF.MOUSE_UP, this.mouseUpHandler), this.stage.addEventListener(c._d.KEY_UP, this.keyDownHandler), this.votingStars.addEventListener(q.RATING_SELECTED, this.vote);
                }, n.buildWindow = function () {
                    this._window = new y.Rz(false, this, false);
                }, n.die = function () {
                    this.votingStars.die(), this.restartButton.removeEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.fullScreenButton.removeEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.muteButton.removeEventListener(c.TF.MOUSE_OVER, this.rollOverHandler), this.removeEventListener(c.TF.MOUSE_UP, this.mouseUpHandler), this.stage.removeEventListener(c._d.KEY_UP, this.keyDownHandler), this.votingStars.removeEventListener(q.RATING_SELECTED, this.vote), this._window.closeWindow(), y.xx.instance._target && y.xx.instance.hide();
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }, {
                    key: "disableSave", set: function (e) {
                        this._disableSave = e, this.saveButton.disabled = !!e;
                    }
                }, {
                    key: "disableKeys", get: function () {
                        return this._disableKeys;
                    }, set: function (e) {
                        this._disableKeys = e;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.jy);
            function te(e, t) {
                return (te = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            ee.RESTART_LEVEL = "restartlevel", ee.CHOOSE_CHARACTER = "choosecharacter", ee.VIEW_REPLAY = "viewreplay", ee.SAVE_REPLAY = "savereplay", ee.ADD_LEVEL_TO_FAVORITES = "addleveltofavorites", ee.EXIT = "exit", ee.CANCEL = "cancel";
            var ie = function (e) {
                var t, i;
                function s(t) {
                    var i;
                    (i = e.call(this) || this).ratingSelected = function (e) {
                        i.votingStars.rating > -1 && i.vote();
                    }, i.mouseUpHandler = function (e) {
                        switch (e.target) {
                            case i.restartButton:
                                i.dispatchEvent(new c.ju(s.RESTART_REPLAY));
                                break;
                            case i.playButton:
                                i.replayDataObject.version != g.Z.CURRENT_VERSION ? i.dispatchEvent(new c.ju(s.CHOOSE_CHARACTER)) : i.dispatchEvent(new c.ju(s.PLAY_LEVEL));
                                break;
                            case i.exitButton:
                                i.dispatchEvent(new c.ju(s.EXIT));
                                break;
                            case i.cancelButton:
                                i.dispatchEvent(new c.ju(s.CANCEL));
                        }
                    }, i.vote = function () {
                        if (g.Z.user_id <= 0) {
                            i.promptSprite = new y.sP("You must be logged in to vote.  Login or register for free up there on the right.", "ok");
                            var e = i.promptSprite.window;
                            return i._window.parent.addChild(e), void e.center();
                        }
                        if (g.Z.disableUpload) return i.promptSprite = new y.sP(g.Z.disableMessage, "OH FINE"), e = i.promptSprite.window, i._window.parent.addChild(e), void e.center();
                        if (i.replayDataObject.architecture != g.Z.architecture) return i.promptSprite = new y.sP("You may only vote on replays you can see 100% accurately.", "ok"), e = i.promptSprite.window, i._window.parent.addChild(e), void e.center();
                        i.statusSprite = new y.dU("casting your vote...");
                        var t = i.statusSprite.window;
                        i._window.parent.addChild(t), t.center();
                        var s = new c.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"));
                        s.method = c.H9.POST;
                        var r = new c.JH;
                        r.replay_id = i.replayDataObject.id, r.rating = i.votingStars.rating, r.action = "rate_replay", s.data = r;
                        var o = new c.yW;
                        o.addEventListener(c.ju.COMPLETE, i.voteComplete), o.load(s);
                    }, i.voteComplete = function (e) {
                        i.statusSprite.die();
                        var t = e.target;
                        t.removeEventListener(c.ju.COMPLETE, i.voteComplete);
                        var s = String(t.data), r = s.substr(0, 8), o = s.split(":");
                        r.indexOf("<html>") > -1 ? i.promptSprite = new y.sP("There was an unexpected system Error", "oh") : "failure" == o[0] ? "invalid_action" == o[1] ? i.promptSprite = new y.sP("An invalid action was passed (you really shouldn't ever be seeing this).", "ok") : "duplicate_rating" == o[1] ? i.promptSprite = new y.sP("You've already voted on this level.", "ok") : "illegal_argument" == o[1] ? i.promptSprite = new y.sP("Rating must be between 0 and 5.", "ok") : "bad_param" == o[1] ? i.promptSprite = new y.sP("A bad parameter was passed (you really shouldn't ever be seeing this).", "ok") : "app_error" == o[1] ? i.promptSprite = new y.sP("Sorry, there was an application error. It was most likely database related. Please try again in a moment.", "ok") : "not_logged_in" == o[1] ? i.promptSprite = new y.sP("You are not currently logged in.", "alright") : i.promptSprite = new y.sP("An unknown Error has occurred.", "oh") : "success" == o[0] ? ($.f.trackEvent($.f.REPLAY, $.f.VOTE, "rating_" + i.votingStars.rating), i.promptSprite = new y.sP("You voted! Good job.", "thanks")) : i.promptSprite = new y.sP("Error: something dreadful has happened", "ok");
                        var n = i.promptSprite.window;
                        i._window.parent.addChild(n), n.center();
                    }, i.replayDataObject = t;
                    var r = new c.KG((0, E.qX)("GameUI", "mc_session_replay_menu"));
                    return r.convertChildren(r.pixiSprite), i.addChild(r), i.userText = c.nv.pixiToFlash(r.userText.pixiSprite, r), i.init(), i;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, te(t, i);
                var r, o, n = s.prototype;
                return n.init = function () {
                    this.buildWindow(), this.userText.text = this.replayDataObject.user_name, this.votingStars = new q(this.replayDataObject.average_rating), this.votingStars.x = 45, this.votingStars.y = 65;
                    var e = 120;
                    this.restartButton = new y.Me("view replay again", 4032711, e), this.restartButton.x = 60, this.restartButton.y = 107, this.addChild(this.restartButton), this.playButton = new y.Me("play this level", 4032711, e), this.playButton.x = 60, this.playButton.y = 137, this.addChild(this.playButton), this.exitButton = new y.Me("exit to menu", 16613761, e), this.exitButton.x = 60, this.exitButton.y = 177, this.addChild(this.exitButton), this.cancelButton = new y.Me("resume", 16613761, e), this.cancelButton.x = 60, this.cancelButton.y = 207, this.addChild(this.cancelButton), this.addChild(this.votingStars), this.addEventListener(c.TF.MOUSE_UP, this.mouseUpHandler), this.votingStars.addEventListener(q.RATING_SELECTED, this.ratingSelected);
                }, n.buildWindow = function () {
                    this._window = new y.Rz(false, this, false);
                }, n.die = function () {
                    this._window.closeWindow(), this.votingStars.die(), this.votingStars.removeEventListener(q.RATING_SELECTED, this.ratingSelected), this.removeEventListener(c.TF.MOUSE_UP, this.mouseUpHandler);
                }, r = s, (o = [{
                    key: "window", get: function () {
                        return this._window;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(c.jy);
            function se() {
                var e = o;
                se = function () {
                    return t;
                };
                var t = {}, i = Object.prototype, s = i.hasOwnProperty, r = Object.defineProperty || function (e, t, i) {
                    e[t] = i.value;
                }, n = "function" == typeof Symbol ? Symbol : {}, a = n.iterator || "@@iterator", h = n.asyncIterator || "@@asyncIterator", l = n.toStringTag || "@@toStringTag";
                function c(e, t, i) {
                    return Object.defineProperty(e, t, { value: i, enumerable: true, configurable: true, writable: true }), e[t];
                }
                try {
                    c({}, "");
                } catch (e) {
                    c = function (e, t, i) {
                        return e[t] = i;
                    };
                }
                function d(t, i, s, o) {
                    var n, a, h, l, c = i && i.prototype instanceof m ? i : m, d = Object.create(c.prototype), f = new A(o || []);
                    return r(d, "_invoke", {
                        value: (n = t, a = s, h = f, { _0x1ea62e: 991, _0x4d08e3: 6494, _0x10498d: 3603 }, e, e, l = "suspendedStart", function (e, t) {
                            if ("executing" === l) throw new Error("Generator is already running");
                            if ("completed" === l) {
                                if ("throw" === e) throw t;
                                return { value: void 0, done: true };
                            }
                            for (h.method = e, h.arg = t; ;) {
                                var i = h.delegate;
                                if (i) {
                                    var s = C(i, h);
                                    if (s) {
                                        if (s === u) continue;
                                        return s;
                                    }
                                }
                                if ("next" === h.method) h.sent = h._sent = h.arg; else if ("throw" === h.method) {
                                    if ("suspendedStart" === l) throw l = "completed", h.arg;
                                    h.dispatchException(h.arg);
                                } else "return" === h.method && h.abrupt("return", h.arg);
                                l = "executing";
                                var r = p(n, a, h);
                                if ("normal" === r.type) {
                                    if (l = h.done ? "completed" : "suspendedYield", r.arg === u) continue;
                                    return { value: r.arg, done: h.done };
                                }
                                "throw" === r.type && (l = "completed", h.method = "throw", h.arg = r.arg);
                            }
                        })
                    }), d;
                }
                function p(e, t, i) {
                    try {
                        return { type: "normal", arg: e.call(t, i) };
                    } catch (e) {
                        return { type: "throw", arg: e };
                    }
                }
                t.wrap = d;
                var u = {};
                function m() { }
                function f() { }
                function y() { }
                var v = {};
                c(v, a, function () {
                    return this;
                });
                var g = Object.getPrototypeOf, S = g && g(g(E([])));
                S && S !== i && s.call(S, a) && (v = S);
                var _ = y.prototype = m.prototype = Object.create(v);
                function w(e) {
                    ["next", "throw", "return"].forEach(function (t) {
                        c(e, t, function (e) {
                            return this._invoke(t, e);
                        });
                    });
                }
                function b(e, t) {
                    var i;
                    function o(i, r, n, a) {
                        var h = p(e[i], e, r);
                        if ("throw" !== h.type) {
                            var l = h.arg, c = l.value;
                            return c && "object" == typeof c && s.call(c, "__await") ? t.resolve(c.__await).then(function (e) {
                                o("next", e, n, a);
                            }, function (e) {
                                o("throw", e, n, a);
                            }) : t.resolve(c).then(function (e) {
                                l.value = e, n(l);
                            }, function (e) {
                                return o("throw", e, n, a);
                            });
                        }
                        a(h.arg);
                    }
                    r(this, "_invoke", {
                        value: function (e, s) {
                            function r() {
                                return new t(function (t, i) {
                                    o(e, s, t, i);
                                });
                            }
                            return i = i ? i.then(r, r) : r();
                        }
                    });
                }
                function C(e, t) {
                    var i = t.method, s = e.iterator[i];
                    if (void 0 === s) return t.delegate = null, "throw" === i && e.iterator.return && (t.method = "return", t.arg = void 0, C(e, t), "throw" === t.method) || "return" !== i && (t.method = "throw", t.arg = new TypeError("The iterator does not provide a '" + i + "' method")), u;
                    var r = p(s, e.iterator, t.arg);
                    if ("throw" === r.type) return t.method = "throw", t.arg = r.arg, t.delegate = null, u;
                    var o = r.arg;
                    return o ? o.done ? (t[e.resultName] = o.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, u) : o : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, u);
                }
                function L(e) {
                    var t = { tryLoc: e[0] };
                    1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t);
                }
                function B(e) {
                    var t = e.completion || {};
                    t.type = "normal", delete t.arg, e.completion = t;
                }
                function A(e) {
                    this.tryEntries = [{ tryLoc: "root" }], e.forEach(L, this), this.reset(true);
                }
                function E(e) {
                    if (e) {
                        var t = e[a];
                        if (t) return t.call(e);
                        if ("function" == typeof e.next) return e;
                        if (!isNaN(e.length)) {
                            var i = -1, r = function t() {
                                for (; ++i < e.length;) if (s.call(e, i)) return t.value = e[i], t.done = false, t;
                                return t.value = void 0, t.done = true, t;
                            };
                            return r.next = r;
                        }
                    }
                    return { next: M };
                }
                function M() {
                    return { value: void 0, done: true };
                }
                return f.prototype = y, r(_, "constructor", { value: y, configurable: true }), r(y, "constructor", { value: f, configurable: true }), f.displayName = c(y, l, "GeneratorFunction"), t.isGeneratorFunction = function (e) {
                    var t = "function" == typeof e && e.constructor;
                    return !!t && (t === f || "GeneratorFunction" === (t.displayName || t.name));
                }, t.mark = function (e) {
                    return Object.setPrototypeOf ? Object.setPrototypeOf(e, y) : (e.__proto__ = y, c(e, l, "GeneratorFunction")), e.prototype = Object.create(_), e;
                }, t.awrap = function (e) {
                    return { __await: e };
                }, w(b.prototype), c(b.prototype, h, function () {
                    return this;
                }), t.AsyncIterator = b, t.async = function (e, i, s, r, o) {
                    void 0 === o && (o = Promise);
                    var n = new b(d(e, i, s, r), o);
                    return t.isGeneratorFunction(i) ? n : n.next().then(function (e) {
                        return e.done ? e.value : n.next();
                    });
                }, w(_), c(_, l, "Generator"), c(_, a, function () {
                    return this;
                }), c(_, "toString", function () {
                    return "[object Generator]";
                }), t.keys = function (e) {
                    var t = Object(e), i = [];
                    for (var s in t) i.push(s);
                    return i.reverse(), function e() {
                        for (; i.length;) {
                            var s = i.pop();
                            if (s in t) return e.value = s, e.done = false, e;
                        }
                        return e.done = true, e;
                    };
                }, t.values = E, A.prototype = {
                    constructor: A, reset: function (e) {
                        if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = false, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(B), !e) for (var t in this) "t" === t.charAt(0) && s.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0);
                    }, stop: function () {
                        this.done = true;
                        var e = this.tryEntries[0].completion;
                        if ("throw" === e.type) throw e.arg;
                        return this.rval;
                    }, dispatchException: function (e) {
                        if (this.done) throw e;
                        var t = this;
                        function i(i, s) {
                            return n.type = "throw", n.arg = e, t.next = i, s && (t.method = "next", t.arg = void 0), !!s;
                        }
                        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                            var o = this.tryEntries[r], n = o.completion;
                            if ("root" === o.tryLoc) return i("end");
                            if (o.tryLoc <= this.prev) {
                                var a = s.call(o, "catchLoc"), h = s.call(o, "finallyLoc");
                                if (a && h) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                } else if (a) {
                                    if (this.prev < o.catchLoc) return i(o.catchLoc, true);
                                } else {
                                    if (!h) throw new Error("try statement without catch or finally");
                                    if (this.prev < o.finallyLoc) return i(o.finallyLoc);
                                }
                            }
                        }
                    }, abrupt: function (e, t) {
                        for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                            var r = this.tryEntries[i];
                            if (r.tryLoc <= this.prev && s.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
                                var o = r;
                                break;
                            }
                        }
                        o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
                        var n = o ? o.completion : {};
                        return n.type = e, n.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, u) : this.complete(n);
                    }, complete: function (e, t) {
                        if ("throw" === e.type) throw e.arg;
                        return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), u;
                    }, finish: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.finallyLoc === e) return this.complete(i.completion, i.afterLoc), B(i), u;
                        }
                    }, catch: function (e) {
                        for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                            var i = this.tryEntries[t];
                            if (i.tryLoc === e) {
                                var s = i.completion;
                                if ("throw" === s.type) {
                                    var r = s.arg;
                                    B(i);
                                }
                                return r;
                            }
                        }
                        throw new Error("illegal catch attempt");
                    }, delegateYield: function (e, t, i) {
                        return this.delegate = { iterator: E(e), resultName: t, nextLoc: i }, "next" === this.method && (this.arg = void 0), u;
                    }
                }, t;
            }
            function re(e, t, i, s, r, o, n) {
                try {
                    var a = e[o](n), h = a.value;
                } catch (e) {
                    return void i(e);
                }
                a.done ? t(h) : Promise.resolve(h).then(s, r);
            }
            function oe(e) {
                return function () {
                    var t = this, i = arguments;
                    return new Promise(function (s, r) {
                        var o = e.apply(t, i);
                        function n(e) {
                            re(o, s, r, n, a, "next", e);
                        }
                        function a(e) {
                            re(o, s, r, n, a, "throw", e);
                        }
                        n(void 0);
                    });
                };
            }
            function ne(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function ae(e, t) {
                return (ae = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            ie.RESTART_REPLAY = "restartreplay", ie.CHOOSE_CHARACTER = "choosecharacter", ie.PLAY_LEVEL = "playlevel", ie.EXIT = "exit", ie.CANCEL = "cancel";
            var he = function (e) {
                var t, i;
                function s(t, i, s) {
                    var r;
                    return void 0 === s && (s = null), (r = e.call(this) || this).restartCount = 0, r.replayCount = 0, r.beginSessionBind = r.beginSession.bind(ne(r)), r.IOErrorHandlerBind = r.IOErrorHandler.bind(ne(r)), r.loadErrorHandlerBind = r.loadErrorHandler.bind(ne(r)), r.menuButtonPressBind = r.menuButtonPress.bind(ne(r)), r.menuButtonRollBind = r.menuButtonRoll.bind(ne(r)), r.sessionCompleteHandlerBind = r.sessionCompleteHandler.bind(ne(r)), r.keyDownHandlerBind = r.keyDownHandler.bind(ne(r)), r.loadSessionBind = r.loadSession.bind(ne(r)), r.restartLevelBind = r.restartLevel.bind(ne(r)), r.reopenCharacterMenuBind = r.reopenCharacterMenu.bind(ne(r)), r.replayLevelBind = r.replayLevel.bind(ne(r)), r.openSaveReplayMenuBind = r.openSaveReplayMenu.bind(ne(r)), r.closeSessionMenuBind = r.closeSessionMenu.bind(ne(r)), r.returnToMainMenuBind = r.returnToMainMenu.bind(ne(r)), r.closeSaveReplayMenuBind = r.closeSaveReplayMenu.bind(ne(r)), r.closeSessionReplayMenuBind = r.closeSessionReplayMenu.bind(ne(r)), r.loadingMessages = ["Building level...", "Creating level...", "Constructing level...", "Loading..."], r.restartMessages = ["Restarting level...", "Resetting...", "Re-instantiating level..."], r.replayMessages = ["Loading...", "Loading replay...", "Constructing replay...", "Re-instantiating replay..."], r.parent = t, r.levelDataObject = i, r.replayDataObject = s, r.loadContainer = new N(r.parent, r.loadingMessages[0]), r;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ae(t, i);
                var r, o, n = s.prototype;
                return n.begin = (o = oe(se().mark(function e() {
                    return se().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                this.replayDataObject ? (this.loadSession()) : (this.incrementPlays = true, this.levelDataObject.forceChar ? this.loadSession() : void 0 !== window.HW_SETTINGS.cameraMode && void 0 !== window.HW_SETTINGS.cameraMode.characterIndex ? (g.Z.characterIndex = window.HW_SETTINGS.cameraMode.characterIndex, this.loadSessionBind()) : this.openCharacterMenu());
                            case 1:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                })), function () {
                    return o.apply(this, arguments);
                }), n.openCharacterMenu = function () {
                    g.Z.hideVehicle = false, this.characterMenu = new G, this.parent.addChildAt(this.characterMenu, 0), this.characterMenu.addEventListener(G.CHARACTER_SELECTED, this.loadSessionBind);
                }, n.closeCharacterMenu = function () {
                    this.characterMenu.die(), this.parent.removeChild(this.characterMenu), this.characterMenu.removeEventListener(G.CHARACTER_SELECTED, this.loadSessionBind), this.characterMenu = null;
                }, n.showLoaderScreen = function (e) {
                    if (e) this.loadContainer.setText(e); else {
                        var t = Math.floor(Math.random() * this.loadingMessages.length);
                        this.loadContainer.setText(this.loadingMessages[t]);
                    }
                    this.loadContainer.showing || this.loadContainer.show();
                }, n.hideLoaderScreen = function () {
                    this.loadContainer.showing && this.loadContainer.hide();
                }, n.loadSession = (r = oe(se().mark(function e(t) {
                    return se().wrap(function (e) {
                        for (; ;) switch (e.prev = e.next) {
                            case 0:
                                void 0 === t && (t = null), this.showLoaderScreen(), this.replayDataObject ? (g.Z.characterIndex = this.replayDataObject.character, this.sessionContentLoader = new x(this.levelDataObject, g.Z.characterIndex, this.replayDataObject.id)) : (this.characterMenu && (this.closeCharacterMenu(), v.fX.trackEvent(v.fX.CHARACTER_MENU, v.fX.CHARACTER_SELECTED, "character_" + g.Z.characterIndex)), this.levelDataObject.forceChar && (g.Z.characterIndex = this.levelDataObject.character), this.sessionContentLoader = new x(this.levelDataObject, g.Z.characterIndex, -1, this.incrementPlays)), this.sessionContentLoader.addEventListener(c.ju.COMPLETE, this.beginSessionBind), this.sessionContentLoader.addEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.sessionContentLoader.addEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.sessionContentLoader.load(), this.incrementPlays = false;
                            case 8:
                            case "end":
                                return e.stop();
                        }
                    }, e, this);
                })), function (e) {
                    return r.apply(this, arguments);
                }), n.beginSession = function (e) {
                    var t;
                    this.loadContainer.hide(), g.Z.levelIndex = this.levelDataObject.id, g.Z.stageSprite = this.parent.stage;
                    var i = new v.uX;
                    this.replayDataObject ? (t = window.parent.location.pathname + "?replay_id=" + this.replayDataObject.id, g.Z.currentSession = this.session = new ue(this.replayDataObject.version, this.sessionContentLoader.characterData, this.sessionContentLoader.levelData, this.sessionContentLoader.levelVersion, this.sessionContentLoader.replayData, g.Z.useDebug)) : (t = window.parent.location.pathname + "?level_id=" + this.levelDataObject.id, g.Z.currentSession = this.session = new O.z(g.Z.CURRENT_VERSION, this.sessionContentLoader.characterData, this.sessionContentLoader.levelData, this.sessionContentLoader.levelVersion, g.Z.useDebug)), this.menuButton = new y.Me("menu", 10066329, 50, 16777215), this.parent.addChildAt(this.menuButton, 0), this.menuButton.x = 10, this.menuButton.y = 467, this.menuButton.addEventListener(c.TF.MOUSE_UP, this.menuButtonPressBind), this.menuButton.addEventListener(c.TF.ROLL_OVER, this.menuButtonRollBind), g.Z.hideHUD && (this.menuButton.visible = false), this.session._pixiSprite.name = "session", this.parent.addChildAt(this.session, 0), this.session.create(), this.parent.stage.focus = this.parent.stage, this.sessionContentLoader.removeEventListener(c.ju.COMPLETE, this.beginSessionBind), this.sessionContentLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.sessionContentLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.sessionContentLoader = null, this.session.addEventListener(P.Px.COMPLETED, this.sessionCompleteHandlerBind), this.parent.stage.addEventListener(c._d.KEY_DOWN, this.keyDownHandlerBind), window.parent.history.replaceState({}, document.title, t), this.lastSessionStartTime = i.stop();
                }, n.loadErrorHandler = function (e) {
                    this.loadContainer.hide(), this.sessionContentLoader.removeEventListener(c.ju.COMPLETE, this.beginSessionBind), this.sessionContentLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.sessionContentLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind);
                    var t, i = this.sessionContentLoader.errorString;
                    this.sessionContentLoader = null, t = "system_error" == i ? "There was an unexpected system Error" : "invalid_action" == i ? "An invalid action was passed (you really shouldn't ever be seeing this)." : "bad_param" == i ? "A bad parameter was passed (you really shouldn't ever be seeing this)." : "app_error" == i ? "Sorry, there was an application error. It was most likely database related. Please try again in a moment." : "An unknown Error has occurred.", this.openPrompt(t, "ok"), this.dispatchEvent(new P.z4(P.z4.MAIN_MENU));
                }, n.IOErrorHandler = function (e) {
                    this.loadContainer.hide(), this.sessionContentLoader.removeEventListener(c.ju.COMPLETE, this.beginSessionBind), this.sessionContentLoader.removeEventListener(c.XD.IO_ERROR, this.IOErrorHandlerBind), this.sessionContentLoader.removeEventListener(c.k6.ERROR, this.loadErrorHandlerBind), this.sessionContentLoader = null, this.openPrompt("Sorry, there was a problem loading the level. Please wait a moment and then try again.", "alright"), this.dispatchEvent(new P.z4(P.z4.MAIN_MENU));
                }, n.killSession = function () {
                    this.session.die(true), this.session.removeEventListener(P.Px.COMPLETED, this.sessionCompleteHandlerBind), this.parent.removeChild(this.session), this.menuButton.addEventListener(c.TF.MOUSE_UP, this.menuButtonPressBind), this.menuButton.addEventListener(c.TF.ROLL_OVER, this.menuButtonRollBind), this.parent.removeChild(this.menuButton), this.victoryMC && (this.parent.removeChild(this.victoryMC), this.victoryMC = null), g.Z.currentSession = this.session = null, this.parent.stage.removeEventListener(c._d.KEY_DOWN, this.keyDownHandlerBind);
                }, n.menuButtonPress = function (e) {
                    void 0 === e && (e = null), this.replayDataObject ? this.sessionReplayMenu ? this.closeSessionReplayMenu() : this.openSessionReplayMenu() : this.sessionMenu ? this.sessionMenu.disableKeys || this.closeSessionMenu() : this.openSessionMenu();
                }, n.menuButtonRoll = function (e) {
                    y.xx.instance.show("Tab (esc is now used to exit fullscreen)", this.menuButton);
                }, n.sessionCompleteHandler = function (e) {
                    this.session.removeEventListener(P.Px.COMPLETED, this.sessionCompleteHandlerBind), this.replayDataObject ? this.openSessionReplayMenu(false) : this.openSessionMenu(false);
                }, n.keyDownHandler = function (e) {
                    if (this.session) switch (e.keyCode) {
                        case 9:
                            this.menuButtonPress();
                            break;
                        case g.Z.switchCameraCode:
                            this.session.isReplay && this.session.character.switchCamera();
                    }
                }, n.openSessionMenu = function (e) {
                    if (void 0 === e && (e = true), !this.sessionMenu && !this.loadContainer.showing) {
                        this.sessionMenu = new ee(this.levelDataObject, this.disableSave), this.sessionMenu.addEventListener(ee.RESTART_LEVEL, this.restartLevelBind), this.sessionMenu.addEventListener(ee.CHOOSE_CHARACTER, this.reopenCharacterMenuBind), this.sessionMenu.addEventListener(ee.VIEW_REPLAY, this.replayLevelBind), this.sessionMenu.addEventListener(ee.SAVE_REPLAY, this.openSaveReplayMenuBind), this.sessionMenu.addEventListener(ee.CANCEL, this.closeSessionMenuBind), this.sessionMenu.addEventListener(ee.EXIT, this.returnToMainMenuBind);
                        var t = this.sessionMenu.window;
                        if (this.parent.addChild(t), t.center(), this.sessionMenu.init(), void 0 !== window.HW_SETTINGS.cameraMode && (this.sessionMenu.alpha = 0, this.sessionMenu.window.alpha = 0), e) this.session.pause(); else {
                            var i = t.y;
                            if (t.y = 520, this.session.replayData.completed) {
                                if (void 0 === window.HW_SETTINGS.cameraMode) {
                                    this.victoryMC = new c.KG, this.victoryMC.setPixiMovieClip((0, E.qX)("GameUI", "mc_victory_mc"), true), this.victoryMC.x = 450, this.victoryMC.y = 175, this.victoryMC.loop = false, this.victoryMC.play();
                                    var s = this.session.replayData.getLength() / 30;
                                    this.victoryMC.timeText.textField.pixiSprite.text = v.LC.setToHundredths(s) + " seconds", this.victoryMC.timeText.filters = [new c.Vw(16777215, 1, 2, 2, 1, 2)], this.parent.addChildAt(this.victoryMC, this.parent.getChildIndex(t)), i = 120, T.iC.to(t, .5, { y: i, ease: T.Yp.easeOut, delay: 1.5 });
                                }
                            } else T.iC.to(t, .5, { y: i, ease: T.Yp.easeOut });
                        }
                    }
                }, n.closeSessionMenu = function (e) {
                    void 0 === e && (e = null), this.sessionMenu && (this.sessionMenu.die(), this.sessionMenu.removeEventListener(ee.RESTART_LEVEL, this.restartLevelBind), this.sessionMenu.removeEventListener(ee.CHOOSE_CHARACTER, this.reopenCharacterMenuBind), this.sessionMenu.removeEventListener(ee.VIEW_REPLAY, this.replayLevelBind), this.sessionMenu.removeEventListener(ee.SAVE_REPLAY, this.openSaveReplayMenuBind), this.sessionMenu.removeEventListener(ee.CANCEL, this.closeSessionMenuBind), this.sessionMenu.removeEventListener(ee.EXIT, this.returnToMainMenuBind), this.sessionMenu = null, this.session.unpause());
                }, n.openSessionReplayMenu = function (e) {
                    if (void 0 === e && (e = true), !this.sessionReplayMenu && !this.loadContainer.showing) {
                        e && this.session.pause(), this.sessionReplayMenu = new ie(this.replayDataObject), this.sessionReplayMenu.addEventListener(ie.RESTART_REPLAY, this.replayLevelBind), this.sessionReplayMenu.addEventListener(ie.PLAY_LEVEL, this.restartLevelBind), this.sessionReplayMenu.addEventListener(ie.CHOOSE_CHARACTER, this.reopenCharacterMenuBind), this.sessionReplayMenu.addEventListener(ie.CANCEL, this.closeSessionReplayMenuBind), this.sessionReplayMenu.addEventListener(ie.EXIT, this.returnToMainMenuBind);
                        var t = this.sessionReplayMenu.window;
                        this.parent.addChild(t), t.center();
                    }
                }, n.closeSessionReplayMenu = function (e) {
                    void 0 === e && (e = null), this.sessionReplayMenu && (this.sessionReplayMenu.die(), this.sessionReplayMenu.removeEventListener(ie.RESTART_REPLAY, this.replayLevelBind), this.sessionReplayMenu.removeEventListener(ie.PLAY_LEVEL, this.restartLevelBind), this.sessionReplayMenu.removeEventListener(ie.CHOOSE_CHARACTER, this.reopenCharacterMenuBind), this.sessionReplayMenu.removeEventListener(ie.CANCEL, this.closeSessionReplayMenuBind), this.sessionReplayMenu.removeEventListener(ie.EXIT, this.returnToMainMenuBind), this.sessionReplayMenu = null, this.session.unpause());
                }, n.reopenCharacterMenu = function (e) {
                    this.replayDataObject = null, this.disableSave = false, this.closeSessionMenu(), this.closeSessionReplayMenu(), this.killSession(), this.levelDataObject.forceChar ? this.loadSession() : (this.restartCount += 1, v.fX.trackEvent(v.fX.LEVEL, v.fX.RESTART, "levelID_" + this.levelDataObject.id, this.restartCount), this.openCharacterMenu());
                }, n.returnToMainMenu = function (e) {
                    this.closeSessionMenu(), this.closeSessionReplayMenu(), this.killSession(), this.dispatchEvent(new P.z4(P.z4.MAIN_MENU));
                }, n.restartLevel = function (e) {
                    var t = this;
                    void 0 === e && (e = null);
                    var i = function () {
                        t.closeSessionMenu(), t.closeSessionReplayMenu(), t.disableSave = false, t.replayDataObject = null, t.victoryMC && (t.parent.removeChild(t.victoryMC), t.victoryMC = null), t.restartCount += 1, v.fX.trackEvent(v.fX.LEVEL, v.fX.RESTART, "levelID_" + t.levelDataObject.id, t.restartCount);
                        var e = t.session.character, i = t.session.level, s = t.session.containerSprite, r = t.session.levelVersion;
                        t.session.die(), t.session.removeEventListener(P.Px.COMPLETED, t.sessionCompleteHandlerBind), t.parent.removeChild(t.session);
                        var o = new v.uX;
                        g.Z.currentSession = new ye(s, g.Z.CURRENT_VERSION, e, i, r, g.Z.useDebug), t.session = g.Z.currentSession, t.parent.addChildAt(t.session, 0), t.session.create(), t.loadContainer.hide(), t.session.addEventListener(P.Px.COMPLETED, t.sessionCompleteHandlerBind), t.lastSessionStartTime = o.stop();
                    };
                    if (this.lastSessionStartTime < 200) i(); else {
                        var s = Math.floor(Math.random() * this.restartMessages.length);
                        this.loadContainer.setText(this.restartMessages[s]), this.loadContainer.show(i);
                    }
                }, n.replayLevel = function (e) {
                    var t = this;
                    this.closeSessionMenu(), this.closeSessionReplayMenu(), this.victoryMC && (this.parent.removeChild(this.victoryMC), this.victoryMC = null), this.replayCount += 1, v.fX.trackEvent(v.fX.LEVEL, v.fX.VIEW_REPLAY, "levelID_" + this.levelDataObject.id, this.replayCount);
                    var i = Math.floor(Math.random() * this.replayMessages.length);
                    this.loadContainer.setText(this.replayMessages[i]), this.loadContainer.show(function () {
                        var e = t.session.character, i = t.session.level, s = t.session.containerSprite, r = t.session.replayData, o = t.session.version, n = t.session.levelVersion;
                        t.session.die(), t.session.removeEventListener(P.Px.COMPLETED, t.sessionCompleteHandlerBind), t.parent.removeChild(t.session), g.Z.currentSession = new Se(s, o, e, i, n, r), t.session = g.Z.currentSession, t.parent.addChildAt(t.session, 0), t.session.create(), t.loadContainer.hide(), t.session.addEventListener(P.Px.COMPLETED, t.sessionCompleteHandlerBind);
                    });
                }, n.openSaveReplayMenu = function (e) {
                    if (this.session.replayData.getLength() > g.Z.maxReplayFrames) this.openPrompt("Sorry, your replay must be less than 200 seconds.", "ok"); else {
                        this.sessionMenu.disableKeys = true, this.saveReplayMenu = new Z(this.session.replayData, this.levelDataObject.id, g.Z.characterIndex), this.saveReplayMenu.addEventListener(Z.SAVE_COMPLETE, this.closeSaveReplayMenuBind), this.saveReplayMenu.addEventListener(Z.GENERIC_ERROR, this.closeSaveReplayMenuBind), this.saveReplayMenu.addEventListener(y.Rz.WINDOW_CLOSED, this.closeSaveReplayMenuBind);
                        var t = this.saveReplayMenu.window;
                        this.parent.addChild(t), t.center();
                    }
                }, n.closeSaveReplayMenu = function (e) {
                    this.saveReplayMenu.removeEventListener(Z.SAVE_COMPLETE, this.closeSaveReplayMenuBind), this.saveReplayMenu.removeEventListener(Z.GENERIC_ERROR, this.closeSaveReplayMenuBind), this.saveReplayMenu.removeEventListener(y.Rz.WINDOW_CLOSED, this.closeSaveReplayMenuBind), this.saveReplayMenu.die(), this.sessionMenu.disableKeys = false, e.type == Z.GENERIC_ERROR && this.openPrompt(this.saveReplayMenu.errorMessage, "alright"), e.type == Z.SAVE_COMPLETE && (v.fX.trackEvent(v.fX.LEVEL, v.fX.SAVE_REPLAY, "levelID_" + this.levelDataObject.id), this.disableSave = true, this.sessionMenu.disableSave = true, this.openPrompt("Replay succesfully saved: id " + this.saveReplayMenu.newReplayID, "ok"));
                }, n.openPrompt = function (e, t) {
                    this.promptSprite = new y.sP(e, t);
                    var i = this.promptSprite.window;
                    this.parent.addChild(i), i.center();
                }, n.die = function () {
                    this.session && this.killSession();
                }, s;
            }(c.pB), le = i(306), ce = i(165), de = i(488);
            function pe(e, t) {
                return (pe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ue = function (e) {
                var t, i;
                function s(t, i, s, r, o, n) {
                    var a;
                    return (a = e.call(this, t, i, s, r, n) || this)._frameRateCount = 0, a._extraUpdates = 0, a._realUpdateFrames = 0, a._accumulatedStep = 1, a.steps = 0, a._replayData = o, a.mouseClickMap = a._replayData.getMouseClickMap(), a.totalIterations = a._replayData.getLength(), a.isReplay = true, a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, pe(t, i);
                var r, o, a = s.prototype;
                return a.create = function () {
                    this._particleController = new ce.z(this._containerSprite), this.createWorld(), this._level.create(), this._character.create(), this._containerSprite.addChild(this._level.foreground), this._camera = new n.M(this._containerSprite, this._character.cameraFocus, this), this._camera.secondFocus = this._character.cameraSecondFocus;
                    var e = this._level.cameraBounds;
                    this._camera.setLimits(e.x, e.x + e.width, e.y, e.y + e.height), this._camera.step(1), this.setupTextFields(), this._containerSprite.addChild(this.debug_sprite), this.m_world.InterpolatedStep(1), this._character.paint(), this.start();
                }, a.start = function () {
                    this.paused = false, this.inputAllowed = true, this.frames = 0, this._iteration = 0, this.addReplayControls(), this.fpsCounter = new de.c(this.fpsText), this._useCulling && this.cullObjects(), this.addEventListener(c.ju.ENTER_FRAME, this.runBind);
                }, a.addReplayControls = function () {
                    this.keyDisplay = new le.eZ(this._character), this.addChild(this.keyDisplay), this.replayProgressBar = new le.sH, this.replayProgressBar.x = 150, this.replayProgressBar.y = 20, this.addChild(this.replayProgressBar), g.Z.hideHUD && (this.keyDisplay.visible = this.replayProgressBar.visible = this.fpsText.visible = false);
                }, a.removeReplayControls = function () {
                    this.removeChild(this.keyDisplay), this.keyDisplay = null, this.replayProgressBar.die(), this.stage.frameRate = 30;
                }, a.update = function () {
                    30 === c.Xj.maxFPS ? this.update30fps() : this.update60fps();
                }, a.update30fps = function () {
                    if (_.of.USE_INTERPOLATION = false, this.replayProgressBar.updateProgress(this.iteration, this.totalIterations), this.frames += 1, this.steps += 1, this._character.preActions(), this.inputAllowed) {
                        var e = this.mouseClickMap[this.iteration.toString()];
                        e && this.level.mouseClickTrigger(e), this.iteration >= this.totalIterations ? this.levelComplete() : this._character.checkReplayData(this.keyDisplay, this.replayData.getKeyEntry(this.iteration)), this._iteration++;
                    } else this._character.doNothing();
                    this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._level.actions(), this._character.paint(), this._level.paint(), this._camera.step(1), this._particleController.step(1), S.ij.instance.step(), this._useCulling && this.cullObjects(), this._accumulatedStep = 0;
                }, a.update60fps = function () {
                    _.of.USE_INTERPOLATION = true, this.replayProgressBar.updateProgress(this.iteration, this.totalIterations), this.frames += 1, this.steps += 1;
                    var e = 30 / c.Xj.maxFPS;
                    if (1 === this.steps && (e = 1), this._accumulatedStep += e, this._accumulatedStep >= 1 && (this._accumulatedStep = 1), this.m_world.InterpolatedStep(this._accumulatedStep), 1 === this._accumulatedStep) {
                        if (this._character.preActions(), this.inputAllowed) {
                            var t = this.mouseClickMap[this.iteration.toString()];
                            t && this.level.mouseClickTrigger(t), this.iteration >= this.totalIterations ? this.levelComplete() : this._character.checkReplayData(this.keyDisplay, this.replayData.getKeyEntry(this.iteration)), this._iteration++;
                        } else this._character.doNothing();
                        this._character.actions(), this.m_world.Step(this.m_timeStep, this.m_iterations), this._character.handleContactBuffer(), this._character.checkJoints(), this._level.actions();
                    }
                    1 === this.steps && this.m_world.InterpolatedStep(1), this._character.paint(), this._level.paint(), this._camera.step(e), this._particleController.step(e), 1 === this._accumulatedStep && (S.ij.instance.step(), this._accumulatedStep = 0), this._useCulling && this.cullObjects();
                }, a.run = function (e) {
                    if (this.fpsCounter.begin(), this.stage.frameRate !== this._previousFrameRate && (this.extraUpdates = this.stage.frameRate, this._previousFrameRate = this.stage.frameRate), this._extraUpdates > 0) for (var t = 0; t <= this._extraUpdates; t++) this.update(); else this._realUpdateFrames % this._frameRateCount == 0 && this.update();
                    this._realUpdateFrames++, this.fpsCounter.end();
                }, a.levelComplete = function (e) {
                    void 0 === e && (e = null), this.inputAllowed = false, this.dispatchEvent(new P.Px(P.Px.COMPLETED));
                }, a.die = function () {
                    e.prototype.die.call(this), this.removeReplayControls();
                }, r = s, (o = [{
                    key: "extraUpdates", set: function (e) {
                        switch (e) {
                            case 5:
                                this._extraUpdates = -2, this._frameRateCount = 3;
                                break;
                            case 15:
                                this._extraUpdates = -1, this._frameRateCount = 2;
                                break;
                            case 30:
                                this._extraUpdates = 0, this._frameRateCount = 1;
                                break;
                            case 60:
                                this._extraUpdates = 1;
                                break;
                            case 100:
                                this._extraUpdates = 2;
                        }
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(r.prototype, o), Object.defineProperty(r, "prototype", { writable: false }), s;
            }(O.z);
            function me(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function fe(e, t) {
                return (fe = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var ye = function (e) {
                var t, i;
                function s(t, i, s, r, o, n) {
                    var a;
                    return (a = e.call(this, i, null, null, o, n) || this)._containerSprite = t, a.addChild(a._containerSprite), a._character = s, a._character.session = me(a), a._level = r, a._level.session = me(a), a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, fe(t, i);
                var r = s.prototype;
                return r.init = function (e, t) { }, r.create = function () {
                    this._particleController = new ce.z(this._containerSprite), this.createWorld(), this._level.reset(), this._level.insertBackDrops(), this._character.reset(), this._character.addKeyListeners(), this._camera = new n.M(this._containerSprite, this._character.cameraFocus, this), this._camera.secondFocus = this._character.cameraSecondFocus;
                    var e = this._level.cameraBounds;
                    this._camera.setLimits(e.x, e.x + e.width, e.y, e.y + e.height), this._camera.step(1), this.setupTextFields(), this._containerSprite.addChild(this.debug_sprite), this._character.addEventListener(P.j3.ADD_ENTRY, this.addReplayEntryBind), this._character.paint(), this.addKeyDisplay(), this.start();
                }, s;
            }(O.z);
            function ve(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function ge(e, t) {
                return (ge = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var Se = function (e) {
                var t, i;
                function s(t, i, s, r, o, n) {
                    var a;
                    return (a = e.call(this, i, null, null, o, n) || this)._containerSprite = t, a.addChild(a._containerSprite), a._character = s, a._character.session = ve(a), a._level = r, a._level.session = ve(a), a;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, ge(t, i);
                var r = s.prototype;
                return r.init = function (e, t) { }, r.create = function () {
                    this._particleController = new ce.z(this._containerSprite), this.createWorld(), this._level.reset(), this._level.insertBackDrops(), this._character.reset(), this._camera = new n.M(this._containerSprite, this._character.cameraFocus, this), this._camera.secondFocus = this._character.cameraSecondFocus;
                    var e = this._level.cameraBounds;
                    this._camera.setLimits(e.x, e.x + e.width, e.y, e.y + e.height), this._camera.step(1), this.setupTextFields(), this._containerSprite.addChild(this.debug_sprite), this.m_world.InterpolatedStep(1), this._character.paint(), this.start();
                }, s;
            }(ue);
        }, 395: (e, t, i) => {
            "use strict";
            i.d(t, { p: () => h }), i(26), i(42), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(547), o = i(15);
            function n(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function a(e, t) {
                return (a = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var h = function (e) {
                var t, i;
                function h() {
                    var t;
                    return (t = e.call(this) || this).levelDataLoaded = function (e) {
                        var i;
                        t.removeLoaderListeners();
                        var o = String(t.loader.data), a = o.substr(0, 8);
                        if (a.indexOf("<html>") > -1) {
                            t._errorString = "system_error";
                            var l = new s.ju(h.LOAD_ERROR);
                            return l.target = n(t), void t.dispatchEvent(l);
                        }
                        if (a.indexOf("failure") > -1) {
                            var c = o.split(":");
                            t._errorString = c[1];
                            var d = new s.ju(h.LOAD_ERROR);
                            return d.target = n(t), void t.dispatchEvent(d);
                        }
                        if (0 === o.length) {
                            var p = new s.ju(h.ID_NOT_FOUND);
                            return p.target = n(t), void t.dispatchEvent(p);
                        }
                        var u = new s.hH(t.loader.data);
                        if ((null === (i = u.lv) || void 0 === i ? void 0 : i.length) > 0) {
                            var m = u.lv[0];
                            t._levelDataObject = new r.bm(m["@id"], m["@ln"], m["@ui"], m["@un"], m["@rg"], m["@vs"], m["@ps"], m["@dp"], m.uc[0].cdata, m["@pc"], "1", "1", "1", m["@dp"]);
                            var f = new s.ju(h.LEVEL_LOADED);
                            f.target = n(t), t.dispatchEvent(f);
                        } else {
                            var y = new s.ju(h.ID_NOT_FOUND);
                            y.target = n(t), t.dispatchEvent(y);
                        }
                    }, t.IOErrorHandler = function (e) {
                        t.removeLoaderListeners(), t._errorString = "io_error";
                        var i = new s.ju(h.LOAD_ERROR);
                        i.target = n(t), t.dispatchEvent(i);
                    }, t.securityErrorHandler = function (e) {
                        t.removeLoaderListeners(), t._errorString = "security_error";
                        var i = new s.ju(h.LOAD_ERROR);
                        i.target = n(t), t.dispatchEvent(i);
                    }, t;
                }
                i = e, (t = h).prototype = Object.create(i.prototype), t.prototype.constructor = t, a(t, i);
                var l, c, d = h.prototype;
                return d.load = function (e) {
                    var t = new s.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/get_level.hw"));
                    t.method = s.H9.POST;
                    var i = new s.JH;
                    i.level_id = e, i.action = "get_level", t.data = i, this.loader = new s.yW, this.loader.addEventListener(s.ju.COMPLETE, this.levelDataLoaded), this.loader.addEventListener(s.XD.IO_ERROR, this.IOErrorHandler), this.loader.addEventListener(s.P5.SECURITY_ERROR, this.securityErrorHandler), this.loader.load(t);
                }, d.removeLoaderListeners = function () {
                    this.loader.removeEventListener(s.ju.COMPLETE, this.levelDataLoaded), this.loader.removeEventListener(s.XD.IO_ERROR, this.IOErrorHandler), this.loader.removeEventListener(s.P5.SECURITY_ERROR, this.securityErrorHandler);
                }, d.die = function () {
                    this.removeLoaderListeners();
                }, l = h, (c = [{
                    key: "levelDataObject", get: function () {
                        return this._levelDataObject;
                    }
                }, {
                    key: "errorString", get: function () {
                        return this._errorString;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(l.prototype, c), Object.defineProperty(l, "prototype", { writable: false }), h;
            }(s.jy);
            h.ID_NOT_FOUND = "idnotfound", h.LEVEL_LOADED = "levelloaded", h.LOAD_ERROR = "error";
        }, 396: (e, t, i) => {
            "use strict";
            i.d(t, { O: () => l }), i(26), i(42), i(4), i(5), i(1), i(2), i(0), i(3);
            var s = i(6), r = i(394), o = i(168), n = i(15);
            function a(e) {
                if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                return e;
            }
            function h(e, t) {
                return (h = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var l = function (e) {
                var t, i;
                function l() {
                    var t;
                    return (t = e.call(this) || this).replayDataLoaded = function (e) {
                        var i, n;
                        t.removeLoaderListeners();
                        var h = String(t.loader.data), c = h.substr(0, 8);
                        if (c.indexOf("<html>") > -1) {
                            t._errorString = "system_error";
                            var d = new s.ju(l.LOAD_ERROR);
                            return d.target = a(t), void t.dispatchEvent(d);
                        }
                        if (c.indexOf("failure") > -1) {
                            var p = h.split(":");
                            t._errorString = p[1];
                            var u = new s.ju(l.LOAD_ERROR);
                            return u.target = a(t), void t.dispatchEvent(u);
                        }
                        if (0 === h.length) {
                            var m = new s.ju(l.ID_NOT_FOUND);
                            return m.target = a(t), void t.dispatchEvent(m);
                        }
                        var f = new s.hH(t.loader.data);
                        if ((null === (i = f.lv) || void 0 === i ? void 0 : i.length) > 0 && (null === (n = f.rp) || void 0 === n ? void 0 : n.length) > 0) {
                            var y = f.lv[0];
                            t._levelDataObject = new o.b(y["@id"], y["@ln"], y["@ui"], y["@un"], y["@rg"], y["@vs"], y["@ps"], y["@dp"], y.uc[0].cdata, y["@pc"], "1", "1", "1", y["@dp"]);
                            var v = f.rp[0];
                            t._replayDataObject = new r.X(v["@id"], v["@li"], v["@ui"], v["@un"], v["@rg"], v["@vs"], v["@vw"], v["@dc"], v.uc[0].cdata, v["@pc"], v["@ct"], v["@ar"], v["@vr"]);
                            var g = new s.ju(l.REPLAY_AND_LEVEL_LOADED);
                            g.target = a(t), t.dispatchEvent(g);
                        } else {
                            var S = new s.ju(l.ID_NOT_FOUND);
                            S.target = a(t), t.dispatchEvent(S);
                        }
                    }, t.IOErrorHandler = function (e) {
                        t.removeLoaderListeners(), t._errorString = "io_error";
                        var i = new s.ju(l.LOAD_ERROR);
                        i.target = a(t), t.dispatchEvent(i);
                    }, t.securityErrorHandler = function (e) {
                        t.removeLoaderListeners(), t._errorString = "security_error";
                        var i = new s.ju(l.LOAD_ERROR);
                        i.target = a(t), t.dispatchEvent(i);
                    }, t;
                }
                i = e, (t = l).prototype = Object.create(i.prototype), t.prototype.constructor = t, h(t, i);
                var c, d, p = l.prototype;
                return p.load = function (e) {
                    var t = new s.RW(window.HW_SETTINGS.corsProxy + encodeURIComponent("https://totaljerkface.com/replay.hw"));
                    t.method = s.H9.POST;
                    var i = new s.JH;
                    i.replay_id = e, i.action = "get_combined", t.data = i, this.loader = new s.yW, this.loader.addEventListener(s.ju.COMPLETE, this.replayDataLoaded), this.loader.addEventListener(s.XD.IO_ERROR, this.IOErrorHandler), this.loader.addEventListener(s.P5.SECURITY_ERROR, this.securityErrorHandler), this.loader.load(t);
                }, p.removeLoaderListeners = function () {
                    this.loader.removeEventListener(s.ju.COMPLETE, this.replayDataLoaded), this.loader.removeEventListener(s.XD.IO_ERROR, this.IOErrorHandler), this.loader.removeEventListener(s.P5.SECURITY_ERROR, this.securityErrorHandler);
                }, p.die = function () {
                    this.removeLoaderListeners();
                }, c = l, (d = [{
                    key: "replayDataObject", get: function () {
                        return this._replayDataObject;
                    }
                }, {
                    key: "levelDataObject", get: function () {
                        return this._levelDataObject;
                    }
                }, {
                    key: "errorString", get: function () {
                        return this._errorString;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(c.prototype, d), Object.defineProperty(c, "prototype", { writable: false }), l;
            }(s.jy);
            l.ID_NOT_FOUND = "idnotfound", l.REPLAY_LOADED = "replayloaded", l.REPLAY_AND_LEVEL_LOADED = "replayandlevelloaded", l.LOAD_ERROR = "error";
        }, 214: (e, t, i) => {
            "use strict";
            i.d(t, { L: () => s }), i(3), i(26), i(54);
            var s = function () {
                function e() { }
                return e.addIntegerCommas = function (e) {
                    var t = String(e), i = Math.floor((t.length - 1) / 3);
                    if (0 == i) return t;
                    var s = t.length % 3;
                    0 == s && (s = 3);
                    for (var r = t.substr(0, s), o = 0; o < i; o++) r = r + "," + t.substr(s, 3), s += 3;
                    return r;
                }, e.shortenDate = function (e) {
                    var t = String(e.getMonth() + 1), i = String(e.getDate()), s = String(e.getFullYear()).substr(2, 2);
                    return String(t) + "/" + i + "/" + s;
                }, e.setToHundredths = function (e) {
                    var t = Math.round(100 * Number(e));
                    if (0 == t) return "0.00";
                    var i = String(t), s = i.length - 2, r = s <= 0 ? "0" : i.substr(0, s), o = i.substr(s, 2);
                    return s < 0 && (o = "0" + o), String(r) + "." + o;
                }, e.removeSlashes = function (e) {
                    return e.replace(/\\/g, "");
                }, e.randomNumString = function (e, t, i) {
                    var s = Math.round(Math.random() * (t - e) + e) - 1, r = "", o = Math.round(8 * Math.random() + 1);
                    r += o;
                    for (var n = 1; n < s; n++) r += o = Math.round(9 * Math.random());
                    return o = 2 * Math.round(4 * Math.random()), i && (o += 1), r + o;
                }, e.trimWhitespace = function (e) {
                    for (; " " == e.charAt(0);) e = e.substr(1, e.length);
                    for (; " " == e.charAt(e.length - 1);) e = e.substr(0, e.length - 1);
                    return e;
                }, e.parseValue = function (e) {
                    if ("number" == typeof e || "boolean" == typeof e) return e;
                    if ("true" === e || "TRUE" === e || "True" === e || "t" === e) return true;
                    if ("false" === e || "FALSE" === e || "False" === e || "f" === e) return true;
                    var t = parseFloat(e);
                    return isNaN(t) ? e : t;
                }, e;
            }();
        }, 164: (e, t, i) => {
            "use strict";
            i.d(t, { f: () => r });
            var s = i(307), r = function () {
                function e() { }
                return e.trackEvent = function (e, t, i, r, o) {
                    void 0 === i && (i = null), void 0 === r && (r = -1), void 0 === o && (o = false);
                    var n = t;
                    null !== i && (n += " | " + i), r > -1 && (n += " | " + r), s.n_({ category: e, message: n, level: "info" });
                }, e;
            }();
            r.PRELOADER = "preloader", r.MAIN_MENU = "main_menu", r.FEATURED_BROWSER = "featured_browser", r.LEVEL_BROWSER = "level_browser", r.REPLAY_BROWSER = "replay_browser", r.LEVEL_REPLAY_LOADER = "level_replay_loader", r.EDITOR = "editor", r.OPTIONS = "options", r.CREDITS = "credits", r.LEVEL = "level", r.REPLAY = "replay", r.CHARACTER_MENU = "character_menu", r.BEGIN_LOAD = "begin_load", r.AD_COMPLETE = "ad_complete", r.LOAD_COMPLETE = "load_complete", r.GOTO_MAIN_MENU = "goto_main_menu", r.GOTO_FEATURED_BROWSER = "goto_featured_browser", r.GOTO_LEVEL_BROWSER = "goto_level_browser", r.GOTO_REPLAY_BROWSER = "goto_replay_browser", r.GOTO_LEVEL_REPLAY_LOADER = "goto_level_replay_loader", r.GOTO_EDITOR = "goto_editor", r.GOTO_OPTIONS = "goto_options", r.GOTO_CREDITS = "goto_credits", r.GOTO_USER_PAGE = "goto_user_page", r.CLICK_IOS_LINK = "click_ios_link", r.CLICK_GOOGLEPLAY_LINK = "click_google_play_link", r.MUTE = "mute", r.UNMUTE = "unmute", r.GET_FAVORITES = "get_favorites", r.GET_LEVELS_BY_AUTHOR = "get_levels_by_author", r.LEVEL_SEARCH = "level_search", r.AUTHOR_SEARCH = "author_search", r.ADD_FAVORITE = "add_favorite", r.REMOVE_FAVORITE = "remove_favorite", r.REFRESH_LEVELS = "refresh_levels", r.PAGE_LEVELS = "page_levels", r.REFRESH_REPLAYS = "refresh_replays", r.PAGE_REPLAYS = "page_replays", r.LOAD_REPLAY = "load_replay", r.SAVE_LEVEL = "save_level", r.OVERWRITE_LEVEL = "overwrite_level", r.PUBLISH_LEVEL = "publish_level", r.LOAD_LEVEL = "load_level", r.DELETE_LEVEL = "delete_level", r.IMPORT_LEVELDATA = "import_leveldata", r.COPY_LEVELDATA = "copy_leveldata", r.SET_QUALITY = "set_quality", r.SET_BLOOD = "set_blood", r.CUSTOMIZE_CONTROLS = "customize_controls", r.VOTE = "vote", r.RESTART = "restart", r.CHANGE_CHARACTER = "change_character", r.CHARACTER_SELECTED = "character_selected", r.VIEW_REPLAY = "view_replay", r.SAVE_REPLAY = "save_replay";
        }, 104: (e, t, i) => {
            "use strict";
            i.d(t, { O: () => o, T: () => r }), i(62), i(26), i(42);
            var s = {};
            function r(e, t) {
                void 0 === t && (t = s), Object.assign(t, e);
            }
            function o(e, t) {
                var i = e.split(".").pop();
                if (!i) throw new Error("Invalid definition name: " + i + " - full name: " + e);
                if (void 0 === (s[i] || t)) throw new Error("Definition not available: " + i + " - full name: " + e);
                return s[i];
            }
        }, 89: (e, t, i) => {
            "use strict";
            i.d(t, { uX: () => n, LC: () => r.L, fX: () => o.f, O0: () => s.O, pI: () => l, TL: () => s.T });
            var s = i(104), r = i(214), o = i(164), n = function () {
                function e() {
                    this.startTime = Date.now();
                }
                return e.prototype.stop = function () {
                    return Date.now() - this.startTime;
                }, e;
            }(), a = i(6), h = i(25);
            function l(e) {
                var t = new a.KG, i = "Character" + e;
                return t.setPixiMovieClip((0, h.qX)(i)), t.convertChildren(t.pixiMovieClip), t;
            }
        }, 315: (e, t, i) => {
            "use strict";
            i.d(t, { SK: () => l, dr: () => w, sA: () => b, cC: () => g, kk: () => d }), i(26), i(42), i(155), i(61), i(41), i(430), i(0), i(34), i(4), i(5), i(1), i(2), i(3);
            var s = i(208), r = i(69), o = (i(166), 0), n = function () {
                function e(e) {
                    this.byteArr = e, this.references = [];
                }
                var t = e.prototype;
                return t.getReference = function (e) {
                    var t = this.references.indexOf(e);
                    return t >= 0 ? t : (this.references.push(e), false);
                }, t.writeReference = function (e) {
                    this.byteArr.writeByte(7), this.byteArr.writeUnsignedShort(e);
                }, t.writeObjectEnd = function () {
                    this.byteArr.writeShort(0), this.byteArr.writeByte(9);
                }, t.readObjectEnd = function (e) {
                    if (9 === this.byteArr.readByte()) return e;
                    throw new Error("Invalid object end marker found.");
                }, t.writeString = function (e, t) {
                    void 0 === t && (t = true);
                    var i = e.length > 65535;
                    t && this.byteArr.writeByte(i ? 12 : 2), i ? this.byteArr.writeUnsignedInt(e.length) : this.byteArr.writeUnsignedShort(e.length), this.byteArr.writeUTFBytes(e);
                }, t.writeObject = function (e) {
                    var t = this.getReference(e);
                    if (false !== t) return this.writeReference(t);
                    for (var i in this.byteArr.writeByte(3), e) this.writeString(i, false), this.write(e[i]);
                    this.writeObjectEnd();
                }, t.readObject = function () {
                    var e = {};
                    this.references.push(e);
                    for (var t = this.byteArr.readUTF(); "" !== t; e[t] = this.read(), t = this.byteArr.readUTF());
                    return this.readObjectEnd(e);
                }, t.writeECMAArray = function (e) {
                    var t = this.getReference(e);
                    if (false !== t) return this.writeReference(t);
                    for (var i in this.byteArr.writeByte(8), this.byteArr.writeUnsignedInt(Object.keys(e).length), e) this.writeString(String(i), false), this.write(e[i]);
                    this.writeObjectEnd();
                }, t.readECMAArray = function () {
                    var e = [], t = this.byteArr.readUnsignedInt();
                    this.references.push(e);
                    for (var i = 0; i < t; i++) e[this.byteArr.readUTF()] = this.read();
                    if (0 === this.byteArr.readShort()) return this.readObjectEnd(e);
                    throw new Error("Invalid object end string found.");
                }, t.writeDate = function (e) {
                    var t = this.getReference(e);
                    if (false !== t) return this.writeReference(t);
                    this.byteArr.writeByte(11), this.byteArr.writeDouble(e.getTime()), this.byteArr.writeShort(e.getTimezoneOffset());
                }, t.readDate = function () {
                    var e = new Date(this.byteArr.readDouble());
                    return this.byteArr.readShort(), this.references.push(e), e;
                }, t.writeTypedObject = function (e) {
                    var t = this.getReference(e);
                    if (false !== t) return this.writeReference(t);
                    for (var i in this.byteArr.writeByte(16), this.byteArr.writeUTF(this.byteArr.classMapping[e.constructor]), e) this.writeString(i, false), this.write(e[i]);
                    this.writeObjectEnd();
                }, t.readTypedObject = function () {
                    var e = {}, t = this.byteArr.readUTF();
                    if (!this.byteArr.aliasMapping[t]) throw new Error("The classname: '" + t + "' is not registered.");
                    var i = this.byteArr.aliasMapping[t];
                    this.references.push(e), e = new i;
                    for (var s = this.byteArr.readUTF(); "" !== s; e[s] = this.read(), s = this.byteArr.readUTF());
                    return this.readObjectEnd(e);
                }, t.write = function (e) {
                    if (null === e) this.byteArr.writeByte(5); else if (void 0 === e) this.byteArr.writeByte(6); else {
                        var t = e.constructor;
                        if (t === Boolean) this.byteArr.writeByte(1), this.byteArr.writeBoolean(e); else if (t === Number) this.byteArr.writeByte(o), this.byteArr.writeDouble(e); else if (t === String) this.writeString(e); else if (t === Object) this.writeObject(e); else if (t === Array) this.writeECMAArray(e); else if (t === Date) this.writeDate(e); else {
                            if (!this.byteArr.classMapping[t]) throw new Error("Unknown value type: '" + t + "'.");
                            this.writeTypedObject(e);
                        }
                    }
                }, t.read = function () {
                    var e = this.byteArr.readByte();
                    switch (e) {
                        case 5:
                            return null;
                        case 6:
                            return;
                        case 1:
                            return this.byteArr.readBoolean();
                        case o:
                            return this.byteArr.readDouble();
                        case 2:
                            return this.byteArr.readUTF();
                        case 12:
                            return this.byteArr.readUTFBytes(this.byteArr.readUnsignedInt());
                        case 7:
                            return this.references[this.byteArr.readUnsignedShort()];
                        case 3:
                            return this.readObject();
                        case 8:
                            return this.readECMAArray();
                        case 11:
                            return this.readDate();
                        case 16:
                            return this.readTypedObject();
                        default:
                            throw new Error("Unknown or unsupported AMF0 marker: '" + e + "'.");
                    }
                }, e;
            }(), a = (i(288), 0), h = function () {
                function e(e) {
                    this.byteArr = e, this.flags = 0, this.reference = null, this.stringReferences = [], this.objectReferences = [], this.traitReferences = [];
                }
                var t = e.prototype;
                return t.readUInt29 = function () {
                    for (var e = 0, t = 0; t < 4; t++) {
                        var i = this.byteArr.readUnsignedByte();
                        if (e = 3 === t ? (e << 8) + i : (e << 7) + (127 & i), !(128 & i)) break;
                    }
                    return e;
                }, t.writeUInt29 = function (e) {
                    if (e < 128) this.byteArr.writeUnsignedByte(e); else if (e < 16384) this.byteArr.writeUnsignedByte(e >> 7 & 127 | 128), this.byteArr.writeUnsignedByte(127 & e); else if (e < 2097152) this.byteArr.writeUnsignedByte(e >> 14 & 127 | 128), this.byteArr.writeUnsignedByte(e >> 7 & 127 | 128), this.byteArr.writeUnsignedByte(127 & e); else {
                        if (!(e < 1073741824)) throw new RangeError("The value: '" + e + "' is out of range for uint29.");
                        this.byteArr.writeUnsignedByte(e >> 22 & 127 | 128), this.byteArr.writeUnsignedByte(e >> 15 & 127 | 128), this.byteArr.writeUnsignedByte(e >> 8 & 127 | 128), this.byteArr.writeUnsignedByte(255 & e);
                    }
                }, t.popFlag = function () {
                    var e = 1 & this.flags;
                    return this.flags >>= 1, e;
                }, t.isReference = function (e) {
                    this.reference = null, "traitReferences" !== e && (this.flags = this.readUInt29());
                    var t = !this.popFlag();
                    return t && (this.reference = this[e][this.flags]), t;
                }, t.getReference = function (e, t) {
                    var i = this[t].indexOf(e);
                    return i >= 0 ? i : (this[t].push(e), false);
                }, t.write = function (e) {
                    if (null === e) this.byteArr.writeByte(1); else if (void 0 === e) this.byteArr.writeByte(a); else {
                        var t = e.constructor;
                        t === Boolean ? this.byteArr.writeByte(e ? 3 : 2) : t === Number && (e << 3 >> 3 === e ? (this.byteArr.writeByte(4), this.writeUInt29(536870911 & e)) : (this.byteArr.writeByte(5), this.byteArr.writeDouble(e)));
                    }
                }, t.read = function () {
                    var e = this.byteArr.readByte();
                    switch (e) {
                        case 1:
                            return null;
                        case a:
                            return;
                        case 3:
                            return true;
                        case 2:
                            return false;
                        case 4:
                            return this.readUInt29() << 3 >> 3;
                        case 5:
                            return this.byteArr.readDouble();
                        default:
                            throw new Error("Unknown or unsupported AMF3 marker: '" + e + "'.");
                    }
                }, e;
            }(), l = function () {
                function e(e) {
                    this.buffer = r.Buffer.isBuffer(e) ? e : Array.isArray(e) ? r.Buffer.from(e) : r.Buffer.alloc(0), this.position = 0, this.endian = true, this.objectEncoding = 3;
                }
                e.registerClassAlias = function (e, t) {
                    if (!e) throw new Error("Missing alias name.");
                    if (!t) throw new Error("Missing class object.");
                    this.classMapping[t] = e, this.aliasMapping[e] = t;
                };
                var t, i, o = e.prototype;
                return o.readBufferFunc = function (e, t) {
                    var i = this.buffer[e + this.endianStr](this.position);
                    return this.position += t, i;
                }, o.writeBufferFunc = function (e, t, i) {
                    this.expand(i), this.buffer[t + this.endianStr](e, this.position), this.position += i;
                }, o.expand = function (e) {
                    this.bytesAvailable < e && (this.buffer = r.Buffer.concat([this.buffer, r.Buffer.alloc(e - this.bytesAvailable)]));
                }, o.clear = function () {
                    this.buffer = r.Buffer.alloc(0), this.position = 0;
                }, o.compress = function (e) {
                    if (void 0 === e && (e = "deflate"), "zlib" === (e = e.toLowerCase())) this.buffer = (0, s.deflateSync)(this.buffer, { level: 9 }); else {
                        if ("deflate" !== e) throw new Error("Invalid compression algorithm: '" + e + "'.");
                        this.buffer = (0, s.deflateRawSync)(this.buffer);
                    }
                    this.position = this.length;
                }, o.readBoolean = function () {
                    return 0 !== this.readByte();
                }, o.readByte = function () {
                    return this.buffer.readInt8(this.position++);
                }, o.readBytes = function (e, t, i) {
                    if (void 0 === t && (t = 0), void 0 === i && (i = 0), 0 === i && (i = this.bytesAvailable), i > this.bytesAvailable) throw new RangeError("End of buffer was encountered.");
                    e.length < t + i && e.expand(t + i);
                    for (var s = 0; s < i; s++) e.buffer[s + t] = this.buffer[s + this.position];
                    this.position += i;
                }, o.readDouble = function () {
                    return this.readBufferFunc("readDouble", 8);
                }, o.readFloat = function () {
                    return this.readBufferFunc("readFloat", 4);
                }, o.readInt = function () {
                    return this.readBufferFunc("readInt32", 4);
                }, o.readMultiByte = function (t, i) {
                    void 0 === i && (i = "utf8");
                    var s = this.position;
                    if (this.position += t, "utf8" !== i) throw new Error("Invalid character set: '" + i + "'.");
                    return e.utf8TextDecoder.decode(this.buffer.slice(s, this.position));
                }, o.readObject = function () {
                    if (0 === this.objectEncoding) return new n(this).read();
                    if (3 === this.objectEncoding) return new h(this).read();
                    throw new Error("Unknown object encoding: '" + this.objectEncoding + "'.");
                }, o.readShort = function () {
                    return this.readBufferFunc("readInt16", 2);
                }, o.readUnsignedByte = function () {
                    return this.buffer.readUInt8(this.position++);
                }, o.readUnsignedInt = function () {
                    return this.readBufferFunc("readUInt32", 4);
                }, o.readUnsignedShort = function () {
                    return this.readBufferFunc("readUInt16", 2);
                }, o.readUTF = function () {
                    return this.readMultiByte(this.readUnsignedShort());
                }, o.readUTFBytes = function (e) {
                    return this.readMultiByte(e);
                }, o.toJSON = function () {
                    return this.buffer.toJSON();
                }, o.toString = function () {
                    return this.buffer.toString("utf8");
                }, o.uncompress = function (e) {
                    if (void 0 === e && (e = "deflate"), "zlib" === (e = e.toLowerCase())) this.buffer = (0, s.inflateSync)(this.buffer, { level: 9 }); else {
                        if ("deflate" !== e) throw new Error("Invalid decompression algorithm: '" + e + "'.");
                        this.buffer = (0, s.inflateRawSync)(this.buffer);
                    }
                    this.position = 0;
                }, o.writeBoolean = function (e) {
                    this.writeByte(e ? 1 : 0);
                }, o.writeByte = function (e) {
                    this.expand(1), this.buffer.writeInt8(e, this.position++);
                }, o.writeBytes = function (e, t, i) {
                    void 0 === t && (t = 0), void 0 === i && (i = 0), 0 === i && (i = e.length - t), this.expand(i);
                    for (var s = 0; s < i; s++) this.buffer[s + this.position] = e.buffer[s + t];
                    this.position += i;
                }, o.writeDouble = function (e) {
                    this.writeBufferFunc(e, "writeDouble", 8);
                }, o.writeFloat = function (e) {
                    this.writeBufferFunc(e, "writeFloat", 4);
                }, o.writeInt = function (e) {
                    this.writeBufferFunc(e, "writeInt32", 4);
                }, o.writeMultiByte = function (t, i) {
                    if (void 0 === i && (i = "utf8"), this.position += r.Buffer.byteLength(t), "utf8" !== i) throw new Error("Invalid character set: '" + i + "'.");
                    this.buffer = r.Buffer.concat([this.buffer, r.Buffer.from(e.utf8TextEncoder.encode(t))]);
                }, o.writeObject = function (e) {
                    if (0 === this.objectEncoding) return new n(this).write(e);
                    if (3 === this.objectEncoding) return new h(this).write(e);
                    throw new Error("Unknown object encoding: '" + this.objectEncoding + "'.");
                }, o.writeShort = function (e) {
                    this.writeBufferFunc(e, "writeInt16", 2);
                }, o.writeUnsignedByte = function (e) {
                    this.expand(1), this.buffer.writeUInt8(e, this.position++);
                }, o.writeUnsignedInt = function (e) {
                    this.writeBufferFunc(e, "writeUInt32", 4);
                }, o.writeUnsignedShort = function (e) {
                    this.writeBufferFunc(e, "writeUInt16", 2);
                }, o.writeUTF = function (e) {
                    this.writeUnsignedShort(r.Buffer.byteLength(e)), this.writeMultiByte(e);
                }, o.writeUTFBytes = function (e) {
                    this.writeMultiByte(e);
                }, t = e, (i = [{
                    key: "length", get: function () {
                        return this.buffer.length;
                    }, set: function (e) {
                        0 === e ? this.clear() : e !== this.length && (e < this.length ? (this.buffer = this.buffer.slice(0, e), this.position = this.length) : this.expand(e));
                    }
                }, {
                    key: "endianStr", get: function () {
                        return this.endian ? "BE" : "LE";
                    }
                }, {
                    key: "bytesAvailable", get: function () {
                        return this.length - this.position;
                    }
                }, {
                    key: "classMapping", get: function () {
                        return e.classMapping;
                    }
                }, {
                    key: "aliasMapping", get: function () {
                        return e.aliasMapping;
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }();
            l.classMapping = {}, l.aliasMapping = {}, l.utf8TextEncoder = new TextEncoder, l.utf8TextDecoder = new TextDecoder("utf8");
            var c = function () {
                function e(e) {
                    void 0 === e && (e = null), this.i = 0, this.j = 0, this.S = null, this.psize = 256, this.S = new l, e && this.init(e);
                }
                var t = e.prototype;
                return t.getPoolSize = function () {
                    return this.psize;
                }, t.init = function (e) {
                    if (!this.S) throw new Error("S not defined");
                    this.S.length = this.psize;
                    var t, i, s, r = this.S;
                    for (t = 0; t < 256; ++t) r.buffer[t] = t;
                    for (i = 0, t = 0; t < 256; ++t) i = i + r.buffer[t] + e.buffer[t % e.length] & 255, s = r.buffer[t], r.buffer[t] = r.buffer[i], r.buffer[i] = s;
                    this.i = 0, this.j = 0;
                }, t.next = function () {
                    if (!this.S) throw new Error("S not defined");
                    var e, t = this.S;
                    return this.i = this.i + 1 & 255, this.j = this.j + t.buffer[this.i] & 255, e = t.buffer[this.i], t.buffer[this.i] = t.buffer[this.j], t.buffer[this.j] = e, t.buffer[e + t.buffer[this.i] & 255];
                }, t.getBlockSize = function () {
                    return 1;
                }, t.encrypt = function (e) {
                    for (var t = 0; t < e.length;) e.buffer[t++] ^= this.next();
                }, t.decrypt = function (e) {
                    this.encrypt(e);
                }, t.dispose = function () {
                    var e = 0;
                    if (null != this.S) {
                        for (e = 0; e < this.S.length; e++) this.S.buffer[e] = 256 * Math.random();
                        this.S.length = 0, this.S = null;
                    }
                    this.i = 0, this.j = 0;
                }, t.toString = function () {
                    return "rc4";
                }, e;
            }(), d = function () {
                function e() {
                    for (this.ready = false, this.seeded = false, this.state = new c, this.psize = this.state.getPoolSize(), this.pool = new l, this.pool.length = this.psize, this.pptr = 0; this.pptr < this.psize;) {
                        var e = 65536 * Math.random();
                        this.pool.buffer[this.pptr++] = e >>> 8, this.pool.buffer[this.pptr++] = 255 & e;
                    }
                    this.pptr = 0, this.seed();
                }
                var t = e.prototype;
                return t.seed = function (e) {
                    void 0 === e && (e = 0), 0 == e && (e = (new Date).getTime()), this.pool.buffer[this.pptr++] ^= 255 & e, this.pool.buffer[this.pptr++] ^= e >> 8 & 255, this.pool.buffer[this.pptr++] ^= e >> 16 & 255, this.pool.buffer[this.pptr++] ^= e >> 24 & 255, this.pptr %= this.psize, this.seeded = true;
                }, t.nextBytes = function (e, t) {
                    for (; t--;) e.writeBytes(new l(r.Buffer.from([this.nextByte()])));
                }, t.nextByte = function () {
                    return this.ready || (this.state.init(this.pool), this.pool.length = 0, this.pptr = 0, this.ready = true), this.state.next();
                }, t.dispose = function () {
                    for (var e = 0; e < this.pool.length; e++) this.pool.buffer[e] = 256 * Math.random();
                    this.pool.length = 0, this.state.dispose(), this.psize = 0, this.pptr = 0;
                }, t.toString = function () {
                    return "random-" + this.state.toString();
                }, e;
            }(), p = [608135816, 2242054355, 320440878, 57701188, 2752067618, 698298832, 137296536, 3964562569, 1160258022, 953160567, 3193202383, 887688300, 3232508343, 3380367581, 1065670069, 3041331479, 2450970073, 2306472731], u = [3509652390, 2564797868, 805139163, 3491422135, 3101798381, 1780907670, 3128725573, 4046225305, 614570311, 3012652279, 134345442, 2240740374, 1667834072, 1901547113, 2757295779, 4103290238, 227898511, 1921955416, 1904987480, 2182433518, 2069144605, 3260701109, 2620446009, 720527379, 3318853667, 677414384, 3393288472, 3101374703, 2390351024, 1614419982, 1822297739, 2954791486, 3608508353, 3174124327, 2024746970, 1432378464, 3864339955, 2857741204, 1464375394, 1676153920, 1439316330, 715854006, 3033291828, 289532110, 2706671279, 2087905683, 3018724369, 1668267050, 732546397, 1947742710, 3462151702, 2609353502, 2950085171, 1814351708, 2050118529, 680887927, 999245976, 1800124847, 3300911131, 1713906067, 1641548236, 4213287313, 1216130144, 1575780402, 4018429277, 3917837745, 3693486850, 3949271944, 596196993, 3549867205, 258830323, 2213823033, 772490370, 2760122372, 1774776394, 2652871518, 566650946, 4142492826, 1728879713, 2882767088, 1783734482, 3629395816, 2517608232, 2874225571, 1861159788, 326777828, 3124490320, 2130389656, 2716951837, 967770486, 1724537150, 2185432712, 2364442137, 1164943284, 2105845187, 998989502, 3765401048, 2244026483, 1075463327, 1455516326, 1322494562, 910128902, 469688178, 1117454909, 936433444, 3490320968, 3675253459, 1240580251, 122909385, 2157517691, 634681816, 4142456567, 3825094682, 3061402683, 2540495037, 79693498, 3249098678, 1084186820, 1583128258, 426386531, 1761308591, 1047286709, 322548459, 995290223, 1845252383, 2603652396, 3431023940, 2942221577, 3202600964, 3727903485, 1712269319, 422464435, 3234572375, 1170764815, 3523960633, 3117677531, 1434042557, 442511882, 3600875718, 1076654713, 1738483198, 4213154764, 2393238008, 3677496056, 1014306527, 4251020053, 793779912, 2902807211, 842905082, 4246964064, 1395751752, 1040244610, 2656851899, 3396308128, 445077038, 3742853595, 3577915638, 679411651, 2892444358, 2354009459, 1767581616, 3150600392, 3791627101, 3102740896, 284835224, 4246832056, 1258075500, 768725851, 2589189241, 3069724005, 3532540348, 1274779536, 3789419226, 2764799539, 1660621633, 3471099624, 4011903706, 913787905, 3497959166, 737222580, 2514213453, 2928710040, 3937242737, 1804850592, 3499020752, 2949064160, 2386320175, 2390070455, 2415321851, 4061277028, 2290661394, 2416832540, 1336762016, 1754252060, 3520065937, 3014181293, 791618072, 3188594551, 3933548030, 2332172193, 3852520463, 3043980520, 413987798, 3465142937, 3030929376, 4245938359, 2093235073, 3534596313, 375366246, 2157278981, 2479649556, 555357303, 3870105701, 2008414854, 3344188149, 4221384143, 3956125452, 2067696032, 3594591187, 2921233993, 2428461, 544322398, 577241275, 1471733935, 610547355, 4027169054, 1432588573, 1507829418, 2025931657, 3646575487, 545086370, 48609733, 2200306550, 1653985193, 298326376, 1316178497, 3007786442, 2064951626, 458293330, 2589141269, 3591329599, 3164325604, 727753846, 2179363840, 146436021, 1461446943, 4069977195, 705550613, 3059967265, 3887724982, 4281599278, 3313849956, 1404054877, 2845806497, 146425753, 1854211946], m = [1266315497, 3048417604, 3681880366, 3289982499, 290971e4, 1235738493, 2632868024, 2414719590, 3970600049, 1771706367, 1449415276, 3266420449, 422970021, 1963543593, 2690192192, 3826793022, 1062508698, 1531092325, 1804592342, 2583117782, 2714934279, 4024971509, 1294809318, 4028980673, 1289560198, 2221992742, 1669523910, 35572830, 157838143, 1052438473, 1016535060, 1802137761, 1753167236, 1386275462, 3080475397, 2857371447, 1040679964, 2145300060, 2390574316, 1461121720, 2956646967, 4031777805, 4028374788, 33600511, 2920084762, 1018524850, 629373528, 3691585981, 3515945977, 2091462646, 2486323059, 586499841, 988145025, 935516892, 3367335476, 2599673255, 2839830854, 265290510, 3972581182, 2759138881, 3795373465, 1005194799, 847297441, 406762289, 1314163512, 1332590856, 1866599683, 4127851711, 750260880, 613907577, 1450815602, 3165620655, 3734664991, 3650291728, 3012275730, 3704569646, 1427272223, 778793252, 1343938022, 2676280711, 2052605720, 1946737175, 3164576444, 3914038668, 3967478842, 3682934266, 1661551462, 3294938066, 4011595847, 840292616, 3712170807, 616741398, 312560963, 711312465, 1351876610, 322626781, 1910503582, 271666773, 2175563734, 1594956187, 70604529, 3617834859, 1007753275, 1495573769, 4069517037, 2549218298, 2663038764, 504708206, 2263041392, 3941167025, 2249088522, 1514023603, 1998579484, 1312622330, 694541497, 2582060303, 2151582166, 1382467621, 776784248, 2618340202, 3323268794, 2497899128, 2784771155, 503983604, 4076293799, 907881277, 423175695, 432175456, 1378068232, 4145222326, 3954048622, 3938656102, 3820766613, 2793130115, 2977904593, 26017576, 3274890735, 3194772133, 1700274565, 1756076034, 4006520079, 3677328699, 720338349, 1533947780, 354530856, 688349552, 3973924725, 1637815568, 332179504, 3949051286, 53804574, 2852348879, 3044236432, 1282449977, 3583942155, 3416972820, 4006381244, 1617046695, 2628476075, 3002303598, 1686838959, 431878346, 2686675385, 1700445008, 1080580658, 1009431731, 832498133, 3223435511, 2605976345, 2271191193, 2516031870, 1648197032, 4164389018, 2548247927, 300782431, 375919233, 238389289, 3353747414, 2531188641, 2019080857, 1475708069, 455242339, 2609103871, 448939670, 3451063019, 1395535956, 2413381860, 1841049896, 1491858159, 885456874, 4264095073, 4001119347, 1565136089, 3898914787, 1108368660, 540939232, 1173283510, 2745871338, 3681308437, 4207628240, 3343053890, 4016749493, 1699691293, 1103962373, 3625875870, 2256883143, 3830138730, 1031889488, 3479347698, 1535977030, 4236805024, 3251091107, 2132092099, 1774941330, 1199868427, 1452454533, 157007616, 2904115357, 342012276, 595725824, 1480756522, 206960106, 497939518, 591360097, 863170706, 2375253569, 3596610801, 1814182875, 2094937945, 3421402208, 1082520231, 3463918190, 2785509508, 435703966, 3908032597, 1641649973, 2842273706, 3305899714, 1510255612, 2148256476, 2655287854, 3276092548, 4258621189, 236887753, 3681803219, 274041037, 1734335097, 3815195456, 3317970021, 1899903192, 1026095262, 4050517792, 356393447, 2410691914, 3873677099, 3682840055], f = [3913112168, 2491498743, 4132185628, 2489919796, 1091903735, 1979897079, 3170134830, 3567386728, 3557303409, 857797738, 1136121015, 1342202287, 507115054, 2535736646, 337727348, 3213592640, 1301675037, 2528481711, 1895095763, 1721773893, 3216771564, 62756741, 2142006736, 835421444, 2531993523, 1442658625, 3659876326, 2882144922, 676362277, 1392781812, 170690266, 3921047035, 1759253602, 3611846912, 1745797284, 664899054, 1329594018, 3901205900, 3045908486, 2062866102, 2865634940, 3543621612, 3464012697, 1080764994, 553557557, 3656615353, 3996768171, 991055499, 499776247, 1265440854, 648242737, 3940784050, 980351604, 3713745714, 1749149687, 3396870395, 4211799374, 3640570775, 1161844396, 3125318951, 1431517754, 545492359, 4268468663, 3499529547, 1437099964, 2702547544, 3433638243, 2581715763, 2787789398, 1060185593, 1593081372, 2418618748, 4260947970, 69676912, 2159744348, 86519011, 2512459080, 3838209314, 1220612927, 3339683548, 133810670, 1090789135, 1078426020, 1569222167, 845107691, 3583754449, 4072456591, 1091646820, 628848692, 1613405280, 3757631651, 526609435, 236106946, 48312990, 2942717905, 3402727701, 1797494240, 859738849, 992217954, 4005476642, 2243076622, 3870952857, 3732016268, 765654824, 3490871365, 2511836413, 1685915746, 3888969200, 1414112111, 2273134842, 3281911079, 4080962846, 172450625, 2569994100, 980381355, 4109958455, 2819808352, 2716589560, 2568741196, 3681446669, 3329971472, 1835478071, 660984891, 3704678404, 4045999559, 3422617507, 3040415634, 1762651403, 1719377915, 3470491036, 2693910283, 3642056355, 3138596744, 1364962596, 2073328063, 1983633131, 926494387, 3423689081, 2150032023, 4096667949, 1749200295, 3328846651, 309677260, 2016342300, 1779581495, 3079819751, 111262694, 1274766160, 443224088, 298511866, 1025883608, 3806446537, 1145181785, 168956806, 3641502830, 3584813610, 1689216846, 3666258015, 3200248200, 1692713982, 2646376535, 4042768518, 1618508792, 1610833997, 3523052358, 4130873264, 2001055236, 3610705100, 2202168115, 4028541809, 2961195399, 1006657119, 2006996926, 3186142756, 1430667929, 3210227297, 1314452623, 4074634658, 4101304120, 2273951170, 1399257539, 3367210612, 3027628629, 1190975929, 2062231137, 2333990788, 2221543033, 2438960610, 1181637006, 548689776, 2362791313, 3372408396, 3104550113, 3145860560, 296247880, 1970579870, 3078560182, 3769228297, 1714227617, 3291629107, 3898220290, 166772364, 1251581989, 493813264, 448347421, 195405023, 2709975567, 677966185, 3703036547, 1463355134, 2715995803, 1338867538, 1343315457, 2802222074, 2684532164, 233230375, 2599980071, 2000651841, 3277868038, 1638401717, 4028070440, 3237316320, 6314154, 819756386, 300326615, 590932579, 1405279636, 3267499572, 3150704214, 2428286686, 3959192993, 3461946742, 1862657033, 1266418056, 963775037, 2089974820, 2263052895, 1917689273, 448879540, 3550394620, 3981727096, 150775221, 3627908307, 1303187396, 508620638, 2975983352, 2726630617, 1817252668, 1876281319, 1457606340, 908771278, 3720792119, 3617206836, 2455994898, 1729034894, 1080033504], y = [976866871, 3556439503, 2881648439, 1522871579, 1555064734, 1336096578, 3548522304, 2579274686, 3574697629, 3205460757, 3593280638, 3338716283, 3079412587, 564236357, 2993598910, 1781952180, 1464380207, 3163844217, 3332601554, 1699332808, 1393555694, 1183702653, 3581086237, 1288719814, 691649499, 2847557200, 2895455976, 3193889540, 2717570544, 1781354906, 1676643554, 2592534050, 3230253752, 1126444790, 2770207658, 2633158820, 2210423226, 2615765581, 2414155088, 3127139286, 673620729, 2805611233, 1269405062, 4015350505, 3341807571, 4149409754, 1057255273, 2012875353, 2162469141, 2276492801, 2601117357, 993977747, 3918593370, 2654263191, 753973209, 36408145, 2530585658, 25011837, 3520020182, 2088578344, 530523599, 2918365339, 1524020338, 1518925132, 3760827505, 3759777254, 1202760957, 3985898139, 3906192525, 674977740, 4174734889, 2031300136, 2019492241, 3983892565, 4153806404, 3822280332, 352677332, 2297720250, 60907813, 90501309, 3286998549, 1016092578, 2535922412, 2839152426, 457141659, 509813237, 4120667899, 652014361, 1966332200, 2975202805, 55981186, 2327461051, 676427537, 3255491064, 2882294119, 3433927263, 1307055953, 942726286, 933058658, 2468411793, 3933900994, 4215176142, 1361170020, 2001714738, 2830558078, 3274259782, 1222529897, 1679025792, 2729314320, 3714953764, 1770335741, 151462246, 3013232138, 1682292957, 1483529935, 471910574, 1539241949, 458788160, 3436315007, 1807016891, 3718408830, 978976581, 1043663428, 3165965781, 1927990952, 4200891579, 2372276910, 3208408903, 3533431907, 1412390302, 2931980059, 4132332400, 1947078029, 3881505623, 4168226417, 2941484381, 1077988104, 1320477388, 886195818, 18198404, 3786409e3, 2509781533, 112762804, 3463356488, 1866414978, 891333506, 18488651, 661792760, 1628790961, 3885187036, 3141171499, 876946877, 2693282273, 1372485963, 791857591, 2686433993, 3759982718, 3167212022, 3472953795, 2716379847, 445679433, 3561995674, 3504004811, 3574258232, 54117162, 3331405415, 2381918588, 3769707343, 4154350007, 1140177722, 4074052095, 668550556, 3214352940, 367459370, 261225585, 2610173221, 4209349473, 3468074219, 3265815641, 314222801, 3066103646, 3808782860, 282218597, 3406013506, 3773591054, 379116347, 1285071038, 846784868, 2669647154, 3771962079, 3550491691, 2305946142, 453669953, 1268987020, 3317592352, 3279303384, 3744833421, 2610507566, 3859509063, 266596637, 3847019092, 517658769, 3462560207, 3443424879, 370717030, 4247526661, 2224018117, 4143653529, 4112773975, 2788324899, 2477274417, 1456262402, 2901442914, 1517677493, 1846949527, 2295493580, 3734397586, 2176403920, 1280348187, 1908823572, 3871786941, 846861322, 1172426758, 3287448474, 3383383037, 1655181056, 3139813346, 901632758, 1897031941, 2986607138, 3066810236, 3447102507, 1393639104, 373351379, 950779232, 625454576, 3124240540, 4148612726, 2007998917, 544563296, 2244738638, 2330496472, 2058025392, 1291430526, 424198748, 50039436, 29584100, 3605783033, 2429876329, 2791104160, 1057563949, 3255363231, 3075367218, 3463963227, 1469046755, 985887462], v = function () {
                function e(e) {
                    this.S0 = [], this.S1 = [], this.S2 = [], this.S3 = [], this.P = [], this.cheese = null, this.cheese = e, this.setCheese(e);
                }
                var t = e.prototype;
                return t.getBlockSize = function () {
                    return 8;
                }, t.decrypt = function (e, t) {
                    void 0 === t && (t = 0), this.decryptBlock(e, t, e, t);
                }, t.dispose = function () {
                    var e = 0;
                    for (e = 0; e < this.S0.length; e++) this.S0[e] = 0;
                    for (e = 0; e < this.S1.length; e++) this.S1[e] = 0;
                    for (e = 0; e < this.S2.length; e++) this.S2[e] = 0;
                    for (e = 0; e < this.S3.length; e++) this.S3[e] = 0;
                    for (e = 0; e < this.P.length; e++) this.P[e] = 0;
                    if (this.S0 = [], this.S1 = [], this.S2 = [], this.S3 = [], this.P = [], this.cheese) {
                        for (e = 0; e < this.cheese.length; e++) this.cheese.buffer[e] = 0;
                        this.cheese.length = 0, this.cheese = null;
                    }
                }, t.encrypt = function (e, t) {
                    void 0 === t && (t = 0), this.encryptBlock(e, t, e, t);
                }, t.F = function (e) {
                    return (this.S0[e >>> 24] + this.S1[e >>> 16 & 255] ^ this.S2[e >>> 8 & 255]) + this.S3[255 & e];
                }, t.processTable = function (e, t, i) {
                    for (var s = i.length, r = 0; r < s; r += 2) {
                        e ^= this.P[0];
                        for (var o = 1; o < 16; o += 2) t ^= this.F(e) ^ this.P[o], e ^= this.F(t) ^ this.P[o + 1];
                        t ^= this.P[17], i[r] = t, i[r + 1] = e, t = e, e = i[r];
                    }
                }, t.setCheese = function (e) {
                    this.S0 = u.concat(), this.S1 = m.concat(), this.S2 = f.concat(), this.S3 = y.concat(), this.P = p.concat();
                    for (var t = e.length, i = 0, s = 0; s < 18; s++) {
                        for (var r = 0, o = 0; o < 4; o++) r = r << 8 | 255 & e.buffer[i++], i >= t && (i = 0);
                        this.P[s] ^= r;
                    }
                    this.processTable(0, 0, this.P), this.processTable(this.P[16], this.P[17], this.S0), this.processTable(this.S0[254], this.S0[255], this.S1), this.processTable(this.S1[254], this.S1[255], this.S2), this.processTable(this.S2[254], this.S2[255], this.S3);
                }, t.encryptBlock = function (e, t, i, s) {
                    var r = this.BytesTo32bits(e, t), o = this.BytesTo32bits(e, t + 4);
                    r ^= this.P[0];
                    for (var n = 1; n < 16; n += 2) o ^= this.F(r) ^ this.P[n], r ^= this.F(o) ^ this.P[n + 1];
                    o ^= this.P[17], this.Bits32ToBytes(o, i, s), this.Bits32ToBytes(r, i, s + 4);
                }, t.decryptBlock = function (e, t, i, s) {
                    var r = this.BytesTo32bits(e, t), o = this.BytesTo32bits(e, t + 4);
                    r ^= this.P[17];
                    for (var n = 16; n > 0; n -= 2) o ^= this.F(r) ^ this.P[n], r ^= this.F(o) ^ this.P[n - 1];
                    o ^= this.P[0], this.Bits32ToBytes(o, i, s), this.Bits32ToBytes(r, i, s + 4);
                }, t.BytesTo32bits = function (e, t) {
                    var i = e.buffer;
                    return (255 & i[t]) << 24 | (255 & i[t + 1]) << 16 | (255 & i[t + 2]) << 8 | 255 & i[t + 3];
                }, t.Bits32ToBytes = function (e, t, i) {
                    t.buffer[i + 3] = e, t.buffer[i + 2] = e >> 8, t.buffer[i + 1] = e >> 16, t.buffer[i] = e >> 24;
                }, t.toString = function () {
                    return "butthole";
                }, e;
            }(), g = function () {
                function e(e) {
                    void 0 === e && (e = 0), this.blockSize = e;
                }
                var t = e.prototype;
                return t.pad = function (e) {
                    var t = this.blockSize - e.length % this.blockSize, i = e.length;
                    e.length, e.buffer = r.Buffer.concat([e.buffer, r.Buffer.alloc(t)]);
                    for (var s = 0; s < t; s++) e.buffer[i + s] = t;
                    if (0 != e.buffer.length % this.blockSize) throw new Error("PKCS#5::pad: length isnt a multiple of the blockSize");
                    return e;
                }, t.unpad = function (e) {
                    var t = e.length % this.blockSize;
                    if (0 != t) throw new Error("PKCS#5::unpad: ByteArray.length isn't a multiple of the blockSize");
                    for (var i = t = e.buffer[e.length - 1]; i > 0; i--) {
                        var s = e.buffer[e.length - 1];
                        if (e.length--, t != s) throw new Error("PKCS#5:unpad: Invalid padding value. expected [" + t + "], found [" + s + "]");
                    }
                    return e;
                }, t.setBlockSize = function (e) {
                    this.blockSize = e;
                }, e;
            }();
            function S(e, t) {
                return (S = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (e, t) {
                    return e.__proto__ = t, e;
                })(e, t);
            }
            var _ = function (e) {
                var t, i;
                function s(t, i) {
                    return void 0 === i && (i = null), e.call(this, t, i) || this;
                }
                i = e, (t = s).prototype = Object.create(i.prototype), t.prototype.constructor = t, S(t, i);
                var r = s.prototype;
                return r.encrypt = function (e) {
                    if (!this.padding) throw new Error("Padding not defined");
                    this.padding.pad(e);
                    for (var t = this.getIV4e(), i = 0; i < e.length; i += this.blockSize) {
                        for (var s = 0; s < this.blockSize; s++) e.buffer[i + s] ^= t.buffer[s];
                        this.key.encrypt(e, i), t.position = 0, t.writeBytes(e, i, this.blockSize);
                    }
                }, r.decrypt = function (e) {
                    if (!this.padding) throw new Error("Padding not defined");
                    for (var t = this.getIV4d(), i = new l, s = 0; s < e.length; s += this.blockSize) {
                        i.position = 0, i.writeBytes(e, s, this.blockSize), this.key.decrypt(e, s);
                        for (var r = 0; r < this.blockSize; r++) e.buffer[s + r] ^= t.buffer[r];
                        t.position = 0, t.writeBytes(i, 0, this.blockSize);
                    }
                }, r.toString = function () {
                    return this.key.toString() + "-cbc";
                }, s;
            }(function () {
                function e(e, t) {
                    void 0 === t && (t = null), this.key = e, this.blockSize = e.getBlockSize(), null === t ? t = new g(this.blockSize) : t.setBlockSize(this.blockSize), this.padding = t, this.prng = new d, this.iv = null, this.lastIV = new l;
                }
                var t, i, s = e.prototype;
                return s.getBlockSize = function () {
                    return this.key.getBlockSize();
                }, s.dispose = function () {
                    var e;
                    if (null !== this.iv) {
                        for (e = 0; e < this.iv.length; e++) this.iv.buffer[e] = this.prng.nextByte();
                        this.iv.length = 0, this.iv = null;
                    }
                    if (null !== this.lastIV) {
                        for (e = 0; e < this.lastIV.length; e++) this.lastIV.buffer[e] = this.prng.nextByte();
                        this.lastIV.length = 0;
                    }
                    this.key.dispose(), this.padding = null, this.prng.dispose();
                }, s.getIV4e = function () {
                    var e = new l;
                    return e.length = this.blockSize, this.iv ? e.writeBytes(this.iv) : this.prng.nextBytes(e, this.blockSize), this.lastIV.length = 0, this.lastIV.writeBytes(e), e;
                }, s.getIV4d = function () {
                    var e = new l;
                    if (e.length = this.blockSize, !this.iv) throw new Error("an IV must be set before calling decrypt()");
                    return e.writeBytes(this.iv), e;
                }, t = e, (i = [{
                    key: "IV", get: function () {
                        return this.lastIV;
                    }, set: function (e) {
                        this.iv = e, this.lastIV.length = 0, this.lastIV.writeBytes(this.iv);
                    }
                }]) && function (e, t) {
                    for (var i, s = 0; s < t.length; s++) {
                        var r = t[s];
                        r.enumerable = r.enumerable || false, r.configurable = true, "value" in r && (r.writable = true), Object.defineProperty(e, "symbol" == typeof (i = function (e, t) {
                            if ("object" != typeof e || null === e) return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 !== i) {
                                var s = i.call(e, "string");
                                if ("object" != typeof s) return s;
                                throw new TypeError("@@toPrimitive must return a primitive value.");
                            }
                            return String(e);
                        }(r.key)) ? i : String(i), r);
                    }
                }(t.prototype, i), Object.defineProperty(t, "prototype", { writable: false }), e;
            }());
            i(13), i(384), i(324), i(325), i(326), i(327), i(328), i(329), i(330), i(331), i(332), i(333), i(334), i(335), i(336), i(337), i(338), i(339), i(340), i(341), i(342), i(343), i(344), i(345), i(346);
            var w = function () {
                function e() { }
                return e.encodeByteArray = function (e) {
                    for (var t = "", i = new Uint8Array(e.buffer), s = i.byteLength, r = 0; r < s; r++) t += String.fromCharCode(i[r]);
                    return window.btoa(t);
                }, e.decodeToByteArray = function (e) {
                    for (var t = window.atob(e), i = t.length, s = new l(i), r = 0; r < i; r++) s.buffer[r] = t.charCodeAt(r);
                    return s;
                }, e.decode = function (e) {
                    for (var t = window.atob(e), i = t.length, s = new Uint8Array(i), o = 0; o < i; o++) s[o] = t.charCodeAt(o);
                    return new l(r.Buffer.from(s));
                }, e;
            }(), b = function () {
                function e() { }
                return e.encryptByteArray = function (e, t) {
                    void 0 === t && (t = "");
                    var i = new g, s = this.getCipher(t, i);
                    i.setBlockSize(s.getBlockSize()), s.encrypt(e), e.position = 0;
                }, e.decryptByteArray = function (e, t) {
                    void 0 === t && (t = "");
                    var i = new g, s = this.getCipher(t, i);
                    i.setBlockSize(s.getBlockSize()), s.decrypt(e), e.position = 0;
                }, e.encryptBytes = function (e, t) {
                    void 0 === t && (t = "");
                    var i = new l;
                    i.writeUTFBytes(e);
                    var s = new l(i.buffer);
                    return s.compress("zlib"), this.encryptByteArray(s, t), s.position = 0, s;
                }, e.decryptBytes = function (e, t) {
                    void 0 === t && (t = "");
                    var i = r.Buffer.from(e), s = new l(i);
                    return this.decryptByteArray(s, t), s.uncompress("zlib"), s.readUTFBytes(s.length);
                }, e.pad = function (e, t) {
                    void 0 === t && (t = 8);
                    var i = t - e.length % t, s = e.length, o = e.length % t, n = o > 0 ? t - o : 0;
                    n && (e = r.Buffer.concat([e, r.Buffer.alloc(n)]));
                    for (var a = 0; a < i; a++) e.buffer[s + a] = i;
                    if (0 != e.length % t) throw new Error("PKCS#5::pad: length isnt a multiple of the blockSize");
                    return e;
                }, e.getCipher = function (e, t) {
                    var i = new l;
                    i.writeUTFBytes(e);
                    var s = new _(new v(i), t), r = new l;
                    return r.writeUTFBytes("abcd1234"), s.IV = r, s;
                }, e;
            }(), C = i(6), L = function () {
                function e(t) {
                    e.init(), this.tmp = new C.SK, this.state = new C.SK, this.keyLength = t.length, this.key = new C.SK, this.key.writeBytes(t), this.expandKey();
                }
                e.init = function () {
                    if (!e.Sbox) {
                        e.Sbox = new C.SK(r.Buffer.from(e._Sbox)), e.InvSbox = new C.SK(r.Buffer.from(e._InvSbox)), e.Xtime2Sbox = new C.SK(r.Buffer.from(e._Xtime2Sbox)), e.Xtime3Sbox = new C.SK(r.Buffer.from(e._Xtime3Sbox)), e.Xtime2 = new C.SK(r.Buffer.from(e._Xtime2)), e.Xtime9 = new C.SK(r.Buffer.from(e._Xtime9)), e.XtimeB = new C.SK(r.Buffer.from(e._XtimeB)), e.XtimeD = new C.SK(r.Buffer.from(e._XtimeD)), e.XtimeE = new C.SK(r.Buffer.from(e._XtimeE)), e.Rcon = new C.SK(r.Buffer.from(e._Rcon));
                        for (var t = 0; t < 256; t++) e.Sbox.buffer[t] = e._Sbox[t], e.InvSbox.buffer[t] = e._InvSbox[t], e.Xtime2Sbox.buffer[t] = e._Xtime2Sbox[t], e.Xtime3Sbox.buffer[t] = e._Xtime3Sbox[t], e.Xtime2.buffer[t] = e._Xtime2[t], e.Xtime9.buffer[t] = e._Xtime9[t], e.XtimeB.buffer[t] = e._XtimeB[t], e.XtimeD.buffer[t] = e._XtimeD[t], e.XtimeE.buffer[t] = e._XtimeE[t];
                        for (var i = 0; i < e._Rcon.length; i++) e.Rcon[i] = e._Rcon[i];
                    }
                };
                var t = e.prototype;
                return t.expandKey = function () {
                    var t, i, s, r, o, n, a = this.key.length / 4;
                    for (this.Nr = a + 6, n = a; n < e.Nb * (this.Nr + 1); n++) t = this.key.buffer[4 * n - 4], i = this.key.buffer[4 * n - 3], s = this.key.buffer[4 * n - 2], r = this.key.buffer[4 * n - 1], n % a ? a > 6 && n % a == 4 && (t = e.Sbox.buffer[t], i = e.Sbox.buffer[i], s = e.Sbox.buffer[s], r = e.Sbox.buffer[r]) : (o = r, r = e.Sbox.buffer[t], t = e.Sbox.buffer[i] ^ e.Rcon.buffer[n / a], i = e.Sbox.buffer[s], s = e.Sbox.buffer[o]), this.key.buffer[4 * n + 0] = this.key.buffer[4 * n - 4 * a + 0] ^ t, this.key.buffer[4 * n + 1] = this.key.buffer[4 * n - 4 * a + 1] ^ i, this.key.buffer[4 * n + 2] = this.key.buffer[4 * n - 4 * a + 2] ^ s, this.key.buffer[4 * n + 3] = this.key.buffer[4 * n - 4 * a + 3] ^ r;
                }, t.getBlockSize = function () {
                    return 16;
                }, t.encrypt = function (t, i) {
                    var s;
                    for (void 0 === i && (i = 0), this.state.position = 0, this.state.writeBytes(t, i, 4 * e.Nb), this.addRoundKey(this.key, 0), s = 1; s < this.Nr + 1; s++) s < this.Nr ? this.mixSubColumns() : this.shiftRows(), this.addRoundKey(this.key, s * e.Nb * 4);
                    t.position = i, t.writeBytes(this.state);
                }, t.decrypt = function (t, i) {
                    var s;
                    for (void 0 === i && (i = 0), this.state.position = 0, this.state.writeBytes(t, i, 4 * e.Nb), this.addRoundKey(this.key, this.Nr * e.Nb * 4), this.invShiftRows(), s = this.Nr; s--;) this.addRoundKey(this.key, s * e.Nb * 4), s && this.invMixSubColumns();
                    t.position = i, t.writeBytes(this.state);
                }, t.dispose = function () {
                    var e, t = new d;
                    for (e = 0; e < this.key.length; e++) this.key.buffer[e] = t.nextByte();
                    for (this.Nr = t.nextByte(), e = 0; e < this.state.length; e++) this.state.buffer[e] = t.nextByte();
                    for (e = 0; e < this.tmp.length; e++) this.tmp[e] = t.nextByte();
                    this.key.length = 0, this.keyLength = 0, this.state.length = 0, this.tmp.length = 0, this.key = null, this.state = null, this.tmp = null, this.Nr = 0;
                }, t.shiftRows = function () {
                    var t, i = this.state.buffer, s = e.Sbox.buffer;
                    i[0] = s[i[0]], i[4] = s[i[4]], i[8] = s[i[8]], i[12] = s[i[12]], t = s[i[1]], i[1] = s[i[5]], i[5] = s[i[9]], i[9] = s[i[13]], i[13] = t, t = s[i[2]], i[2] = s[i[10]], i[10] = t, t = s[i[6]], i[6] = s[i[14]], i[14] = t, t = s[i[15]], i[15] = s[i[11]], i[11] = s[i[7]], i[7] = s[i[3]], i[3] = t;
                }, t.invShiftRows = function () {
                    var t, i = this.state.buffer, s = e.InvSbox.buffer;
                    i[0] = s[i[0]], i[4] = s[i[4]], i[8] = s[i[8]], i[12] = s[i[12]], t = s[i[13]], i[13] = s[i[9]], i[9] = s[i[5]], i[5] = s[i[1]], i[1] = t, t = s[i[2]], i[2] = s[i[10]], i[10] = t, t = s[i[6]], i[6] = s[i[14]], i[14] = t, t = s[i[3]], i[3] = s[i[7]], i[7] = s[i[11]], i[11] = s[i[15]], i[15] = t;
                }, t.mixSubColumns = function () {
                    var t = this.state.buffer, i = e.Sbox.buffer, s = e.Xtime2Sbox.buffer, r = e.Xtime3Sbox.buffer;
                    this.tmp.length = 0, this.tmp.length = 16;
                    var o = this.tmp.buffer;
                    o[0] = s[t[0]] ^ r[t[5]] ^ i[t[10]] ^ i[t[15]], o[1] = i[t[0]] ^ s[t[5]] ^ r[t[10]] ^ i[t[15]], o[2] = i[t[0]] ^ i[t[5]] ^ s[t[10]] ^ r[t[15]], o[3] = r[t[0]] ^ i[t[5]] ^ i[t[10]] ^ s[t[15]], o[4] = s[t[4]] ^ r[t[9]] ^ i[t[14]] ^ i[t[3]], o[5] = i[t[4]] ^ s[t[9]] ^ r[t[14]] ^ i[t[3]], o[6] = i[t[4]] ^ i[t[9]] ^ s[t[14]] ^ r[t[3]], o[7] = r[t[4]] ^ i[t[9]] ^ i[t[14]] ^ s[t[3]], o[8] = s[t[8]] ^ r[t[13]] ^ i[t[2]] ^ i[t[7]], o[9] = i[t[8]] ^ s[t[13]] ^ r[t[2]] ^ i[t[7]], o[10] = i[t[8]] ^ i[t[13]] ^ s[t[2]] ^ r[t[7]], o[11] = r[t[8]] ^ i[t[13]] ^ i[t[2]] ^ s[t[7]], o[12] = s[t[12]] ^ r[t[1]] ^ i[t[6]] ^ i[t[11]], o[13] = i[t[12]] ^ s[t[1]] ^ r[t[6]] ^ i[t[11]], o[14] = i[t[12]] ^ i[t[1]] ^ s[t[6]] ^ r[t[11]], o[15] = r[t[12]] ^ i[t[1]] ^ i[t[6]] ^ s[t[11]], this.state.position = 0, this.state.writeBytes(this.tmp, 0, 4 * e.Nb);
                }, t.invMixSubColumns = function () {
                    var t = this.state.buffer, i = e.XtimeE.buffer, s = e.Xtime9.buffer, r = e.XtimeD.buffer, o = e.XtimeB.buffer, n = e.InvSbox.buffer;
                    this.tmp.length = 0, this.tmp.length = 16;
                    var a, h = this.tmp.buffer;
                    for (h[0] = i[t[0]] ^ o[t[1]] ^ r[t[2]] ^ s[t[3]], h[5] = s[t[0]] ^ i[t[1]] ^ o[t[2]] ^ r[t[3]], h[10] = r[t[0]] ^ s[t[1]] ^ i[t[2]] ^ o[t[3]], h[15] = o[t[0]] ^ r[t[1]] ^ s[t[2]] ^ i[t[3]], h[4] = i[t[4]] ^ o[t[5]] ^ r[t[6]] ^ s[t[7]], h[9] = s[t[4]] ^ i[t[5]] ^ o[t[6]] ^ r[t[7]], h[14] = r[t[4]] ^ s[t[5]] ^ i[t[6]] ^ o[t[7]], h[3] = o[t[4]] ^ r[t[5]] ^ s[t[6]] ^ i[t[7]], h[8] = i[t[8]] ^ o[t[9]] ^ r[t[10]] ^ s[t[11]], h[13] = s[t[8]] ^ i[t[9]] ^ o[t[10]] ^ r[t[11]], h[2] = r[t[8]] ^ s[t[9]] ^ i[t[10]] ^ o[t[11]], h[7] = o[t[8]] ^ r[t[9]] ^ s[t[10]] ^ i[t[11]], h[12] = i[t[12]] ^ o[t[13]] ^ r[t[14]] ^ s[t[15]], h[1] = s[t[12]] ^ i[t[13]] ^ o[t[14]] ^ r[t[15]], h[6] = r[t[12]] ^ s[t[13]] ^ i[t[14]] ^ o[t[15]], h[11] = o[t[12]] ^ r[t[13]] ^ s[t[14]] ^ i[t[15]], a = 0; a < 4 * e.Nb; a++) t[a] = n[h[a]];
                }, t.addRoundKey = function (e, t) {
                    var i;
                    for (i = 0; i < 16; i++) this.state.buffer[i] ^= e.buffer[i + t];
                }, t.toString = function () {
                    return "aes" + 8 * this.keyLength;
                }, e;
            }();
            L.Nb = 4, L._Sbox = [99, 124, 119, 123, 242, 107, 111, 197, 48, 1, 103, 43, 254, 215, 171, 118, 202, 130, 201, 125, 250, 89, 71, 240, 173, 212, 162, 175, 156, 164, 114, 192, 183, 253, 147, 38, 54, 63, 247, 204, 52, 165, 229, 241, 113, 216, 49, 21, 4, 199, 35, 195, 24, 150, 5, 154, 7, 18, 128, 226, 235, 39, 178, 117, 9, 131, 44, 26, 27, 110, 90, 160, 82, 59, 214, 179, 41, 227, 47, 132, 83, 209, 0, 237, 32, 252, 177, 91, 106, 203, 190, 57, 74, 76, 88, 207, 208, 239, 170, 251, 67, 77, 51, 133, 69, 249, 2, 127, 80, 60, 159, 168, 81, 163, 64, 143, 146, 157, 56, 245, 188, 182, 218, 33, 16, 255, 243, 210, 205, 12, 19, 236, 95, 151, 68, 23, 196, 167, 126, 61, 100, 93, 25, 115, 96, 129, 79, 220, 34, 42, 144, 136, 70, 238, 184, 20, 222, 94, 11, 219, 224, 50, 58, 10, 73, 6, 36, 92, 194, 211, 172, 98, 145, 149, 228, 121, 231, 200, 55, 109, 141, 213, 78, 169, 108, 86, 244, 234, 101, 122, 174, 8, 186, 120, 37, 46, 28, 166, 180, 198, 232, 221, 116, 31, 75, 189, 139, 138, 112, 62, 181, 102, 72, 3, 246, 14, 97, 53, 87, 185, 134, 193, 29, 158, 225, 248, 152, 17, 105, 217, 142, 148, 155, 30, 135, 233, 206, 85, 40, 223, 140, 161, 137, 13, 191, 230, 66, 104, 65, 153, 45, 15, 176, 84, 187, 22], L._InvSbox = [82, 9, 106, 213, 48, 54, 165, 56, 191, 64, 163, 158, 129, 243, 215, 251, 124, 227, 57, 130, 155, 47, 255, 135, 52, 142, 67, 68, 196, 222, 233, 203, 84, 123, 148, 50, 166, 194, 35, 61, 238, 76, 149, 11, 66, 250, 195, 78, 8, 46, 161, 102, 40, 217, 36, 178, 118, 91, 162, 73, 109, 139, 209, 37, 114, 248, 246, 100, 134, 104, 152, 22, 212, 164, 92, 204, 93, 101, 182, 146, 108, 112, 72, 80, 253, 237, 185, 218, 94, 21, 70, 87, 167, 141, 157, 132, 144, 216, 171, 0, 140, 188, 211, 10, 247, 228, 88, 5, 184, 179, 69, 6, 208, 44, 30, 143, 202, 63, 15, 2, 193, 175, 189, 3, 1, 19, 138, 107, 58, 145, 17, 65, 79, 103, 220, 234, 151, 242, 207, 206, 240, 180, 230, 115, 150, 172, 116, 34, 231, 173, 53, 133, 226, 249, 55, 232, 28, 117, 223, 110, 71, 241, 26, 113, 29, 41, 197, 137, 111, 183, 98, 14, 170, 24, 190, 27, 252, 86, 62, 75, 198, 210, 121, 32, 154, 219, 192, 254, 120, 205, 90, 244, 31, 221, 168, 51, 136, 7, 199, 49, 177, 18, 16, 89, 39, 128, 236, 95, 96, 81, 127, 169, 25, 181, 74, 13, 45, 229, 122, 159, 147, 201, 156, 239, 160, 224, 59, 77, 174, 42, 245, 176, 200, 235, 187, 60, 131, 83, 153, 97, 23, 43, 4, 126, 186, 119, 214, 38, 225, 105, 20, 99, 85, 33, 12, 125], L._Xtime2Sbox = [198, 248, 238, 246, 255, 214, 222, 145, 96, 2, 206, 86, 231, 181, 77, 236, 143, 31, 137, 250, 239, 178, 142, 251, 65, 179, 95, 69, 35, 83, 228, 155, 117, 225, 61, 76, 108, 126, 245, 131, 104, 81, 209, 249, 226, 171, 98, 42, 8, 149, 70, 157, 48, 55, 10, 47, 14, 36, 27, 223, 205, 78, 127, 234, 18, 29, 88, 52, 54, 220, 180, 91, 164, 118, 183, 125, 82, 221, 94, 19, 166, 185, 0, 193, 64, 227, 121, 182, 212, 141, 103, 114, 148, 152, 176, 133, 187, 197, 79, 237, 134, 154, 102, 17, 138, 233, 4, 254, 160, 120, 37, 75, 162, 93, 128, 5, 63, 33, 112, 241, 99, 119, 175, 66, 32, 229, 253, 191, 129, 24, 38, 195, 190, 53, 136, 46, 147, 85, 252, 122, 200, 186, 50, 230, 192, 25, 158, 163, 68, 84, 59, 11, 140, 199, 107, 40, 167, 188, 22, 173, 219, 100, 116, 20, 146, 12, 72, 184, 159, 189, 67, 196, 57, 49, 211, 242, 213, 139, 110, 218, 1, 177, 156, 73, 216, 172, 243, 207, 202, 244, 71, 16, 111, 240, 74, 92, 56, 87, 115, 151, 203, 161, 232, 62, 150, 97, 13, 15, 224, 124, 113, 204, 144, 6, 247, 28, 194, 106, 174, 105, 23, 153, 58, 39, 217, 235, 43, 34, 210, 169, 7, 51, 45, 60, 21, 201, 135, 170, 80, 165, 3, 89, 9, 26, 101, 215, 132, 208, 130, 41, 90, 30, 123, 168, 109, 44], L._Xtime3Sbox = [165, 132, 153, 141, 13, 189, 177, 84, 80, 3, 169, 125, 25, 98, 230, 154, 69, 157, 64, 135, 21, 235, 201, 11, 236, 103, 253, 234, 191, 247, 150, 91, 194, 28, 174, 106, 90, 65, 2, 79, 92, 244, 52, 8, 147, 115, 83, 63, 12, 82, 101, 94, 40, 161, 15, 181, 9, 54, 155, 61, 38, 105, 205, 159, 27, 158, 116, 46, 45, 178, 238, 251, 246, 77, 97, 206, 123, 62, 113, 151, 245, 104, 0, 44, 96, 31, 200, 237, 190, 70, 217, 75, 222, 212, 232, 74, 107, 42, 229, 22, 197, 215, 85, 148, 207, 16, 6, 129, 240, 68, 186, 227, 243, 254, 192, 138, 173, 188, 72, 4, 223, 193, 117, 99, 48, 26, 14, 109, 76, 20, 53, 47, 225, 162, 204, 57, 87, 242, 130, 71, 172, 231, 43, 149, 160, 152, 209, 127, 102, 126, 171, 131, 202, 41, 211, 60, 121, 226, 29, 118, 59, 86, 78, 30, 219, 10, 108, 228, 93, 110, 239, 166, 168, 164, 55, 139, 50, 67, 89, 183, 140, 100, 210, 224, 180, 250, 7, 37, 175, 142, 233, 24, 213, 136, 111, 114, 36, 241, 199, 81, 35, 124, 156, 33, 221, 220, 134, 133, 144, 66, 196, 170, 216, 5, 1, 18, 163, 95, 249, 208, 145, 88, 39, 185, 56, 19, 179, 51, 187, 112, 137, 167, 182, 34, 146, 32, 73, 255, 120, 122, 143, 248, 128, 23, 218, 49, 198, 184, 195, 176, 119, 17, 203, 252, 214, 58], L._Xtime2 = [0, 2, 4, 6, 8, 10, 12, 14, 16, 18, 20, 22, 24, 26, 28, 30, 32, 34, 36, 38, 40, 42, 44, 46, 48, 50, 52, 54, 56, 58, 60, 62, 64, 66, 68, 70, 72, 74, 76, 78, 80, 82, 84, 86, 88, 90, 92, 94, 96, 98, 100, 102, 104, 106, 108, 110, 112, 114, 116, 118, 120, 122, 124, 126, 128, 130, 132, 134, 136, 138, 140, 142, 144, 146, 148, 150, 152, 154, 156, 158, 160, 162, 164, 166, 168, 170, 172, 174, 176, 178, 180, 182, 184, 186, 188, 190, 192, 194, 196, 198, 200, 202, 204, 206, 208, 210, 212, 214, 216, 218, 220, 222, 224, 226, 228, 230, 232, 234, 236, 238, 240, 242, 244, 246, 248, 250, 252, 254, 27, 25, 31, 29, 19, 17, 23, 21, 11, 9, 15, 13, 3, 1, 7, 5, 59, 57, 63, 61, 51, 49, 55, 53, 43, 41, 47, 45, 35, 33, 39, 37, 91, 89, 95, 93, 83, 81, 87, 85, 75, 73, 79, 77, 67, 65, 71, 69, 123, 121, 127, 125, 115, 113, 119, 117, 107, 105, 111, 109, 99, 97, 103, 101, 155, 153, 159, 157, 147, 145, 151, 149, 139, 137, 143, 141, 131, 129, 135, 133, 187, 185, 191, 189, 179, 177, 183, 181, 171, 169, 175, 173, 163, 161, 167, 165, 219, 217, 223, 221, 211, 209, 215, 213, 203, 201, 207, 205, 195, 193, 199, 197, 251, 249, 255, 253, 243, 241, 247, 245, 235, 233, 239, 237, 227, 225, 231, 229], L._Xtime9 = [0, 9, 18, 27, 36, 45, 54, 63, 72, 65, 90, 83, 108, 101, 126, 119, 144, 153, 130, 139, 180, 189, 166, 175, 216, 209, 202, 195, 252, 245, 238, 231, 59, 50, 41, 32, 31, 22, 13, 4, 115, 122, 97, 104, 87, 94, 69, 76, 171, 162, 185, 176, 143, 134, 157, 148, 227, 234, 241, 248, 199, 206, 213, 220, 118, 127, 100, 109, 82, 91, 64, 73, 62, 55, 44, 37, 26, 19, 8, 1, 230, 239, 244, 253, 194, 203, 208, 217, 174, 167, 188, 181, 138, 131, 152, 145, 77, 68, 95, 86, 105, 96, 123, 114, 5, 12, 23, 30, 33, 40, 51, 58, 221, 212, 207, 198, 249, 240, 235, 226, 149, 156, 135, 142, 177, 184, 163, 170, 236, 229, 254, 247, 200, 193, 218, 211, 164, 173, 182, 191, 128, 137, 146, 155, 124, 117, 110, 103, 88, 81, 74, 67, 52, 61, 38, 47, 16, 25, 2, 11, 215, 222, 197, 204, 243, 250, 225, 232, 159, 150, 141, 132, 187, 178, 169, 160, 71, 78, 85, 92, 99, 106, 113, 120, 15, 6, 29, 20, 43, 34, 57, 48, 154, 147, 136, 129, 190, 183, 172, 165, 210, 219, 192, 201, 246, 255, 228, 237, 10, 3, 24, 17, 46, 39, 60, 53, 66, 75, 80, 89, 102, 111, 116, 125, 161, 168, 179, 186, 133, 140, 151, 158, 233, 224, 251, 242, 205, 196, 223, 214, 49, 56, 35, 42, 21, 28, 7, 14, 121, 112, 107, 98, 93, 84, 79, 70], L._XtimeB = [0, 11, 22, 29, 44, 39, 58, 49, 88, 83, 78, 69, 116, 127, 98, 105, 176, 187, 166, 173, 156, 151, 138, 129, 232, 227, 254, 245, 196, 207, 210, 217, 123, 112, 109, 102, 87, 92, 65, 74, 35, 40, 53, 62, 15, 4, 25, 18, 203, 192, 221, 214, 231, 236, 241, 250, 147, 152, 133, 142, 191, 180, 169, 162, 246, 253, 224, 235, 218, 209, 204, 199, 174, 165, 184, 179, 130, 137, 148, 159, 70, 77, 80, 91, 106, 97, 124, 119, 30, 21, 8, 3, 50, 57, 36, 47, 141, 134, 155, 144, 161, 170, 183, 188, 213, 222, 195, 200, 249, 242, 239, 228, 61, 54, 43, 32, 17, 26, 7, 12, 101, 110, 115, 120, 73, 66, 95, 84, 247, 252, 225, 234, 219, 208, 205, 198, 175, 164, 185, 178, 131, 136, 149, 158, 71, 76, 81, 90, 107, 96, 125, 118, 31, 20, 9, 2, 51, 56, 37, 46, 140, 135, 154, 145, 160, 171, 182, 189, 212, 223, 194, 201, 248, 243, 238, 229, 60, 55, 42, 33, 16, 27, 6, 13, 100, 111, 114, 121, 72, 67, 94, 85, 1, 10, 23, 28, 45, 38, 59, 48, 89, 82, 79, 68, 117, 126, 99, 104, 177, 186, 167, 172, 157, 150, 139, 128, 233, 226, 255, 244, 197, 206, 211, 216, 122, 113, 108, 103, 86, 93, 64, 75, 34, 41, 52, 63, 14, 5, 24, 19, 202, 193, 220, 215, 230, 237, 240, 251, 146, 153, 132, 143, 190, 181, 168, 163], L._XtimeD = [0, 13, 26, 23, 52, 57, 46, 35, 104, 101, 114, 127, 92, 81, 70, 75, 208, 221, 202, 199, 228, 233, 254, 243, 184, 181, 162, 175, 140, 129, 150, 155, 187, 182, 161, 172, 143, 130, 149, 152, 211, 222, 201, 196, 231, 234, 253, 240, 107, 102, 113, 124, 95, 82, 69, 72, 3, 14, 25, 20, 55, 58, 45, 32, 109, 96, 119, 122, 89, 84, 67, 78, 5, 8, 31, 18, 49, 60, 43, 38, 189, 176, 167, 170, 137, 132, 147, 158, 213, 216, 207, 194, 225, 236, 251, 246, 214, 219, 204, 193, 226, 239, 248, 245, 190, 179, 164, 169, 138, 135, 144, 157, 6, 11, 28, 17, 50, 63, 40, 37, 110, 99, 116, 121, 90, 87, 64, 77, 218, 215, 192, 205, 238, 227, 244, 249, 178, 191, 168, 165, 134, 139, 156, 145, 10, 7, 16, 29, 62, 51, 36, 41, 98, 111, 120, 117, 86, 91, 76, 65, 97, 108, 123, 118, 85, 88, 79, 66, 9, 4, 19, 30, 61, 48, 39, 42, 177, 188, 171, 166, 133, 136, 159, 146, 217, 212, 195, 206, 237, 224, 247, 250, 183, 186, 173, 160, 131, 142, 153, 148, 223, 210, 197, 200, 235, 230, 241, 252, 103, 106, 125, 112, 83, 94, 73, 68, 15, 2, 21, 24, 59, 54, 33, 44, 12, 1, 22, 27, 56, 53, 34, 47, 100, 105, 126, 115, 80, 93, 74, 71, 220, 209, 198, 203, 232, 229, 242, 255, 180, 185, 174, 163, 128, 141, 154, 151], L._XtimeE = [0, 14, 28, 18, 56, 54, 36, 42, 112, 126, 108, 98, 72, 70, 84, 90, 224, 238, 252, 242, 216, 214, 196, 202, 144, 158, 140, 130, 168, 166, 180, 186, 219, 213, 199, 201, 227, 237, 255, 241, 171, 165, 183, 185, 147, 157, 143, 129, 59, 53, 39, 41, 3, 13, 31, 17, 75, 69, 87, 89, 115, 125, 111, 97, 173, 163, 177, 191, 149, 155, 137, 135, 221, 211, 193, 207, 229, 235, 249, 247, 77, 67, 81, 95, 117, 123, 105, 103, 61, 51, 33, 47, 5, 11, 25, 23, 118, 120, 106, 100, 78, 64, 82, 92, 6, 8, 26, 20, 62, 48, 34, 44, 150, 152, 138, 132, 174, 160, 178, 188, 230, 232, 250, 244, 222, 208, 194, 204, 65, 79, 93, 83, 121, 119, 101, 107, 49, 63, 45, 35, 9, 7, 21, 27, 161, 175, 189, 179, 153, 151, 133, 139, 209, 223, 205, 195, 233, 231, 245, 251, 154, 148, 134, 136, 162, 172, 190, 176, 234, 228, 246, 248, 210, 220, 206, 192, 122, 116, 102, 104, 66, 76, 94, 80, 10, 4, 22, 24, 50, 60, 46, 32, 236, 226, 240, 254, 212, 218, 200, 198, 156, 146, 128, 142, 164, 170, 184, 182, 12, 2, 16, 30, 52, 58, 40, 38, 124, 114, 96, 110, 68, 74, 88, 86, 55, 57, 43, 37, 15, 1, 19, 29, 71, 73, 91, 85, 127, 113, 99, 109, 215, 217, 203, 197, 239, 225, 243, 253, 167, 169, 187, 181, 159, 145, 131, 141], L._Rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];
        }, 552: () => { }, 528: () => { }, 527: () => { }
    }, i = {};
    function s(e) {
        var r = i[e];
        if (void 0 !== r) return r.exports;
        var o = i[e] = { id: e, loaded: false, exports: {} };
        return t[e].call(o.exports, o, o.exports, s), o.loaded = true, o.exports;
    }
    s.m = t, e = [], s.O = (t, i, r, o) => {
        if (!i) {
            var n = Infinity;
            for (c = 0; c < e.length; c++) {
                i = e[c][0], r = e[c][1], o = e[c][2];
                for (var a = true, h = 0; h < i.length; h++) (false & o || n >= o) && Object.keys(s.O).every(e => s.O[e](i[h])) ? i.splice(h--, 1) : (a = false, o < n && (n = o));
                if (a) {
                    e.splice(c--, 1);
                    var l = r();
                    void 0 !== l && (t = l);
                }
            }
            return t;
        }
        o = o || 0;
        for (var c = e.length; c > 0 && e[c - 1][2] > o; c--) e[c] = e[c - 1];
        e[c] = [i, r, o];
    }, s.n = e => {
        var t = e && e.__esModule ? () => e.default : () => e;
        return s.d(t, { a: t }), t;
    }, s.d = (e, t) => {
        for (var i in t) s.o(t, i) && !s.o(e, i) && Object.defineProperty(e, i, { enumerable: true, get: t[i] });
    }, s.g = function () {
        if ("object" == typeof globalThis) return globalThis;
        try {
            return this || new Function("return this")();
        } catch (e) {
            if ("object" == typeof window) return window;
        }
    }(), s.hmd = e => ((e = Object.create(e)).children || (e.children = []), Object.defineProperty(e, "exports", {
        enumerable: true, set: () => {
            throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: " + e.id);
        }
    }), e), s.o = (e, t) => Object.prototype.hasOwnProperty.call(e, t), s.r = e => {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: true });
    }, s.nmd = e => (e.paths = [], e.children || (e.children = []), e), (() => {
        var e = { 826: 0 };
        s.O.j = t => 0 === e[t];
        var t = (t, i) => {
            var r, o, n = i[0], a = i[1], h = i[2], l = 0;
            if (n.some(t => 0 !== e[t])) {
                for (r in a) s.o(a, r) && (s.m[r] = a[r]);
                if (h) var c = h(s);
            }
            for (t && t(i); l < n.length; l++) o = n[l], s.o(e, o) && e[o] && e[o][0](), e[o] = 0;
            return s.O(c);
        }, i = (self || this).webpackChunkhappy_wheels = (self || this).webpackChunkhappy_wheels || [];
        i.forEach(t.bind(null, 0)), i.push = t.bind(null, i.push.bind(i));
    })();
    var o = s.O(void 0, [697], () => s(558));
    o = s.O(o);
})();
